"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("axios")),r=e(require("lodash.get")),n=e(require("js-cookie"));function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var c=function(){function e(){var e=this;this.get=function(t,r,n){return new Promise((function(o,c){e.axios||c("Couldn't create service"),e.axios.get(t,i({params:r},n)).then((function(e){o(e)})).catch((function(e){c(e)}))}))},this.getOne=function(t,r,n){return new Promise((function(i,o){e.axios||o(new Error("Couldn't create service")),e.axios.get(t+"/"+r,n).then((function(e){i(e)})).catch((function(e){o(e)}))}))},this.post=function(t,n,o){return new Promise((function(c,s){e.axios||s(new Error("Couldn't create service")),e.axios.post(t,n,i({},o)).then((function(e){c(e)})).catch((function(e){401===r(e,"response.status")&&s(e),s(e)}))}))},this.put=function(t,r,n){return new Promise((function(o,c){e.axios||c(new Error("Couldn't create service")),e.axios.put(t,r,i({},n)).then((function(e){o(e)})).catch((function(e){c(e)}))}))},this.patch=function(t,r,n){return new Promise((function(o,c){e.axios||c(new Error("Couldn't create service")),e.axios.patch(t,r,i({},n)).then((function(e){o(e)})).catch((function(e){c(e)}))}))},this.delete=function(t,r){return new Promise((function(n,o){e.axios||o(new Error("Couldn't create service")),e.axios.delete(t,i({},r)).then((function(e){n(e)})).catch((function(e){o(e)}))}))}}return e.prototype.createService=function(e,r){this.API_URL=r;var n={};e&&(n["X-BuilderX-Auth-Token"]=e,this.authToken=e);try{this.axios=t.create({baseURL:this.API_URL,headers:n})}catch(e){throw e}},e}(),s=function(){function e(e,t,r){this.eventListenersMap=new Map,this.url=e,this.config=t,this.headers=r}e.connect=function(r,n,i){var o;return e.ioInstance?o=e.ioInstance:(o=new e(r,n,i),t.post(r,n,i).then((function(e){o.emit("connect",e),o.poll()})).catch((function(e){o.emit("connection-failed",e),o.poll()}))),o};var r=e.prototype;return r.poll=function(){var e=this;t.post(this.url,this.config,this.headers).then((function(t){e.emit("poll",t),setTimeout((function(){e.poll()}),1e4)})).catch((function(){e.emit("connection-failed"),setTimeout((function(){e.poll()}),2e4)}))},r.emit=function(e,t){var r=this.eventListenersMap.get(e);r&&r.forEach((function(e){e&&e(t)}))},r.on=function(e,t){var r=this.eventListenersMap.get(e);r?r.push(t):this.eventListenersMap.set(e,[t])},e}(),u=function(e){return{data:e.data?e.data:i({},e),message:e.message?e.message:"Successfull",status:e.status,headers:e.headers?e.headers:{}}},a=function(e,t,n){var i=r(e,"response.status");i&&401===i?t(!1):n(e)},f=function(e){return{data:e.data?e.data.data?e.data.data:e.data:i({},e),message:e.data.message?e.data.message:"Successfull",status:e.status,headers:e.headers?e.headers:{}}},h={env:"local",baseUrl:"https://pre-cloud.builderx.io/api/",accessToken:n.get("access-token"),googleFontsUrl:"https://www.googleapis.com/webfonts/v1/webfonts?key=",localFontsUrl:"http://localhost:8979"},m=function(){function e(){var e=this,r=this,n=this,m=this,v=this,l=this,P=this,p=this,d=this,y=this,j=this,g=this,S=this,w=this,b=this,x=this,I=this,k=this;this.apiService=new c,this.config=i({},h),this.project={get:function(t,r){try{return Promise.resolve(new Promise((function(n,i){try{return Promise.resolve(o((function(){var i=function(){if(e.apiService)return Promise.resolve(e.apiService.get("projects/"+t,{connectionId:r})).then((function(e){var t=u(e);n(t)}))}();if(i&&i.then)return i.then((function(){}))}),(function(e){a(e,n,i)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},post:function(e){try{return Promise.resolve(new Promise((function(t,n){try{return Promise.resolve(o((function(){var n=function(){if(r.apiService)return Promise.resolve(r.apiService.post("projects",{name:e},{headers:{"content-type":"application/json"}})).then((function(e){var r=u(e);t(r)}))}();if(n&&n.then)return n.then((function(){}))}),(function(e){a(e,t,n)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},update:function(e,t,r){try{return Promise.resolve(new Promise((function(i,c){try{return Promise.resolve(o((function(){var o=function(){var o;if(n.apiService)return Promise.resolve(n.apiService.put("projects/"+e,(o={},o[t]=r,o))).then((function(e){var t=u(e);i(t)}))}();if(o&&o.then)return o.then((function(){}))}),(function(e){a(e,i,c)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},clone:function(e,t){try{return Promise.resolve(new Promise((function(r,n){try{return Promise.resolve(o((function(){var n=function(){if(m.apiService)return Promise.resolve(m.apiService.get("/project-clone/"+e,t)).then((function(e){var t=u(e);r(t)}))}();if(n&&n.then)return n.then((function(){}))}),(function(e){a(e,r,n)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},shareability:function(e,t,r,n,i){try{return Promise.resolve(new Promise((function(c,s){try{return Promise.resolve(o((function(){var o=function(){if(v.apiService)return Promise.resolve(v.apiService.post("projects-shareability",{project_id:e,type:t,access:r,email:n,mode:i})).then((function(e){var t=f(e);c(t)}))}();if(o&&o.then)return o.then((function(){}))}),(function(e){a(e,c,s)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}}},this.files={get:function(e,t){void 0===e&&(e="");try{return Promise.resolve(new Promise((function(r,n){try{return Promise.resolve(o((function(){var n=function(){if(l.apiService)return Promise.resolve(l.apiService.get("files",{name:e,projectId:t})).then((function(e){var t=f(e);r(t)}))}();if(n&&n.then)return n.then((function(){}))}),(function(e){a(e,r,n)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},delete:function(e,t){void 0===t&&(t="");try{return Promise.resolve(new Promise((function(r,n){try{return Promise.resolve(o((function(){var n=function(){if(P.apiService)return Promise.resolve(P.apiService.delete("files/"+e+"?connectionId="+t)).then((function(e){r(e)}))}();if(n&&n.then)return n.then((function(){}))}),(function(e){a(e,r,n)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},patch:function(e){try{return Promise.resolve(new Promise((function(t,r){try{return Promise.resolve(o((function(){var r=function(){if(p.apiService)return Promise.resolve(p.apiService.patch("files/"+e,{deleted_at:"1"})).then((function(e){t(e)}))}();if(r&&r.then)return r.then((function(){}))}),(function(e){a(e,t,r)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},exists:function(e,t){try{return Promise.resolve(new Promise((function(r,n){try{return Promise.resolve(o((function(){var n=function(){if(d.apiService)return Promise.resolve(d.apiService.get("get-file-content/"+e+"?fileName="+t)).then((function(e){r(e)}))}();if(n&&n.then)return n.then((function(){}))}),(function(e){a(e,r,n)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}}},this.projectLog={post:function(e){try{return Promise.resolve(new Promise((function(t,r){try{return Promise.resolve(o((function(){var r=function(){if(y.apiService)return Promise.resolve(y.apiService.post("projects/log",{data:JSON.parse(e)})).then((function(e){t(e)}))}();if(r&&r.then)return r.then((function(){}))}),(function(e){a(e,t,r)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}}},this.fileContent={get:function(e){try{return Promise.resolve(new Promise((function(t,r){try{return Promise.resolve(o((function(){var r=function(){if(j.apiService)return Promise.resolve(j.apiService.get("file-content",{fileId:e})).then((function(e){t(e)}))}();if(r&&r.then)return r.then((function(){}))}),(function(e){a(e,t,r)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},post:function(e,t){try{return Promise.resolve(new Promise((function(r,n){try{return Promise.resolve(o((function(){var n=function(){if(g.apiService)return Promise.resolve(g.apiService.post("file-content",e,t)).then((function(e){var t=u(e);r(t)}))}();if(n&&n.then)return n.then((function(){}))}),(function(e){a(e,r,n)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}}},this.user={get:function(e){try{return Promise.resolve(new Promise((function(t,r){try{return Promise.resolve(o((function(){var r=function(){if(S.apiService)return Promise.resolve(S.apiService.get("users/"+e)).then((function(e){var r=u(e);t(r)}))}();if(r&&r.then)return r.then((function(){}))}),(function(e){a(e,t,r)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},patch:function(e,t,r){try{return Promise.resolve(new Promise((function(n,i){try{return Promise.resolve(o((function(){var i=function(){if(w.apiService)return Promise.resolve(w.apiService.patch("users/"+e,t,r)).then((function(e){n(e)}))}();if(i&&i.then)return i.then((function(){}))}),(function(e){a(e,n,i)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}}},this.teams={get:function(e,t){try{return Promise.resolve(new Promise((function(r,n){try{return Promise.resolve(o((function(){var n=function(){if(b.apiService)return Promise.resolve(b.apiService.get("settings/teams/json/"+e,t)).then((function(e){var t=u(e);r(t)}))}();if(n&&n.then)return n.then((function(){}))}),(function(e){a(e,r,n)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}}},this.poll={connect:function(e,t,r){return s.connect(e,t,r)}},this.raw={getBlob:function(e,r){try{return Promise.resolve(new Promise((function(n,i){try{var c=o((function(){return Promise.resolve(t.get(e,r)).then((function(e){n(e)}))}),(function(e){a(e,n,i)}));return Promise.resolve(c&&c.then?c.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},checkPort:function(e){try{return Promise.resolve(new Promise((function(r,n){try{var i=o((function(){return Promise.resolve(t.get("http://localhost:"+e+"/checkPort")).then((function(e){r(e)}))}),(function(e){a(e,r,n)}));return Promise.resolve(i&&i.then?i.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}}},this.assets={getFont:function(e,r,n){try{return Promise.resolve(new Promise((function(i,c){try{var s=o((function(){return Promise.resolve(t.get(e+"getFont?id="+r,n)).then((function(e){i(e)}))}),(function(e){a(e,i,c)}));return Promise.resolve(s&&s.then?s.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},getCloudImage:function(e,r){try{return Promise.resolve(new Promise((function(n,i){try{var c=o((function(){return Promise.resolve(t.get(e,r)).then((function(e){n(e)}))}),(function(e){a(e,n,i)}));return Promise.resolve(c&&c.then?c.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},getGoogleFonts:function(e){try{return Promise.resolve(new Promise((function(r,n){try{var i=o((function(){return Promise.resolve(t.get(x.config.googleFontsUrl+e)).then((function(e){r(e)}))}),(function(e){a(e,r,n)}));return Promise.resolve(i&&i.then?i.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},fetchLocalFonts:function(){try{return Promise.resolve(new Promise((function(e,r){try{var n=o((function(){return Promise.resolve(t.get(I.config.localFontsUrl||h.localFontsUrl)).then((function(t){e(t)}))}),(function(t){a(t,e,r)}));return Promise.resolve(n&&n.then?n.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},uploadAsset:function(e,t,r,n,i){void 0===n&&(n="");try{return Promise.resolve(new Promise((function(o,c){try{try{var s=t,u=new FormData;u.append("projectId",e),u.append("name",s),u.append("connectionId",n),u.append("content",r),u.append("contentType",i),k.fileContent.post(u,{headers:{"content-type":"multipart/form-data"}}).then((function(e){o(e.data.fileId)})).catch((function(e){console.error(e,t,"writeFile failed"),c(e)}))}catch(e){c(e)}return Promise.resolve()}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}}}}var r=e.prototype;return r.init=function(e){this.config=i({},this.config,{},e),this.apiService.createService(this.config.accessToken,this.config.baseUrl||h.baseUrl)},r.auth=function(){try{var e=this;return Promise.resolve(new Promise((function(t,r){try{return Promise.resolve(o((function(){var n=function(){if(e.apiService)return Promise.resolve(e.apiService.get("get-my-id")).then((function(e){if(e.data.id){var n=u(e);t(n)}else r("Not Authenticated")}))}();if(n&&n.then)return n.then((function(){}))}),(function(e){r(e)})))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},e}(),v=new m;exports.ApiSdk=m,exports.apiSdk=v;
//# sourceMappingURL=api-sdk.cjs.production.min.js.map
