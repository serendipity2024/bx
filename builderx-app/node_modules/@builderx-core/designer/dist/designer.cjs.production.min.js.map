{"version":3,"file":"designer.cjs.production.min.js","sources":["../src/components/renderer/RootRenderer.tsx","../src/components/ScrollContainer.tsx","../src/components/ZoomContainer.tsx","../src/components/DesignerReact.tsx","../src/models/serializable/Serializable.ts","../src/models/base-model/model.ts","../src/models/utils.ts","../src/events/EventCallableRegsitry.ts","../src/models/KeyValueContainer.tsx","../src/models/Style.tsx","../src/models/Props.tsx","../src/models/Layout.tsx","../src/events/index.ts","../src/events/SetLayoutEvent.ts","../src/events/RemoveChildEvent.ts","../src/models/GlobalLayerUpdateController.ts","../src/models/Layer.tsx","../src/models/MiddlewareRegistry.ts","../src/models/FunctionRegistry.ts","../src/events/MouseEvent.ts","../src/events/DropEvent.ts","../src/events/HoverEvent.ts","../src/events/SetScrollEvent.ts","../src/events/SetZoomEvent.ts","../src/models/Canvas.tsx","../src/constants/index.ts","../src/models/Gradient.ts","../src/plugins/Hover/index.ts","../src/plugins/Drag/DragEvent.ts","../src/plugins/Drag/index.ts","../src/plugins/ViewRenderer/ViewRenderer.tsx","../src/plugins/ViewRenderer/ViewComponentDefinition.ts","../src/plugins/ViewRenderer/index.ts","../src/plugins/TouchablOpacityRenderer/TouchableOpacityRenderer.tsx","../src/plugins/TouchablOpacityRenderer/TouchableOpacityComponentDefinition.ts","../src/plugins/TouchablOpacityRenderer/index.ts","../src/plugins/ScrollViewRenderer/ScrollViewRenderer.tsx","../src/plugins/ScrollViewRenderer/ScrollViewComponentDefinition.ts","../src/plugins/ScrollViewRenderer/index.ts","../src/events/RenderEvent.ts","../src/plugins/TextRenderer/TextRenderer.tsx","../src/plugins/TextRenderer/TextComponentDefinition.ts","../src/plugins/TextRenderer/index.ts","../src/plugins/TextInputRenderer/TextInputRenderer.tsx","../src/plugins/TextInputRenderer/TextInputComponentDefinition.ts","../src/plugins/TextInputRenderer/index.ts","../src/plugins/ImageRenderer/ImageRenderer.tsx","../src/plugins/ImageRenderer/ImageComponentDefinition.ts","../src/plugins/ImageRenderer/index.ts","../src/plugins/PathRenderer/PathRenderer.tsx","../src/plugins/PathRenderer/PathComponentDefinition.ts","../src/plugins/PathRenderer/index.ts","../src/plugins/IconRenderer/IconMap.ts","../src/plugins/IconRenderer/IconRenderer.tsx","../src/plugins/IconRenderer/IconComponentDefinition.ts","../src/plugins/IconRenderer/index.ts","../src/plugins/SwitchRenderer/android/AndroidSwitchRenderer.tsx","../src/plugins/SwitchRenderer/iOS/IOSSwitch.tsx","../src/plugins/SwitchRenderer/iOS/IOSSwitchRenderer.tsx","../src/plugins/SwitchRenderer/SwitchRenderer.tsx","../src/plugins/SwitchRenderer/SwitchComponentDefinition.ts","../src/plugins/SwitchRenderer/index.ts","../src/plugins/ActivityIndicatorRenderer/android/AndroidActivityIndicatorRenderer.tsx","../src/plugins/ActivityIndicatorRenderer/iOS/IOSSpinner.tsx","../src/plugins/ActivityIndicatorRenderer/iOS/IOSActivityIndicatorRenderer.tsx","../src/plugins/ActivityIndicatorRenderer/ActivityIndicatorRenderer.tsx","../src/plugins/ActivityIndicatorRenderer/ActivityIndicatorComponentDefinition.ts","../src/plugins/ActivityIndicatorRenderer/index.ts","../src/plugins/EllipseRenderer/EllipseRenderer.tsx","../src/plugins/EllipseRenderer/EllipseComponentDefinition.ts","../src/plugins/EllipseRenderer/index.ts","../src/plugins/SliderRenderer/SliderStyledComponents.tsx","../src/plugins/SliderRenderer/Slider.tsx","../src/plugins/SliderRenderer/SliderRenderer.tsx","../src/plugins/SliderRenderer/SliderComponentDefinition.ts","../src/plugins/SliderRenderer/index.ts","../src/plugins/MapViewRenderer/MapViewRenderer.tsx","../src/plugins/MapViewRenderer/MapViewComponentDefinition.ts","../src/plugins/MapViewRenderer/index.ts","../src/plugins/PopoverMenu/index.tsx","../src/plugins/SnapPointsCalculator/getSiblingPoints.ts","../src/plugins/SnapPointsCalculator/getParentSnapPoints.ts","../src/plugins/SnapPointsCalculator/getGutterPoints.ts","../src/plugins/SnapPointsCalculator/snapToGrid.ts","../src/plugins/SnapPointsCalculator/snapPoint.ts","../src/plugins/SnapPointsCalculator/getSnapPoints.ts","../src/plugins/SnapPointsCalculator/index.ts","../src/plugins/ConstructionLines/index.ts","../src/plugins/ScrollMousePosition/index.ts","../src/plugins/MeasurementLines/utils/index.ts","../src/plugins/MeasurementLines/index.ts","../src/plugins/MeasurementLines/components/XLines.ts","../src/plugins/MeasurementLines/components/YLines.ts","../src/plugins/MouseRect/events/index.ts","../src/plugins/MouseRect/index.ts","../src/plugins/TextEditor/TextEditorRenderer.tsx","../src/plugins/TextEditor/index.tsx","../src/plugins/PathEditor/PathEditorRenderer.tsx","../src/plugins/PathEditor/index.tsx","../src/plugins/GradientEditor/EditorRenderer.tsx","../src/events/CommandEvent.ts","../src/plugins/GradientEditor/index.tsx","../src/plugins/NativeHtmlDrag/index.ts","../src/plugins/StageDesignerDeviceData/index.ts","../src/events/PathEvent.ts","../src/events/ArtboardEvent.ts","../src/events/TextEditorEvent.ts","../src/plugins/LayerDrag/LayerDragEvent.ts","../src/plugins/LayerDrag/index.ts","../src/plugins/GridRenderer/index.tsx","../src/events/SelectLayers.ts","../src/events/ResetResizerEvent.ts","../src/plugins/StageDesigner/index.ts","../src/plugins/LayerMouseCursor/index.ts","../src/plugins/DataStore/index.ts","../src/plugins/Tooltip/index.ts","../src/plugins/OpacityShortcut/index.ts","../src/plugins/FontResizer/FontResizerEvent.ts","../src/plugins/FontResizer/index.ts","../src/plugins/FlexDrag/index.ts","../src/plugins/RulerScale/components/Ruler.tsx","../src/plugins/RulerScale/components/HorizontalRuler.ts","../src/plugins/RulerScale/components/VerticalRuler.tsx","../src/plugins/RulerScale/RulerScaleWrapper.tsx","../src/plugins/RulerScale/index.tsx","../src/plugins/RulerLines/events/RulerLinesAddEvent.ts","../src/plugins/RulerLines/events/RulerLinesSetPositionEvent.ts","../src/plugins/RulerLines/events/RulerLinesRemoveEvent.ts","../src/plugins/RulerLines/index.ts","../src/plugins/SnapLines/drawLinesForSnap.ts","../src/plugins/SnapLines/index.ts","../src/plugins/LineDrawer/events/index.ts","../src/plugins/LineDrawer/index.ts","../src/plugins/StageDesignerPreviewMode/index.ts","../src/plugins/StageDesignerPreviewMode/iconsBase64.ts","../src/plugins/StageDesignerDrop/StageDesignerDropEvent.ts","../src/plugins/StageDesignerDrop/index.ts","../src/plugins/StageDesignerDrawComponent/events/stageDesignerDrawEvent.ts","../src/plugins/StageDesignerDrawComponent/index.tsx","../src/plugins/StageDesignerRuler/index.ts","../src/plugins/DrawComponent/events/drawEvent.ts","../src/plugins/DrawComponent/index.tsx","../src/plugins/LayerLabel/events/layerLabelEvent.ts","../src/plugins/LayerLabel/index.ts","../src/plugins/DeviceFrame/Frames/iPhoneX.tsx","../src/plugins/DeviceFrame/Frames/iPhoneXsMax.tsx","../src/plugins/DeviceFrame/index.tsx","../src/plugins/StatusBar/StatusBarComponent/StatusBars/AndroidStatusBar.tsx","../src/plugins/StatusBar/StatusBarComponent/StatusBars/IPhoneXStatusBar.tsx","../src/plugins/StatusBar/StatusBarComponent/StatusBars/IOSStatusBar.tsx","../src/plugins/StatusBar/StatusBarComponent/index.tsx","../src/plugins/StatusBar/index.tsx","../src/plugins/ResizerRenderer/ResizerRendererDragEvent/index.ts","../src/plugins/ResizerRenderer/utils.ts","../src/plugins/ResizerRenderer/index.ts","../src/plugins/UndoRedo/index.ts","../src/plugins/LayerResizer/LayerResizerEvent/index.ts","../src/plugins/LayerResizer/index.ts","../src/plugins/FloatingButton/index.ts","../src/plugins/GradientEditor/event/index.ts","../src/plugins/PlusButton/index.ts","../src/plugins/HtmlDragToWorld/index.ts","../src/events/KeyboardEvent.ts"],"sourcesContent":["import * as React from 'react';\nimport { Layer } from '../../models/Layer';\nimport { Canvas } from '../../models/Canvas';\nimport ReactDOM from 'react-dom';\nimport { isNil } from 'lodash';\n\ntype RootRendererProps = {\n  canvas: Canvas;\n  layer: Layer;\n};\nexport default class RootRenderer extends React.PureComponent<\n  RootRendererProps,\n  any\n> {\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n\n  componentDidMount() {\n    this.props.layer.on(['type'], this.onUpdate);\n  }\n  componentWillUnmount() {\n    this.props.layer.off(['type'], this.onUpdate);\n  }\n\n  render() {\n    const layer = this.props.layer;\n    const TheChosenOne = this.props.canvas.getRenderer(layer.type);\n    return (\n      <TheChosenOne\n        RootRenderer={RootRenderer}\n        layer={layer}\n        canvas={this.props.canvas}\n      />\n    );\n  }\n}\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\nimport Scrollbars from 'react-custom-scrollbars';\nimport { Canvas } from '../models/Canvas';\nimport SetScrollEvent from '../events/SetScrollEvent';\n\ntype Props = {\n  canvas: Canvas;\n  style?: any;\n  stage?: string;\n  displayMode?: string;\n};\nexport default class ScrollContainer extends React.PureComponent<Props, any> {\n  scrollDom: any;\n  scrollContainerRef: Scrollbars | null | undefined;\n  center: any;\n  zoom: any;\n  scroll: any;\n  baseState: any;\n  viewportState: any;\n\n  constructor(props: any) {\n    super(props);\n    this.zoom = props.canvas.getZoom();\n    this.scroll = props.canvas.getScroll();\n\n    const scrollFactor: any = { x: 0.5, y: 0.5 };\n    const scrollXFactor: number = scrollFactor.x;\n    const scrollYFactor: number = scrollFactor.y;\n\n    this.state = {\n      scroll: { x: scrollXFactor, y: scrollYFactor },\n    };\n  }\n\n  onUpdate = () => {\n    const viewport = this.props.canvas.getViewport();\n    this.viewportState = {\n      height: viewport.height,\n      width: viewport.width,\n    };\n\n    this.baseState = {\n      height: this.props.canvas.layout.get('height'),\n      width: this.props.canvas.layout.get('width'),\n    };\n    this.forceUpdate();\n    this.centerScrollTo();\n  };\n\n  componentDidMount() {\n    if (this.scrollContainerRef) {\n      this.scrollDom = ReactDOM.findDOMNode(this.scrollContainerRef);\n    }\n    document.addEventListener('keydown', function(e: any) {\n      if (e.keyCode === 32 && e.target === document.body) {\n        e.preventDefault();\n      }\n    });\n\n    this.setCenterPosition();\n    this.getCenterPointInCurrentViewport();\n    this.centerScrollTo();\n    this.props.canvas.addEventListener('setScroll', this.setScroll);\n    this.props.canvas.on('zoom', (e: any) => {\n      if (this.zoom !== this.props.canvas.getZoom()) {\n        this.zoom = this.props.canvas.getZoom();\n        this.centerScrollTo();\n      }\n    });\n\n    this.props.canvas.on(\n      ['viewport', 'layout', 'mouseCursorType'],\n      this.onUpdate\n    );\n    this.props.canvas.on(['moveWithGrabHandle'], this.onUpdate);\n  }\n\n  componentWillUnmount() {\n    this.props.canvas.off(\n      ['viewport', 'layout', 'mouseCursorType'],\n      this.onUpdate\n    );\n    this.props.canvas.off(['moveWithGrabHandle'], this.onUpdate);\n    this.props.canvas.removeEventListener('setScroll', this.setScroll);\n  }\n  setScroll = (scroll: SetScrollEvent) => {\n    this.state.scroll.x = scroll.scrollX;\n    this.state.scroll.y = scroll.scrollY;\n\n    const scrollX: number =\n      this.state.scroll.x *\n      (this.baseState.width * this.zoom - this.viewportState.width);\n\n    const scrollY: number =\n      this.state.scroll.y *\n      (this.baseState.height * this.zoom - this.viewportState.height);\n\n    const centerX =\n      ((scrollX as number) + this.viewportState.width / 2) /\n      (this.baseState.width * this.zoom);\n\n    const centerY =\n      ((scrollY as number) + this.viewportState.height / 2) /\n      (this.baseState.height * this.zoom);\n\n    this.center = { x: centerX, y: centerY };\n\n    this.centerScrollTo();\n  };\n\n  getScrollPositon(inputScroll?: any): any {\n    const props = this.props;\n    let scroll = inputScroll ? inputScroll : this.scroll;\n    const scrollX: number =\n      scroll.x * (this.baseState.width * this.zoom - this.viewportState.width);\n\n    const scrollY: number =\n      scroll.y *\n      (this.baseState.height * this.zoom - this.viewportState.height);\n\n    return { x: scrollX, y: scrollY };\n  }\n  getCenterPointInCurrentViewport() {\n    const props = this.props;\n    const scrollPostion = this.getScrollPositon();\n    let centerX =\n      (scrollPostion.x + this.viewportState.width / 2) /\n      (this.baseState.width * this.zoom);\n\n    let centerY =\n      (scrollPostion.y + this.viewportState.height / 2) /\n      (this.baseState.height * this.zoom);\n    this.center = { x: centerX, y: centerY };\n  }\n  setCenterPosition() {\n    this.center = {\n      x:\n        (this.state.scroll.x +\n          this.viewportState.width / (this.baseState.width * this.zoom)) /\n        2,\n      y:\n        (this.state.scroll.y +\n          this.viewportState.height / (this.baseState.height * this.zoom)) /\n        2,\n    };\n  }\n\n  centerScrollTo = (emit: boolean = true) => {\n    const centerX: number = this.center.x * (this.baseState.width * this.zoom);\n    const centerY: number = this.center.y * (this.baseState.height * this.zoom);\n\n    let scrollY = centerY - this.viewportState.height / 2;\n    let scrollX = centerX - this.viewportState.width / 2;\n\n    if (this.scrollContainerRef) {\n      this.scrollContainerRef.scrollLeft(scrollX);\n      this.scrollContainerRef.scrollTop(scrollY);\n    }\n  };\n\n  onScrollFrame = (values: any) => {\n    if (this.scrollContainerRef) {\n      if (this.viewportState.height > 0 && this.viewportState.width > 0) {\n        const x =\n          (values.scrollLeft as number) /\n          (this.baseState.width * this.zoom - this.viewportState.width);\n        const y =\n          (values.scrollTop as number) /\n          (this.baseState.height * this.zoom - this.viewportState.height);\n\n        const centerX =\n          ((values.scrollLeft as number) + this.viewportState.width / 2) /\n          (this.baseState.width * this.zoom);\n\n        const centerY =\n          ((values.scrollTop as number) + this.viewportState.height / 2) /\n          (this.baseState.height * this.zoom);\n\n        this.center = {\n          x: centerX,\n          y: centerY,\n        };\n\n        this.state.scroll.x = isNaN(x) ? 0 : x;\n        this.state.scroll.y = isNaN(y) ? 0 : y;\n        this.centerScrollTo();\n        this.props.canvas.setScroll(this.state.scroll);\n      }\n    }\n  };\n\n  moveWithGrabHandle = (event: React.MouseEvent<Scrollbars>) => {\n    if (this.props.canvas.isMouseDown && this.props.canvas.moveWithGrabHandle) {\n      // window.requestAnimationFrame(() => {\n      if (this.scrollContainerRef) {\n        const deltaX = event.nativeEvent.movementX,\n          deltaY = event.nativeEvent.movementY,\n          currentScrollX = this.scrollContainerRef.getScrollLeft(),\n          currentScrollY = this.scrollContainerRef.getScrollTop();\n        this.scrollContainerRef.scrollLeft(currentScrollX - deltaX);\n        this.scrollContainerRef.scrollTop(currentScrollY - deltaY);\n        event.stopPropagation();\n      }\n      // });\n    }\n  };\n\n  render() {\n    const spaceKey = this.props.canvas.moveWithGrabHandle;\n\n    this.baseState = {\n      height: this.props.canvas.layout.get('height'),\n      width: this.props.canvas.layout.get('width'),\n    };\n    const viewport = this.props.canvas.getViewport();\n    this.viewportState = {\n      height: viewport.height,\n      width: viewport.width,\n    };\n    return (\n      <Scrollbars\n        ref={c => {\n          this.scrollContainerRef = c;\n        }}\n        autoHide\n        onScrollFrame={this.onScrollFrame}\n        style={{\n          ...this.props.style,\n          width: this.viewportState.width,\n          height: this.viewportState.height,\n          cursor: this.props.canvas.mouseCursorType\n            ? this.props.canvas.mouseCursorType\n            : 'initial',\n          overflow: 'scroll',\n        }}\n        onMouseDown={e => {\n          // @ts-ignore\n          if (e.button !== 2 && e.which !== 3) {\n            // this.mouseDown = true;\n            this.props.canvas.setMouseDown(true);\n          }\n        }}\n        onMouseUp={() => {\n          // this.mouseDown = false;\n          this.props.canvas.setMouseDown(false);\n        }}\n        onMouseLeave={() => {\n          // this.mouseDown = false;\n          this.props.canvas.setMouseDown(false);\n        }}\n        onMouseMove={this.moveWithGrabHandle}\n        className=\"scrollcontainer\"\n      >\n        {React.Children.map(this.props.children, (child: any) => {\n          if (child) {\n            return React.cloneElement(child, {\n              ...child.props,\n              style: {\n                ...child.props.style,\n                ...(spaceKey && this.props.canvas.isMouseDown\n                  ? { pointerEvents: 'none' }\n                  : {}),\n              },\n            });\n          }\n          return null;\n        })}\n      </Scrollbars>\n    );\n  }\n}\n","import * as React from 'react';\nimport { Canvas } from '../models/Canvas';\nimport SetZoomEvent from 'events/SetZoomEvent';\n\ntype Props = {\n  style?: any;\n  canvas: Canvas;\n  initialScroll: any;\n};\nexport default class ZoomContainer extends React.Component<Props, any> {\n  static defaultProps = { initialScroll: { x: 0, y: 0 } };\n  containerRef: any;\n  mouseDown: any;\n  center: any;\n  zoom: any;\n  constructor(props: any) {\n    super(props);\n    this.zoom = props.canvas.getZoom();\n    const scrollFactor: any =\n      props.initialScroll === undefined\n        ? ZoomContainer.defaultProps.initialScroll\n        : props.initialScroll;\n\n    const scrollXFactor: number = scrollFactor.x;\n    const scrollYFactor: number = scrollFactor.y;\n\n    this.state = {\n      scroll: { x: scrollXFactor, y: scrollYFactor },\n    };\n  }\n  componentDidMount() {\n    document.addEventListener('keydown', function(e: any) {\n      if (e.keyCode === 32 && e.target === document.body) {\n        e.preventDefault();\n      }\n    });\n\n    this.props.canvas.addEventListener('setZoom', this.onUpdateZoom);\n    this.props.canvas.on('children', this.onUpdate);\n  }\n\n  onUpdateZoom = (event: any) => {\n    this.zoom = event.zoom;\n    this.forceUpdate();\n  };\n\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  componentDidUpdate() {\n    this.props.canvas.setZoom(this.zoom);\n  }\n\n  componentWillMount() {\n    this.props.canvas.removeEventListener('setZoom', this.onUpdateZoom);\n    // this.props.canvas.off('children', this.onUpdate);\n  }\n\n  getSceneStyle(): any {\n    var style: any = {\n      position: 'absolute',\n    };\n    style.transform = `scale(${this.zoom})`;\n    // style.zoom = this.zoom;\n    style.transformOrigin = '0 0';\n    return style;\n  }\n\n  render() {\n    let { initialScroll, ...props } = this.props;\n    // console.log(this.zoom, '#####');\n    return (\n      <div\n        ref={(c: any) => {\n          this.containerRef = c;\n        }}\n        onClick={e => {}}\n        style={this.getSceneStyle()}\n        className=\"zoomContainer\"\n      >\n        {React.Children.map(this.props.children, (child: any) => {\n          if (child) {\n            return React.cloneElement(child, {\n              ...child.props,\n              style: {\n                ...child.props.style,\n              },\n            });\n          }\n          return null;\n        })}\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport RootRenderer from './renderer/RootRenderer';\nimport ScrollContainer from './ScrollContainer';\nimport ZoomContainer from './ZoomContainer';\nimport { Canvas } from '../models/Canvas';\nclass CanvasRenderer extends React.PureComponent<{ canvas: Canvas }, any> {\n  onUpdate = (keys: any) => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.canvas.on(['zoom', 'viewport', 'layout'], this.onUpdate);\n  }\n  componentWillUnmount() {\n    this.props.canvas.off(['zoom', 'viewport', 'layout'], this.onUpdate);\n  }\n\n  render() {\n    const baseHeight = this.props.canvas.layout.get('height');\n    const baseWidth = this.props.canvas.layout.get('width');\n\n    return (\n      <div\n        style={{\n          position: 'relative',\n          width: baseWidth,\n          height: baseHeight,\n          backgroundColor: this.props.canvas.style.get('backgroundColor'),\n        }}\n      >\n        {this.props.canvas.children.map((child: any, index: any) => (\n          <RootRenderer layer={child} key={index} canvas={this.props.canvas} />\n        ))}\n      </div>\n    );\n  }\n}\nexport class DesignerReact extends React.PureComponent<\n  { canvas: Canvas },\n  any\n> {\n  renderCompiledDom: any;\n  worldStackRef: any;\n  viewportStackRef: any;\n  thisNode: HTMLDivElement | null = null;\n\n  onUpdate = (keys: any) => {\n    this.forceUpdate();\n  };\n  showConstructionLines = () => {\n    let canvasDOMElement = document.createElement('canvas');\n    canvasDOMElement.setAttribute('height', '2000px');\n    canvasDOMElement.setAttribute('width', '2000px');\n    canvasDOMElement.setAttribute('class', 'canvas-element');\n    canvasDOMElement.style.position = 'absolute';\n    canvasDOMElement.style.top = '0px';\n    canvasDOMElement.style.left = '0px';\n    canvasDOMElement.style.opacity = '1';\n    canvasDOMElement.style.pointerEvents = 'none';\n    if (this.renderCompiledDom) {\n      let pane = ReactDOM.findDOMNode(this.renderCompiledDom);\n      const context = canvasDOMElement.getContext('2d');\n      const collisionScope = this.props.canvas.collisionScope;\n      if (pane && context && collisionScope) {\n        context.strokeStyle = '#000';\n        context.beginPath();\n        collisionScope.drawBVH(context);\n        context.stroke();\n        pane.appendChild(canvasDOMElement);\n      }\n    }\n  };\n  renderDOMStack = () => {\n    if (this.worldStackRef) {\n      while (this.worldStackRef.firstChild) {\n        this.worldStackRef.removeChild(this.worldStackRef.firstChild);\n      }\n\n      this.props.canvas.stackWorldDOM.forEach(element => {\n        this.worldStackRef.appendChild(element);\n      });\n    }\n    if (this.viewportStackRef) {\n      while (this.viewportStackRef.firstChild) {\n        this.viewportStackRef.removeChild(this.viewportStackRef.firstChild);\n      }\n\n      this.props.canvas.stackViewportDOM.forEach(element => {\n        this.viewportStackRef.appendChild(element);\n      });\n    }\n  };\n  componentDidMount() {\n    this.renderDOMStack();\n    this.props.canvas.on(['zoom', 'viewport', 'layout'], this.onUpdate);\n\n    this.props.canvas.on(\n      ['stackWorldDOM', 'stackViewportDOM'],\n      this.renderDOMStack\n    );\n  }\n\n  componentWillUnmount() {\n    this.props.canvas.off(['zoom', 'viewport', 'layout'], this.onUpdate);\n    this.props.canvas.off(\n      ['stackWorldDOM', 'stackViewportDOM'],\n      this.renderDOMStack\n    );\n  }\n\n  onMouseDown = (e: React.MouseEvent) => {\n    if (this.thisNode && this.thisNode.ownerDocument) {\n      this.thisNode.ownerDocument.addEventListener(\n        'mousemove',\n        this.onMouseMove\n      );\n      this.thisNode.ownerDocument.addEventListener('mouseup', this.onMouseUp);\n      this.thisNode.ownerDocument.addEventListener(\n        'contextmenu',\n        this.onMouseUp\n      );\n    }\n\n    this.props.canvas.handleNativeEvent(e);\n  };\n\n  onMouseMove = (e: MouseEvent) => {\n    // if (!this.props.canvas.dragging) {\n    this.props.canvas.handleNativeEvent(e);\n    // }\n  };\n\n  onMouseUp = (e: MouseEvent) => {\n    if (this.thisNode && this.thisNode.ownerDocument) {\n      this.thisNode.ownerDocument.removeEventListener(\n        'mousemove',\n        this.onMouseMove\n      );\n      this.thisNode.ownerDocument.removeEventListener(\n        'mouseup',\n        this.onMouseUp\n      );\n      this.thisNode.ownerDocument.removeEventListener(\n        'contextmenu',\n        this.onMouseUp\n      );\n    }\n\n    this.props.canvas.handleNativeEvent(e);\n  };\n\n  render() {\n    const canvas = this.props.canvas;\n    const zoom = canvas.getZoom();\n    const baseHeight = canvas.layout.get('height');\n    const baseWidth = canvas.layout.get('width');\n    const viewport = canvas.getViewport();\n    const viewportHeight = viewport.height;\n    const viewportWidth = viewport.width;\n    // const cursor = canvas.mouseCursorType;\n    return (\n      <div style={{ position: 'absolute' }} ref={r => (this.thisNode = r)}>\n        <ScrollContainer\n          canvas={canvas}\n          ref={c => {\n            this.props.canvas.setViewportRef(c);\n          }}\n        >\n          <ZoomContainer\n            canvas={canvas}\n            style={{\n              height: baseHeight * zoom,\n              width: baseWidth * zoom,\n            }}\n          >\n            <CanvasRenderer canvas={this.props.canvas} />\n            <div\n              style={{\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                right: 0,\n                bottom: 0,\n              }}\n            >\n              <div\n                style={{\n                  position: 'absolute',\n                  top: 0,\n                  left: 0,\n                  right: 0,\n                  bottom: 0,\n                }}\n                // onMouseMove={this.onMouseMove}\n                onMouseDown={this.onMouseDown}\n                onMouseEnter={e => canvas.handleNativeEvent(e)}\n                onMouseMove={e => canvas.handleNativeEvent(e)}\n                onClick={e => canvas.handleNativeEvent(e)}\n                onContextMenu={e => canvas.handleNativeEvent(e)}\n                onDoubleClick={e => canvas.handleNativeEvent(e)}\n                onMouseOut={e => canvas.handleNativeEvent(e)}\n                onDrop={e => canvas.handleNativeEvent(e)}\n                onDragOver={e => e.preventDefault()}\n              />\n              <div\n                ref={ref => {\n                  if (this.worldStackRef && !ref) {\n                    // THis means worldStackRef is being set null while it was set correctly earlier\n                    // We are preventing that here. Don't know the root cause\n                    return;\n                  }\n                  this.worldStackRef = ref;\n                }}\n                style={{\n                  position: 'absolute',\n                  pointerEvents: 'none',\n                  top: 0,\n                  left: 0,\n                  right: 0,\n                  bottom: 0,\n                }}\n              />\n            </div>\n          </ZoomContainer>\n        </ScrollContainer>\n        <div\n          style={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            height: viewportHeight,\n            width: viewportWidth,\n            pointerEvents: 'none',\n            overflow: 'hidden',\n          }}\n          ref={ref => (this.viewportStackRef = ref)}\n        />\n      </div>\n    );\n  }\n}\n","import * as _ from 'lodash';\n\nexport default abstract class Serializable {\n  static fromJS(snapshot: any, classObject: any = undefined) {\n    if (!snapshot) {\n      return;\n    }\n    let classInstance: any = undefined;\n    if (classObject) {\n      classInstance = new classObject();\n    } else {\n      classInstance = new (this as any)();\n    }\n\n    // const fields: any = classInstance.getFields();\n    const fields: any = Serializable.getAllFields(classInstance);\n\n    _.forEach(Object.keys(snapshot), (key: any) => {\n      const field = fields[key];\n\n      if (!field) {\n        // console.log(fields, \"fields\");\n        console.warn(\n          `property ${key} is not declared in fields of ${classInstance.constructor.name} `\n        );\n        return;\n      }\n      if (field.type === 'ignore') {\n        return;\n      }\n      if (_.isNil(snapshot[key])) {\n        classInstance[key] = snapshot[key];\n      } else if (field.type === 'literal') {\n        classInstance[key] = snapshot[key];\n      } else if (field.type === 'array') {\n        if (_.isArray(snapshot[key])) {\n          classInstance[key] = [];\n          _.forEach(snapshot[key], (element: any) => {\n            if (_.isArray(element) && field.children.type === 'array') {\n              console.log('case not handled -!-!- toJS Serializable');\n            } else if (typeof element === 'object') {\n              const objectClassInstance = this.getClassInstanceFromPlainObject(\n                field.children,\n                element\n              );\n              if (objectClassInstance) {\n                classInstance[key].push(objectClassInstance);\n              }\n            } else if (field.children.type === 'literal') {\n              classInstance[key].push(element);\n            } else {\n              console.log('case not handled -!-!- toJS Serializable');\n            }\n          });\n        } else if (typeof snapshot[key] === 'object') {\n          // console.log(\"type declared array but got object\");\n          console.log('case not handled -!-!- Serializable');\n        } else if (classInstance[key]) {\n          // console.log(\"type declared array but got literal\");\n          classInstance[key] = snapshot[key];\n        }\n      } else if (field.type === 'map') {\n        classInstance[key] = new Map();\n        _.forEach(snapshot[key], (value: any, mapKey: string) => {\n          if (field.valueType === 'literal') {\n            classInstance[key].set(mapKey, value);\n          } else if (field.valueType.type === 'array') {\n            let valueArray: any[] = [];\n            _.forEach(value, (element: any) => {\n              if (_.isArray(element) && value.children.type === 'array') {\n                console.log('case not handled -!-!- toJS Serializable');\n              } else if (typeof element === 'object') {\n                const objectClassInstance = this.getClassInstanceFromPlainObject(\n                  field.valueType.children,\n                  element\n                );\n                if (objectClassInstance) {\n                  valueArray.push(objectClassInstance);\n                }\n              } else if (value.children.type === 'literal') {\n                valueArray.push(element);\n              } else {\n                console.log('case not handled -!-!- toJS Serializable');\n              }\n            });\n            classInstance[key].set(mapKey, valueArray);\n          } else if (typeof value === 'object') {\n            const valueClassInstance = this.getClassInstanceFromPlainObject(\n              field.valueType,\n              value\n            );\n            classInstance[key].set(mapKey, valueClassInstance);\n          }\n        });\n      } else {\n        classInstance[key] = this.getClassInstanceFromPlainObject(\n          field,\n          snapshot[key]\n        );\n      }\n    });\n    return classInstance;\n  }\n\n  static getAllFields = (instance: any, fields = {}): any => {\n    if (instance && instance.getFields) {\n      const newFields = { ...instance.getFields(), ...fields };\n      // Object.assign(fields, instance.getFields());\n      const superInstance = Object.getPrototypeOf(instance);\n\n      return Serializable.getAllFields(superInstance, newFields);\n    } else {\n      return fields;\n    }\n  };\n\n  // static getAllFields = (instance: any, fields = {}): any => {\n  //   if (instance && instance.getFields) {\n  //     const newFields = { ...instance.getFields(), ...fields };\n  //     // Object.assign(fields, instance.getFields());\n  //     const superFields = instance.getSuperFields();\n  //     console.log(superFields, \"superFields\");\n  //     return newFields;\n  //     // return Serializable.getAllFields(superInstance, newFields);\n  //   } else {\n  //     return fields;\n  //   }\n  // };\n\n  // getSuperFields() {\n  //   // @ts-ignore\n  //   console.log(super());\n  //   // @ts-ignore\n  //   return super.getFields();\n  // }\n\n  static getClassInstanceFromPlainObject(classObject: any, snapshot: any) {\n    if (classObject.fromJS) {\n      return classObject.fromJS(snapshot);\n    } else {\n      throw new Error(\n        `${classObject.constructor.name} is not extended from Serializable`\n      );\n    }\n  }\n\n  abstract getFields(): { [key: string]: any };\n  toJS(shallow: boolean = false) {\n    const fields = Serializable.getAllFields(this);\n    // console.log(fields, \"All Fields from JS\");\n    if (!fields) {\n      throw new Error('fileds are undefiend');\n    }\n    let ret: any = {};\n\n    if (shallow) {\n      delete fields.children;\n    }\n    _.forEach(fields, (value: any, key: any) => {\n      if (value.type === 'ignore') {\n        return;\n      }\n      if (!value) {\n        throw new Error(`type of ${key} is not defined`);\n      }\n      if (value) {\n        if (value.type === 'array') {\n          if (_.isArray((this as any)[key])) {\n            ret[key] = [];\n            _.forEach((this as any)[key], (element: any) => {\n              if (_.isArray(element) && value.children.type === 'array') {\n                console.log('case not handled -!-!- toJS Serializable');\n              } else if (typeof element === 'object') {\n                const object = this.getPlainObjectFromClassInstance(element);\n                if (object) {\n                  ret[key].push(object);\n                }\n              } else if (value.children.type === 'literal') {\n                ret[key].push(element);\n              } else {\n                console.log('case not handled -!-!- toJS Serializable');\n              }\n            });\n          } else if (typeof (this as any)[key] === 'object') {\n            // console.log(\"type declared array but got object\");\n            ret[key] = this.getPlainObjectFromClassInstance((this as any)[key]);\n          } else {\n            // console.log(\"type declared array but got literal\");\n            ret[key] = (this as any)[key];\n          }\n        } else if (value.type === 'map') {\n          ret[key] = this.MapToPOJO((this as any)[key]);\n        } else if (value.type === 'literal') {\n          ret[key] = (this as any)[key];\n        } else {\n          ret[key] = this.getPlainObjectFromClassInstance((this as any)[key]);\n        }\n      }\n      // else {\n      //   ret[key] = undefined;\n      // }\n    });\n    return _.omitBy(ret, _.isNil);\n  }\n\n  getPlainObjectFromClassInstance(object: any) {\n    if (object) {\n      if (object.toJS) {\n        return object.toJS();\n      } else {\n        throw new Error(\n          `${object.constructor.name} is not extended from Serializable`\n        );\n      }\n    } else {\n      return undefined;\n    }\n  }\n  MapToPOJO(mapInstance: Map<any, any>) {\n    const result: any = {};\n    if (mapInstance) {\n      mapInstance.forEach((value: any, key: any) => {\n        var valuePlainArray: any[] = [];\n        if (_.isArray(value)) {\n          _.forEach(value, (element: any) => {\n            const object = this.getPlainObjectFromClassInstance(element);\n            if (object) {\n              valuePlainArray.push(object);\n            }\n          });\n          result[key] = valuePlainArray;\n        } else {\n          result[key] = this.getPlainObjectFromClassInstance(value);\n        }\n      });\n    }\n    return result;\n  }\n}\n\nconst literal = {\n  type: 'literal',\n  children: null,\n};\n\nconst array = function(type: any) {\n  return {\n    type: 'array',\n    children: type,\n  };\n};\nconst map = function(keyType: any, valueType: any) {\n  return {\n    type: 'map',\n    keyType: keyType,\n    valueType: valueType,\n  };\n};\nconst ignore = {\n  type: 'ignore',\n  children: null,\n};\n\nexport const types = {\n  literal,\n  array,\n  map,\n  ignore,\n};\n","import { uniq, remove, reduce, union } from 'lodash';\nimport { Serializable, types } from '../serializable';\nimport { rerendererLog } from './rerendererLog';\n\nexport type onUpdateListener = (...args: Array<any>) => void;\nlet stopUpdates = false;\nlet actionCounter = 0;\nlet noRerenderCounter = 0;\n\nconst pendingUpdates: Map<\n  onUpdateListener,\n  { properties: Array<string>; model: Model }\n> = new Map();\nexport const shouldStopUpdates = (value: boolean) => {\n  stopUpdates = value;\n};\nexport const action = (callback: any) => {\n  actionCounter++;\n  callback();\n  // rerendererLog(\"HHH^&^& action completed\", pendingUpdates);\n  // console.log(\n  //   \"HHH^&^& action completed\"\n  //   // JSON.stringify(pendingUpdates.values(), null, 2)\n  // );\n\n  actionCounter--;\n\n  if (actionCounter === 0) {\n    pendingUpdates.forEach(function runListenersBatch(\n      updateObject: any,\n      listener: any\n    ) {\n      // console.log(\"HHH^&^& batch emit\", updateObject.properties, listener);\n      if (!updateObject.model.disposed && !stopUpdates) {\n        listener(updateObject.properties);\n        // @ts-ignore\n        if (window['debug']) {\n          console.log('DEBUG::', 'Emit:', updateObject.properties);\n        }\n      }\n    });\n    pendingUpdates.clear();\n  }\n};\nexport const noRerender = (callback: any) => {\n  noRerenderCounter++;\n  callback();\n  noRerenderCounter--;\n};\n\nexport default abstract class Model extends Serializable {\n  eventListenersMap: Map<string, Array<onUpdateListener>> = new Map();\n  reverseMap: Map<onUpdateListener, Array<string>> = new Map();\n  disposed?: boolean = false;\n\n  getFields(): { [key: string]: any } {\n    return {\n      eventListenersMap: types.ignore,\n      reverseMap: types.ignore,\n      disposed: types.ignore,\n    };\n  }\n\n  on(properties: Array<string> | string, listener: onUpdateListener) {\n    if (typeof properties === 'string') {\n      // If a single property is received, wrap it in an Array\n      properties = [properties];\n    }\n\n    properties.forEach(property => {\n      const existingArrOfListeners = this.eventListenersMap.get(property);\n\n      if (existingArrOfListeners) {\n        existingArrOfListeners.push(listener);\n        this.eventListenersMap.set(property, existingArrOfListeners);\n      } else {\n        this.eventListenersMap.set(property, [listener]);\n      }\n    });\n    // rerendererLog(this, \"^&^&this\");\n    let arrayOfProperties = this.reverseMap.get(listener);\n    if (arrayOfProperties) {\n      arrayOfProperties = arrayOfProperties.concat(properties);\n      // rerendererLog(arrayOfKeys, \"arrayOfKeys &*\");\n      this.reverseMap.set(listener, uniq(arrayOfProperties));\n    } else {\n      this.reverseMap.set(listener, properties);\n    }\n    // rerendererLog(\n    //   this.watchersMap.entries(),\n    //   this.reverseMap.entries(),\n    //   \"watch &*\"\n    // );\n  }\n\n  emit(properties: Array<string> | string) {\n    if (noRerenderCounter > 0) {\n      return;\n    }\n    // console.trace(properties, \"propertiesproperties\");\n    /*if (properties === '*' || properties[0] === '*') {\n      throw Error(\n        'Emitting * is not allowed. Thodi mehnat kar k saari properties emit kar do.'\n      );\n    }*/\n\n    if (typeof properties === 'string') {\n      // If a single property is received, wrap it in an Array\n      properties = [properties];\n    }\n\n    properties.push('*');\n\n    rerendererLog(\n      'HHH^&^& emitting ',\n      properties,\n      this.eventListenersMap,\n      this.reverseMap\n    );\n\n    let combinedArrayOfListeners: Array<onUpdateListener> = reduce(\n      properties,\n      (combined: Array<onUpdateListener>, property) => {\n        const existingArrOfListeners = this.eventListenersMap.get(property);\n        if (existingArrOfListeners) {\n          combined = union(combined, existingArrOfListeners);\n        }\n\n        return combined;\n      },\n      []\n    );\n\n    rerendererLog(combinedArrayOfListeners, 'combinedArrayOfListeners');\n\n    combinedArrayOfListeners.forEach(listener => {\n      rerendererLog('HHH^&^&  updating observer', listener);\n      if (listener) {\n        if (actionCounter) {\n          let existingUpdateObject = pendingUpdates.get(listener);\n          if (existingUpdateObject) {\n            existingUpdateObject.properties = existingUpdateObject.properties.concat(\n              properties\n            );\n            pendingUpdates.set(listener, {\n              properties: uniq(existingUpdateObject.properties),\n              model: this,\n            });\n          } else {\n            pendingUpdates.set(listener, {\n              properties: properties as Array<string>,\n              model: this,\n            });\n          }\n        } else {\n          throw new Error('emitting an event outside of an action');\n        }\n        // listener(properties);\n      }\n    });\n  }\n\n  off(properties: Array<string> | string, listener: onUpdateListener) {\n    // rerendererLog(observerComponent, \"sufhesfbo sefu esfi \");\n\n    if (typeof properties === 'string') {\n      // If a single property is received, wrap it in an Array\n      properties = [properties];\n    }\n\n    properties.forEach(() => {\n      const arrayOfProperties = this.reverseMap.get(listener);\n      if (arrayOfProperties) {\n        arrayOfProperties.forEach(key => {\n          const existingArrOfListeners = this.eventListenersMap.get(key);\n          if (!existingArrOfListeners) {\n            return;\n          }\n\n          remove(existingArrOfListeners, n => {\n            return n === listener;\n          });\n\n          if (existingArrOfListeners.length === 0) {\n            this.eventListenersMap.delete(key);\n          }\n        });\n        this.reverseMap.delete(listener);\n      }\n    });\n\n    // rerendererLog(\n    //   this.watchersMap.entries(),\n    //   this.reverseMap.entries(),\n    //   \"remove &*\"\n    // );\n  }\n}\n","import { IDimensionWithRotation, IPosition, Layer } from './../';\nimport { isNil, map, reverse, forEach } from 'lodash';\nimport { Gradient } from './Gradient';\nexport default class ModelUtils {\n  static pointsOverlap(point1: number, point2: number) {\n    return Math.abs(point1 - point2) <= 1;\n  }\n\n  static getDimensionFromPolygon(points: any) {\n    let height = points[3][1] - points[0][1];\n    let width = points[1][0] - points[0][0];\n    let y = points[0][1];\n    let x = points[0][0];\n\n    return { x, y, width, height };\n  }\n  static rotatePolygon(poly: any, angle: number, centroid?: any) {\n    var centroid = centroid ? centroid : ModelUtils.getCentroid(poly);\n    poly.map((point: any, key: number) => {\n      point = ModelUtils.rotatePoint(point, angle, centroid);\n      poly[key] = point;\n    });\n\n    return poly;\n  }\n  static findAngle(A: any, B: any, C: any, range: 180 | 360) {\n    let AB = Math.sqrt(Math.pow(B[0] - A[0], 2) + Math.pow(B[1] - A[1], 2));\n    let BC = Math.sqrt(Math.pow(B[0] - C[0], 2) + Math.pow(B[1] - C[1], 2));\n    let AC = Math.sqrt(Math.pow(C[0] - A[0], 2) + Math.pow(C[1] - A[1], 2));\n\n    let value = (BC * BC + AB * AB - AC * AC) / (2 * BC * AB);\n    if (value > 1) {\n      value = 1;\n    }\n    if (value < -1) {\n      value = -1;\n    }\n    let angle = Math.acos(value);\n    angle = angle * (180 / Math.PI);\n    if (range === 360) {\n      if (C[0] < A[0]) {\n        angle = 360 - angle;\n      }\n    }\n    return angle;\n  }\n\n  static getAbsoluteRotation(poly: Array<any>) {\n    const centroid = ModelUtils.getCentroid(poly);\n    // get three points of a triangle to get angle between two lines\n    const point1 = [centroid[0], centroid[1] - 2];\n    const point3 = ModelUtils.middlePoint(poly[0], poly[1]);\n    // get angle created by two lines\n    const angle = ModelUtils.findAngle(point1, centroid, point3, 360);\n    return angle;\n  }\n  static middlePoint(point1: any, point2: any) {\n    let newX = (point1[0] + point2[0]) / 2;\n    let newY = (point1[1] + point2[1]) / 2;\n    return [newX, newY];\n  }\n  static getCentroid(coord: Array<any>) {\n    var center: any = coord.reduce(\n      function(point1: any, point2: any) {\n        return [\n          point1[0] + point2[0] / coord.length,\n          point1[1] + point2[1] / coord.length,\n        ];\n      },\n      [0, 0]\n    );\n    return center;\n  }\n  static distance(point1: any, point2: any) {\n    var a = point1[0] - point2[0];\n    var b = point1[1] - point2[1];\n    var c = Math.sqrt(a * a + b * b);\n    return c;\n  }\n  static rotatePoint(point: any, angle: number, centroid: any) {\n    angle = (angle * Math.PI) / 180.0;\n    let newX =\n      (point[0] - centroid[0]) * Math.cos(angle) -\n      (point[1] - centroid[1]) * Math.sin(angle) +\n      centroid[0];\n    let newY =\n      (point[1] - centroid[1]) * Math.cos(angle) +\n      (point[0] - centroid[0]) * Math.sin(angle) +\n      centroid[1];\n    return [newX, newY];\n  }\n  static getPointsFromBoundingBox(box: any, rotation: number = 0): Array<any> {\n    let poly = [\n      [box.x, box.y],\n      [box.x + box.width, box.y],\n      [box.x + box.width, box.y + box.height],\n      [box.x, box.y + box.height],\n    ];\n\n    // var centroid = getCentroid(poly);\n    var rotatedPoly = ModelUtils.rotatePolygon(poly, rotation);\n\n    return rotatedPoly;\n  }\n  static getPointsFromDims(dims: any) {\n    let newX = dims.x;\n    let newY = dims.y;\n    let width = dims.width;\n    let height = dims.height;\n\n    let poly = [\n      [newX, newY],\n      [newX + width, newY],\n      [newX + width, newY + height],\n      [newX, newY + height],\n    ];\n\n    let transform = reverse([...dims.transform]);\n\n    transform.map((obj: any, index: number) => {\n      if (obj.rotate && obj.rotate.rotation && obj.rotate.centroid) {\n        poly = ModelUtils.rotatePolygon(\n          poly,\n          obj.rotate.rotation,\n          obj.rotate.centroid\n        );\n      }\n    });\n\n    return poly;\n  }\n  static depthComparator(a: string | null, b: string | null): -1 | 0 | 1 {\n    let activeA: number | null = ModelUtils.getActiveDigit(a);\n    let activeB: number | null = ModelUtils.getActiveDigit(b);\n\n    if (a === b) {\n      return 0;\n    }\n\n    if (activeA !== null && activeB !== null && activeA !== activeB) {\n      if (activeA < activeB) {\n        return -1;\n      } else {\n        return 1;\n      }\n    } else if (activeA !== null && activeB !== null && activeA === activeB) {\n      let nextA = ModelUtils.getNextCharacter(a);\n      let nextB = ModelUtils.getNextCharacter(b);\n\n      return ModelUtils.depthComparator(nextA, nextB);\n    } else if (activeA !== null) {\n      return 1;\n    } else {\n      return -1;\n    }\n  }\n  private static getNextCharacter(a: string | null): string | null {\n    if (a === null) {\n      return '';\n    }\n    let aIndex = a.indexOf('.');\n    if (aIndex === -1) {\n      return '';\n    }\n\n    return a.substring(aIndex + 1, a.length);\n  }\n  private static getActiveDigit(a: string | null): number | null {\n    if (a === null || a.length === 0) {\n      return null;\n    }\n\n    if (!a.includes('.')) {\n      return parseInt(a, 10);\n    }\n    return parseInt(a.substring(0, a.indexOf('.')), 10);\n  }\n}\n\nexport function getCorrection(\n  orientation: IDimensionWithRotation,\n  finalOrientation: IDimensionWithRotation,\n  handle: any\n) {\n  let rotation = orientation.rotation;\n  let angle = (rotation * Math.PI) / 180.0;\n\n  let x1 = -orientation.width / 2;\n  let y1 = orientation.height / 2;\n\n  // tslint:disable:variable-name\n  let new_x1 = y1 * Math.sin(angle) + x1 * Math.cos(angle);\n  let new_y1 = y1 * Math.cos(angle) - x1 * Math.sin(angle);\n\n  let diff1 = { x: new_x1 - x1, y: new_y1 - y1 };\n\n  // only width\n  let y2 = orientation.height / 2;\n  let x2 = -finalOrientation.width / 2;\n  let new_x2 = y2 * Math.sin(angle) + x2 * Math.cos(angle);\n  let new_y2 = y2 * Math.cos(angle) - x2 * Math.sin(angle);\n  let diff2 = { x: new_x2 - x2, y: new_y2 - y2 };\n\n  let offsetWidth = { x: diff2.x - diff1.x, y: diff2.y - diff1.y };\n\n  // only height\n\n  // tslint:disable:no-duplicate-variable\n  y2 = finalOrientation.height / 2;\n  x2 = -orientation.width / 2;\n\n  new_x2 = y2 * Math.sin(angle) + x2 * Math.cos(angle);\n  new_y2 = y2 * Math.cos(angle) - x2 * Math.sin(angle);\n\n  diff2 = { x: new_x2 - x2, y: new_y2 - y2 };\n\n  let offsetHeight = { x: diff2.x - diff1.x, y: diff2.y - diff1.y };\n\n  let newX = finalOrientation.x;\n  let newY = finalOrientation.y;\n\n  if (handle.indexOf('T') !== -1 || handle.indexOf('L') !== -1) {\n    newX = finalOrientation.x + (offsetWidth.x + offsetHeight.x);\n    newY = finalOrientation.y - (offsetWidth.y + offsetHeight.y);\n  }\n\n  if (handle.indexOf('B') !== -1 || handle.indexOf('R') !== -1) {\n    newX = finalOrientation.x - (offsetWidth.x + offsetHeight.x);\n    newY = finalOrientation.y + (offsetWidth.y + offsetHeight.y);\n  }\n\n  if (handle.indexOf('B') !== -1 && handle.indexOf('L') !== -1) {\n    newX = finalOrientation.x + offsetWidth.x - offsetHeight.x;\n    newY = finalOrientation.y - offsetWidth.y + offsetHeight.y;\n  }\n\n  if (handle.indexOf('T') !== -1 && handle.indexOf('R') !== -1) {\n    newX = finalOrientation.x - offsetWidth.x + offsetHeight.x;\n    newY = finalOrientation.y + offsetWidth.y - offsetHeight.y;\n  }\n\n  if (handle.indexOf('C') !== -1) {\n    newX = finalOrientation.x;\n    newY = finalOrientation.y;\n  }\n\n  return {\n    x: newX,\n    y: newY,\n    height: finalOrientation.height,\n    width: finalOrientation.width,\n    rotation,\n  };\n}\n\nexport function getResizerQuad(rotation: number): string {\n  rotation = rotation % 360;\n\n  if (rotation < 0) {\n    rotation += 360;\n  }\n  if (!rotation) {\n    return '4';\n  }\n  if (rotation < 0) {\n    //\n  }\n  if (\n    (rotation >= 22.5 && rotation < 67.5) ||\n    (rotation >= 202.5 && rotation < 247.5)\n  ) {\n    return '1';\n  }\n\n  if (\n    (rotation >= 67.5 && rotation < 112.5) ||\n    (rotation >= 247.5 && rotation < 292.5)\n  ) {\n    return '2';\n  }\n  if (\n    (rotation >= 112.5 && rotation < 157.5) ||\n    (rotation >= 292.5 && rotation < 337.5)\n  ) {\n    return '3';\n  }\n\n  if (\n    (rotation >= 157.5 && rotation < 202.5) ||\n    (rotation >= 337.5 && rotation < 22.5)\n  ) {\n    return '4';\n  }\n  return '4';\n}\n\nexport function computeOrientation(\n  layout: IDimensionWithRotation,\n  delta: IPosition,\n  handle: string,\n  shift: boolean,\n  alt: boolean\n) {\n  if (shift && !alt) {\n    return computeOrientationWithDeltaAR(layout, delta, handle);\n  } else if (!shift && alt) {\n    return computeOrientationWithDeltaAlt(layout, delta, handle);\n  } else if (shift && alt) {\n    return computeOrientationWithDeltaShiftAlt(layout, delta, handle);\n  } else {\n    return computeOrientationWithDelta(layout, delta, handle);\n  }\n}\n\nexport function computeOrientationMultiple(\n  orientation: IDimensionWithRotation,\n  delta: IPosition,\n  handle: any,\n  boundaryBox: any,\n  points: Array<any>,\n  shift?: boolean,\n  alt?: boolean\n) {\n  if (shift && !alt) {\n    return computeOrientationWithDeltaARMultiple(\n      orientation,\n      delta,\n      handle,\n      boundaryBox,\n      points\n    );\n  } else if (!shift && alt) {\n    return computeOrientationWithDeltaAltMultiple(\n      orientation,\n      delta,\n      handle,\n      boundaryBox,\n      points\n    );\n  } else if (shift && alt) {\n    return computeOrientationWithDeltaShiftAltMultiple(\n      orientation,\n      delta,\n      handle,\n      boundaryBox,\n      points\n    );\n  } else {\n    return computeOrientationWithDeltaMultiple(\n      orientation,\n      delta,\n      handle,\n      boundaryBox,\n      points\n    );\n  }\n}\n\nexport function computeOrientationWithDelta(\n  layout: IDimensionWithRotation,\n  delta: IPosition,\n  handle: string\n): IDimensionWithRotation {\n  let x = layout.x;\n  let y = layout.y;\n  let width = Math.max(layout.width, 0);\n  let height = Math.max(layout.height, 0);\n  let deltaX = !isNil(delta.x) ? delta.x : 0;\n  let deltaY = !isNil(delta.y) ? delta.y : 0;\n  let rotation = layout.rotation;\n\n  if (handle.indexOf('C') !== -1) {\n    x += deltaX;\n    y += deltaY;\n  }\n\n  if (handle.indexOf('B') !== -1) {\n    height += deltaY;\n  }\n  if (handle.indexOf('R') !== -1) {\n    width += deltaX;\n  }\n  if (handle.indexOf('T') !== -1) {\n    height -= deltaY;\n    y += deltaY;\n  }\n\n  if (handle.indexOf('L') !== -1) {\n    width -= deltaX;\n    x += deltaX;\n  }\n\n  let finalOrientation = {\n    x,\n    y,\n    width,\n    height,\n    rotation,\n  };\n\n  finalOrientation = getCorrection(layout, finalOrientation, handle);\n  return finalOrientation;\n}\n\nexport function computeOrientationWithDeltaMultiple(\n  orientation: IDimensionWithRotation,\n  delta: IPosition,\n  handle: any,\n  boundaryBox: any,\n  points: Array<any>\n): IDimensionWithRotation {\n  let x = orientation.x;\n  let y = orientation.y;\n  let width = orientation.width;\n  let height = orientation.height;\n  let deltaX = !isNil(delta.x) ? delta.x : 0;\n  let deltaY = !isNil(delta.y) ? delta.y : 0;\n  let rotation = orientation.rotation;\n  if (handle.indexOf('C') !== -1) {\n    x += deltaX;\n    y += deltaY;\n  } else {\n    let newPoints: any = [...points];\n    map(newPoints, (point: any, index: number) => {\n      let pointXDiff = 0;\n      let pointYDiff = 0;\n      if (handle.indexOf('B') !== -1) {\n        pointYDiff =\n          1 -\n          (boundaryBox.height - (point[1] - boundaryBox.y)) /\n            boundaryBox.height;\n      }\n      if (handle.indexOf('R') !== -1) {\n        pointXDiff =\n          1 -\n          (boundaryBox.width - (point[0] - boundaryBox.x)) / boundaryBox.width;\n      }\n      if (handle.indexOf('T') !== -1) {\n        pointYDiff =\n          (boundaryBox.height - (point[1] - boundaryBox.y)) /\n          boundaryBox.height;\n      }\n      if (handle.indexOf('L') !== -1) {\n        pointXDiff =\n          (boundaryBox.width - (point[0] - boundaryBox.x)) / boundaryBox.width;\n      }\n      let pointY = point[1] + pointYDiff * deltaY;\n      let pointX = point[0] + pointXDiff * deltaX;\n      let pointNew = [pointX, pointY];\n      newPoints[index] = pointNew;\n    });\n\n    newPoints = ModelUtils.rotatePolygon(newPoints, 360 - rotation);\n    let box = ModelUtils.getDimensionFromPolygon(newPoints);\n    height = box.height;\n    width = box.width;\n    y = box.y;\n    x = box.x;\n  }\n\n  return {\n    width,\n    height,\n    x,\n    y,\n    rotation,\n  };\n}\n\nexport function computeOrientationWithDeltaARMultiple(\n  orientation: IDimensionWithRotation,\n  deltaInp: IPosition,\n  handle: any,\n  boundaryBox: any,\n  points: Array<any>\n): IDimensionWithRotation {\n  let x = orientation.x;\n  let y = orientation.y;\n  let width = orientation.width;\n  let height = orientation.height;\n  let rotation = orientation.rotation;\n  let deltaX = !isNil(deltaInp.x) ? deltaInp.x : 0;\n  let deltaY = !isNil(deltaInp.y) ? deltaInp.y : 0;\n\n  let aspectRatio = boundaryBox.width / boundaryBox.height;\n\n  if (handle.indexOf('C') !== -1) {\n    x += deltaX;\n    y += deltaY;\n  } else {\n    let newPoints: any = [...points];\n    let initialDims = ModelUtils.getDimensionFromPolygon(newPoints);\n    let widthFactor =\n      (boundaryBox.width - initialDims.width) / boundaryBox.width;\n\n    map(newPoints, (point: any, index: number) => {\n      let pointXDiff = 0,\n        pointYDiff = 0,\n        pointX = 0,\n        pointY = 0,\n        delta = 0;\n      // for buttom and right\n      let pointYDiffDirect =\n        1 -\n        (boundaryBox.height - (point[1] - boundaryBox.y)) / boundaryBox.height;\n      let pointXDiffDirect =\n        1 -\n        (boundaryBox.width - (point[0] - boundaryBox.x)) / boundaryBox.width;\n      // for top and right\n      let pointYDiffOpposite =\n        (boundaryBox.height - (point[1] - boundaryBox.y)) / boundaryBox.height;\n      let pointXDiffOpposite =\n        (boundaryBox.width - (point[0] - boundaryBox.x)) / boundaryBox.width;\n\n      if (handle.length > 1) {\n        if (handle.indexOf('B') !== -1 && handle.indexOf('L') !== -1) {\n          delta = deltaX > -deltaY ? deltaX : deltaY;\n          pointYDiff = pointYDiffDirect;\n          pointXDiff = pointXDiffOpposite;\n\n          if (deltaX > -deltaY) {\n            pointY = point[1] - pointYDiff * delta * (1 / aspectRatio);\n            pointX = point[0] + delta * pointXDiff;\n          } else {\n            pointY = point[1] + pointYDiff * delta;\n            pointX = point[0] - delta * pointXDiff * aspectRatio;\n          }\n        }\n        if (handle.indexOf('B') !== -1 && handle.indexOf('R') !== -1) {\n          delta = deltaX < deltaY ? deltaX : deltaY;\n          pointYDiff = pointYDiffDirect;\n          pointXDiff = pointXDiffDirect;\n\n          if (deltaX > deltaY) {\n            pointY = point[1] + pointYDiff * delta;\n            pointX = point[0] + delta * pointXDiff * aspectRatio;\n          } else {\n            pointY = point[1] + pointYDiff * delta * (1 / aspectRatio);\n            pointX = point[0] + delta * pointXDiff;\n          }\n        }\n        if (handle.indexOf('T') !== -1 && handle.indexOf('R') !== -1) {\n          delta = deltaX < -deltaY ? deltaX : deltaY;\n\n          pointYDiff = pointYDiffOpposite;\n          pointXDiff = pointXDiffDirect;\n\n          if (deltaX > -deltaY) {\n            pointY = point[1] + pointYDiff * delta;\n            pointX = point[0] - delta * pointXDiff * aspectRatio;\n          } else {\n            pointY = point[1] - pointYDiff * delta * (1 / aspectRatio);\n            pointX = point[0] + delta * pointXDiff;\n          }\n        }\n        if (handle.indexOf('T') !== -1 && handle.indexOf('L') !== -1) {\n          delta = deltaX > deltaY ? deltaX : deltaY;\n          pointYDiff = pointYDiffOpposite;\n          pointXDiff = pointXDiffOpposite;\n\n          if (deltaX > deltaY) {\n            pointY = point[1] + pointYDiff * delta * (1 / aspectRatio);\n            pointX = point[0] + delta * pointXDiff;\n          } else {\n            pointY = point[1] + pointYDiff * delta;\n            pointX = point[0] + delta * pointXDiff * aspectRatio;\n          }\n        }\n      } else {\n        if (handle.indexOf('B') !== -1) {\n          pointYDiff = pointYDiffDirect;\n          pointXDiff = pointXDiffDirect;\n          pointY = point[1] + pointYDiff * deltaY;\n          pointX =\n            point[0] +\n            deltaY * aspectRatio * pointXDiff -\n            (deltaY * aspectRatio) / 2;\n        }\n\n        if (handle.indexOf('T') !== -1) {\n          pointYDiff = pointYDiffOpposite;\n          pointXDiff = pointXDiffOpposite;\n\n          pointY = point[1] + pointYDiff * deltaY;\n          pointX =\n            point[0] +\n            deltaY * pointXDiff * aspectRatio -\n            (deltaY * aspectRatio) / 2;\n        }\n\n        if (handle.indexOf('R') !== -1) {\n          pointYDiff = pointYDiffDirect;\n          pointXDiff = pointXDiffDirect;\n\n          pointX = point[0] + pointXDiff * deltaX;\n          pointY =\n            point[1] +\n            deltaX * pointYDiff * (1 / aspectRatio) -\n            (deltaX * (1 / aspectRatio)) / 2;\n        }\n\n        if (handle.indexOf('L') !== -1) {\n          pointYDiff = pointYDiffOpposite;\n          pointXDiff = pointXDiffOpposite;\n\n          pointX = point[0] + pointXDiff * deltaX;\n          pointY =\n            point[1] +\n            deltaX * pointYDiff * (1 / aspectRatio) -\n            (deltaX * (1 / aspectRatio)) / 2;\n        }\n      }\n\n      let pointNew = [pointX, pointY];\n      newPoints[index] = pointNew;\n    });\n    newPoints = ModelUtils.rotatePolygon(newPoints, 360 - rotation);\n\n    let box = ModelUtils.getDimensionFromPolygon(newPoints);\n    height = box.height;\n    width = box.width;\n    y = box.y;\n    x = box.x;\n  }\n\n  return {\n    width,\n    height,\n    x,\n    y,\n    rotation,\n  };\n}\n\nexport function computeOrientationWithDeltaAltMultiple(\n  orientation: IDimensionWithRotation,\n  delta: IPosition,\n  handle: any,\n  boundaryBox: any,\n  points: Array<any>\n): IDimensionWithRotation {\n  let x = orientation.x;\n  let y = orientation.y;\n  let width = orientation.width;\n  let height = orientation.height;\n  let rotation = orientation.rotation;\n  let deltaX = !isNil(delta.x) ? delta.x : 0;\n  let deltaY = !isNil(delta.y) ? delta.y : 0;\n\n  if (handle.indexOf('C') !== -1) {\n    x += deltaX;\n    y += deltaY;\n  } else {\n    let newPoints: any = [...points];\n    let initialDims = ModelUtils.getDimensionFromPolygon(newPoints);\n    let widthFactor =\n      (boundaryBox.width - initialDims.width) / boundaryBox.width;\n\n    map(newPoints, (point: any, index: number) => {\n      let pointXDiff = 0,\n        pointYDiff = 0,\n        pointX = 0,\n        pointY = 0;\n      // delta = 0;\n      // for buttom and right\n      let pointYDiffDirect =\n        1 -\n        (boundaryBox.height - (point[1] - boundaryBox.y)) / boundaryBox.height;\n      let pointXDiffDirect =\n        1 -\n        (boundaryBox.width - (point[0] - boundaryBox.x)) / boundaryBox.width;\n\n      // for top and right\n      let pointYDiffOpposite =\n        (boundaryBox.height - (point[1] - boundaryBox.y)) / boundaryBox.height;\n      let pointXDiffOpposite =\n        (boundaryBox.width - (point[0] - boundaryBox.x)) / boundaryBox.width;\n\n      if (handle.indexOf('B') !== -1) {\n        pointYDiff = pointYDiffDirect;\n        pointXDiff = pointXDiffDirect;\n\n        pointY = point[1] + pointYDiff * deltaY - deltaY / 2;\n        if (handle.indexOf('L') === -1 && handle.indexOf('R') === -1) {\n          pointX = point[0] + pointXDiff;\n        } else {\n          pointX = point[0] + pointXDiff * deltaX - deltaX / 2;\n        }\n      }\n\n      if (handle.indexOf('T') !== -1) {\n        pointYDiff = pointYDiffOpposite;\n        pointXDiff = pointXDiffDirect;\n        pointY = point[1] - pointYDiff * deltaY - deltaY / 2;\n\n        if (handle.indexOf('L') === -1 && handle.indexOf('R') === -1) {\n          pointX = point[0] + pointXDiff;\n        } else {\n          pointX = point[0] + pointXDiff * deltaX - deltaX / 2;\n        }\n      }\n\n      if (handle.indexOf('R') !== -1) {\n        pointXDiff = pointXDiffDirect;\n        pointYDiff = pointYDiffDirect;\n\n        pointX = point[0] + pointXDiff * deltaX - deltaX / 2;\n        if (handle.indexOf('T') === -1 && handle.indexOf('B') === -1) {\n          pointY = point[1] + pointYDiff;\n        } else {\n          if (handle.indexOf('B') !== -1) {\n            pointY = point[1] + pointYDiff * deltaY - deltaY / 2;\n          } else {\n            pointY = point[1] - pointYDiff * deltaY + deltaY / 2;\n          }\n        }\n      }\n\n      if (handle.indexOf('L') !== -1) {\n        pointXDiff = pointXDiffOpposite;\n        pointYDiff = pointYDiffDirect;\n        pointX = point[0] + pointXDiff * deltaX - deltaX / 2;\n        if (handle.indexOf('T') === -1 && handle.indexOf('B') === -1) {\n          pointY = point[1] + pointYDiff;\n        } else {\n          if (handle.indexOf('B') !== -1) {\n            pointY = point[1] + pointYDiff * deltaY - deltaY / 2;\n          } else {\n            pointY = point[1] - pointYDiff * deltaY + deltaY / 2;\n          }\n        }\n      }\n\n      let pointNew = [pointX, pointY];\n      newPoints[index] = pointNew;\n    });\n    newPoints = ModelUtils.rotatePolygon(newPoints, 360 - rotation);\n\n    let box = ModelUtils.getDimensionFromPolygon(newPoints);\n    height = box.height;\n    width = box.width;\n    y = box.y;\n    x = box.x;\n  }\n\n  return {\n    width,\n    height,\n    x,\n    y,\n    rotation,\n  };\n}\n\nexport function computeOrientationWithDeltaShiftAltMultiple(\n  orientation: IDimensionWithRotation,\n  deltaInp: IPosition,\n  handle: any,\n  boundaryBox: any,\n  points: Array<any>\n): IDimensionWithRotation {\n  let x = orientation.x;\n  let y = orientation.y;\n  let width = orientation.width;\n  let height = orientation.height;\n  let deltaX = !isNil(deltaInp.x) ? deltaInp.x : 0;\n  let deltaY = !isNil(deltaInp.y) ? deltaInp.y : 0;\n  let rotation = orientation.rotation;\n\n  let aspectRatio = boundaryBox.width / boundaryBox.height;\n\n  if (handle.indexOf('C') !== -1) {\n    x += deltaX;\n    y += deltaY;\n  } else {\n    let newPoints: any = [...points];\n    let initialDims = ModelUtils.getDimensionFromPolygon(newPoints);\n    let widthFactor =\n      (boundaryBox.width - initialDims.width) / boundaryBox.width;\n\n    map(newPoints, (point: any, index: number) => {\n      let pointXDiff = 0,\n        pointYDiff = 0,\n        pointX = 0,\n        pointY = 0,\n        delta = 0;\n      // for buttom and right\n      let pointYDiffDirect =\n        1 -\n        (boundaryBox.height - (point[1] - boundaryBox.y)) / boundaryBox.height;\n      let pointXDiffDirect =\n        1 -\n        (boundaryBox.width - (point[0] - boundaryBox.x)) / boundaryBox.width;\n      // for top and right\n      let pointYDiffOpposite =\n        (boundaryBox.height - (point[1] - boundaryBox.y)) / boundaryBox.height;\n      let pointXDiffOpposite =\n        (boundaryBox.width - (point[0] - boundaryBox.x)) / boundaryBox.width;\n\n      if (handle.length > 1) {\n        if (handle.indexOf('B') !== -1 && handle.indexOf('L') !== -1) {\n          delta = deltaX > -deltaY ? deltaX : deltaY;\n          pointYDiff = pointYDiffDirect;\n          pointXDiff = pointXDiffOpposite;\n\n          if (deltaX > -deltaY) {\n            pointY =\n              point[1] -\n              pointYDiff * delta * (1 / aspectRatio) +\n              (delta * (1 / aspectRatio)) / 2;\n            pointX = point[0] + delta * pointXDiff - delta / 2;\n          } else {\n            pointY = point[1] + pointYDiff * delta - delta / 2;\n            pointX =\n              point[0] -\n              delta * pointXDiff * aspectRatio +\n              (delta * aspectRatio) / 2;\n          }\n        }\n        if (handle.indexOf('B') !== -1 && handle.indexOf('R') !== -1) {\n          delta = deltaX < deltaY ? deltaX : deltaY;\n          pointYDiff = pointYDiffDirect;\n          pointXDiff = pointXDiffDirect;\n\n          if (deltaX > deltaY) {\n            pointY = point[1] + pointYDiff * delta - delta / 2;\n            pointX =\n              point[0] +\n              delta * pointXDiff * aspectRatio -\n              (delta * aspectRatio) / 2;\n          } else {\n            pointY =\n              point[1] +\n              pointYDiff * delta * (1 / aspectRatio) -\n              (delta * (1 / aspectRatio)) / 2;\n            pointX = point[0] + delta * pointXDiff - delta / 2;\n          }\n        }\n        if (handle.indexOf('T') !== -1 && handle.indexOf('R') !== -1) {\n          delta = deltaX < -deltaY ? deltaX : deltaY;\n\n          pointYDiff = pointYDiffOpposite;\n          pointXDiff = pointXDiffDirect;\n\n          if (deltaX > -deltaY) {\n            pointY = point[1] + pointYDiff * delta - delta / 2;\n            pointX =\n              point[0] -\n              delta * pointXDiff * aspectRatio +\n              (delta * aspectRatio) / 2;\n          } else {\n            pointY =\n              point[1] -\n              pointYDiff * delta * (1 / aspectRatio) +\n              (delta * (1 / aspectRatio)) / 2;\n            pointX = point[0] + delta * pointXDiff - delta / 2;\n          }\n        }\n        if (handle.indexOf('T') !== -1 && handle.indexOf('L') !== -1) {\n          delta = deltaX > deltaY ? deltaX : deltaY;\n          pointYDiff = pointYDiffOpposite;\n          pointXDiff = pointXDiffOpposite;\n\n          if (deltaX > deltaY) {\n            pointY =\n              point[1] +\n              pointYDiff * delta * (1 / aspectRatio) -\n              (delta * (1 / aspectRatio)) / 2;\n            pointX = point[0] + delta * pointXDiff - delta / 2;\n          } else {\n            pointY = point[1] + pointYDiff * delta - delta / 2;\n            pointX =\n              point[0] +\n              delta * pointXDiff * aspectRatio -\n              (delta * aspectRatio) / 2;\n          }\n        }\n      } else {\n        if (handle.indexOf('B') !== -1) {\n          pointYDiff = pointYDiffDirect;\n          pointXDiff = pointXDiffDirect;\n          pointY = point[1] + pointYDiff * deltaY - deltaY / 2;\n          pointX =\n            point[0] +\n            deltaY * aspectRatio * pointXDiff -\n            (deltaY * aspectRatio) / 2;\n        }\n\n        if (handle.indexOf('T') !== -1) {\n          pointYDiff = pointYDiffOpposite;\n          pointXDiff = pointXDiffOpposite;\n\n          pointY = point[1] + pointYDiff * deltaY - deltaY / 2;\n          pointX =\n            point[0] +\n            deltaY * pointXDiff * aspectRatio -\n            (deltaY * aspectRatio) / 2;\n        }\n\n        if (handle.indexOf('R') !== -1) {\n          pointYDiff = pointYDiffDirect;\n          pointXDiff = pointXDiffDirect;\n\n          pointX = point[0] + pointXDiff * deltaX - deltaX / 2;\n          pointY =\n            point[1] +\n            deltaX * pointYDiff * (1 / aspectRatio) -\n            (deltaX * (1 / aspectRatio)) / 2;\n        }\n\n        if (handle.indexOf('L') !== -1) {\n          pointYDiff = pointYDiffOpposite;\n          pointXDiff = pointXDiffOpposite;\n\n          pointX = point[0] + pointXDiff * deltaX - deltaX / 2;\n          pointY =\n            point[1] +\n            deltaX * pointYDiff * (1 / aspectRatio) -\n            (deltaX * (1 / aspectRatio)) / 2;\n        }\n      }\n\n      let pointNew = [pointX, pointY];\n      newPoints[index] = pointNew;\n    });\n    newPoints = ModelUtils.rotatePolygon(newPoints, 360 - rotation);\n\n    let box = ModelUtils.getDimensionFromPolygon(newPoints);\n    height = box.height;\n    width = box.width;\n    y = box.y;\n    x = box.x;\n  }\n\n  return {\n    width,\n    height,\n    x,\n    y,\n    rotation,\n  };\n}\n\nexport function computeOrientationWithDeltaAR(\n  orientation: IDimensionWithRotation,\n  delta: IPosition,\n  handle: any\n): IDimensionWithRotation {\n  let x = orientation.x;\n  let y = orientation.y;\n  let rotation = orientation.rotation;\n\n  let width = orientation.width;\n  let height = orientation.height;\n  let deltaX = !isNil(delta.x) ? delta.x : 0;\n  let deltaY = !isNil(delta.y) ? delta.y : 0;\n\n  let aspectRatio = width / height;\n\n  if (!width || !height) {\n    aspectRatio = 1;\n  }\n  if (handle.indexOf('C') !== -1) {\n    x += deltaX;\n    y += deltaY;\n  }\n\n  let newX = x,\n    newY = y;\n  if (handle.length === 1 && handle.indexOf('T') !== -1) {\n    // newX = x + (deltaY * aspectRatio) / 2;\n    newY = y + deltaY;\n    height -= deltaY;\n    width = height * aspectRatio;\n  }\n  if (handle.length === 1 && handle.indexOf('B') !== -1) {\n    // newX = x - (deltaY * aspectRatio) / 2;\n    height += deltaY;\n    width = height * aspectRatio;\n  }\n\n  if (handle.length === 1 && handle.indexOf('L') !== -1) {\n    newX = x + deltaX;\n    // newY = y + (deltaX * (1 / aspectRatio)) / 2;\n    width -= deltaX;\n    height = width / aspectRatio;\n  }\n\n  if (handle.length === 1 && handle.indexOf('R') !== -1) {\n    // newY = y - (deltaX * (1 / aspectRatio)) / 2;\n    width += deltaX;\n    height = width / aspectRatio;\n  }\n\n  if (\n    handle.length === 2 &&\n    handle.indexOf('T') !== -1 &&\n    handle.indexOf('R') !== -1\n  ) {\n    if (deltaX > -deltaY) {\n      newY = y - deltaX * (1 / aspectRatio);\n      height += deltaX * (1 / aspectRatio);\n      width += deltaX;\n    } else {\n      newY = y + deltaY;\n      height -= deltaY;\n      width -= deltaY * aspectRatio;\n    }\n  }\n\n  if (\n    handle.length === 2 &&\n    handle.indexOf('T') !== -1 &&\n    handle.indexOf('L') !== -1\n  ) {\n    if (deltaX > deltaY) {\n      newY = y + deltaY;\n      newX = x + deltaY * aspectRatio;\n      height -= deltaY;\n      width -= deltaY * aspectRatio;\n    } else {\n      newY = y + deltaX * (1 / aspectRatio);\n      newX = x + deltaX;\n      width -= deltaX;\n      height -= deltaX * (1 / aspectRatio);\n    }\n  }\n\n  if (\n    handle.length === 2 &&\n    handle.indexOf('B') !== -1 &&\n    handle.indexOf('R') !== -1\n  ) {\n    if (deltaX > deltaY) {\n      width += deltaX;\n      height += deltaX * (1 / aspectRatio);\n    } else {\n      height += deltaY;\n      width += deltaY * aspectRatio;\n    }\n  }\n\n  if (\n    handle.length === 2 &&\n    handle.indexOf('B') !== -1 &&\n    handle.indexOf('L') !== -1\n  ) {\n    if (deltaX > -deltaY) {\n      height += deltaY;\n      newX = x - deltaY * aspectRatio;\n      width += deltaY * aspectRatio;\n    } else {\n      width -= deltaX;\n      newX = x + deltaX;\n      height -= deltaX * (1 / aspectRatio);\n    }\n  }\n\n  // height = Math.max(height, width);\n  // width = Math.max(height, width);\n\n  return { width, height, x: newX, y: newY, rotation };\n}\n\nexport function computeOrientationWithDeltaAlt(\n  orientation: IDimensionWithRotation,\n  delta: IPosition,\n  handle: any\n): IDimensionWithRotation {\n  let x = orientation.x;\n  let y = orientation.y;\n  let rotation = orientation.rotation;\n  let width = orientation.width;\n  let height = orientation.height;\n  let deltaX = !isNil(delta.x) ? delta.x : 0;\n  let deltaY = !isNil(delta.y) ? delta.y : 0;\n\n  // let aspectRatio = width / height;\n\n  if (handle.indexOf('C') !== -1) {\n    x += deltaX;\n    y += deltaY;\n  }\n\n  let newX = x,\n    newY = y;\n  if (handle.indexOf('T') !== -1) {\n    height -= deltaY * 2;\n\n    if (height > 0) newY = y + deltaY;\n  }\n  if (handle.indexOf('B') !== -1) {\n    height += deltaY * 2;\n\n    if (height > 0) newY = y - deltaY;\n  }\n  if (handle.indexOf('R') !== -1) {\n    width += deltaX * 2;\n\n    if (width > 0) newX = x - deltaX;\n  }\n  if (handle.indexOf('L') !== -1) {\n    width -= deltaX * 2;\n    if (width > 0) newX = x + deltaX;\n  }\n\n  return { width, height, x: newX, y: newY, rotation };\n}\n\nexport function computeOrientationWithDeltaShiftAlt(\n  orientation: IDimensionWithRotation,\n  delta: IPosition,\n  handle: any\n): IDimensionWithRotation {\n  let x = orientation.x;\n  let y = orientation.y;\n  let rotation = orientation.rotation;\n  let width = orientation.width;\n  let height = orientation.height;\n  let deltaX = !isNil(delta.x) ? delta.x : 0;\n  let deltaY = !isNil(delta.y) ? delta.y : 0;\n\n  deltaY = deltaY * 2;\n  deltaX = deltaX * 2;\n\n  let aspectRatio = width / height;\n\n  if (!width || !height) {\n    aspectRatio = 1;\n  }\n  if (handle.indexOf('C') !== -1) {\n    x += deltaX;\n    y += deltaY;\n  }\n\n  let newX = x,\n    newY = y;\n  if (handle.length === 1 && handle.indexOf('T') !== -1) {\n    newX = x + (deltaY * aspectRatio) / 2;\n    newY = y + deltaY / 2;\n    height -= deltaY;\n    width = height * aspectRatio;\n  }\n  if (handle.length === 1 && handle.indexOf('B') !== -1) {\n    newX = x - (deltaY * aspectRatio) / 2;\n    newY = y - deltaY / 2;\n    height += deltaY;\n    width = height * aspectRatio;\n  }\n\n  if (handle.length === 1 && handle.indexOf('L') !== -1) {\n    newX = x + deltaX / 2;\n    newY = y + (deltaX * (1 / aspectRatio)) / 2;\n    width -= deltaX;\n    height = width / aspectRatio;\n  }\n\n  if (handle.length === 1 && handle.indexOf('R') !== -1) {\n    newY = y - (deltaX * (1 / aspectRatio)) / 2;\n    newX = x - deltaX / 2;\n    width += deltaX;\n    height = width / aspectRatio;\n  }\n\n  if (\n    handle.length === 2 &&\n    handle.indexOf('T') !== -1 &&\n    handle.indexOf('R') !== -1\n  ) {\n    // if (deltaX > -deltaY) {\n    //   newY = y + deltaY / 2;\n    //   newX = x + (deltaY * aspectRatio) / 2;\n    //   height -= deltaY;\n    //   width -= deltaY * aspectRatio;\n    // } else {\n    //   newY = y - (deltaX * (1 / aspectRatio)) / 2;\n    //   newX = x - deltaX / 2;\n    //   height += deltaX * (1 / aspectRatio);\n    //   width += deltaX;\n    // }\n\n    if (deltaX > -deltaY) {\n      newY = y - (deltaX * (1 / aspectRatio)) / 2;\n      newX = x - deltaX / 2;\n      height += deltaX * (1 / aspectRatio);\n      width += deltaX;\n    } else {\n      newY = y + deltaY / 2;\n      newX = x + (deltaY * aspectRatio) / 2;\n      height -= deltaY;\n      width -= deltaY * aspectRatio;\n    }\n  }\n\n  if (\n    handle.length === 2 &&\n    handle.indexOf('T') !== -1 &&\n    handle.indexOf('L') !== -1\n  ) {\n    // if (deltaX > deltaY) {\n    //   newY = y + (deltaX * (1 / aspectRatio)) / 2;\n    //   newX = x + deltaX / 2;\n    //   width -= deltaX;\n    //   height -= deltaX * (1 / aspectRatio);\n    // } else {\n    //   newY = y + deltaY / 2;\n    //   newX = x + (deltaY * aspectRatio) / 2;\n    //   width -= deltaY * aspectRatio;\n    //   height -= deltaY;\n    // }\n\n    if (deltaX > deltaY) {\n      newY = y + deltaY / 2;\n      newX = x + (deltaY * aspectRatio) / 2;\n      width -= deltaY * aspectRatio;\n      height -= deltaY;\n    } else {\n      newY = y + (deltaX * (1 / aspectRatio)) / 2;\n      newX = x + deltaX / 2;\n      width -= deltaX;\n      height -= deltaX * (1 / aspectRatio);\n    }\n  }\n\n  if (\n    handle.length === 2 &&\n    handle.indexOf('B') !== -1 &&\n    handle.indexOf('R') !== -1\n  ) {\n    // if (deltaX > deltaY) {\n    //   newY = y - deltaY / 2;\n    //   newX = x - (deltaY * aspectRatio) / 2;\n    //   height += deltaY;\n    //   width += deltaY * aspectRatio;\n    // } else {\n    //   newY = y - (deltaX * (1 / aspectRatio)) / 2;\n    //   newX = x - deltaX / 2;\n    //   height += deltaX * (1 / aspectRatio);\n    //   width += deltaX;\n    // }\n\n    if (deltaX > deltaY) {\n      newY = y - (deltaX * (1 / aspectRatio)) / 2;\n      newX = x - deltaX / 2;\n      height += deltaX * (1 / aspectRatio);\n      width += deltaX;\n    } else {\n      newY = y - deltaY / 2;\n      newX = x - (deltaY * aspectRatio) / 2;\n      height += deltaY;\n      width += deltaY * aspectRatio;\n    }\n  }\n\n  if (\n    handle.length === 2 &&\n    handle.indexOf('B') !== -1 &&\n    handle.indexOf('L') !== -1\n  ) {\n    // if (deltaX > -deltaY) {\n    //   height -= deltaX * (1 / aspectRatio);\n    //   width -= deltaX;\n    //   newX = x + deltaX / 2;\n    //   newY = y + (deltaX * (1 / aspectRatio)) / 2;\n    // } else {\n    //   width += deltaY * aspectRatio;\n    //   height += deltaY;\n    //   newX = x - (deltaY * aspectRatio) / 2;\n    //   newY = y - deltaY / 2;\n    // }\n\n    if (deltaX > -deltaY) {\n      width += deltaY * aspectRatio;\n      height += deltaY;\n      newX = x - (deltaY * aspectRatio) / 2;\n      newY = y - deltaY / 2;\n    } else {\n      height -= deltaX * (1 / aspectRatio);\n      width -= deltaX;\n      newX = x + deltaX / 2;\n      newY = y + (deltaX * (1 / aspectRatio)) / 2;\n    }\n  }\n\n  // height = Math.max(height, width);\n  // width = Math.max(height, width);\n  return { width, height, x: newX, y: newY, rotation };\n}\n\nexport function getBoundingBoxFromOrientation({\n  x,\n  y,\n  width,\n  height,\n}: any): any {\n  return {\n    minX: x,\n    minY: y,\n    maxX: x + width,\n    maxY: y + height,\n  };\n}\n\nexport function computeDelta(\n  oldOrientation: IDimensionWithRotation,\n  newOrientation: IDimensionWithRotation\n): IPosition {\n  let [deltaX, deltaY] = [0, 0];\n\n  const oldBB = getBoundingBoxFromOrientation(oldOrientation);\n  const newBB = getBoundingBoxFromOrientation(newOrientation);\n\n  if (oldBB.minX !== newBB.minX) {\n    deltaX = newBB.minX - oldBB.minX;\n  }\n  if (oldBB.minY !== newBB.minY) {\n    deltaY = newBB.minY - oldBB.minY;\n  }\n\n  if (oldBB.maxX !== newBB.maxX) {\n    deltaX = newBB.maxX - oldBB.maxX;\n  }\n  if (oldBB.maxY !== newBB.maxY) {\n    deltaY = newBB.maxY - oldBB.maxY;\n  }\n\n  return {\n    x: deltaX,\n    y: deltaY,\n  };\n}\n\nexport function getGradientString(gradient: Gradient, palette?: any) {\n  let colors: any = [];\n\n  if (palette) {\n    forEach(palette, (data: any, index: number) => {\n      colors.push(data.color);\n    });\n  } else {\n    forEach(gradient.stops, (data: any, index: number) => {\n      colors.push(data.stopColor);\n    });\n  }\n  let vector;\n  if (gradient.to && gradient.from) {\n    vector = {\n      x: (gradient.to.x as number) - (gradient.from.x as number),\n      y: (gradient.to.y as number) - (gradient.from.y as number),\n    };\n  } else {\n    vector = {\n      x: 0,\n      y: 2,\n    };\n  }\n  const angleRad = Math.atan2(vector.y, vector.x);\n  const angleDeg = (angleRad * 180) / Math.PI + 90;\n\n  let realLocations: any = [];\n  if (palette) {\n    forEach(palette, (data: any, index: number) => {\n      realLocations.push(data.pos);\n    });\n  } else {\n    forEach(gradient.stops, (data: any, index: number) => {\n      realLocations.push(data.offset);\n    });\n  }\n\n  const colorStrings = colors\n    .map(\n      (color: any, i: number) =>\n        `${color} ${Math.round(realLocations[i] * 100)}%`\n    )\n    .join(', ');\n\n  if (gradient.gradientType && gradient.gradientType === 'LinearGradient') {\n    return `linear-gradient(${angleDeg}deg, ${colorStrings})`;\n  } else if (\n    gradient.gradientType &&\n    gradient.gradientType === 'RadialGradient'\n  ) {\n    const dist = Math.sqrt(\n      (gradient.to.x - gradient.from.x) * (gradient.to.x - gradient.from.x) +\n        (gradient.to.y - gradient.from.y) * (gradient.to.y - gradient.from.y)\n    );\n    const maxDist = Math.sqrt(\n      (1 - gradient.from.x) * (1 - gradient.from.x) +\n        (1 - gradient.from.y) * (1 - gradient.from.y)\n    );\n    const radialColorStrings = colors\n      .map(\n        (color: any, i: number) =>\n          `${color} ${Math.round(realLocations[i] * (dist / maxDist) * 100)}%`\n      )\n      .join(', ');\n    return `radial-gradient(circle at ${gradient.from.x * 100}% ${gradient.from\n      .y * 100}%,${radialColorStrings})`;\n  } else if (\n    gradient.gradientType &&\n    gradient.gradientType === 'AngularGradient'\n  ) {\n    return `conic-gradient(${colorStrings})`;\n  } else {\n    return `linear-gradient(${angleDeg}deg, ${colorStrings})`;\n  }\n}\n\nexport function getHandles(layers: Array<Layer>) {\n  let handles = ['T', 'B', 'R', 'L', 'BL', 'BR', 'TR', 'TL', 'ROTATE'];\n  if (\n    layers.length === 0 ||\n    (layers.length === 1 && layers[0].type === 'canvas')\n  ) {\n    return [];\n  }\n\n  if (\n    layers.length === 1 &&\n    layers[0].type === 'text' &&\n    !layers[0].style.get('height') &&\n    !layers[0].style.get('width')\n  ) {\n    const textLayer = layers[0];\n    const parentDims = textLayer.parent?.getBoundingClientRect();\n    const textLayerDims = textLayer.getBoundingClientRect();\n    let newHandle = '';\n\n    if (parentDims) {\n      let parentCenterY = parentDims.rootY + parentDims.height / 2;\n      let parentCenterX = parentDims.rootX + parentDims.width / 2;\n\n      let textLayerCenterY = textLayerDims.rootY + textLayerDims.height / 2;\n      let textLayerCenterX = textLayerDims.rootX + textLayerDims.width / 2;\n      if (textLayerCenterY < parentCenterY) {\n        newHandle = 'B';\n      } else if (textLayerCenterY > parentCenterY) {\n        newHandle += 'T';\n      } else {\n        newHandle += '';\n      }\n\n      if (textLayerCenterX < parentCenterX) {\n        newHandle += 'R';\n      } else if (textLayerCenterX > parentCenterX) {\n        newHandle += 'L';\n      } else {\n        newHandle += '';\n      }\n\n      if (\n        textLayerCenterX === parentCenterX &&\n        textLayerCenterY === parentCenterY\n      ) {\n        newHandle = 'B';\n      }\n      return [newHandle, 'ROTATE'];\n    }\n  }\n  // layers.forEach((layer: Layer) => {\n  // if (layer.type === \"icon\" || layer.type === \"switch\") {\n  //   handles = intersection(handles, [\"ROTATE\"]);\n  // }\n  // const isLayerAbsolute = !isNil(\n  //   layer.style.get(\"position\")\n  // );\n  // const isAutoHeight = layer.isHeightAuto;\n  // const isAutoWidth = layer.isWidthAuto;\n  // let handlesForAutoOrAbs = this.getHandlesForAutoOrAbsoluteLayer(\n  //   isAutoHeight,\n  //   isAutoWidth\n  // );\n\n  // if (isLayerAbsolute) {\n  //   handles = intersection(handles, handlesForAutoOrAbs);\n  // } else {\n  //   const handlesForFill = this.getHandlesForFill(layer);\n  //   let handlesHere = intersection(handlesForAutoOrAbs, handlesForFill);\n  //   handles = intersection(handles, handlesHere);\n  // }\n  // });\n  return handles;\n}\nfunction getHandlePoint(box: any, handle?: string) {\n  if (handle) {\n    let point = [box.x + box.width / 2, box.y];\n    switch (handle) {\n      case 'ROTATETL':\n        point = [box.x, box.y];\n        break;\n      case 'ROTATETR':\n        point = [box.x + box.width, box.y];\n        break;\n      case 'ROTATEL':\n        point = [box.x, box.y + box.height / 2];\n        break;\n      case 'ROTATER':\n        point = [box.x + box.width, box.y + box.height / 2];\n        break;\n      case 'ROTATEBL':\n        point = [box.x, box.y + box.height];\n        break;\n      case 'ROTATEB':\n        point = [box.x + box.width / 2, box.y + box.height];\n        break;\n      case 'ROTATEBR':\n        point = [box.x + box.width, box.y + box.height];\n        break;\n      default:\n        break;\n    }\n    return point;\n  } else return [box.x + box.width / 2, box.y - 28];\n}\n\nfunction getQuotient(a: any, b: any, c: any) {\n  return (b[0] - a[0]) * (c[1] - a[1]) - (b[1] - a[1]) * (c[0] - a[0]) > 0\n    ? -1\n    : 1;\n}\nexport function calculateRotation(\n  startValues: any,\n  session: any,\n  oldRotation?: number,\n  delta?: any,\n  handle?: string\n) {\n  let deltaInput = {\n    x: session.current.x - session.start.x,\n    y: session.current.y - session.start.y,\n  };\n\n  if (delta) {\n    deltaInput = delta;\n  }\n  const rotation = oldRotation ? oldRotation : startValues.rotation;\n  const point1 = getHandlePoint(startValues, handle);\n  const polygon = ModelUtils.getPointsFromBoundingBox(startValues);\n  const centroid = ModelUtils.getCentroid(polygon);\n  const point3 = [point1[0] + deltaInput.x, point1[1] + deltaInput.y];\n  let angle = ModelUtils.findAngle(point1, centroid, point3, 180);\n  angle = rotation + angle * getQuotient(point1, centroid, point3);\n  return angle;\n}\n\nexport function getNewLayout(startValues: any, session: any, handle: any) {\n  let newLayout: any;\n  let deltaX = session.current.deltaX;\n  let deltaY = session.current.deltaY;\n  if (handle.indexOf('ROTATE') !== -1) {\n    let rotation = calculateRotation(\n      startValues,\n      session,\n      undefined,\n      undefined,\n      handle\n    );\n    newLayout = { ...startValues, rotation };\n  } else {\n    if (handle === 'C') {\n      let rotateDelta = ModelUtils.rotatePoint(\n        [deltaX, deltaY],\n        startValues.rotation,\n        [0, 0]\n      );\n      deltaX = rotateDelta[0];\n      deltaY = rotateDelta[1];\n      newLayout = computeOrientationWithDelta(\n        startValues,\n        { x: deltaX, y: deltaY },\n        handle\n      );\n    } else {\n      newLayout = computeOrientationWithDelta(\n        startValues,\n        { x: deltaX, y: deltaY },\n        handle\n      );\n    }\n  }\n  if (newLayout.height === 0) {\n    newLayout.height = 0;\n  }\n  if (newLayout.width === 0) {\n    newLayout.width = 0;\n  }\n  return newLayout;\n}\n\nexport function generateRandomString(length: number) {\n  let result = '';\n  let characters = 'ABCDEFGHIJKLMNPQRSTUVWXYZabcdefghijklmnpqrstuvwxyz';\n  for (let i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * characters.length));\n  }\n  return result;\n}\n","import { IEventCallable } from './IEventCallable';\nimport { Event } from './index';\nexport class EventCallableRegsitry implements IEventCallable {\n  registry: Map<string, Array<(event: Event) => {}>>;\n\n  constructor() {\n    this.registry = new Map();\n  }\n\n  addEventListener(name: string, callback: any) {\n    let callbacks = this.registry.get(name);\n    if (callbacks) {\n      callbacks.push(callback);\n    } else {\n      this.registry.set(name, [callback]);\n    }\n  }\n\n  removeEventListener(name: string, callback: any) {\n    let callbacks = this.registry.get(name);\n    if (callbacks) {\n      const indexOf = callbacks.indexOf(callback);\n      if (indexOf > -1) {\n        callbacks.splice(indexOf, 1);\n      }\n    }\n  }\n\n  dispatchEvent(name: string, event: Event) {\n    // @ts-ignore\n    if (window['debug']) {\n      console.log('DEBUG::', 'Event:', name);\n    }\n    let callbacks = this.registry.get(name);\n    for (let i in callbacks) {\n      callbacks[i as any](event);\n      if (!event.propagate) break;\n    }\n  }\n}\n","import { Model } from './base-model';\nimport { types } from './serializable';\nimport { isNil, set, get } from 'lodash';\nexport class KeyValueContainer extends Model {\n  private data: any = {};\n  getFields(): {\n    [key: string]: any;\n  } {\n    return {\n      data: types.literal,\n    };\n  }\n  isValidKey(key: string) {\n    return true;\n  }\n  set(key: string | object, value?: any) {\n    if (typeof key == 'object') {\n      for (var prop in key) {\n        if (this.isValidKey(prop)) {\n          set(this.data, prop, (key as any)[prop]);\n          // this.data[prop] = (key as any)[prop];\n        } else {\n          throw new Error(\n            `Model KeyValueContainer Error: Invalid key '${prop}'`\n          );\n        }\n      }\n    } else {\n      if (this.isValidKey(key)) {\n        set(this.data, key, value);\n        // this.data[key] = value;\n      } else {\n        throw new Error(`Model KeyValueContainer Error: Invalid key '${key}'`);\n      }\n    }\n  }\n  get(key: string): any {\n    return get(this.data, key);\n  }\n  getAll() {\n    return this.data;\n  }\n  remove(key: string | object) {\n    if (typeof key === 'string' && !isNil(this.data[key])) {\n      delete this.data[key];\n    } else if (typeof key == 'object' && Array.isArray(key)) {\n      for (let i = 0; i < key.length; i++) {\n        if (key[i] && this.isValidKey(key[i])) {\n          delete this.data[key[i]];\n        } else {\n          throw new Error(\n            `Model KeyValueContainer Error: Invalid key '${key[i]}'`\n          );\n        }\n      }\n    }\n  }\n}\n","import { KeyValueContainer } from './KeyValueContainer';\nexport class Style extends KeyValueContainer {}\n","import { KeyValueContainer } from './KeyValueContainer';\nexport class Props extends KeyValueContainer {}\n","import { KeyValueContainer } from './KeyValueContainer';\nexport class Layout extends KeyValueContainer {\n  private validKeys = [\n    'left',\n    'right',\n    'width',\n    'top',\n    'bottom',\n    'height',\n    'position',\n    'flex',\n    'flexDirection',\n    'marginLeft',\n    'marginRight',\n    'marginBottom',\n    'marginTop',\n    'margin',\n    'border',\n    'justifyContent',\n    'alignItems',\n    'flexWrap',\n    'borderColor',\n    'borderStyle',\n    'borderLeftWidth',\n    'borderRightWidth',\n    'borderBottomWidth',\n    'borderTopWidth',\n    'borderWidth',\n    'alignSelf',\n    'alignContent',\n    'paddingLeft',\n    'paddingRight',\n    'paddingBottom',\n    'paddingTop',\n    'padding',\n    'lineHeight',\n    'transform',\n    'fontSize',\n    'fontFamily',\n    'fontWeight',\n    'fontStyle',\n    'fontPostscriptName',\n    'letterSpacing',\n  ];\n  isValidKey(key: string) {\n    return this.validKeys.indexOf(key) !== -1;\n  }\n}\n","import { Layer } from '../models/Layer';\n\nexport class Event {\n  target: Layer;\n  name: string;\n  // payload: any;\n  currentTarget: Layer | undefined;\n  private _propagate: boolean;\n  private _defaults: boolean;\n  constructor(name: string, target: Layer, currentTarget?: Layer) {\n    this.name = name;\n    this.target = target;\n    this.currentTarget = currentTarget;\n    this._propagate = true;\n    this._defaults = true;\n  }\n  get propagate() {\n    return this._propagate;\n  }\n  get defaults() {\n    return this._defaults;\n  }\n  stopPropagation() {\n    this._propagate = false;\n  }\n  preventDefault() {\n    this._defaults = false;\n  }\n}\n","import { Event } from './index';\nimport { Layer } from 'models/Layer';\n\nexport default class SetLayoutEvent extends Event {\n  constructor(name: string, target: Layer, currentTarget?: Layer) {\n    super(name, target, currentTarget);\n  }\n}\n","import { Layer } from '../models/Layer';\nimport { Event } from './index';\n\nexport default class RemoveChildEvent extends Event {\n  payload: any;\n  layer: Layer | null;\n  constructor(\n    name: string,\n    layer: Layer | null,\n    payload?: any,\n    currentTarget?: Layer\n  ) {\n    super(name, payload, currentTarget);\n    this.payload = payload;\n    this.layer = layer;\n  }\n}\n","import { Layer } from '../models/Layer';\nimport { last } from 'lodash';\n\nclass GlobalLayerUpdateController {\n  layerMap = new Map<Layer, any>();\n  get updateLayout(): boolean {\n    return this.updateLayoutCount === 0 ? true : false;\n  }\n  get updateChildrenLayout(): boolean {\n    return this.updateChildrenLayoutCount === 0 ? true : false;\n  }\n  get rerender(): boolean {\n    return this.rerenderCount === 0 ? true : false;\n  }\n\n  shouldBatch: Array<boolean> = [];\n  updateLayoutCount: number = 0;\n  updateChildrenLayoutCount: number = 0;\n  rerenderCount: number = 0;\n\n  shouldAddToBatch = () => {\n    return last(this.shouldBatch);\n  };\n  stopChildrenLayoutUpdates = () => {\n    this.updateChildrenLayoutCount++;\n  };\n  startChildrenLayoutUpdates = () => {\n    this.updateChildrenLayoutCount--;\n  };\n  stopRerender = () => {\n    this.rerenderCount++;\n  };\n  startRerender = () => {\n    this.rerenderCount--;\n  };\n\n  stopAndBatchLayoutUpdates = () => {\n    if (this.shouldAddToBatch() === false) {\n      this.shouldBatch.push(false);\n    } else {\n      this.shouldBatch.push(true);\n    }\n    this.updateLayoutCount++;\n  };\n\n  stopAndForgetLayoutUpdates = () => {\n    this.shouldBatch.push(false);\n    this.updateLayoutCount++;\n  };\n\n  resumeLayoutUpdates = () => {\n    this.updateLayoutCount--;\n    if (this.updateLayoutCount === 0) {\n      this.layerMap.forEach((value, layer) => {\n        layer.setYogaAfterBatch();\n        layer.onUpdateDom();\n      });\n      this.shouldBatch = [];\n      this.layerMap.clear();\n    }\n  };\n}\n\nexport const globalLayerUpdateController = new GlobalLayerUpdateController();\n\nexport const stopChildrenLayoutUpdates =\n  globalLayerUpdateController.stopChildrenLayoutUpdates;\nexport const startChildrenLayoutUpdates =\n  globalLayerUpdateController.startChildrenLayoutUpdates;\nexport const stopRerender = globalLayerUpdateController.stopRerender;\nexport const startRerender = globalLayerUpdateController.startRerender;\nexport const shouldAddToBatch = globalLayerUpdateController.shouldAddToBatch;\nexport const stopAndBatchLayoutUpdates =\n  globalLayerUpdateController.stopAndBatchLayoutUpdates;\nexport const stopAndForgetLayoutUpdates =\n  globalLayerUpdateController.stopAndForgetLayoutUpdates;\nexport const resumeLayoutUpdates =\n  globalLayerUpdateController.resumeLayoutUpdates;\n","import { yoga } from '@builderx-core/yogax';\nimport { Model, action } from './base-model';\nimport { types } from './serializable';\nimport {\n  isNil,\n  isArray,\n  orderBy,\n  findIndex,\n  keys,\n  remove,\n  forEach,\n  get,\n} from 'lodash';\nimport { Collisions } from 'detect-collisions';\nimport { v4 as uuid } from 'uuid';\n\nimport {\n  IDimensionWithRoot,\n  IContext,\n  IDimensionWithRotation,\n  IDimension,\n} from './../interfaces';\nimport ModelUtils, { getGradientString } from './utils';\nimport { EventCallableRegsitry } from '../events/EventCallableRegsitry';\nimport { IEventCallable } from '../events/IEventCallable';\nimport { Style } from './Style';\nimport { Props } from './Props';\nimport { Layout } from './Layout';\nimport { Canvas } from './Canvas';\nimport { Event } from '../events';\nimport SetLayoutEvent from '../events/SetLayoutEvent';\nimport RemoveChildEvent from '../events/RemoveChildEvent';\nimport {\n  stopRerender,\n  startRerender,\n  globalLayerUpdateController,\n} from './GlobalLayerUpdateController';\nimport { Gradient } from './Gradient';\nimport RenderEvent from '../events/RenderEvent';\nimport ReactDOM from 'react-dom';\nwindow['ReactDOM'] = ReactDOM;\nexport abstract class Layer extends Model implements IEventCallable {\n  private _name: string;\n  private _type: string;\n  private _parent: Layer | null;\n  private _props: Props;\n  private _children: Array<Layer>;\n  private _style: Style;\n  private _layout: Layout;\n  private _innerText?: string;\n  private _yogaNode: any;\n  private _collisionScope: Collisions | null;\n  private _collisionNode: any;\n  private _dims: IDimensionWithRotation;\n  private _domDims: IDimensionWithRotation | undefined;\n  private _dom: any;\n\n  private _mouseProps: any;\n  private _locked: boolean;\n  private _visible: boolean;\n  private _thirdParty: boolean = false;\n  private _dragging: boolean = false;\n  private _preservedProperties: {\n    locked: boolean;\n    opacity: number;\n    hidden: boolean;\n  };\n  private _eventCallableRegistry: EventCallableRegsitry = new EventCallableRegsitry();\n  private _canvas: Canvas;\n  private _aspectRatio: number | undefined;\n  private _id: string = uuid();\n  constructor(canvas?: Canvas) {\n    super();\n    this._name = 'layer';\n    this._type = 'view';\n    this._parent = null;\n    this._props = new Props();\n    this._children = [];\n    this._style = new Style();\n    this._layout = new Layout();\n    this._collisionScope = null;\n    let config = yoga.Config.create();\n    config.setPointScaleFactor(0);\n    this._yogaNode = yoga.Node.create(config);\n    this._yogaNode.setType(this._type);\n    let layout = this._layout.toJS();\n    this._locked = false;\n    this._visible = true;\n    this._aspectRatio = undefined;\n    this._preservedProperties = {\n      locked: false,\n      opacity: 1,\n      hidden: false,\n    };\n    // this._yogaNode.setProps(layout.data);\n    this._dims = {\n      x: 0,\n      y: 0,\n      height: 0,\n      width: 0,\n      rotation: 0,\n    };\n    // this._domDims = {\n    //   x: 0,\n    //   y: 0,\n    //   height: 0,\n    //   width: 0,\n    //   rotation: 0,\n    // };\n    this._mouseProps = {};\n\n    //@ts-ignore\n    this._canvas = canvas || (this as Canvas);\n\n    this.addEventListener('domDidMount', (event: RenderEvent) => {\n      event.stopPropagation();\n      // this._dom = event.target;\n      this._thirdParty = true;\n      this.setYoga();\n    });\n\n    this.addEventListener('domDidUpdate', (event: RenderEvent) => {\n      event.stopPropagation();\n      // this._dom = event.target;\n      this._thirdParty = true;\n      this.setYoga();\n    });\n  }\n  get aspectRatio() {\n    return this._aspectRatio;\n  }\n  setAspectRatio = (val: number | undefined) => {\n    this._aspectRatio = val;\n  };\n  setDomRef = (ref: any) => {\n    this._dom = ref;\n  };\n\n  setDragging = (dragging: boolean) => {\n    this._dragging = dragging;\n  };\n  getDomBoundingBox(dom: any, rotation: number) {\n    let left = 0;\n    let top = 0;\n    let width = 0;\n    let height = 0;\n    if (dom) {\n      left = dom.offsetLeft;\n      top = dom.offsetTop;\n      width = dom.offsetWidth;\n      height = dom.offsetHeight;\n\n      if (isNil(left) || isNil(top) || isNil(width) || isNil(height)) {\n        const clientRect = dom.getBoundingClientRect();\n        left = clientRect.left;\n        top = clientRect.top;\n        width = clientRect.width;\n\n        height = clientRect.height;\n\n        let parentDom = dom.parentElement;\n        while (parentDom && parentDom.getAttribute('data-virtual') === 'true') {\n          parentDom = parentDom.parentElement;\n        }\n\n        if (parentDom) {\n          const parentClientRect = dom.getBoundingClientRect();\n          left = left - parentClientRect.left;\n          top = top - parentClientRect.top;\n        }\n      }\n    }\n\n    const rect = {\n      top,\n      left,\n      width,\n      height,\n    };\n\n    return rect;\n  }\n\n  updateDomainCompileDimensions(ref: any) {\n    if (this.isAutoHeight() || this.isAutoWidth()) {\n      try {\n        const dom: any = ReactDOM.findDOMNode(ref);\n        const dims = { ...this.getDomBoundingBox(dom, 0) };\n\n        let width = this.style.get('width')\n          ? this.style.get('width')\n          : dims.width;\n        let height = this.style.get('height')\n          ? this.style.get('height')\n          : dims.height;\n\n        this._domDims = {\n          width: width,\n          height: height,\n          x: dims.left,\n          y: dims.top,\n          rotation: 0,\n        };\n      } catch (Error) {\n        // console.error(Error);\n        this._domDims = undefined;\n      }\n    } else {\n      this._domDims = undefined;\n    }\n  }\n\n  getCanvas(): Canvas {\n    return this._canvas;\n  }\n  get id() {\n    return this._id;\n  }\n  get dragging() {\n    return this._dragging;\n  }\n\n  getFields(): {\n    [key: string]: any;\n  } {\n    return {\n      type: types.literal,\n      props: Props,\n      style: Style,\n      layout: Layout,\n    };\n  }\n  get name() {\n    return this._name;\n  }\n  get parent() {\n    return this._parent;\n  }\n  get type() {\n    return this._type;\n  }\n  get props() {\n    return this._props;\n  }\n  get children() {\n    return this._children;\n  }\n  get style() {\n    return this._style;\n  }\n  get layout() {\n    return this._layout;\n  }\n  get yogaNode() {\n    return this._yogaNode;\n  }\n  get collisionScope() {\n    return this._collisionScope;\n  }\n  get collisionNode() {\n    return this._collisionNode;\n  }\n  setSelectable(val: boolean) {\n    if (val) {\n      this.unlock();\n    } else {\n      this.lock();\n    }\n  }\n  get locked() {\n    return this._locked;\n  }\n  get visible() {\n    return this._visible;\n  }\n  get innerText() {\n    return this._innerText;\n  }\n  get eventCallableRegistry() {\n    return this._eventCallableRegistry;\n  }\n  getBoundingClientRect(): IDimensionWithRoot & IDimensionWithRotation {\n    let dims = { ...this._dims };\n    if (this.parent) {\n      dims.x = dims.x - this.parent.getBorderLeft();\n      dims.y = dims.y - this.parent.getBorderTop();\n    }\n\n    return { ...dims, rootX: this.rootX, rootY: this.rootY };\n  }\n  getBounds(): IDimensionWithRotation {\n    return this._dims;\n  }\n  get rootX() {\n    let val = 0;\n    let parent = this.parent;\n    if (parent) {\n      let parentX = !isNil(parent.rootX) ? parent.rootX : parent._dims.x;\n      val = this._dims.x + parentX;\n    } else {\n      val = this._dims.x;\n    }\n\n    return val;\n  }\n\n  get rootY() {\n    let val = 0;\n    let parent = this.parent;\n    if (parent) {\n      let parentY = !isNil(parent.rootY) ? parent.rootY : parent._dims.y;\n      val = this._dims.y + parentY;\n    } else {\n      val = this._dims.y;\n    }\n    return val;\n  }\n  get rotation() {\n    let styleObj = this.layout.getAll();\n\n    let rotation = 0;\n    if (styleObj.transform) {\n      const transformValue = isArray(styleObj.transform)\n        ? styleObj.transform\n        : styleObj.transform['value'];\n\n      let index = findIndex(transformValue, (item: any) => {\n        let rotate = keys(item).indexOf('rotate');\n        return rotate !== -1 && !isNil(item['rotate']);\n      });\n      if (index > -1) {\n        let value: any =\n          transformValue[index]['rotate'] &&\n          transformValue[index]['rotate'].type\n            ? transformValue[index]['rotate'].value\n            : transformValue[index]['rotate'];\n        if (value && value.indexOf) {\n          if (value.indexOf('rad') > -1) {\n            value = parseFloat(value.slice(0, -3));\n            rotation = (value * 180) / Math.PI;\n          } else {\n            value = parseFloat(value.slice(0, -3));\n            rotation = value;\n          }\n        }\n      }\n    }\n\n    return rotation;\n  }\n\n  getMarginLeft() {\n    let margin = this.layout.get('marginLeft');\n    if (!margin) {\n      margin = this.layout.get('margin');\n    }\n    if (isNil(margin)) {\n      margin = 0;\n    }\n    return margin;\n  }\n  getMarginTop() {\n    let margin = this.layout.get('marginTop');\n    if (!margin) {\n      margin = this.layout.get('margin');\n    }\n    if (isNil(margin)) {\n      margin = 0;\n    }\n    return margin;\n  }\n  getPaddingLeft() {\n    let padding = this.layout.get('paddingLeft');\n    if (!padding) {\n      padding = this.layout.get('padding');\n    }\n    if (isNil(padding)) {\n      padding = 0;\n    }\n    return padding;\n  }\n  getPaddingTop() {\n    let padding = this.layout.get('paddingTop');\n    if (!padding) {\n      padding = this.layout.get('padding');\n    }\n    if (isNil(padding)) {\n      padding = 0;\n    }\n    return padding;\n  }\n  getBorderLeft() {\n    return this.yogaNode.getComputedBorder(yoga.EDGE_LEFT);\n  }\n  getBorderTop() {\n    return this.yogaNode.getComputedBorder(yoga.EDGE_TOP);\n  }\n  // DOC: Layer ops\n  setType(type: string) {\n    if (this._locked) {\n      // console.error('Mutations on locked layers not allowed');\n    }\n    this._type = type;\n    this.yogaNode.setType(type);\n\n    action(() => {\n      this.emit('type');\n    });\n  }\n  removeProp(key?: string) {\n    if (key) {\n      this._props.remove(key);\n      let yogaProps = { ...this._yogaNode.props, [key]: undefined };\n      this._yogaNode.setProps(yogaProps);\n      this.setYoga();\n    } else {\n      this._props = new Props();\n    }\n    action(() => {\n      this.emit('style');\n    });\n  }\n  setProp(key: string, value?: any) {\n    if (this._locked) {\n      // console.error('Mutations on locked layers not allowed');\n    }\n    this._props.set(key, value);\n    let yogaProps = { ...this._yogaNode.props, [key]: value };\n    this._yogaNode.setProps(yogaProps);\n    action(() => {\n      this.emit('props');\n    });\n    this.setYoga();\n  }\n  lock() {\n    this._locked = true;\n    action(() => {\n      this.emit('locked');\n    });\n  }\n  unlock() {\n    this._locked = false;\n    action(() => {\n      this.emit('locked');\n    });\n  }\n  show() {\n    if (\n      this._preservedProperties.hidden // Only apply show operations when the layer was hidden manually, prevents, applying uninteded default values in case show() is called without ever calling hide() first\n    ) {\n      this.children.forEach((child: Layer) => child.show());\n      this._visible = true;\n      this.unlock();\n      this.setStyle('opacity', this._preservedProperties.opacity);\n      if (this._preservedProperties.locked) {\n        this.lock();\n      }\n      this._preservedProperties.hidden = false;\n    }\n  }\n  hide(noShow?: boolean) {\n    if (!this._preservedProperties.hidden) {\n      this._visible = false;\n      this._preservedProperties = {\n        opacity: this._style.get('opacity'),\n        locked: this._locked,\n        hidden: true,\n      };\n      this.setStyle('opacity', 0);\n      this.lock();\n      this.children.forEach((child: Layer) => child.hide());\n    }\n  }\n  setName(name: string) {\n    if (this._locked) {\n      // console.error('Mutations on locked layers not allowed');\n    }\n    this._name = name;\n  }\n  setStyle(key: string | object, value?: any) {\n    if (this._locked) {\n      // console.error('Mutations on locked layers not allowed');\n    }\n    if (key === 'gradient') {\n      this._style.set(key, value);\n      if (!value) {\n        this._style.set('backgroundImage', '');\n      } else {\n        this._style.set(\n          'backgroundImage',\n          getGradientString(value as Gradient)\n        );\n      }\n    } else {\n      this._style.set(key, value);\n    }\n    action(() => {\n      this.emit('style');\n    });\n  }\n  private setParent(layer: Layer | null) {\n    this._parent = layer;\n  }\n  setCollisionScope = (scope: Collisions | null) => {\n    if (this._locked) {\n      // console.error('Mutations on locked layers not allowed');\n    }\n    this._collisionScope = scope;\n  };\n\n  executeFunction(name: string, ...args: any[]): any {\n    let parent: Canvas;\n    let layer: Layer = this;\n\n    while (layer.name !== 'canvas' && layer.parent) {\n      layer = layer.parent;\n    }\n\n    // @ts-ignore\n    parent = layer;\n    if (parent) {\n      const context: IContext = {\n        layer: this,\n        canvas: parent,\n      };\n\n      return parent.functionRegistry.executeFunction(name, context, ...args);\n    } else {\n      return new Promise((resolve, reject) => {\n        return reject('The layer doesnot belong to a canvas.');\n      });\n    }\n  }\n  addChild(layer: Layer, index?: number) {\n    if (this._locked) {\n      // console.error('Mutations on locked layers not allowed');\n    }\n    layer.setParent(this);\n    layer.setCollisionScope(this._collisionScope);\n    if (!isNil(index)) {\n      this._children.splice(index, 0, layer);\n    } else {\n      this._children.push(layer);\n    }\n    layer.addYogaNode(index);\n    layer.setCollisionNode();\n    this.calculateLayout();\n\n    // if (this._domDims) {\n    //   this.yogaNode.setHeight(this._domDims.height);\n    //   this.yogaNode.setWidth(this._domDims.width);\n    // }\n\n    this.setYoga();\n    action(() => {\n      this.emit('children');\n    });\n  }\n  removeChild(layer: Layer) {\n    if (this._locked) {\n      // console.error('Mutations on locked layers not allowed');\n    }\n    layer.removeCollisionNode();\n    const index = this._children.indexOf(layer);\n    if (index !== -1) {\n      let removeChildEvent = new RemoveChildEvent('removeChild', layer);\n      if (layer.parent) {\n        layer.parent.dispatchEvent('removeChild', removeChildEvent);\n      }\n      this._children.splice(index, 1);\n      this._yogaNode.removeChild(layer.yogaNode);\n      layer.setCollisionScope(null);\n      this.calculateLayout();\n      // this.setDims();\n\n      if (layer.isFlexChild()) {\n        if (layer.parent) {\n          layer.parent.children.forEach((child: Layer) => {\n            child.setDims();\n            child.setCollisionNode();\n          });\n        }\n      }\n      action(() => {\n        this.emit(['children', 'yogaNode']);\n      });\n    }\n  }\n  move(newParent: Layer, newIndex?: number) {\n    if (this._parent) {\n      this._parent.removeChild(this);\n    }\n    newParent.addChild(this, newIndex);\n\n    newParent.children.forEach((child: Layer) => {\n      if (child.isFlexChild()) {\n        child.setYoga();\n      }\n    });\n  }\n  // DOC: Yoga ops\n  getRootLayer(node?: Layer): any {\n    if (!node) {\n      node = this;\n    }\n    if (node.type === 'canvas') {\n      return node;\n    }\n    if (!node || !node.parent) {\n      return undefined;\n    }\n    return this.getRootLayer(node.parent);\n  }\n  private addYogaNode(index?: number) {\n    const parentLayer = this.parent;\n    if (parentLayer && parentLayer._yogaNode) {\n      if (parentLayer._yogaNode.getChildCount) {\n        if (isNil(index)) {\n          index = parentLayer.yogaNode.getChildCount();\n        }\n        if (!isNil(index)) {\n          if (parentLayer._yogaNode.insertChild) {\n            parentLayer._yogaNode.insertChild(this._yogaNode, index);\n          }\n        }\n      }\n    }\n  }\n  getComputedLayout() {\n    return this._yogaNode.getComputedLayout();\n  }\n  calculateLayout() {\n    // if (this._locked) {\n    //   return;\n    // }\n    let rootLayer = this.getRootLayer();\n    if (rootLayer && rootLayer.yogaNode) {\n      rootLayer.yogaNode.calculateLayout(\n        yoga.UNDEFINED,\n        yoga.UNDEFINED,\n        yoga.DIRECTION_LTR\n      );\n    } else {\n      this.yogaNode.calculateLayout(\n        yoga.UNDEFINED,\n        yoga.UNDEFINED,\n        yoga.DIRECTION_LTR\n      );\n    }\n    return this.getComputedLayout();\n  }\n\n  isFlexChild() {\n    const elementType = this._layout.get('position');\n    if (elementType && elementType === 'absolute') {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  getTotalFlexOfFlexChildren() {\n    let sumOfFlex: number = 0;\n    this.children.forEach((child: Layer, index: number) => {\n      const layerFlex = child.getFlexValue();\n      if (layerFlex !== undefined) {\n        sumOfFlex += layerFlex;\n      }\n    });\n    return sumOfFlex;\n  }\n\n  getParentLayerFlexDirection(): any {\n    let parentLayer;\n    // TODO: heavy jugaad\n    try {\n      parentLayer = this.parent;\n    } catch (err) {\n      console.log(err);\n    }\n    if (!parentLayer) {\n      return 'column';\n    }\n    const flexDirection = parentLayer.layout.get('flexDirection');\n    return flexDirection ? flexDirection : 'column';\n  }\n\n  isAutoWidth() {\n    const position = this.layout.get('position');\n    const property = this.layout.get('width');\n    if (!isNil(property)) {\n      return false;\n    }\n    if (position === 'absolute') {\n      let left, right;\n\n      left = this.layout.get('left');\n      right = this.layout.get('right');\n\n      if (!isNil(left) && !isNil(right)) {\n        return false;\n      } else {\n        return true;\n      }\n    } else {\n      const flexDirection = this.getParentLayerFlexDirection();\n      if (!flexDirection) {\n        return false;\n      }\n      if (flexDirection === 'row') {\n        // Main axis\n        const flex = this.layout.get('flex');\n        if (isNil(flex) || isNaN(flex)) {\n          return true;\n        } else {\n          return false;\n        }\n      } else {\n        // Cross axis\n        const flex = this.layout.get('flex');\n        const alignSelf = this.layout.get('alignSelf');\n        if ((isNil(flex) || isNaN(flex)) && alignSelf !== 'stretch') {\n          return true;\n        } else {\n          return false;\n        }\n      }\n    }\n  }\n\n  isAutoHeight() {\n    const position = this.layout.get('position');\n    const property = this.layout.get('height');\n    if (!isNil(property)) {\n      return false;\n    }\n    if (position === 'absolute') {\n      let top, bottom;\n      top = this.layout.get('top');\n      bottom = this.layout.get('bottom');\n\n      if (!isNil(top) && !isNil(bottom)) {\n        return false;\n      } else {\n        return true;\n      }\n    } else {\n      const flexDirection = this.getParentLayerFlexDirection();\n\n      if (!flexDirection) {\n        return false;\n      }\n      if (flexDirection !== 'row') {\n        // Main axis\n        const flex = this.layout.get('flex');\n\n        if (isNil(flex) || isNaN(flex)) {\n          return true;\n        } else {\n          return false;\n        }\n      } else {\n        // Cross axis\n        const alignSelf = this.layout.get('alignSelf');\n        const flex = this.layout.get('flex');\n        if ((isNil(flex) || isNaN(flex)) && alignSelf !== 'stretch') {\n          return true;\n        } else {\n          return false;\n        }\n      }\n    }\n  }\n\n  isFillWidth(): boolean {\n    const position = this.layout.get('position');\n    const property = this.layout.get('width');\n\n    if (!isNil(property)) {\n      return false;\n    }\n\n    if (position === 'absolute') {\n      let left, right;\n      left = this.layout.get('left');\n      right = this.layout.get('right');\n\n      if (!isNil(left) && !isNil(right)) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      const flexDirection = this.getParentLayerFlexDirection();\n\n      if (!flexDirection) {\n        return false;\n      }\n\n      if (flexDirection.indexOf('row') !== -1) {\n        // Main axis\n        const flex = this.layout.get('flex');\n        if (flex > 0) {\n          return true;\n        } else {\n          return false;\n        }\n      } else {\n        // Cross axis\n        const alignSelf = this.layout.get('alignSelf');\n        if (!alignSelf || alignSelf === 'stretch') {\n          return true;\n        } else {\n          return false;\n        }\n      }\n    }\n  }\n  isFillHeight(): boolean {\n    const position = this.layout.get('position');\n    const property = this.layout.get('height');\n\n    if (!isNil(property)) {\n      return false;\n    }\n\n    if (position === 'absolute') {\n      let top, bottom;\n      top = this.layout.get('top');\n      bottom = this.layout.get('bottom');\n      if (!isNil(top) && !isNil(bottom)) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      const flexDirection = this.getParentLayerFlexDirection();\n      if (!flexDirection) {\n        return false;\n      }\n      if (flexDirection.indexOf('column') !== -1) {\n        const flex = this.layout.get('flex');\n        if (flex > 0) {\n          return true;\n        } else {\n          return false;\n        }\n      } else {\n        const alignSelf = this.layout.get('alignSelf');\n        if (!alignSelf || alignSelf === 'stretch') {\n          return true;\n        } else {\n          return false;\n        }\n      }\n    }\n  }\n\n  getFlexValue() {\n    const flexGrow = this.layout.get('flexGrow');\n    const flex = this.layout.get('flex');\n\n    return flexGrow ? flexGrow : flex;\n  }\n\n  getSiblingsWithFlex(): Array<Layer> {\n    let siblingsWithFlex = new Array<Layer>();\n    let isFillWidth = this.isFillWidth();\n    let isFillHeight = this.isFillHeight();\n    if (this.parent instanceof Layer) {\n      this.parent.children.forEach((childLayer: Layer, index: number) => {\n        const flex = this.getFlexValue();\n        if (flex && this !== childLayer) {\n          if (\n            childLayer.isFillWidth() === isFillWidth &&\n            childLayer.isFillHeight() === isFillHeight\n          ) {\n            siblingsWithFlex.push(childLayer);\n          }\n        }\n      });\n    }\n    return siblingsWithFlex;\n  }\n\n  setYoga() {\n    // if (this._locked) {\n    //   return;\n    // }\n\n    if (globalLayerUpdateController.updateLayout) {\n      this.setYogaAfterBatch();\n    } else if (globalLayerUpdateController.shouldAddToBatch()) {\n      globalLayerUpdateController.layerMap.set(this, true);\n    }\n  }\n\n  setYogaAfterBatch() {\n    let layout = this._layout.toJS();\n    let yogaProps = {\n      ...this._yogaNode.props,\n      style: layout.data,\n    };\n    this._yogaNode.setProps(yogaProps);\n    this._yogaNode.updateNode(layout.data);\n\n    if (this._thirdParty) {\n      this.updateDomainCompileDimensions(this._dom);\n      if (this._domDims) {\n        this.yogaNode.setHeight(this._domDims.height);\n        this.yogaNode.setWidth(this._domDims.width);\n      }\n    }\n\n    this.calculateLayout();\n    this.setDims();\n    this.setCollisionNode();\n\n    // handle for special case\n\n    if (globalLayerUpdateController.rerender) {\n      action(() => {\n        this.emit('yoga');\n      });\n    }\n  }\n  setChildrenLayout(layer: Layer) {\n    // if (this._locked) {\n    //   return;\n    // }\n    layer.children.forEach((child: Layer) => {\n      child.setYoga();\n      this.setChildrenLayout(child);\n    });\n  }\n\n  private emitLayoutChanges = () => {\n    let setLayoutEvent = new SetLayoutEvent('setLayoutEvent', this);\n\n    if (globalLayerUpdateController.updateChildrenLayout) {\n      if (this.isFlexChild()) {\n        if (this.parent) {\n          this.setChildrenLayout(this.parent);\n        }\n      } else {\n        this.setChildrenLayout(this);\n      }\n    }\n\n    if (globalLayerUpdateController.rerender) {\n      if (!this._dragging) {\n        action(() => {\n          this.emit('layout');\n        });\n      } else {\n        if (globalLayerUpdateController.updateLayout) {\n          this.onUpdateDom();\n        }\n      }\n    }\n    this.dispatchEvent('setLayout', setLayoutEvent);\n  };\n\n  onUpdateDom = () => {\n    let style = this.layout.getAll();\n    if (this._dom) {\n      if (this._dom.setNativeProps) {\n        let updatedStyle = { ...style };\n\n        if (updatedStyle['textDecorationLine']) {\n          updatedStyle = {\n            ...updatedStyle,\n            textDecoration: updatedStyle['textDecorationLine'],\n          };\n        }\n        this._dom.setNativeProps({\n          style: updatedStyle,\n        });\n      } else {\n        try {\n          const dom: any = ReactDOM.findDOMNode(this._dom);\n          if (dom) {\n            const attributes = [\n              'top',\n              'left',\n              'width',\n              'height',\n              'right',\n              'bottom',\n            ];\n            forEach(style, (value: any, key: string) => {\n              if (attributes.indexOf(key) !== -1) {\n                dom.style[key] =\n                  typeof value === 'string' ? value : `${value}px`;\n              } else if (key === 'transform') {\n                const transform = get(value, '0.rotate');\n                if (!isNil(transform)) {\n                  dom.style[key] = `rotate(${transform})`;\n                }\n              }\n            });\n          }\n        } catch (Error) {\n          //\n        }\n      }\n      action(() => {\n        this.emit('updateDom');\n      });\n    } else {\n      // const layerName =\n      //   this.props.layer.type === 'thirdParty'\n      //     ? this.props.layer.layerName.toLowerCase()\n      //     : this.props.layer.type;\n      // const domById = document.getElementById(\n      //   `${this.props.layer.id}_${layerName}`\n      // );\n      // if (domById) {\n      //   forEach(style, (value: any, key: string) => {\n      //     if (attributes.indexOf(key) !== -1) {\n      //       domById.style[key] =\n      //         typeof value === 'string' ? value : `${value}px`;\n      //     } else if (key === 'transform') {\n      //       domById.style[key] = `rotate(${value[0].rotate})`;\n      //     }\n      //   });\n      // }\n    }\n  };\n\n  setLayout(key: string | object, value?: any) {\n    if (!this.parent && this.type !== 'canvas') {\n      throw new Error(\n        'setLayout cannot be called on an orphan layer. Use addChild to add it to another layer first.'\n      );\n    }\n    if (this._locked) {\n      // console.error('Mutations on locked layers not allowed');\n    }\n    this._layout.set(key, value);\n    this.setYoga();\n    this.emitLayoutChanges();\n  }\n\n  recalculateLayout() {\n    this.setYoga();\n    this.emitLayoutChanges();\n  }\n  removeLayout(key?: string | object) {\n    // if (key && !this._layout.isValidKey(key)) {\n    //   return;\n    // }\n    if (key) {\n      this._layout.remove(key);\n    } else {\n      this._layout = new Layout();\n    }\n    this.setYoga();\n    this.emitLayoutChanges();\n  }\n  removeStyle(key?: string) {\n    if (key) {\n      this._style.remove(key);\n    } else {\n      this._style = new Style();\n    }\n\n    action(() => {\n      this.emit('style');\n    });\n  }\n  isValidLayoutKey(key: string) {\n    return this._layout.isValidKey(key);\n  }\n  setViewport(key: string | object, value?: any) {\n    if (this._locked) {\n      // console.error('Mutations on locked layers not allowed');\n    }\n    this._layout.set(key, value);\n    let layout = this._layout.toJS();\n    this._yogaNode.setProps({ ...this._yogaNode.props, style: layout.data });\n    this._yogaNode.updateNode(layout.data);\n\n    this.calculateLayout();\n    this.setDims();\n    action(() => {\n      this.emit(['layout', 'yogaNode']);\n    });\n  }\n  setDims() {\n    let dims = this._yogaNode.getComputedLayout();\n\n    this._dims = {\n      x: dims.left,\n      y: dims.top,\n      height: dims.height || 0,\n      width: dims.width || 0,\n      rotation: this.rotation,\n    };\n\n    // if (this._yogaNode.parent) {\n    //   this._dims.x =\n    //     this._dims.x - this._yogaNode.parent.getComputedBorder(yoga.EDGE_LEFT);\n    //   this._dims.y =\n    //     this._dims.y - this._yogaNode.parent.getComputedBorder(yoga.EDGE_TOP);\n    // }\n  }\n\n  setHeight(height: any) {\n    this._dims.height = height;\n  }\n  setWidth(width: any) {\n    this._dims.width = width;\n  }\n  // DOC: Collision detection ops\n  getTransform() {\n    let newX = this.rootX;\n    let newY = this.rootY;\n    let points = [\n      [newX, newY],\n      [newX + this._dims.width, newY],\n      [newX + this._dims.width, newY + this._dims.height],\n      [newX, newY + this._dims.height],\n    ];\n    let centroid = ModelUtils.getCentroid(points);\n    let transformObj = {\n      rotate: {\n        rotation: this.rotation,\n        centroid: centroid,\n      },\n    };\n    let parent = this.parent;\n    if (!parent) {\n      return [transformObj];\n    }\n    let transformArray: any = [];\n    if (parent.getTransform && isArray(parent.getTransform())) {\n      [...parent.getTransform()].map((transform: any) => {\n        transformArray.push({ ...transform });\n      });\n    }\n    let array = [...transformArray];\n    array.push(transformObj);\n    return array;\n  }\n  getAbsoluteRotation() {\n    let dims = {\n      x: this.rootX || 0,\n      y: this.rootY || 0,\n      width: this._dims.width || 0,\n      height: this._dims.height || 0,\n      transform: this.getTransform(),\n    };\n    let poly = ModelUtils.getPointsFromDims(dims);\n    let angle = ModelUtils.getAbsoluteRotation(poly);\n    return angle;\n  }\n\n  getRotatedDims() {\n    let dims = {\n      x: this.rootX || 0,\n      y: this.rootY || 0,\n      rootX: this.rootY || 0,\n      rootY: this.rootY || 0,\n      width: this._dims.width > 0 ? this._dims.width : 1,\n      height: this._dims.height > 0 ? this._dims.height : 1,\n      transform: this.getTransform(),\n    };\n\n    let poly = ModelUtils.getPointsFromDims(dims);\n    let angle = this.getAbsoluteRotation ? this.getAbsoluteRotation() : 0;\n    let centroid = ModelUtils.getCentroid(poly); // rotate first point of polygon to get original x and y\n    let firstPoint = ModelUtils.rotatePoint(poly[0], 360 - angle, centroid);\n    let box = {\n      x: isNaN(firstPoint[0]) ? poly[0][0] : firstPoint[0],\n      y: isNaN(firstPoint[1]) ? poly[0][1] : firstPoint[1],\n      height: isNaN(this._dims.height) ? 0 : this._dims.height,\n      width: isNaN(this._dims.width) ? 0 : this._dims.width,\n      rotation: isNaN(angle) ? 0 : angle,\n    };\n    return box;\n  }\n\n  getRotatedPolygon() {\n    let dims = {\n      x: this.rootX || 0,\n      y: this.rootY || 0,\n      width: this._dims.width || 0,\n      height: this._dims.height || 0,\n      transform: this.getTransform(),\n    };\n\n    let poly = ModelUtils.getPointsFromDims(dims);\n\n    let angle = ModelUtils.getAbsoluteRotation(poly);\n\n    let centroid = ModelUtils.getCentroid(poly); // rotate first point of polygon to get original x and y\n\n    let firstPoint = ModelUtils.rotatePoint(poly[0], 360 - angle, centroid);\n\n    let box = {\n      centroid,\n      poly,\n      rotation: angle,\n    };\n    return box;\n\n    // let dims = {\n    //   x: this.rootX || 0,\n    //   y: this.rootY || 0,\n    //   width: this._dims.width || 0,\n    //   height: this._dims.height || 0,\n    //   transform: this.getTransform(),\n    // };\n\n    // let poly = ModelUtils.getPointsFromDims(dims);\n\n    // console.log(poly[0], poly[1], 'poly here');\n    // let angle = ModelUtils.getAbsoluteRotation(poly); //? ModelUtils.getAbsoluteRotation : 0;\n    // // let angle = 0;\n    // // let centroid = ModelUtils.getCentroid(poly); // rotate first point of polygon to get original x and y\n    // // let firstPoint = rotatePoint(poly[0], 360 - angle, centroid);\n    // let box = {\n    //   centroid,\n    //   poly,\n    //   rotation: angle,\n    // };\n    // return box;\n  }\n  private removeCollisionNode() {\n    if (this._collisionNode) {\n      this._collisionNode.remove();\n    }\n  }\n  private setCollisionNode() {\n    this.removeCollisionNode();\n    let dims = this.getRotatedPolygon();\n\n    const updatedPoly = dims.poly.map(coord => {\n      return [coord[0] - dims.centroid[0], coord[1] - dims.centroid[1]];\n    });\n\n    if (this._collisionScope) {\n      this._collisionNode = this._collisionScope.createPolygon(\n        dims.centroid[0],\n        dims.centroid[1],\n        updatedPoly,\n        0,\n        1,\n        1\n      );\n      this._collisionScope.update();\n\n      this._collisionNode.data = this;\n    }\n  }\n  getPartialPath(node?: any): string {\n    if (!node) {\n      node = this;\n    }\n    // if (!node.parent) {\n    //   return `0`;\n    //   // TODO: add this code + some other condition for center wrapper\n    //   // } else if (node.parent) {\n    //   //   // added this case for center wrapper, just ignoring it.\n    //   //   return `${this.getPartialPath(node.parent)}`;\n    // } else\n\n    if (node.parent && node.parent.children) {\n      const parentChildren: Array<any> = node.parent.children;\n      let childIndex = findIndex(parentChildren, (child: any) => {\n        if (child) {\n          return node === child;\n        }\n        return false;\n      });\n\n      const parentPath = this.getPartialPath(node.parent);\n\n      // if (appendString) {\n      //   return `${this.getPath(\n      //     node.parent,\n      //     appendString\n      //   )}.children.${childIndex}`;\n      // } else {\n      //   return `${this.getPath(node.parent, appendString)}.${childIndex}`;\n      // }\n\n      if (parentPath) {\n        return `${parentPath}.${childIndex}`;\n      } else {\n        return `${childIndex}`;\n      }\n    } else {\n      return '';\n    }\n  }\n  getDepth() {\n    if (this.parent) {\n      const parentDepth = this.parent.getDepth();\n      let depth: number = parentDepth + 1;\n\n      if (this.parent.style.get('pointerEvents') === 'none') {\n        depth--;\n      }\n      return depth;\n    }\n    return -1;\n  }\n  getIndexInParent(): number {\n    let parentLayer = this.parent;\n    // TODO: add this for center wrapper\n    // let currentLayer: any = this;\n    // if (this._type === 'view' && this._parent) {\n    //   currentLayer = this._parent;\n    //   parentLayer = this._parent._parent;\n    // }\n    if (parentLayer && parentLayer.children) {\n      return parentLayer.children.indexOf(this);\n    }\n    return 0;\n  }\n\n  getHitLayer(x: number, y: number) {\n    const hitLayers = this.getHitResult(x, y);\n    return hitLayers[hitLayers.length - 1];\n  }\n\n  getHitResult(x: number, y: number) {\n    let hitResult: Array<Layer>;\n\n    if (!this._collisionScope) {\n      return [];\n    }\n    this._collisionScope.update();\n    const result = this._collisionScope.createResult();\n    // Create the player (represented by a Circle)\n    const player = this._collisionScope.createPoint(x, y, 1);\n    const potentials = player.potentials();\n    let layersHit: Layer[] = [];\n    // Loop through the potential wall collisions\n    for (const shape of potentials) {\n      // Test if the player collides with the wall\n      if (player.collides(shape, result)) {\n        // Push the player out of the wall\n        // const dataShape = shape as any;\n        if (shape && layersHit.indexOf((shape as any).data) === -1) {\n          // const renderFile = dataShape.data.getFile();\n          // if (renderFile && renderFile.visible) {\n          layersHit.push((shape as any).data);\n          // }\n        }\n      }\n    }\n    this._collisionScope.remove(player);\n\n    layersHit = layersHit.sort((layer1: Layer, layer2: Layer) => {\n      return ModelUtils.depthComparator(\n        layer1.getPartialPath(),\n        layer2.getPartialPath()\n      );\n    });\n\n    let newHitLayers = [];\n\n    for (let i = 0; i < layersHit.length; i++) {\n      if (\n        !layersHit[i].locked &&\n        layersHit[i].style.get('pointerEvents') !== 'none' && // ignored layers shoudl not be included in the result\n        (i === layersHit.length - 1 || // If it's the last layer (i.e. top layer), there is no next layer to compare its depth to\n        layersHit[i].getDepth() !== layersHit[i + 1].getDepth() || // If layer has same depth as next layer, that means they are siblings, so don't include the current layer because it is behind the next layer\n          layersHit[i + 1].style.get('pointerEvents') === 'none') // If next layer is an ignored layer, we can include the current layer\n      ) {\n        newHitLayers.push(layersHit[i]);\n      }\n    }\n\n    hitResult = newHitLayers;\n\n    return this.getCanvas().executeMiddleware(\n      'Layer.getHitResult',\n      hitResult,\n      (hitResult: Array<Layer>) => {\n        return hitResult;\n      }\n    );\n  }\n  getHitRectResult(x: number, y: number, width: number, height: number) {\n    if (!this._collisionScope) {\n      return [];\n    }\n    // for all overlapping layers\n    const result = this._collisionScope.createResult();\n    // Create the player (represented by a Circle)\n    const player = this._collisionScope.createPolygon(\n      0,\n      0,\n      ModelUtils.getPointsFromBoundingBox({ x, y, width, height })\n    );\n    this._collisionScope.update();\n    const potentials = player.potentials();\n    let layersHit: Array<Layer> = [];\n    // Loop through the potential wall collisions\n    for (const shape of potentials) {\n      if (player.collides(shape, result)) {\n        if (shape && layersHit.indexOf((shape as any).data) === -1) {\n          const data = (shape as any).data;\n          if (\n            !data.locked &&\n            !(\n              x > data.rootX &&\n              y > data.rootY &&\n              width < data.width + data.rootX - x &&\n              height < data.height + data.rootY - y\n            )\n          ) {\n            layersHit.push(data);\n          }\n        }\n      }\n    }\n    this._collisionScope.remove(player);\n    layersHit = orderBy(\n      layersHit,\n      [\n        (layer: Layer) => layer.getDepth(),\n        (layer: Layer) => layer.getIndexInParent(),\n      ],\n      ['desc', 'desc']\n    );\n\n    remove(layersHit, layer => {\n      if (layer.style.get('pointerEvents') === 'none') {\n        return true;\n      }\n      return false;\n    });\n\n    return this.getCanvas().executeMiddleware(\n      'Layer.getHitRectResult',\n      layersHit,\n      (layersHit: Array<Layer>) => {\n        return layersHit;\n      }\n    );\n  }\n\n  addEventListener(name: string, callback: any) {\n    this._eventCallableRegistry.addEventListener(name, callback);\n  }\n  removeEventListener(name: string, callback: any) {\n    this._eventCallableRegistry.removeEventListener(name, callback);\n  }\n  dispatchEvent(name: string, event: Event, dispatchedData?: any) {\n    // this.getCanvas().executeMiddleware(\n    //   'Layer.dispatchEvent',\n    //   event,\n    //   (data: any) => {\n    if (this.style.get('pointerEvents') !== 'none') {\n      this._eventCallableRegistry.dispatchEvent(name, event);\n    }\n    if (event.propagate && this._parent) {\n      this._parent.dispatchEvent(name, event, dispatchedData);\n    }\n  }\n\n  setInnerText(text: string) {\n    if (this._locked) {\n      // console.error('Mutations on locked layers not allowed');\n    }\n    this._innerText = text;\n    this._yogaNode.children = text;\n\n    this.emitLayoutChanges();\n    action(() => {\n      this.emit('innerText');\n    });\n    this.setYoga();\n  }\n  getDimensions = (dims: IDimension, container: any) => {\n    let x = dims.x ? dims.x : 0;\n    let y = dims.y ? dims.y : 0;\n    let width = dims.width ? dims.width : 0;\n    let height = dims.height ? dims.height : 0;\n    let containerWidth = container.width;\n    let containerHeight = container.height;\n    let dimensions: any = {\n      left: { percent: undefined, number: undefined },\n      right: { percent: undefined, number: undefined },\n      top: { percent: undefined, number: undefined },\n      bottom: { percent: undefined, number: undefined },\n      width: { percent: undefined, number: undefined },\n      height: { percent: undefined, number: undefined },\n    };\n\n    dimensions.left.number = x;\n    dimensions.left.percent =\n      Math.round((dimensions.left.number / containerWidth) * 100 * 100) / 100 +\n      '%';\n    dimensions.right.number = containerWidth - (x + width);\n    dimensions.right.percent =\n      Math.round((dimensions.right.number / containerWidth) * 100 * 100) / 100 +\n      '%';\n    dimensions.width.number = width;\n    dimensions.width.percent =\n      Math.round((dimensions.width.number / containerWidth) * 100 * 100) / 100 +\n      '%';\n    dimensions.top.number = y;\n    dimensions.top.percent =\n      Math.round((dimensions.top.number / containerHeight) * 100 * 100) / 100 +\n      '%';\n    dimensions.bottom.number = containerHeight - (y + height);\n    dimensions.bottom.percent =\n      Math.round((dimensions.bottom.number / containerHeight) * 100 * 100) /\n        100 +\n      '%';\n    dimensions.height.number = height;\n    dimensions.height.percent =\n      Math.round((dimensions.height.number / containerHeight) * 100 * 100) /\n        100 +\n      '%';\n    return dimensions;\n  };\n\n  convertLayerDimensions(dims: IDimensionWithRotation) {\n    let scopeVariables = {};\n    let layer = this;\n    let layoutData: any = {};\n\n    const originalLeft = layer._layout.get('left');\n    const originalTop = layer._layout.get('top');\n    const originalRight = layer._layout.get('right');\n    const originalBottom = layer._layout.get('bottom');\n    const originalHeight = layer._layout.get('height');\n    const originalWidth = layer._layout.get('width');\n    const originalTransform = layer._layout.get('transform');\n    const position = layer._layout.get('position');\n\n    let newLeft, newRight, newTop, newBottom, newWidth, newHeight;\n\n    let container: any = {\n      width: this._parent ? this._parent.getBoundingClientRect().width : 1,\n      height: this._parent ? this._parent.getBoundingClientRect().height : 1,\n    };\n    let dimensions: any = this.getDimensions(dims, container);\n\n    if (!isNil(originalLeft)) {\n      if (typeof originalLeft === 'number') {\n        newLeft = dimensions.left.number;\n      }\n\n      if (typeof originalLeft === 'string' && originalLeft.endsWith('%')) {\n        newLeft = dimensions.left.percent;\n      }\n    }\n\n    if (!isNil(originalRight)) {\n      if (typeof originalRight === 'number') {\n        newRight = dimensions.right.number;\n      }\n\n      if (typeof originalRight === 'string' && originalRight.endsWith('%')) {\n        newRight = dimensions.right.percent;\n      }\n    }\n\n    if (!isNil(originalWidth)) {\n      if (typeof originalWidth === 'number') {\n        newWidth = dimensions.width.number;\n      }\n\n      if (typeof originalWidth === 'string' && originalWidth.endsWith('%')) {\n        newWidth = dimensions.width.percent;\n        if (layer.parent && layer.parent.type === 'thirdParty') {\n          newWidth = originalWidth;\n        }\n      }\n    }\n\n    if (!isNil(originalTop)) {\n      if (typeof originalTop === 'number') {\n        newTop = dimensions.top.number;\n      }\n\n      if (typeof originalTop === 'string' && originalTop.endsWith('%')) {\n        newTop = dimensions.top.percent;\n      }\n    }\n\n    if (!isNil(originalBottom)) {\n      if (typeof originalBottom === 'number') {\n        newBottom = dimensions.bottom.number;\n      }\n\n      if (typeof originalBottom === 'string' && originalBottom.endsWith('%')) {\n        newBottom = dimensions.bottom.percent;\n      }\n    }\n\n    if (!isNil(originalHeight)) {\n      if (typeof originalHeight === 'number') {\n        newHeight = dimensions.height.number;\n      }\n\n      if (typeof originalHeight === 'string' && originalHeight.endsWith('%')) {\n        newHeight = dimensions.height.percent;\n      }\n    }\n\n    if (!isNil(newLeft) && !isNil(dims.x)) {\n      layoutData.left = newLeft;\n    }\n\n    if (!isNil(newRight) && !isNil(dims.x)) {\n      layoutData.right = newRight;\n    }\n\n    if (\n      isNil(newLeft) &&\n      isNil(newRight) &&\n      position === 'absolute' &&\n      !isNil(dims.x)\n    ) {\n      layoutData.left = dims.x;\n    }\n\n    if (!isNil(newWidth) && !isNil(dims.width)) {\n      layoutData.width = newWidth;\n      // if (layer instanceof EllipseLayer) {\n      //   noRerender(() => {\n      //     const strokeWidth = layer.props.getResolvedProp('strokeWidth') || 0;\n      //     this.session.commandManager.executeAndSkip(\n      //       new SetProp(this.session, layer, 'cx', dimensions.width.number / 2)\n      //     );\n      //     this.session.commandManager.executeAndSkip(\n      //       new SetProp(\n      //         this.session,\n      //         layer,\n      //         'rx',\n      //         dimensions.width.number / 2 - strokeWidth / 2\n      //       )\n      //     );\n      //   });\n      // }\n    }\n\n    if (!isNil(newTop) && !isNil(dims.y)) {\n      layoutData.top = newTop;\n    }\n\n    if (!isNil(newBottom) && !isNil(dims.y)) {\n      layoutData.bottom = newBottom;\n    }\n\n    if (\n      isNil(newTop) &&\n      isNil(newBottom) &&\n      position === 'absolute' &&\n      !isNil(dims.y)\n    ) {\n      layoutData.top = dims.y;\n    }\n    if (!isNil(newHeight) && !isNil(dims.height)) {\n      layoutData.height = newHeight;\n      // if (layer instanceof EllipseLayer) {\n      //   noRerender(() => {\n      //     const strokeWidth = layer.props.getResolvedProp('strokeWidth') || 0;\n      //     this.session.commandManager.executeAndSkip(\n      //       new SetProp(this.session, layer, 'cy', dimensions.height.number / 2)\n      //     );\n      //     this.session.commandManager.executeAndSkip(\n      //       new SetProp(\n      //         this.session,\n      //         layer,\n      //         'ry',\n      //         dimensions.height.number / 2 - strokeWidth / 2\n      //       )\n      //     );\n      //   });\n      // }\n    }\n    // if (layer instanceof EllipseLayer) {\n    //   noRerender(() => {\n    //     const viewBoxWidth = dimensions.width.number.toFixed(2);\n    //     const viewBoxHeight = dimensions.height.number.toFixed(2);\n    //     this.session.commandManager.executeAndSkip(\n    //       new SetProp(\n    //         this.session,\n    //         layer,\n    //         'viewBox',\n    //         `0 0 ${viewBoxWidth} ${viewBoxHeight}`\n    //       )\n    //     );\n    //   });\n    // }\n    if (\n      !isNil(newLeft) &&\n      !isNil(newRight) &&\n      position === 'absolute' &&\n      !isNil(newWidth)\n    ) {\n      delete layoutData.right;\n    }\n\n    if (\n      !isNil(newTop) &&\n      !isNil(newBottom) &&\n      position === 'absolute' &&\n      !isNil(newHeight)\n    ) {\n      delete layoutData.bottom;\n    }\n    // if (\n    //   this.generateGradient &&\n    //   (layer instanceof ViewLayer || layer instanceof EllipseLayer) &&\n    //   !this.session.currentStage.tools.resizer.dragging\n    // ) {\n    //   if (layer.gradient && layer.gradient.getGradientType()) {\n    //     this.session.commandManager.executeAndSkip(\n    //       new GenerateGradientImage(this.session, layer)\n    //     );\n    //   }\n    // }\n\n    // if (\n    //   this.session.currentStage.id === 'layer' &&\n    //   this.session.currentRootLayer instanceof ScrollViewLayer\n    // ) {\n    //   CommandUtils.setScrollViewContentContainerStyle(\n    //     this.session,\n    //     this.session.currentRootLayer\n    //   );\n    // }\n\n    // TODO: FIXME: temporary fix for text drag color bug, need to see in computeYogaNode()\n    // if (color) {\n    //   this.session.commandManager.executeAndSkip(\n    //     new SetStyleAttribute(this.session, layer, 'color', color)\n    //   );\n    // }\n\n    // if (!this.session.currentStage.tools.resizer.dragging) {\n    //   this.session.commandManager.executeAndSkip(\n    //     new SetFileDirty(this.session, true)\n    //   );\n    // }\n\n    if (layer.isFlexChild()) {\n      delete layoutData.top;\n      delete layoutData.left;\n      delete layoutData.bottom;\n      delete layoutData.right;\n    }\n\n    let transformValue = undefined;\n\n    if (!isNil(dims.rotation)) {\n      transformValue = [{ rotate: `${dims.rotation}deg` }];\n    }\n    return {\n      ...layoutData,\n      transform: transformValue,\n    };\n  }\n\n  rerenderDescendants() {\n    action(() => {\n      this.emit(['layout', 'style', 'children']);\n    });\n    this._children.forEach(c => {\n      c.rerenderDescendants();\n    });\n  }\n}\n\nexport class LayerInstantiable extends Layer {}\n","export default class MiddlewareRegistry {\n  _middlewares: Map<string, Array<any>>;\n  constructor() {\n    this._middlewares = new Map();\n  }\n\n  addMiddleware = (type: string, callback: any) => {\n    let middlewares = this._middlewares.get(type);\n    if (middlewares) {\n      middlewares.push(callback);\n    } else {\n      this._middlewares.set(type, [callback]);\n    }\n  };\n\n  execute(middlewareCallbacks: Array<any>, cb: any, data: any) {\n    const self = this;\n    if (middlewareCallbacks.length === 0) {\n      return cb(data);\n    } else {\n      const mw = middlewareCallbacks[0];\n      const remainingCbs = [...middlewareCallbacks];\n      remainingCbs.splice(0, 1);\n\n      const next = (_data: any) => {\n        return self.execute(remainingCbs, cb, _data);\n      };\n      return mw(next, data);\n    }\n  }\n  executeMiddleware(type: string, data: any, callback: any) {\n    const middlewares = this._middlewares.get(type);\n    if (middlewares) {\n      // @ts-ignore\n      if (window['debug'] && window['debugLog']) {\n        // @ts-ignore\n        window['debugLog']('Middleware: ' + type);\n      }\n      return this.execute(middlewares, callback, data);\n    } else {\n      return callback(data);\n    }\n  }\n}\n","export default class FunctionRegistry {\n  _functions: Map<string, Function>;\n  constructor() {\n    this._functions = new Map();\n  }\n\n  // Adding to the Map of functions\n  addFunction = (name: string, callback: any) => {\n    this._functions.set(name, callback);\n  };\n\n  // Executing the callback of the function with the given arguments\n  executeFunction = (name: string, ...args: any[]) => {\n    let fn = this._functions.get(name);\n    if (fn) {\n      return fn(...args);\n    } else {\n      throw new Error(`No function with the given name(${name}) found.`);\n    }\n  };\n\n  // Removing the callback of the given function\n  removeFunction = (name: string) => {\n    this._functions.delete(name);\n  };\n}\n","import { Layer } from '../models/Layer';\nimport { Event } from './index';\nimport { Canvas } from 'models/Canvas';\nexport default class DesignerMouseEvent extends Event {\n  originalEvent: any;\n  worldX: number;\n  worldY: number;\n  viewportX: number;\n  viewportY: number;\n  pageX: number;\n  pageY: number;\n  constructor(\n    name: string,\n    target: Layer,\n    originalEvent: any,\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    const canvas: Canvas = target.getCanvas();\n    const { pageX, pageY } = originalEvent;\n    this.originalEvent = originalEvent;\n    this.pageX = pageX;\n    this.pageY = pageY;\n\n    let worldPoints = canvas.convertPoint(\n      { x: pageX, y: pageY },\n      'page',\n      'world'\n    );\n\n    this.worldX = worldPoints.x;\n    this.worldY = worldPoints.y;\n\n    let viewportPoints = canvas.convertPoint(\n      { x: pageX, y: pageY },\n      'page',\n      'viewport'\n    );\n\n    this.viewportX = viewportPoints.x;\n    this.viewportY = viewportPoints.y;\n  }\n\n  preventDefault() {\n    super.preventDefault();\n    if (this.originalEvent && this.originalEvent.preventDefault) {\n      this.originalEvent.preventDefault();\n    }\n  }\n}\n","import { Layer } from '../models/Layer';\nimport { Event } from './index';\nimport { Canvas } from 'models/Canvas';\nexport default class DesignerDropEvent extends Event {\n  originalEvent: any;\n  worldX: number;\n  worldY: number;\n  viewportX: number;\n  viewportY: number;\n  pageX: number;\n  pageY: number;\n\n  constructor(\n    name: string,\n    target: Layer,\n    originalEvent: any,\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    const canvas: Canvas = target.getCanvas();\n    const { pageX, pageY } = originalEvent;\n    this.originalEvent = originalEvent;\n    this.pageX = pageX;\n    this.pageY = pageY;\n\n    let worldPoints = canvas.convertPoint(\n      { x: pageX, y: pageY },\n      'page',\n      'world'\n    );\n\n    this.worldX = worldPoints.x;\n    this.worldY = worldPoints.y;\n\n    let viewportPoints = canvas.convertPoint(\n      { x: pageX, y: pageY },\n      'page',\n      'viewport'\n    );\n\n    this.viewportX = viewportPoints.x;\n    this.viewportY = viewportPoints.y;\n  }\n}\n","import { Layer } from '../models/Layer';\nimport { Event } from './index';\nexport default class HoverEvent extends Event {\n  payload: Array<Layer>;\n  constructor(\n    name: string,\n    target: Layer,\n    payload: Array<Layer>,\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    this.payload = payload;\n  }\n}\n","import { Layer } from '../models/Layer';\nimport { Event } from './index';\nimport { Canvas } from 'models/Canvas';\nexport default class SetScrollEvent extends Event {\n  scrollX: number;\n  scrollY: number;\n\n  constructor(\n    name: string,\n    target: Layer,\n    originalEvent: any,\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    this.scrollX = originalEvent.x;\n    this.scrollY = originalEvent.y;\n  }\n}\n","import { Layer } from '../models/Layer';\nimport { Event } from './index';\nimport { Canvas } from 'models/Canvas';\nexport default class SetZoomEvent extends Event {\n  zoom: number;\n\n  constructor(\n    name: string,\n    target: Layer,\n    zoom: number,\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    this.zoom = zoom;\n  }\n}\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Collisions } from 'detect-collisions';\nimport { DesignerReact } from '../components/DesignerReact';\nimport { action } from './base-model';\nimport {\n  IPosition,\n  IComponentMap,\n  IComponentDefinition,\n  IContext,\n} from './../interfaces';\nimport { isEmpty, maxBy, minBy } from 'lodash';\nimport { LayerInstantiable as Layer } from './Layer';\nimport { IPlugin, IDimensionWithRotation } from 'interfaces';\nimport MiddlewareRegistry from './MiddlewareRegistry';\nimport FunctionRegistry from './FunctionRegistry';\nimport DesignerMouseEvent from '../events/MouseEvent';\nimport ModelUtils from './../models/utils';\nimport DesignerDropEvent from '../events/DropEvent';\nimport HoverEvent from '../events/HoverEvent';\nimport { globalLayerUpdateController } from './GlobalLayerUpdateController';\nimport SetScrollEvent from '../events/SetScrollEvent';\nimport SetZoomEvent from '../events/SetZoomEvent';\nimport { ASSET_URL } from './../constants';\n\nexport class Canvas extends Layer {\n  private plugins = new Map<string, IPlugin>();\n  private dom: any;\n  private zoom: number = 1;\n  private _mouseCursorType: any;\n  private scroll: IPosition = {\n    x: 0,\n    y: 0,\n  };\n  private viewport: {\n    width: number;\n    height: number;\n  };\n  private _viewportRef: any;\n  private _hoveredLayers: Array<Layer>;\n  private _selectedLayers: Array<Layer>;\n  private _stackWorldDOM: Array<any>;\n  private _stackViewportDOM: Array<any>;\n  private _middlewareRegistry: MiddlewareRegistry = new MiddlewareRegistry();\n  private _functionRegistry: FunctionRegistry = new FunctionRegistry();\n  private _componentMap: IComponentMap = {};\n  private _isMouseDown: boolean = false;\n  private _assetURL: string = ASSET_URL;\n  private _mouseEventsBlocked: boolean = false;\n  moveWithGrabHandle: boolean = false;\n  constructor(dom: any) {\n    super();\n    this.dom = dom;\n    this.viewport = {\n      width: 0,\n      height: 0,\n    };\n    this.setType('canvas');\n    this.setCollisionScope(new Collisions());\n    this._hoveredLayers = [];\n    this._selectedLayers = [];\n    this._stackWorldDOM = [];\n    this._stackViewportDOM = [];\n    ReactDOM.render(<DesignerReact canvas={this} />, this.dom);\n    this.addFunction('setScroll', this.setScrollCallback.bind(this));\n    this.addFunction('setZoom', this.setZoomCallback.bind(this));\n  }\n  setMouseCursor(mouseCursorType: string) {\n    this._mouseCursorType = mouseCursorType;\n    action(() => {\n      this.emit('mouseCursorType');\n    });\n  }\n  setScrollCallback(context: IContext, scrollDims: any) {\n    this.dispatchEvent(\n      'setScroll',\n      new SetScrollEvent('setScroll', this, scrollDims)\n    );\n  }\n  setZoomCallback(context: IContext, zoom: number) {\n    this.dispatchEvent('setZoom', new SetZoomEvent('setZoom', this, zoom));\n  }\n  get mouseEventsBlocked() {\n    return this._mouseEventsBlocked;\n  }\n  blockMouseEvents() {\n    this._mouseEventsBlocked = true;\n    action(() => {\n      this.emit('mouseEventsBlocked');\n    });\n  }\n  unblockMouseEvents() {\n    this._mouseEventsBlocked = false;\n    action(() => {\n      this.emit('mouseEventsBlocked');\n    });\n  }\n  get functionRegistry() {\n    return this._functionRegistry;\n  }\n\n  createLayer() {\n    return new Layer(this);\n  }\n\n  addMiddleware(name: string, callback: (next: Function, data: any) => any) {\n    this._middlewareRegistry.addMiddleware(name, callback);\n  }\n  executeMiddleware(name: string, data: any, callback: any) {\n    return this._middlewareRegistry.executeMiddleware(name, data, callback);\n  }\n  // dispatchEvent(name: string, event: Event) {\n  //   this._eventCallableRegistry.dispatchEvent(name, event);\n  //   if (event.propagate)\n  //     if (this._parent) this._parent.dispatchEvent(name, event);\n  // }\n\n  addFunction(\n    name: string,\n    callback: (context: IContext, ...args: any[]) => any\n  ) {\n    this._functionRegistry.addFunction(name, callback);\n  }\n\n  removeFunction(name: string) {\n    this._functionRegistry.removeFunction(name);\n  }\n\n  setAssetUrl(url: string) {\n    this._assetURL = url;\n  }\n  // DOC: canvas ops\n  setViewport(dims: { width: number; height: number }) {\n    this.viewport.width = dims.width;\n    this.viewport.height = dims.height;\n    action(() => {\n      this.emit('viewport');\n    });\n  }\n\n  setViewportRef(ref: any) {\n    this._viewportRef = ref;\n  }\n  getViewport() {\n    return this.viewport;\n  }\n  setZoom(zoom: number) {\n    this.zoom = zoom;\n    action(() => {\n      this.emit('zoom');\n    });\n  }\n  getZoom(): number {\n    return this.zoom;\n  }\n  setScroll(scroll: IPosition) {\n    this.scroll = scroll;\n    action(() => {\n      this.emit('scroll');\n    });\n  }\n  getScroll(): IPosition {\n    return this.scroll;\n  }\n  get assetURL() {\n    return this._assetURL;\n  }\n  get hoveredLayers() {\n    return this._hoveredLayers;\n  }\n  get mouseCursorType() {\n    return this._mouseCursorType;\n  }\n  get selectedLayers() {\n    return this._selectedLayers;\n  }\n  get stackWorldDOM(): Array<any> {\n    return this._stackWorldDOM;\n  }\n  get stackViewportDOM(): Array<any> {\n    return this._stackViewportDOM;\n  }\n  get componentMap(): IComponentMap {\n    return this._componentMap;\n  }\n\n  get isMouseDown(): boolean {\n    return this._isMouseDown;\n  }\n  setMouseDown(val: boolean) {\n    this._isMouseDown = val;\n    if (this.moveWithGrabHandle) {\n      this.setMouseCursor(val ? '-webkit-grabbing' : '-webkit-grab');\n    }\n  }\n\n  setHoverLayers(layers: Array<Layer> | Layer | undefined) {\n    this._hoveredLayers = [];\n    if (layers) {\n      if (Array.isArray(layers)) {\n        layers.forEach((layer: Layer) => {\n          if (!layer.locked) {\n            this._hoveredLayers.push(layer);\n          }\n        });\n      } else if (!layers.locked) {\n        this._hoveredLayers = [layers];\n      }\n    }\n    action(() => {\n      this.emit('hoveredLayers');\n    });\n  }\n  selectLayers(layers: Array<Layer> | Layer | undefined) {\n    this._selectedLayers = [];\n    if (layers) {\n      if (Array.isArray(layers)) {\n        layers.forEach((layer: Layer) => {\n          if (!layer.locked) {\n            this._selectedLayers.push(layer);\n          }\n        });\n      } else if (!layers.locked) {\n        this._selectedLayers = [layers];\n      }\n    }\n    if (globalLayerUpdateController.rerender) {\n      action(() => {\n        this.emit('selectedLayers');\n      });\n    }\n  }\n\n  private convertPointFromViewportToWorld(x: number, y: number) {\n    let viewPortLeftPos =\n      (this.layout.get('width') - this.viewport.width / this.zoom) *\n      this.scroll.x;\n    let viewPortTopPos =\n      (this.layout.get('height') - this.viewport.height / this.zoom) *\n      this.scroll.y;\n    return {\n      x: viewPortLeftPos + x / this.zoom,\n      y: viewPortTopPos + y / this.zoom,\n    };\n  }\n  private convertPointFromWorldToViewport(x: number, y: number) {\n    let viewPortLeftPos =\n      (this.layout.get('width') - this.viewport.width / this.zoom) *\n      this.scroll.x;\n    let viewPortTopPos =\n      (this.layout.get('height') - this.viewport.height / this.zoom) *\n      this.scroll.y;\n\n    return {\n      x: (x - viewPortLeftPos) * this.zoom,\n      y: (y - viewPortTopPos) * this.zoom,\n    };\n  }\n  private convertPointFromPageToViewport(x: number, y: number) {\n    const pageScrollY = document.documentElement.scrollTop;\n    const pageScrollX = document.documentElement.scrollLeft;\n    const viewportDom = ReactDOM.findDOMNode(this._viewportRef);\n\n    let offsetLeft = 0;\n    let offsetTop = 0;\n    if (viewportDom) {\n      // @ts-ignore\n      const clientRect = viewportDom.getBoundingClientRect();\n      offsetLeft = clientRect.x;\n      offsetTop = clientRect.y;\n    }\n\n    return {\n      x: x - pageScrollX - offsetLeft,\n      y: y - pageScrollY - offsetTop,\n    };\n  }\n  private convertPointFromViewportToPage(x: number, y: number) {\n    const pageScrollY = document.documentElement.scrollTop;\n    const pageScrollX = document.documentElement.scrollLeft;\n    const viewportDom = ReactDOM.findDOMNode(this._viewportRef);\n\n    let offsetLeft = 0;\n    let offsetTop = 0;\n    if (viewportDom) {\n      // @ts-ignore\n      const clientRect = viewportDom.getBoundingClientRect();\n      offsetLeft = clientRect.x;\n      offsetTop = clientRect.y;\n    }\n    return {\n      x: x + pageScrollX + offsetLeft,\n      y: y + pageScrollY + offsetTop,\n    };\n  }\n\n  convertPoint = (\n    point: IPosition,\n    from: 'viewport' | 'page' | 'world',\n    to: 'viewport' | 'page' | 'world'\n  ) => {\n    let resultPoint: IPosition = { x: 0, y: 0 };\n    if (from === 'viewport') {\n      switch (to) {\n        case 'page':\n          resultPoint = this.convertPointFromViewportToPage(point.x, point.y);\n          break;\n        case 'world':\n          resultPoint = this.convertPointFromViewportToWorld(point.x, point.y);\n          break;\n      }\n    }\n    if (from === 'page') {\n      switch (to) {\n        case 'viewport':\n          resultPoint = this.convertPointFromPageToViewport(point.x, point.y);\n          break;\n        case 'world':\n          const viewport = this.convertPointFromPageToViewport(\n            point.x,\n            point.y\n          );\n          resultPoint = this.convertPointFromViewportToWorld(\n            viewport.x,\n            viewport.y\n          );\n          break;\n      }\n    }\n    if (from === 'world') {\n      switch (to) {\n        case 'viewport':\n          resultPoint = this.convertPointFromWorldToViewport(point.x, point.y);\n          break;\n        case 'page':\n          const world = this.convertPointFromWorldToViewport(point.x, point.y);\n          resultPoint = this.convertPointFromViewportToPage(world.x, world.y);\n          break;\n      }\n    }\n    return resultPoint;\n  };\n\n  installPlugin(plugin: IPlugin) {\n    this.plugins.set(plugin.name, plugin);\n    plugin.init(this);\n    plugin.activate();\n  }\n  dispatchEventOnHitLayer(\n    name: string,\n    event: DesignerMouseEvent,\n    dispatchedData?: any\n  ) {\n    // @ts-ignore\n    if (window['debug'] && window['debugLog']) {\n      // @ts-ignore\n      window['debugLog']('CanvasEvent:HitLayer ' + name);\n    }\n\n    let layer: any;\n\n    if (name !== 'drag') {\n      layer = this.getHitLayer(event.worldX, event.worldY);\n    }\n    if (layer) {\n      event.target = layer;\n      this._middlewareRegistry.executeMiddleware(\n        'Canvas.dispatchEventOnHitLayer',\n        event,\n        (event: any) => {\n          if (name === 'mousemove') {\n            if (!this.dragging) {\n              this.dispatchEvent(\n                'Canvas.hoverLayers',\n                new HoverEvent(\n                  'Canvas.hoverLayers',\n                  this,\n                  event.target ? [event.target] : []\n                )\n              );\n            }\n          }\n          layer.dispatchEvent(name, event, dispatchedData);\n        }\n      );\n    } else {\n      this.dispatchEvent(name, event, dispatchedData);\n    }\n  }\n  addComponent(\n    type: string,\n    ReactComponent: React.ComponentClass<any, any>,\n    componentDefinition: IComponentDefinition\n  ) {\n    this.componentMap[type] = {\n      renderer: ReactComponent,\n      definition: componentDefinition,\n    };\n  }\n\n  getComponentDefinition(type: string) {\n    try {\n      return this.componentMap[type].definition;\n    } catch (err) {\n      throw new Error(`Component Definition for ${type} not found`);\n    }\n  }\n\n  getRenderer(type: string): React.ComponentClass<any, any> {\n    try {\n      return this.componentMap[type].renderer;\n    } catch (err) {\n      throw new Error('Renderer not found');\n    }\n  }\n  addDomToWorld(\n    domElement: any,\n    maintainScale: boolean = false,\n    zIndex?: number\n  ): () => void {\n    let wrapperLayer = domElement;\n\n    if (maintainScale) {\n      let canvasDims = this.getBoundingClientRect();\n      wrapperLayer = document.createElement('div');\n      // wrapperLayer.style.background = 'rgba(255, 0,0,0.4)';\n      wrapperLayer.style.height = canvasDims.height + 'px';\n      wrapperLayer.style.width = canvasDims.width + 'px';\n      wrapperLayer.style.top = canvasDims.y + 'px';\n      wrapperLayer.style.left = canvasDims.x + 'px';\n      wrapperLayer.style.pointerEvents = 'none';\n      wrapperLayer.style.position = 'absolute';\n      wrapperLayer.style.zIndex = zIndex ? zIndex : undefined;\n\n      this.on('zoom', (e: any) => {\n        wrapperLayer.style.transform = `scale(${1 / this.getZoom()})`;\n        wrapperLayer.style.zoom = this.getZoom();\n      });\n      wrapperLayer.style.transform = `scale(${1 / this.getZoom()})`;\n      wrapperLayer.style.transformOrigin = `0 0`;\n      wrapperLayer.style.zoom = this.getZoom();\n\n      wrapperLayer.appendChild(domElement);\n    }\n    this._stackWorldDOM.push(wrapperLayer);\n    domElement.style.pointerEvents = 'all';\n    action(() => {\n      this.emit('stackWorldDOM');\n    });\n    return this.removeDomFromWorld.bind(this, wrapperLayer);\n  }\n  removeDomFromWorld(ele: any) {\n    let index = this._stackWorldDOM.indexOf(ele);\n    if (index !== -1) {\n      this._stackWorldDOM.splice(index, 1);\n      action(() => {\n        this.emit('stackWorldDOM');\n      });\n    }\n  }\n  addDomToViewport(domElement: any) {\n    this._stackViewportDOM.push(domElement);\n    domElement.style.pointerEvents = 'all';\n    action(() => {\n      this.emit('stackViewportDOM');\n    });\n    return this.removeDomFromViewport.bind(this, domElement);\n  }\n  removeDomFromViewport(ele: string) {\n    let index = this._stackViewportDOM.indexOf(ele);\n\n    if (index !== -1) {\n      this._stackViewportDOM.splice(index, 1);\n      action(() => {\n        this.emit('stackViewportDOM');\n      });\n    }\n  }\n  dispatchHandledEvent(event: any) {\n    const originalEvent = event.nativeEvent ? event.nativeEvent : event;\n    this.dispatchEventOnHitLayer(\n      event.type,\n      new DesignerMouseEvent(event.type, this, originalEvent, this),\n      event\n    );\n  }\n\n  handleNativeEvent(event: React.MouseEvent | MouseEvent) {\n    this._middlewareRegistry.executeMiddleware(\n      'Canvas.handleNativeEvent',\n      event,\n      (event: any) => {\n        switch (event.type) {\n          case 'click':\n            // if (!this.dragging) {\n            //   this.dispatchHandledEvent(event);\n            // }\n            break;\n          case 'mousemove':\n            if (this.isMouseDown && !this.dragging) {\n              this.setDragging(true);\n            }\n            // if (!this.dragging) {\n            this.dispatchHandledEvent(event);\n            // }\n            break;\n          case 'mousedown':\n            this.setMouseDown(true);\n            this.dispatchHandledEvent(event);\n            break;\n          case 'mouseenter':\n            this.dispatchHandledEvent(event);\n            break;\n          case 'mouseup':\n            // event.type = 'click';\n\n            this.dispatchHandledEvent(event);\n            this.setMouseDown(false);\n            if (!this.dragging) {\n              event = new MouseEvent('click', event);\n              // event.type = 'click';\n              this.dispatchHandledEvent(event);\n            }\n            this.setDragging(false);\n            break;\n          case 'contextmenu':\n          case 'dblclick':\n            this.dispatchHandledEvent(event);\n            break;\n          case 'drop':\n            this.dispatchEvent(\n              event.type,\n              new DesignerDropEvent(event.type, this, event.nativeEvent, this),\n              event\n            );\n            break;\n          default:\n          // this.dispatchCanvasEvent(\n          //   e.type,\n          //   new Event(e.type, this, this),\n          //   data\n          // );\n          // break;\n        }\n      }\n    );\n    // if (beforeHandleNativeEventMiddleware) {\n\n    // });\n    // beforeHandleNativeEventMiddleware[0](next);\n    // console.log('middleware:: here', beforeHandleNativeEventMiddleware);\n    // } else {\n    //   this.handleEvent(e);\n    // }\n  }\n\n  getContainerBoundingBox(layers: Array<Layer>) {\n    return this.getBoundingBox(layers, true);\n  }\n  getContainerBoundingBoxWRTParent(layers: Array<Layer>) {\n    return this.getBoundingBoxWRTParent(layers, true);\n  }\n  getBoundingBox(\n    layers: Array<Layer>,\n    withoutRotation: boolean = false,\n    wrtParent: boolean = false\n  ): IDimensionWithRotation {\n    let box = { x: 0, y: 0, height: 0, width: 0, rotation: 0 };\n    if (isEmpty(layers)) {\n      return box;\n    } else if (layers.length > 1 || withoutRotation) {\n      let layerPoints: any = [];\n\n      layers.map((layer: Layer) => {\n        let dims = layer.getBoundingClientRect();\n        let localBox = {\n          x: dims.rootX,\n          y: dims.rootY,\n          width: dims.width,\n          height: dims.height,\n        };\n        let rotation = layer.rotation;\n\n        // let points = ModelUtils(\n        //   layer.getRotatedDims(),\n        //   0\n        // );\n        let points = layer.getRotatedPolygon().poly;\n        if (wrtParent) {\n          points = ModelUtils.getPointsFromBoundingBox(localBox, rotation);\n        }\n        // layer.getRotatedDims(); //ModelUtils.getPointsFromBoundingBox(localBox, rotation);\n\n        layerPoints = layerPoints.concat(points);\n      });\n\n      let minXLayer: any = minBy(layerPoints, (layer: any) => {\n        return layer[0];\n      });\n      let minYLayer: any = minBy(layerPoints, (layer: any) => {\n        return layer[1];\n      });\n      let maxXLayer: any = maxBy(layerPoints, (layer: any) => {\n        return layer[0];\n      });\n      let maxYLayer: any = maxBy(layerPoints, (layer: any) => {\n        return layer[1];\n      });\n      minXLayer = minXLayer ? minXLayer[0] : 0;\n      minYLayer = minYLayer ? minYLayer[1] : 0;\n      maxXLayer = maxXLayer ? maxXLayer[0] : 0;\n      maxYLayer = maxYLayer ? maxYLayer[1] : 0;\n\n      box.x = minXLayer;\n      box.y = minYLayer;\n      box.width = maxXLayer ? maxXLayer - minXLayer : 0;\n      box.height = maxYLayer ? maxYLayer - minYLayer : 0;\n      box.rotation = 0;\n    } else if (layers.length === 1) {\n      let layer = layers[0];\n      return layer.getRotatedDims();\n    }\n    return box;\n  }\n  getBoundingBoxWRTParent(\n    layers: Array<Layer>,\n    withoutRotation: boolean = false\n  ) {\n    let dims = this.getBoundingBox(layers, withoutRotation, true);\n    let parentDims =\n      layers.length && layers[0].parent\n        ? layers[0].parent.getBoundingClientRect()\n        : { rootX: 0, rootY: 0 };\n    return {\n      ...dims,\n      x: dims.x - parentDims.rootX,\n      y: dims.y - parentDims.rootY,\n      rootX: dims.x,\n      rootY: dims.y,\n    };\n  }\n\n  enableMoveWithGrabHandle() {\n    if (!this.mouseEventsBlocked) {\n      this.moveWithGrabHandle = true;\n      this.setMouseCursor(\n        this.isMouseDown ? '-webkit-grabbing' : '-webkit-grab'\n      );\n      this.blockMouseEvents();\n      action(() => {\n        this.emit('moveWithGrabHandle');\n      });\n    }\n  }\n\n  disableMoveWithGrabHandle() {\n    if (this.moveWithGrabHandle) {\n      this.moveWithGrabHandle = false;\n      this.setMouseCursor('default');\n      this.unblockMouseEvents();\n      action(() => {\n        this.emit('moveWithGrabHandle');\n      });\n    }\n  }\n}\n","export const ASSET_URL =\n  'https://pre-cloud.builderx.io/assets/plugins/designer';\n","import { forEach, isFunction } from 'lodash';\ninterface Points {\n  x: number;\n  y: number;\n}\n\nexport interface StopPoints {\n  stopColor: string;\n  stopOpacity?: string;\n  offset: number;\n}\n\nexport class Gradient {\n  gradientType: 'LinearGradient' | 'RadialGradient' | 'AngularGradient';\n  elipseLength?: number;\n  from: Points;\n  to: Points;\n  stops: Array<StopPoints>;\n  activeIndex?: number = 0;\n  constructor(\n    gradientType: 'LinearGradient' | 'RadialGradient' | 'AngularGradient',\n    from: Points,\n    to: Points,\n    stops: Array<StopPoints>,\n    activeIndex?: number,\n    elipseLength?: number\n  ) {\n    this.gradientType = gradientType;\n    this.from = from;\n    this.to = to;\n    this.stops = stops;\n    this.activeIndex = activeIndex;\n    this.elipseLength = elipseLength;\n  }\n\n  toJS() {\n    const gradientJSON: any = {};\n\n    forEach(this, (value: any, key: any) => {\n      // if (![\"\"].includes(key)) {\n      if (!isFunction(value)) {\n        gradientJSON[key] = value && value.toJS ? value.toJS() : value;\n      }\n      // }\n      // }\n    });\n    return gradientJSON;\n  }\n\n  rotate(cx: number, cy: number, x: number, y: number, angle: number) {\n    let radians = (Math.PI / 180) * angle;\n    let cos = Math.cos(radians);\n    let sin = Math.sin(radians);\n    let nx = cos * (x - cx) + sin * (y - cy) + cx;\n    let ny = cos * (y - cy) - sin * (x - cx) + cy;\n    return { x: Math.round(nx), y: Math.round(ny) };\n  }\n\n  rotateGradient(angle: number) {\n    const cx = (this.from.x + this.to.x) / 2;\n    const cy = (this.from.y + this.to.y) / 2;\n\n    const nFrom = this.rotate(cx, cy, this.from.x, this.from.y, angle);\n    const nTo = this.rotate(cx, cy, this.to.x, this.to.y, angle);\n\n    const rotatedFrom = { x: nFrom.x, y: nFrom.y };\n    const rotatedTo = { x: nTo.x, y: nTo.y };\n\n    this.from = rotatedFrom;\n    this.to = rotatedTo;\n  }\n\n  getGradientString = (palette?: any) => {\n    let colors: any = [];\n\n    if (palette) {\n      forEach(palette, (data: any, index: number) => {\n        colors.push(data.color);\n      });\n    } else {\n      forEach(this.stops, (data: any, index: number) => {\n        colors.push(data.stopColor);\n      });\n    }\n    let vector;\n    if (this.to && this.from) {\n      vector = {\n        x: (this.to.x as number) - (this.from.x as number),\n        y: (this.to.y as number) - (this.from.y as number),\n      };\n    } else {\n      vector = {\n        x: 0,\n        y: 2,\n      };\n    }\n    const angleRad = Math.atan2(vector.y, vector.x);\n    const angleDeg = (angleRad * 180) / Math.PI + 90;\n\n    let realLocations: any = [];\n    if (palette) {\n      forEach(palette, (data: any, index: number) => {\n        realLocations.push(data.pos);\n      });\n    } else {\n      forEach(this.stops, (data: any, index: number) => {\n        realLocations.push(data.offset);\n      });\n    }\n\n    const colorStrings = colors\n      .map(\n        (color: any, i: number) =>\n          `${color} ${Math.round(realLocations[i] * 100)}%`\n      )\n      .join(', ');\n\n    if (this.gradientType && this.gradientType === 'LinearGradient') {\n      return `linear-gradient(${angleDeg}deg, ${colorStrings})`;\n    } else if (this.gradientType && this.gradientType === 'RadialGradient') {\n      return `radial-gradient(${colorStrings})`;\n    } else if (this.gradientType && this.gradientType === 'AngularGradient') {\n      return `conic-gradient(${colorStrings})`;\n    } else {\n      return `linear-gradient(${angleDeg}deg, ${colorStrings})`;\n    }\n  };\n}\n","import { Canvas, IPlugin, Layer } from '../..';\n\nexport default class HoverPlugin implements IPlugin {\n  name = 'HoverPlugin';\n  canvas!: Canvas;\n  dispose: any;\n  forbiddenLayers: Array<Layer> = [];\n  hoverLayer: any;\n  hoverLayers: Array<any> = [];\n  hoverWrapperLayer: any;\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n  }\n  hideLayerHover(context: any) {\n    if (!this.forbiddenLayers.includes(context.layer)) {\n      this.forbiddenLayers.push(context.layer);\n    }\n  }\n  showLayerHover(context: any) {\n    if (this.forbiddenLayers.includes(context.layer)) {\n      this.forbiddenLayers.splice(\n        this.forbiddenLayers.indexOf(context.layer),\n        1\n      );\n    }\n  }\n\n  hideAllHoverBoxes(context: any) {\n    this.hoverWrapperLayer.style.display = 'none';\n  }\n  showAllHoverBoxes(context: any) {\n    this.hoverWrapperLayer.style.display = 'block';\n  }\n  showHover(layer: Layer) {\n    return (\n      !this.forbiddenLayers.includes(layer) &&\n      layer.type !== 'canvas' &&\n      !this.canvas.selectedLayers.includes(layer)\n    );\n  }\n  renderBoxes() {\n    for (let index = 0; index < this.canvas.hoveredLayers.length; index++) {\n      const layer = this.canvas.hoveredLayers[index];\n      if (this.showHover(layer)) {\n        let hoverBox;\n        if (this.hoverLayers[index]) {\n          hoverBox = this.hoverLayers[index];\n        } else {\n          hoverBox = document.createElement('div');\n          this.hoverWrapperLayer.appendChild(hoverBox);\n        }\n        hoverBox.style.position = 'absolute';\n        hoverBox.style.pointerEvents = 'none';\n        let dims = layer.getBoundingClientRect();\n\n        const box = this.canvas.getBoundingBox([layer]);\n        hoverBox.style.top = box.y + 'px';\n        hoverBox.style.left = box.x + 'px';\n        hoverBox.style.height = dims.height + 'px';\n        hoverBox.style.width = dims.width + 'px';\n        // hoverBox.style.width = box.rotation + 'px';\n        hoverBox.style.transform = box.rotation\n          ? `rotate(${box.rotation}deg)`\n          : '';\n        hoverBox.id = 'hover' + index;\n        hoverBox.style.border = `${1 / this.canvas.getZoom()}px solid #25B9D1`;\n        this.hoverLayers[index] = hoverBox;\n      } else {\n        if (this.hoverLayers[index] && this.hoverLayers[index].remove) {\n          this.hoverLayers[index].remove();\n          this.hoverLayers.splice(index, 1);\n          index--;\n        }\n      }\n    }\n    let breakIndex = this.canvas.hoveredLayers.length;\n    if (breakIndex < this.hoverLayers.length) {\n      for (let i = breakIndex; i < this.hoverLayers.length; i++) {\n        if (this.hoverLayers[i] && this.hoverLayers[i].remove) {\n          this.hoverLayers[i].remove();\n          this.hoverLayers.splice(i, 1);\n          i--;\n        }\n      }\n    }\n  }\n  activate() {\n    this.hoverWrapperLayer = document.createElement('div');\n    this.dispose = this.canvas.addDomToWorld(this.hoverWrapperLayer, true, 102);\n    this.hoverWrapperLayer.style.pointerEvents = 'none';\n    this.canvas.on('hoveredLayers', (e: any) => {\n      this.renderBoxes();\n    });\n    this.canvas.on('selectedLayers', (e: any) => {\n      this.renderBoxes();\n    });\n    this.canvas.on('zoom', (e: any) => {\n      this.renderBoxes();\n    });\n    this.canvas.addFunction('Hover.hideLayer', this.hideLayerHover.bind(this));\n    this.canvas.addFunction('Hover.showLayer', this.showLayerHover.bind(this));\n    this.canvas.addFunction(\n      'Hover.hideAllHoverBoxes',\n      this.hideAllHoverBoxes.bind(this)\n    );\n    this.canvas.addFunction(\n      'Hover.showAllHoverBoxes',\n      this.showAllHoverBoxes.bind(this)\n    );\n  }\n\n  deactivate() {\n    this.dispose();\n  }\n}\n","import { Layer } from '../../models/Layer';\nimport { Canvas } from 'models/Canvas';\nimport DesignerMouseEvent from '../../events/MouseEvent';\nexport default class DragEvent extends DesignerMouseEvent {\n  pageDx: number;\n  pageDy: number;\n  worldDx: number;\n  worldDy: number;\n  viewportDx: number;\n  viewportDy: number;\n  constructor(\n    name: string,\n    target: Layer,\n    originalEvent: any,\n    payload: any,\n    currentTarget?: Layer\n  ) {\n    super(name, target, originalEvent, currentTarget);\n    const canvas: Canvas = target.getCanvas();\n    this.worldDx = payload.worldDx;\n    this.worldDy = payload.worldDy;\n\n    this.worldX = payload.worldX;\n    this.worldY = payload.worldY;\n\n    let pagePoints = canvas.convertPoint(\n      { x: payload.worldDx, y: payload.worldDy },\n      'world',\n      'page'\n    );\n    this.pageDx = pagePoints.x;\n    this.pageDy = pagePoints.y;\n\n    let viewportPoints = canvas.convertPoint(\n      { x: this.pageDx, y: this.pageDy },\n      'page',\n      'viewport'\n    );\n\n    this.viewportDx = viewportPoints.x;\n    this.viewportDy = viewportPoints.y;\n  }\n}\n","import { Canvas, Layer } from '../../';\nimport { IPlugin } from '../../';\nimport DragEvent from './DragEvent';\n\nexport default class Drag implements IPlugin {\n  name = 'Drag';\n  canvas!: Canvas;\n  dispose: any;\n  mouseDown: boolean = false;\n  dragStarted: boolean = false;\n  target: Layer | undefined;\n  offsetPageX: number = 0;\n  offsetPageY: number = 0;\n  lastPageX: number = 0;\n  lastPageY: number = 0;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n    this.offsetPageX = 0;\n    this.offsetPageY = 0;\n  }\n\n  activate() {\n    let relPos = {\n      x: 0,\n      y: 0,\n    };\n    this.canvas.addEventListener('mousedown', (event: any) => {\n      if (event.originalEvent.button !== 2 && event.originalEvent.which !== 3) {\n        // Ignore right click mousedown\n        this.mouseDown = true;\n        this.dragStarted = false;\n        this.lastPageX = event.worldX;\n        this.lastPageY = event.worldY;\n      }\n    });\n\n    this.canvas.addEventListener('mousemove', (event: any) => {\n      relPos = {\n        x: event.worldX - this.lastPageX,\n        y: event.worldY - this.lastPageY,\n      };\n\n      if (this.mouseDown && !this.dragStarted) {\n        this.dragStarted = true;\n        let payload = {\n          worldDx: relPos.x,\n          worldDy: relPos.y,\n          worldX: this.lastPageX,\n          worldY: this.lastPageY,\n        };\n        const dragStartEvent = new DragEvent(\n          'dragStart',\n          this.canvas,\n          event.originalEvent,\n          payload\n        );\n        this.canvas.dispatchEventOnHitLayer('dragStart', dragStartEvent, event);\n      } else if (this.dragStarted) {\n        let payload = {\n          worldDx: relPos.x,\n          worldDy: relPos.y,\n          worldX: event.worldX,\n          worldY: event.worldY,\n        };\n        const dragEvent = new DragEvent(\n          'drag',\n          this.canvas,\n          event.originalEvent,\n          payload\n        );\n        this.canvas.dispatchEventOnHitLayer('drag', dragEvent, event);\n        this.lastPageX = event.worldX;\n        this.lastPageY = event.worldY;\n      }\n    });\n\n    this.canvas.addEventListener('mouseup', (event: any) => {\n      relPos = {\n        x: event.worldX - this.lastPageX,\n        y: event.worldY - this.lastPageY,\n      };\n      let payload = {\n        worldDx: 0,\n        worldDy: 0,\n        worldX: event.worldX,\n        worldY: event.worldY,\n      };\n      if (this.dragStarted) {\n        const dragEndEvent = new DragEvent(\n          'dragEnd',\n          this.canvas,\n          event.originalEvent,\n          payload\n        );\n        this.canvas.dispatchEventOnHitLayer('dragEnd', dragEndEvent, event);\n      }\n      this.lastPageX = 0;\n      this.lastPageY = 0;\n      this.mouseDown = false;\n      this.dragStarted = false;\n    });\n  }\n\n  deactivate() {\n    this.dispose();\n  }\n}\n","import * as React from 'react';\nimport { View, findNodeHandle } from 'react-native-web';\nimport { Layer } from 'models/Layer';\nconst rerenderProps = [\n  'layout',\n  'children',\n  'props',\n  'style',\n  'visible',\n  'gradient',\n];\n\nexport default class ViewRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  _ref: any = null;\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n    const domNode = findNodeHandle(this._ref);\n    domNode.setAttribute('class', 'view-render ' + domNode.className);\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n    // this.props.layer.parent.off('*', this.onUpdate);\n  }\n\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n  }\n\n  getStyles = (layer: Layer) => {\n    let styles = { ...layer.style.getAll() };\n    delete styles['gradient'];\n    const returnStyles = {\n      ...styles,\n      ...layer.layout.getAll(),\n    };\n    delete returnStyles['pointerEvents'];\n    if (returnStyles.overflow === 'scroll') {\n      returnStyles.overflow = 'hidden';\n    } else {\n      returnStyles.overflow = returnStyles.overflow;\n    }\n    return returnStyles;\n  };\n\n  render() {\n    const layer: Layer = this.props.layer;\n    const { RootRenderer }: any = this.props;\n    const layerProps = { ...layer.props.getAll() };\n    const layerId = layerProps['id'];\n    delete layerProps['id'];\n    return (\n      <View\n        ref={(component: any) => (this._ref = component)}\n        style={this.getStyles(layer)}\n        {...layerProps}\n        nativeID={layerId}\n      >\n        {layer.children.map((child: any, index: any) => (\n          <RootRenderer {...this.props} key={child.id} layer={child} />\n        ))}\n      </View>\n    );\n  }\n}\n","import { IComponentDefinition } from '../../interfaces';\n\nconst ViewComponentDefinition: IComponentDefinition = {\n  version: '0.0.1',\n  template: {\n    type: 'view',\n    children: [],\n    import: {\n      layerName: 'View',\n      packageName: 'native',\n      isDefaultImport: false,\n      asName: '',\n    },\n    locked: false,\n    template: {\n      centerVertical: false,\n      centerHorizontal: false,\n    },\n    layout: {\n      top: 50,\n      left: 100,\n      width: 100,\n      height: 100,\n      position: 'absolute',\n    },\n    style: {\n      backgroundColor: '#E6E6E6',\n    },\n    props: {\n      // style: {\n      //   top: 0,\n      //   left: 150,\n      //   width: 150,\n      //   height: 150,\n      //   position: 'absolute',\n      //   backgroundColor: 'rgba(230, 230, 230,1)',\n      // },\n    },\n  },\n  thumbnail:\n    // tslint:disable-next-line:max-line-length\n    '',\n  name: 'Rect',\n  controlsProperty: [\n    {\n      type: 'AlignmentEditor',\n      title: 'Alignment Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'OrientationEditor',\n      title: 'Orientation Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'ResizingTypeEditor',\n      title: 'ResizingType Editor',\n      value: {},\n    },\n    {\n      type: 'TouchableOpacityEditor',\n      title: 'TouchableOpacity Editor',\n      value: {},\n    },\n    {\n      type: 'ScrollViewEditor',\n      title: 'Scroll View Editor',\n      value: {},\n    },\n    {\n      type: 'group',\n      title: 'Styling',\n      value: {},\n      properties: [\n        {\n          propertyName: 'opacity',\n          type: 'range',\n          title: 'Opacity',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 1,\n          },\n          category: 'style',\n        },\n        {\n          propertyName: 'backgroundColor',\n          type: 'color',\n          title: 'Fill',\n          value: {\n            defaultValue: '#fff',\n          },\n          category: 'style',\n        },\n        {\n          type: 'BorderWidthEditor',\n          title: 'BorderWidth Editor',\n          value: {\n            defaultValue: 1,\n          },\n        },\n        {\n          type: 'BorderRadiusEditor',\n          title: 'BorderRadius Editor',\n          value: {},\n        },\n        {\n          type: 'ShadowEditor',\n          title: 'Shadow Editor',\n          value: {},\n          properties: [\n            {\n              type: 'shadowColor',\n              title: 'Shadow Color',\n              value: {\n                defaultValue: 'rgba(0,0,0,1)',\n              },\n            },\n            {\n              type: 'shadowOffset',\n              title: 'Shadow Offset',\n              value: {\n                defaultValue: 3,\n              },\n            },\n            {\n              type: 'shadowOpacity',\n              title: 'Shadow Opacity',\n              value: {\n                defaultValue: 0.25,\n              },\n            },\n            {\n              type: 'elevation',\n              title: 'elevation',\n              value: {\n                defaultValue: 5,\n              },\n            },\n          ],\n        },\n        {\n          propertyName: 'overflow',\n          title: 'Overflow',\n          type: 'enum',\n          value: {\n            options: ['visible', 'hidden', 'scroll'],\n            defaultValue: 'visible',\n          },\n        },\n      ],\n    },\n    {\n      type: 'group',\n      title: 'Layout',\n      value: {},\n      properties: [\n        {\n          type: 'FlexboxEditor',\n          title: 'Flexbox Editor',\n          value: {},\n        },\n        {\n          type: 'MarginPaddingEditor',\n          title: 'MarginPadding Editor',\n          value: {},\n        },\n        {\n          type: 'LayoutEditor',\n          title: 'Layout Editor',\n          value: {},\n        },\n        /*{\n          type: \"LoopEditor\",\n          title: \"Loop Editor\",\n          value: {}\n       }*/\n      ],\n    },\n\n    // {\n    //   type: \"group\",\n    //   title: \"Conditionals\",\n    //   value: {},\n    //   properties: [\n    //     {\n    //       type: \"ResetConditionalEditor\",\n    //       title: \"Conditional Editor\",\n    //       value: {}\n    //     }\n    //   ]\n    // }\n  ],\n};\n\nexport default ViewComponentDefinition;\n","import { Canvas, IPlugin } from '../..';\nimport ViewRenderer from './ViewRenderer';\nimport ViewComponentDefinition from './ViewComponentDefinition';\n\nexport default class ViewRendererPlugin implements IPlugin {\n  name = 'ViewRenderer';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addComponent('view', ViewRenderer, ViewComponentDefinition);\n  }\n\n  deactivate() {}\n}\n","import * as React from 'react';\nimport { View } from 'react-native-web';\nimport { Layer } from 'models/Layer';\nconst rerenderProps = [\n  'layout',\n  'children',\n  'props',\n  'style',\n  'visible',\n  'gradient',\n];\nexport default class TouchableOpacityRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  _ref: any;\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n  }\n\n  getStyles = (layer: Layer) => {\n    let styles = { ...layer.style.getAll() };\n    delete styles['gradient'];\n    const returnStyles = {\n      ...styles,\n      ...layer.layout.getAll(),\n    };\n    if (returnStyles.overflow === 'scroll') {\n      returnStyles.overflow = 'hidden';\n    } else {\n      returnStyles.overflow = returnStyles.overflow || 'hidden';\n    }\n    return returnStyles;\n  };\n\n  render() {\n    const layer: Layer = this.props.layer;\n    const { RootRenderer }: any = this.props;\n    const layerProps = { ...layer.props.getAll() };\n    const layerId = layerProps['id'];\n    delete layerProps['id'];\n    return (\n      <View\n        ref={(c: any) => {\n          this._ref = c;\n        }}\n        style={this.getStyles(layer)}\n        {...layerProps}\n        nativeID={layerId}\n      >\n        {layer.children.map((child: any, index: any) => (\n          <RootRenderer {...this.props} key={child.id} layer={child} />\n        ))}\n      </View>\n    );\n  }\n}\n","import { IComponentDefinition } from '../../interfaces';\n\nconst componentDefinition: IComponentDefinition = {\n  version: '0.0.1',\n  template: {\n    type: 'touchableOpacity',\n    children: [],\n    import: {\n      layerName: 'TouchableOpacity',\n      packageName: 'native',\n      isDefaultImport: false,\n      asName: '',\n    },\n    locked: false,\n    template: {\n      centerVertical: false,\n      centerHorizontal: false,\n    },\n    layout: {\n      top: 50,\n      left: 100,\n      width: 100,\n      height: 100,\n      position: 'absolute',\n    },\n    style: {\n      backgroundColor: '#E6E6E6',\n    },\n    props: {\n      //\n    },\n  },\n  thumbnail:\n    // tslint:disable-next-line:max-line-length\n    '',\n  name: 'Rect',\n  controlsProperty: [\n    {\n      type: 'AlignmentEditor',\n      title: 'Alignment Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'OrientationEditor',\n      title: 'Orientation Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'ResizingTypeEditor',\n      title: 'ResizingType Editor',\n      value: {},\n    },\n    {\n      type: 'TouchableOpacityEditor',\n      title: 'TouchableOpacity Editor',\n      value: {},\n    },\n    {\n      type: 'NavigationEditor',\n      title: 'Navigation Editor',\n      value: {},\n    },\n\n    {\n      type: 'group',\n      title: 'Styling',\n      value: {},\n      properties: [\n        {\n          propertyName: 'opacity',\n          type: 'range',\n          title: 'Opacity',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 1,\n          },\n          category: 'style',\n        },\n        {\n          propertyName: 'backgroundColor',\n          type: 'color',\n          title: 'Fill',\n          value: {\n            defaultValue: '#fff',\n          },\n          additionalOptions: {\n            showGradient: false,\n          },\n          category: 'style',\n        },\n        {\n          type: 'BorderWidthEditor',\n          title: 'BorderWidth Editor',\n          value: {},\n        },\n        {\n          type: 'BorderRadiusEditor',\n          title: 'BorderRadius Editor',\n          value: {},\n        },\n        {\n          type: 'ShadowEditor',\n          title: 'Shadow Editor',\n          value: {},\n        },\n        {\n          propertyName: 'overflow',\n          title: 'Overflow',\n          type: 'enum',\n          value: {\n            options: ['visible', 'hidden', 'scroll'],\n            defaultValue: 'visible',\n          },\n        },\n      ],\n    },\n    {\n      type: 'group',\n      title: 'Layout',\n      value: {},\n      properties: [\n        {\n          type: 'FlexboxEditor',\n          title: 'Flexbox Editor',\n          value: {},\n        },\n        {\n          type: 'MarginPaddingEditor',\n          title: 'MarginPadding Editor',\n          value: {},\n        },\n        {\n          type: 'LayoutEditor',\n          title: 'Layout Editor',\n          value: {},\n        },\n        /*{\n          type: \"LoopEditor\",\n          title: \"Loop Editor\",\n          value: {}\n       }*/\n      ],\n    },\n    // {\n    //   type: \"group\",\n    //   title: \"Conditionals\",\n    //   value: {},\n    //   properties: [\n    //     {\n    //       type: \"ResetConditionalEditor\",\n    //       title: \"Conditional Editor\",\n    //       value: {}\n    //     }\n    //   ]\n    // }\n    // {\n    //   type: \"group\",\n    //   title: \"Callbacks\",\n    //   value: {},\n    //   properties: [\n    //     {\n    //       type: \"CallbackEditor\",\n    //       propertyName: \"onPress\",\n    //       title: \"onPress\",\n    //       value: {},\n    //       category: \"props\"\n    //     }\n    //   ]\n    // }\n  ],\n};\n\nexport default componentDefinition;\n","import { Canvas, IPlugin } from '../..';\nimport TouchableOpacityRenderer from './TouchableOpacityRenderer';\nimport TouchableOpacityComponentDefinition from './TouchableOpacityComponentDefinition';\n\nexport default class TouchableOpacityRendererPlugin implements IPlugin {\n  name = 'TouchableOpacityRenderer';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addComponent(\n      'touchableOpacity',\n      TouchableOpacityRenderer,\n      TouchableOpacityComponentDefinition\n    );\n  }\n\n  deactivate() {}\n}\n","import * as React from 'react';\nimport { View } from 'react-native-web';\nimport { Layer } from 'models/Layer';\nconst rerenderProps = [\n  'layout',\n  'children',\n  'props',\n  'style',\n  'visible',\n  'gradient',\n];\nexport default class ScrollViewRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  _ref: any;\n\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n  }\n\n  getStyles = (layer: Layer) => {\n    let styles = { ...layer.style.getAll() };\n    delete styles['gradient'];\n    const returnStyles = {\n      ...styles,\n      ...layer.layout.getAll(),\n    };\n    if (returnStyles.overflow === 'scroll') {\n      returnStyles.overflow = 'hidden';\n    } else {\n      returnStyles.overflow = returnStyles.overflow || 'hidden';\n    }\n    return returnStyles;\n  };\n\n  render() {\n    const layer: Layer = this.props.layer;\n    const { RootRenderer }: any = this.props;\n    const layerProps = { ...layer.props.getAll() };\n    const layerId = layerProps['id'];\n    delete layerProps['id'];\n    return (\n      <View\n        ref={(c: any) => {\n          this._ref = c;\n        }}\n        style={this.getStyles(layer)}\n        {...layerProps}\n        nativeID={layerId}\n      >\n        {layer.children.map((child: any, index: any) => (\n          <RootRenderer {...this.props} key={child.id} layer={child} />\n        ))}\n      </View>\n    );\n  }\n}\n","import { IComponentDefinition } from '../../interfaces';\n\nconst componentDefinition: IComponentDefinition = {\n  version: '0.0.1',\n  template: {\n    type: 'scrollView',\n    children: [],\n    import: {\n      layerName: 'ScrollView',\n      packageName: 'native',\n      isDefaultImport: false,\n      asName: '',\n    },\n    locked: false,\n    template: {\n      centerVertical: false,\n      centerHorizontal: false,\n    },\n    layout: {\n      top: 150,\n      left: 150,\n      width: 150,\n      height: 150,\n      position: 'absolute',\n    },\n    style: {\n      backgroundColor: 'rgba(230, 230, 230,1)',\n    },\n    props: {\n      contentContainerStyle: {\n        width: 150,\n        height: 150,\n      },\n    },\n  },\n  thumbnail:\n    // tslint:disable-next-line:max-line-length\n    '',\n  name: 'Rect',\n  controlsProperty: [\n    {\n      type: 'AlignmentEditor',\n      title: 'Alignment Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'OrientationEditor',\n      title: 'Orientation Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'ResizingTypeEditor',\n      title: 'ResizingType Editor',\n      value: {},\n    },\n    {\n      type: 'ScrollViewEditor',\n      title: 'Scroll View Editor',\n      value: {},\n    },\n\n    {\n      type: 'group',\n      title: 'Styling',\n      value: {},\n      properties: [\n        {\n          propertyName: 'opacity',\n          type: 'range',\n          title: 'Opacity',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 1,\n          },\n          category: 'style',\n        },\n        {\n          propertyName: 'backgroundColor',\n          type: 'color',\n          title: 'Fill',\n          value: {\n            defaultValue: '#fff',\n          },\n          additionalOptions: {\n            showGradient: false,\n          },\n          category: 'style',\n        },\n        {\n          type: 'BorderWidthEditor',\n          title: 'BorderWidth Editor',\n          value: {},\n        },\n        {\n          type: 'BorderRadiusEditor',\n          title: 'BorderRadius Editor',\n          value: {},\n        },\n        {\n          type: 'ShadowEditor',\n          title: 'Shadow Editor',\n          value: {},\n        },\n        {\n          propertyName: 'overflow',\n          title: 'Overflow',\n          type: 'enum',\n          value: {\n            options: ['visible', 'hidden'],\n            defaultValue: 'visible',\n          },\n        },\n      ],\n    },\n    {\n      type: 'group',\n      title: 'Layout',\n      value: {},\n      properties: [\n        {\n          type: 'FlexboxEditor',\n          title: 'Flexbox Editor',\n          value: {},\n        },\n        {\n          type: 'MarginPaddingEditor',\n          title: 'MarginPadding Editor',\n          value: {},\n        },\n        {\n          type: 'LayoutEditor',\n          title: 'Layout Editor',\n          value: {},\n        },\n        /*{\n          type: \"LoopEditor\",\n          title: \"Loop Editor\",\n          value: {}\n       }*/\n      ],\n    },\n  ],\n};\n\nexport default componentDefinition;\n","import { Canvas, IPlugin } from '../..';\nimport ScrollViewRenderer from './ScrollViewRenderer';\nimport ScrollViewComponentDefinition from './ScrollViewComponentDefinition';\n\nexport default class ScrollViewRendererPlugin implements IPlugin {\n  name = 'ScrollViewRenderer';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addComponent(\n      'scrollView',\n      ScrollViewRenderer,\n      ScrollViewComponentDefinition\n    );\n  }\n\n  deactivate() {}\n}\n","import { Layer } from '../models/Layer';\nimport { Event } from './index';\nimport { Canvas } from 'models/Canvas';\nexport default class RenderEvent extends Event {\n  target: any;\n  constructor(name: string, target: any) {\n    super(name, target);\n  }\n}\n","import * as React from 'react';\nimport { Text } from 'react-native-web';\nimport includes from 'lodash/includes';\nimport replace from 'lodash/replace';\nimport { Layer } from 'models/Layer';\nimport RenderEvent from '../../events/RenderEvent';\n\nconst rerenderProps = [\n  'layout',\n  'children',\n  'props',\n  'innerText',\n  'style',\n  'visible',\n];\nexport default class TextRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  textRef: any;\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this.textRef);\n\n    this.whiteSpaceTo('noWrap');\n    this.props.layer.dispatchEvent(\n      'domDidMount',\n      new RenderEvent('domDidMount', this)\n    );\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this.textRef);\n\n    this.props.layer.dispatchEvent(\n      'domDidUpdate',\n      new RenderEvent('domDidUpdate', this)\n    );\n  }\n\n  whiteSpaceTo(value: any) {\n    // Redacted: animation related code\n    this.textRef.setNativeProps({\n      whiteSpace: value,\n    });\n  }\n\n  getStyles = (layer: Layer) => {\n    // let maxWidth = get(layer, 'parent.width', undefined);\n    let updatedStyle = {\n      color: 'black',\n      ...layer.style.getAll(),\n      ...layer.layout.getAll(),\n      WebkitFontSmoothing: 'antialiased',\n      wordBreak: 'break-all',\n    };\n    delete updatedStyle['fontPostscriptName'];\n    delete updatedStyle['wordBreak'];\n    // TODO: heavy jugaad\n    // if (layer.parent && maxWidth) {\n    //   updatedStyle.maxWidth = Math.max(maxWidth, updatedStyle.width);\n    // }\n    if (updatedStyle.textDecoration) {\n      updatedStyle.textDecorationLine = updatedStyle.textDecoration;\n    }\n    return updatedStyle;\n  };\n\n  render() {\n    const layer: Layer = this.props.layer;\n    let { innerText } = layer;\n    if (innerText && includes(innerText, \"{'\\n'}\")) {\n      innerText = replace(innerText, new RegExp(\"{'\\n'}\", 'g'), '\\n');\n    }\n    if (innerText && includes(innerText, \"{'\\t'}\")) {\n      innerText = replace(innerText, new RegExp(\"{'\\t'}\", 'g'), '\\t');\n    }\n    const layerProps = { ...layer.props.getAll() };\n    const layerId = layerProps['id'];\n    delete layerProps['id'];\n    const style = this.getStyles(layer);\n\n    let whiteSpace = undefined;\n    let height = undefined;\n    let width = undefined;\n\n    if (layer.isAutoWidth()) {\n      whiteSpace = 'pre';\n    }\n\n    if (layer.isFlexChild()) {\n      height = 'fit-content';\n      width = 'fit-content';\n    } else {\n      if (!layer.isFillHeight()) {\n        height = 'fit-content';\n      }\n      if (!layer.isFillWidth()) {\n        width = 'fit-content';\n      }\n    }\n\n    return (\n      <Text\n        webkit=\"true\"\n        {...layerProps}\n        style={{ fontSize: 14, height, width, ...style, whiteSpace }}\n        nativeID={layerId}\n        ref={(c: any) => {\n          this.textRef = c;\n        }}\n      >\n        {innerText}\n      </Text>\n    );\n  }\n}\n","import { IComponentDefinition } from '../../interfaces';\n\nconst componentDefinition: IComponentDefinition = {\n  version: '0.0.1',\n  template: {\n    type: 'text',\n    children: [\n      {\n        type: 'literal',\n        value: 'Lorem Ipsum',\n      },\n    ],\n    import: {\n      layerName: 'Text',\n      packageName: 'native',\n      isDefaultImport: false,\n      asName: '',\n    },\n    locked: false,\n    template: {\n      centerVertical: false,\n      centerHorizontal: false,\n    },\n    layout: {\n      top: 0,\n      left: 0,\n      position: 'absolute',\n    },\n    style: {\n      fontFamily: 'Roboto',\n      fontPostscriptName: 'roboto-regular',\n      fontStyle: 'normal',\n      fontWeight: '400',\n\n      color: '#121212',\n    },\n    props: {},\n  },\n  thumbnail:\n    // tslint:disable-next-line:max-line-length\n    '',\n  name: 'Text',\n  controlsProperty: [\n    {\n      type: 'AlignmentEditor',\n      title: 'Alignment Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'OrientationEditor',\n      title: 'Orientation Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'ResizingTypeEditor',\n      title: 'ResizingType Editor',\n      value: {},\n    },\n    {\n      type: 'TextToTextInputEditor',\n      title: 'Text To TextInput Editor',\n      value: {},\n    },\n\n    {\n      type: 'group',\n      title: 'Styling',\n      value: {},\n      properties: [\n        {\n          propertyName: 'opacity',\n          type: 'range',\n          title: 'Opacity',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 1,\n          },\n          category: 'style',\n        },\n        {\n          type: 'TextPropEditor',\n          title: 'Text Prop Editor',\n          value: {},\n        },\n      ],\n    },\n    {\n      type: 'group',\n      title: 'Layout',\n      value: {},\n      properties: [\n        {\n          type: 'MarginPaddingEditor',\n          title: 'MarginPadding Editor',\n          value: {},\n        },\n        /*{\n          type: \"LoopEditor\",\n          title: \"Loop Editor\",\n          value: {}\n       }*/\n      ],\n    },\n    // {\n    //   type: \"group\",\n    //   title: \"Conditionals\",\n    //   value: {},\n    //   properties: [\n    //     {\n    //       type: \"ResetConditionalEditor\",\n    //       title: \"Conditional Editor\",\n    //       value: {}\n    //     }\n    //   ]\n    // }\n  ],\n};\n\nexport default componentDefinition;\n","import { Canvas } from '../..';\nimport { IPlugin } from '../..';\nimport TextRenderer from './TextRenderer';\nimport TextComponentDefinition from './TextComponentDefinition';\n\nexport default class TextRendererPlugin implements IPlugin {\n  name = 'TextRenderer';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addComponent('text', TextRenderer, TextComponentDefinition);\n  }\n\n  deactivate() {}\n}\n","import * as React from 'react';\nimport { TextInput } from 'react-native-web';\nimport { Layer } from 'models/Layer';\nimport { pick } from 'lodash';\n\nconst rerenderProps = ['layout', 'children', 'props', 'style', 'visible'];\nexport default class TextInputRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  _ref: any;\n\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n  }\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  getStyles = (layer: Layer) => {\n    const appliedStyles = { ...layer.style.getAll(), ...layer.layout.getAll() };\n    delete appliedStyles['fontPostscriptName'];\n    delete appliedStyles['wordBreak'];\n    return appliedStyles;\n  };\n\n  render() {\n    const layer: Layer = this.props.layer;\n    const layerProps = { ...layer.props.getAll() };\n    const filteredProps = pick(layerProps, [\n      'defaultValue',\n      'numberOfLines',\n      'multiline',\n      'maxLength',\n      'placeholder',\n      'placeholderTextColor',\n      'value',\n    ]);\n    const layerId = layerProps['id'];\n    delete layerProps['id'];\n    return (\n      <TextInput\n        ref={(c: any) => {\n          this._ref = c;\n        }}\n        {...filteredProps}\n        style={this.getStyles(layer)}\n        nativeID={layerId}\n      />\n    );\n  }\n}\n","import { IComponentDefinition } from '../../interfaces';\n\nconst componentDefinition: IComponentDefinition = {\n  version: '0.0.1',\n  template: {\n    type: 'textInput',\n    children: [],\n    import: {\n      layerName: 'TextInput',\n      packageName: 'native',\n      isDefaultImport: false,\n      asName: '',\n    },\n    locked: false,\n    template: {\n      centerVertical: false,\n      centerHorizontal: false,\n    },\n    layout: {\n      top: 0,\n      left: 0,\n      position: 'absolute',\n    },\n    style: {\n      fontFamily: 'Roboto',\n      fontPostscriptName: 'roboto-regular',\n      fontStyle: 'normal',\n      fontWeight: '400',\n      color: '#121212',\n    },\n    props: {\n      placeholder: 'placeholder',\n    },\n  },\n  thumbnail:\n    // tslint:disable-next-line:max-line-length\n    '',\n  name: 'TextInput',\n  controlsProperty: [\n    {\n      type: 'AlignmentEditor',\n      title: 'Alignment Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'OrientationEditor',\n      title: 'Orientation Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'ResizingTypeEditor',\n      title: 'ResizingType Editor',\n      value: {},\n    },\n\n    {\n      type: 'group',\n      title: 'Styling',\n      value: {},\n      properties: [\n        {\n          propertyName: 'opacity',\n          type: 'range',\n          title: 'Opacity',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 1,\n          },\n          category: 'style',\n        },\n        {\n          type: 'TextPropEditor',\n          title: 'Text Prop Editor',\n          value: {},\n        },\n        {\n          propertyName: 'backgroundColor',\n          type: 'color',\n          title: 'Fill',\n          value: {\n            defaultValue: '#fff',\n          },\n          additionalOptions: {\n            showGradient: false,\n          },\n          category: 'style',\n        },\n        {\n          type: 'BorderWidthEditor',\n          title: 'BorderWidth Editor',\n          value: {\n            defaultValue: 1,\n          },\n        },\n        {\n          type: 'BorderRadiusEditor',\n          title: 'BorderRadius Editor',\n          value: {},\n        },\n        {\n          type: 'ShadowEditor',\n          title: 'Shadow Editor',\n          value: {},\n          properties: [\n            {\n              type: 'shadowColor',\n              title: 'Shadow Color',\n              value: {\n                defaultValue: 'rgba(0,0,0,1)',\n              },\n            },\n            {\n              type: 'shadowOffset',\n              title: 'Shadow Offset',\n              value: {\n                defaultValue: 3,\n              },\n            },\n            {\n              type: 'shadowOpacity',\n              title: 'Shadow Opacity',\n              value: {\n                defaultValue: 0.25,\n              },\n            },\n            {\n              type: 'elevation',\n              title: 'elevation',\n              value: {\n                defaultValue: 5,\n              },\n            },\n          ],\n        },\n      ],\n    },\n    {\n      type: 'group',\n      title: 'Layout',\n      value: {},\n      properties: [\n        {\n          type: 'MarginPaddingEditor',\n          title: 'MarginPadding Editor',\n          value: {},\n        },\n        /*{\n          type: \"LoopEditor\",\n          title: \"Loop Editor\",\n          value: {}\n       }*/\n      ],\n    },\n    {\n      type: 'TextToTextInputEditor',\n      title: 'Text To TextInput Editor',\n      value: {},\n    },\n    // {\n    //   type: \"group\",\n    //   title: \"Conditionals\",\n    //   value: {},\n    //   properties: [\n    //     {\n    //       type: \"ResetConditionalEditor\",\n    //       title: \"Conditional Editor\",\n    //       value: {}\n    //     }\n    //   ]\n    // },\n    {\n      type: 'group',\n      title: 'TextInput',\n      value: {},\n      properties: [\n        {\n          propertyName: 'placeholder',\n          type: 'string',\n          title: 'Placeholder',\n          value: {\n            placeholder: '',\n            defaultValue: '',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'textBreakStrategy',\n          title: 'Text Break Strategy',\n          type: 'enum',\n          value: {\n            options: ['simple', 'highQuality', 'balanced'],\n            defaultValue: 'simple',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'clearButtonMode',\n          type: 'enum',\n          title: 'Clear Button Mode',\n          value: {\n            options: ['never', 'while-editing', 'unless-editing', 'always'],\n            defaultValue: 'never',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'keyboardAppearance',\n          title: 'Keyboard Appearance',\n          type: 'enum',\n          value: {\n            options: ['default', 'light', 'dark'],\n            defaultValue: 'default',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'dataDetector',\n          title: 'Data Detector Types',\n          type: 'enum',\n          value: {\n            options: [\n              'phoneNumber',\n              'link',\n              'address',\n              'calendarEvent',\n              'none',\n              'all',\n              'phoneNumber',\n              'link',\n              'address',\n              'calendarEvent',\n              'none',\n              'all',\n            ],\n            defaultValue: 'none',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'placeholderTextColor',\n          type: 'bareColor',\n          title: 'Placeholder Text Color',\n          value: {\n            defaultValue: '#fff',\n          },\n          additionalOptions: {\n            showGradient: false,\n            uiOptions: {\n              size: 's',\n            },\n          },\n          category: 'props',\n        },\n        // {\n        //   propertyName: 'underlineColorAndroid',\n        //   type: 'bareColor',\n        //   title: 'Underline Color',\n        //   value: {\n        //     defaultValue: '#fff',\n        //   },\n        //   additionalOptions: {\n        //     showGradient: false,\n        //     uiOptions: {\n        //       size: 's',\n        //     },\n        //   },\n        //   category: 'props',\n        // },\n        {\n          propertyName: 'selectionColor',\n          type: 'bareColor',\n          title: 'Selection color',\n          value: {\n            defaultValue: '#fff',\n          },\n          additionalOptions: {\n            showGradient: false,\n            uiOptions: {\n              size: 's',\n            },\n          },\n          category: 'props',\n        },\n      ],\n    },\n    {\n      type: 'group',\n      title: 'Other Props',\n      value: {},\n      properties: [\n        {\n          propertyName: 'autoCapitalize',\n          title: 'Auto Capitalize',\n          type: 'enum',\n          value: {\n            options: ['none', 'sentences', 'words', 'characters'],\n            defaultValue: 'none',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'keyboardType',\n          type: 'enum',\n          title: 'Keyboard Type',\n          value: {\n            options: [\n              'default',\n              'email-address',\n              'numeric',\n              'phone-pad',\n              'ascii-capable',\n              'numbers-and-punctuation',\n              'url',\n              'number-pad',\n              'name-phone-pad',\n              'decimal-pad',\n              'twitter',\n              'web-search',\n            ],\n            defaultValue: 'default',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'returnKeyType',\n          title: 'Return Key Type',\n          type: 'enum',\n          value: {\n            options: [\n              'done',\n              'go',\n              'next',\n              'search',\n              'send',\n              'none',\n              'previous',\n              'default',\n              'emergency-call',\n              'google',\n              'join',\n              'route',\n              'yahoo',\n            ],\n            defaultValue: 'default',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'defaultValue',\n          type: 'string',\n          title: 'Default value',\n          value: {\n            defaultValue: '',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'maxLength',\n          type: 'number',\n          title: 'Max length',\n          value: {\n            defaultValue: 140,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'inlineImageLeft',\n          type: 'string',\n          title: 'Inline Image Left',\n          value: {\n            defaultValue: '',\n          },\n        },\n        {\n          propertyName: 'inlineImagePadding',\n          type: 'number',\n          title: 'Inline Image Padding',\n          value: {\n            defaultValue: 0,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'numberOfLines',\n          type: 'number',\n          title: 'Number of Lines',\n          value: {\n            defaultValue: 1,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'returnKeyLabel',\n          type: 'string',\n          title: 'Return Key Label',\n          value: {\n            defaultValue: '',\n          },\n          category: 'props',\n        },\n      ],\n    },\n    {\n      type: 'group',\n      title: 'Booleans',\n      value: {},\n      properties: [\n        {\n          propertyName: 'clearTextOnFocus',\n          type: 'boolean',\n          title: 'Clear Text onFocus',\n          value: {\n            defaultValue: false,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'enablesReturnKeyAutomatically',\n          type: 'boolean',\n          title: 'Enables Return Key Automatically',\n          value: {\n            defaultValue: false,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'spellCheck',\n          type: 'boolean',\n          title: 'Spell Check',\n          value: {\n            defaultValue: false,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'disableFullscreenUI',\n          type: 'boolean',\n          title: 'Disable Full Screen UI',\n          value: {\n            defaultValue: false,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'autoCorrect',\n          type: 'boolean',\n          title: 'Auto Correct',\n          value: {\n            defaultValue: false,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'autoFocus',\n          type: 'boolean',\n          title: 'Auto Focus',\n          value: {\n            defaultValue: false,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'blurOnSubmit',\n          type: 'boolean',\n          title: 'Blur on submit',\n          value: {\n            defaultValue: false,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'caretHidden',\n          type: 'boolean',\n          title: 'Caret hidden',\n          value: {\n            defaultValue: false,\n          },\n          category: 'props',\n        },\n\n        {\n          propertyName: 'editable',\n          type: 'boolean',\n          title: 'Editable',\n          value: {\n            defaultValue: true,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'multiline',\n          type: 'boolean',\n          title: 'Multiline',\n          value: {\n            defaultValue: false,\n          },\n          category: 'props',\n        },\n\n        {\n          propertyName: 'secureTextEntry',\n          type: 'boolean',\n          title: 'Password Input',\n          value: {\n            defaultValue: false,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'selectTextOnFocus',\n          type: 'boolean',\n          title: 'Select text on focus',\n          value: {\n            defaultValue: false,\n          },\n          category: 'props',\n        },\n      ],\n    },\n  ],\n};\n\nexport default componentDefinition;\n","import { Canvas } from '../..';\nimport { IPlugin } from '../..';\nimport TextInputRenderer from './TextInputRenderer';\nimport TextInputComponentDefinition from './TextInputComponentDefinition';\n\nexport default class TextInputRendererPlugin implements IPlugin {\n  name = 'TextInputRenderer';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addComponent(\n      'textInput',\n      TextInputRenderer,\n      TextInputComponentDefinition\n    );\n  }\n\n  deactivate() {}\n}\n","import * as React from 'react';\nimport { Image } from 'react-native-web';\nimport { get } from 'lodash';\nimport Svg, { Path, Defs, Mask, Image as SVGImage } from 'svgs';\nimport { Layer } from 'models/Layer';\nimport { generateSVGPath } from '@builderx-core/conversions';\nimport { generateRandomString } from '../../models/utils';\nconst rerenderProps = ['layout', 'children', 'props', 'style', 'visible'];\nexport default class ImageRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  _ref: any;\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    if (this._ref) {\n      this.props.layer.setDomRef(this._ref);\n    } else {\n      this.props.layer.setDomRef(this);\n    }\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    if (this._ref) {\n      this.props.layer.setDomRef(this._ref);\n    } else {\n      this.props.layer.setDomRef(this);\n    }\n  }\n  get maskPath() {\n    const layer: Layer = this.props.layer;\n    let imageMask = layer.props.get('mask');\n    if (!imageMask) {\n      return '';\n    }\n    return generateSVGPath(\n      imageMask || [],\n      1,\n      true,\n      layer.props.get('viewBox')\n    );\n  }\n  render() {\n    const layer: Layer = this.props.layer;\n    let layerProps = { ...layer.props.getAll() };\n    const layerId = layerProps['id'];\n    delete layerProps['id'];\n    let transform = layer.rotation ? `rotate(${layer.rotation}deg)` : undefined;\n    let imageStyle = {\n      ...layer.style.getAll(),\n      ...layer.layout.getAll(),\n      transform,\n    };\n    let sourceUri: string = get(layerProps, 'source.uri', undefined);\n    const imageURI = layer.props.get('blobURL')\n      ? layer.props.get('blobURL')\n      : sourceUri\n      ? sourceUri\n      : undefined;\n    if (this.maskPath) {\n      let imageMaskId = generateRandomString(6);\n      return (\n        <Svg\n          // @ts-ignore\n          id={layerId}\n          style={imageStyle}\n          key={layer.id}\n          viewBox={layerProps.viewBox}\n          preserveAspectRatio=\"none\"\n          ref={(c: any) => {\n            this._ref = c;\n          }}\n        >\n          <Defs>\n            <Mask id={imageMaskId} x=\"0\" y=\"0\">\n              <Path\n                fill=\"white\" // DOC: hard-coded acc. to the masking behaviour in sketch\n                d={this.maskPath}\n              />\n            </Mask>\n          </Defs>\n          <SVGImage\n            x={layerProps.svgDims.x}\n            y={layerProps.svgDims.y}\n            width={layerProps.svgDims.width}\n            height={layerProps.svgDims.height}\n            href={imageURI}\n            preserveAspectRatio=\"none\"\n            mask={`url(#${imageMaskId})`}\n          />\n        </Svg>\n      );\n    } else if (layerProps.resizeMode === 'center') {\n      return (\n        <img\n          ref={(c: any) => {\n            this._ref = c;\n          }}\n          src={imageURI}\n          {...layerProps}\n          style={{\n            ...imageStyle,\n            objectFit: 'none',\n          }}\n          id={layerId}\n        />\n      );\n    }\n    return (\n      <Image\n        {...layerProps}\n        style={imageStyle}\n        source={{\n          uri: imageURI,\n        }}\n        resizeMode={\n          layerProps['resizeMode'] ? layerProps['resizeMode'] : undefined\n        }\n        nativeID={layerId}\n      />\n    );\n  }\n}\n","import { IComponentDefinition } from '../../interfaces';\n\nconst componentDefinition: IComponentDefinition = {\n  version: '0.0.1',\n  template: {\n    type: 'image',\n    import: {\n      layerName: 'Image',\n      packageName: 'native',\n      isDefaultImport: false,\n      asName: '',\n    },\n    locked: false,\n    template: {\n      centerVertical: false,\n      centerHorizontal: false,\n    },\n    layout: {\n      top: 50,\n      left: 50,\n      width: 200,\n      height: 200,\n      position: 'absolute',\n    },\n    style: {},\n    props: {\n      source: {\n        uri: ``,\n      },\n      resizeMode: 'contain',\n    },\n    children: [],\n  },\n  thumbnail:\n    // tslint:disable-next-line:max-line-length\n    '',\n  name: 'Image',\n  controlsProperty: [\n    {\n      type: 'AlignmentEditor',\n      title: 'Alignment Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'OrientationEditor',\n      title: 'Orientation Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'ResizingTypeEditor',\n      title: 'ResizingType Editor',\n      value: {},\n    },\n\n    {\n      type: 'group',\n      title: 'Styling',\n      value: {},\n      properties: [\n        {\n          propertyName: 'opacity',\n          type: 'range',\n          title: 'Opacity',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 1,\n          },\n          category: 'style',\n        },\n        {\n          propertyName: 'backgroundColor',\n          type: 'color',\n          title: 'Fill',\n          value: {\n            defaultValue: '#fff',\n          },\n          additionalOptions: {\n            showGradient: false,\n          },\n          category: 'style',\n        },\n        {\n          type: 'BorderWidthEditor',\n          title: 'BorderWidth Editor',\n          value: {\n            defaultValue: 1,\n          },\n        },\n        {\n          type: 'BorderRadiusEditor',\n          title: 'BorderRadius Editor',\n          value: {},\n        },\n        {\n          type: 'AccessibilityLabel',\n          title: 'Accessibility Label',\n          value: {},\n        },\n      ],\n    },\n    {\n      type: 'group',\n      title: 'Image',\n      value: {},\n      properties: [\n        {\n          type: 'ImageEditor',\n          title: 'Image',\n          value: {},\n        },\n      ],\n    },\n    // {\n    //   type: \"group\",\n    //   title: \"Conditionals\",\n    //   value: {},\n    //   properties: [\n    //     {\n    //       type: \"ResetConditionalEditor\",\n    //       title: \"Conditional Editor\",\n    //       value: {}\n    //     }\n    //   ]\n    // },\n    {\n      type: 'group',\n      title: 'Layout',\n      value: {},\n      properties: [\n        {\n          type: 'FlexboxEditor',\n          title: 'Flexbox Editor',\n          value: {},\n        },\n        {\n          type: 'MarginPaddingEditor',\n          title: '',\n          value: {},\n        },\n        /*{\n          type: \"LoopEditor\",\n          title: \"Loop Editor\",\n          value: {}\n       }*/\n      ],\n    },\n  ],\n};\n\nexport default componentDefinition;\n","import { Canvas, IPlugin } from '../..';\nimport ImageRenderer from './ImageRenderer';\nimport ImageComponentDefinition from './ImageComponentDefinition';\n\nexport default class ImageRendererPlugin implements IPlugin {\n  name = 'ImageRenderer';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addComponent('image', ImageRenderer, ImageComponentDefinition);\n  }\n\n  deactivate() {}\n}\n","import * as React from 'react';\nimport { Layer } from 'models/Layer';\nimport Svg, { Path, Defs, Mask, LinearGradient, Stop } from 'svgs';\nimport { generateSVGPath } from '@builderx-core/conversions';\nimport { generateRandomString } from '../../models/utils';\nimport { isEmpty } from 'lodash';\n\nconst rerenderProps = ['layout', 'children', 'props', 'style', 'visible'];\nexport default class PathRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  _ref: any;\n\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this);\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this);\n  }\n\n  get svgPath() {\n    const layer: Layer = this.props.layer;\n    let pathProps = layer.props.getAll();\n    return generateSVGPath(\n      pathProps.points,\n      pathProps.strokeWidth,\n      pathProps.isClosed,\n      pathProps.viewBox\n    );\n  }\n  get maskPath() {\n    const layer: Layer = this.props.layer;\n    let imageMask = layer.props.get('mask');\n    if (!imageMask) {\n      return '';\n    }\n    return generateSVGPath(\n      imageMask || [],\n      1,\n      true,\n      layer.props.get('viewBox')\n    );\n  }\n  render() {\n    const layer: Layer = this.props.layer;\n    const layerProps = { ...layer.props.getAll() };\n    const layerId = layerProps['id'];\n    delete layerProps['id'];\n    let transform = layer.rotation ? `rotate(${layer.rotation}deg)` : undefined;\n    let pathStyle = {\n      ...layer.style.getAll(),\n      ...layer.layout.getAll(),\n      transform,\n    };\n    delete pathStyle['backgroundImage'];\n\n    const gradient = layer.style.get('gradient') || {};\n    const mask = layer.props.get('mask');\n    let maskId = generateRandomString(6);\n    const gradientId = generateRandomString(6);\n    return (\n      <Svg\n        // @ts-ignore\n        id={layerId}\n        style={pathStyle}\n        viewBox={layerProps.viewBox}\n        preserveAspectRatio=\"none\"\n      >\n        {!isEmpty(gradient) || (mask && !isEmpty(mask)) ? (\n          <Defs>\n            {mask && !isEmpty(mask) && (\n              <Mask id={maskId} x=\"0\" y=\"0\">\n                <Path\n                  fill=\"white\" // DOC: hard-coded acc. to the masking behaviour in sketch\n                  d={this.maskPath}\n                />\n              </Mask>\n            )}\n            {!isEmpty(gradient) && (\n              <LinearGradient\n                id={gradientId}\n                x1={gradient.from.x}\n                y1={gradient.from.y}\n                x2={gradient.to.x}\n                y2={gradient.to.y}\n              >\n                {gradient.stops.map((stop: any, index: any) => {\n                  return (\n                    <Stop\n                      key={`gradient-${gradient.id}-stop-${index}`}\n                      offset={stop.offset}\n                      stopColor={stop.stopColor}\n                    />\n                  );\n                })}\n              </LinearGradient>\n            )}\n          </Defs>\n        ) : null}\n        <Path\n          stroke={layerProps.stroke}\n          // transform={layerProps.rotation ? transform : undefined}\n          fill={!isEmpty(gradient) ? `url(#${gradientId})` : layerProps.fill}\n          strokeWidth={layerProps.strokeWidth}\n          fillOpacity={layerProps.fillOpacity}\n          strokeOpacity={layerProps.strokeOpacity}\n          clipPath={layerProps.clipPath}\n          d={this.svgPath}\n          // rotation={layerProps.rotation}\n          mask={mask && !isEmpty(mask) ? `url(#${maskId})` : undefined}\n        />\n      </Svg>\n    );\n  }\n}\n","import { IComponentDefinition } from '../../interfaces';\n\nconst componentDefinition: IComponentDefinition = {\n  version: '0.0.1',\n  template: {\n    type: 'path',\n    children: [],\n    import: {\n      layerName: 'Path',\n      packageName: 'react-native-svg',\n      isDefaultImport: false,\n      asName: '',\n    },\n    locked: false,\n    template: {\n      centerVertical: false,\n      centerHorizontal: false,\n    },\n    layout: {\n      top: 50,\n      left: 50,\n      width: 50,\n      height: 50,\n      position: 'absolute',\n    },\n    style: {},\n    props: {\n      points: [],\n      isClosed: true,\n      strokeWidth: 0,\n      stroke: 'rgba(230, 230, 230,1)',\n      fill: 'rgba(230, 230, 230,1)',\n    },\n  },\n  thumbnail:\n    // tslint:disable-next-line:max-line-length\n    '',\n  name: 'Path',\n  controlsProperty: [\n    {\n      type: 'AlignmentEditor',\n      title: 'Alignment Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'OrientationEditor',\n      title: 'Orientation Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    // {\n    //   type: \"LoopEditor\",\n    //   title: \"Loop Editor\",\n    //   value: {}\n    // },\n    {\n      type: 'group',\n      title: 'Styling',\n      value: {},\n      properties: [\n        {\n          propertyName: 'opacity',\n          type: 'range',\n          title: 'Opacity',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 1,\n          },\n          category: 'style',\n        },\n        {\n          type: 'PathCurveTypeEditor',\n          title: 'Point Mode',\n          value: {},\n        },\n        {\n          propertyName: 'fill',\n          type: 'simpleColor',\n          title: 'Fill',\n          value: {\n            defaultValue: '#fff',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'stroke',\n          type: 'simpleColor',\n          title: 'Stroke',\n          value: {\n            defaultValue: '#fff',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'strokeWidth',\n          type: 'range',\n          title: 'Stroke Width',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 100,\n          },\n          category: 'props',\n        },\n      ],\n    },\n  ],\n};\n\nexport default componentDefinition;\n","import { Canvas, IPlugin } from '../..';\nimport PathRenderer from './PathRenderer';\nimport PathComponentDefinition from './PathComponentDefinition';\n\nexport default class PathRendererPlugin implements IPlugin {\n  name = 'PathRenderer';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addComponent('path', PathRenderer, PathComponentDefinition);\n  }\n\n  deactivate() {}\n}\n","//@ts-nocheck\nimport EntypoIcon from 'react-native-vector-icons/dist/Entypo';\nimport AntDesignIcon from 'react-native-vector-icons/dist/AntDesign';\nimport EvilIconsIcon from 'react-native-vector-icons/dist/EvilIcons';\nimport FeatherIcon from 'react-native-vector-icons/dist/Feather';\nimport FontAwesomeIcon from 'react-native-vector-icons/dist/FontAwesome';\nimport FoundationIcon from 'react-native-vector-icons/dist/Foundation';\nimport IoniconsIcon from 'react-native-vector-icons/dist/Ionicons';\nimport MaterialCommunityIconsIcon from 'react-native-vector-icons/dist/MaterialCommunityIcons';\nimport MaterialIconsIcon from 'react-native-vector-icons/dist/MaterialIcons';\nimport OcticonsIcon from 'react-native-vector-icons/dist/Octicons';\nimport SimpleLineIconsIcon from 'react-native-vector-icons/dist/SimpleLineIcons';\nimport ZocialIcon from 'react-native-vector-icons/dist/Zocial';\nimport EntypoFont from 'react-native-vector-icons/Fonts/Entypo.ttf';\nimport AntDesignFont from 'react-native-vector-icons/Fonts/AntDesign.ttf';\nimport EvilIconsFont from 'react-native-vector-icons/Fonts/EvilIcons.ttf';\nimport FeatherFont from 'react-native-vector-icons/Fonts/Feather.ttf';\nimport FontAwesomeFont from 'react-native-vector-icons/Fonts/FontAwesome.ttf';\nimport FoundationFont from 'react-native-vector-icons/Fonts/Foundation.ttf';\nimport IoniconsFont from 'react-native-vector-icons/Fonts/Ionicons.ttf';\nimport MaterialCommunityIconsFont from 'react-native-vector-icons/Fonts/MaterialCommunityIcons.ttf';\nimport MaterialIconsFont from 'react-native-vector-icons/Fonts/MaterialIcons.ttf';\nimport OcticonsFont from 'react-native-vector-icons/Fonts/Octicons.ttf';\nimport SimpleLineIconsFont from 'react-native-vector-icons/Fonts/SimpleLineIcons.ttf';\nimport ZocialFont from 'react-native-vector-icons/Fonts/Zocial.ttf';\n\nexport const Icons: Array<string, any> = {\n  EntypoIcon: EntypoIcon,\n  AntDesignIcon: AntDesignIcon,\n  EvilIconsIcon: EvilIconsIcon,\n  FeatherIcon: FeatherIcon,\n  FontAwesomeIcon: FontAwesomeIcon,\n  FoundationIcon: FoundationIcon,\n  IoniconsIcon: IoniconsIcon,\n  MaterialCommunityIconsIcon: MaterialCommunityIconsIcon,\n  MaterialIconsIcon: MaterialIconsIcon,\n  OcticonsIcon: OcticonsIcon,\n  SimpleLineIconsIcon: SimpleLineIconsIcon,\n  ZocialIcon: ZocialIcon,\n};\nexport const Fonts: Array<string, any> = {\n  EntypoFont: EntypoFont,\n  AntDesignFont: AntDesignFont,\n  EvilIconsFont: EvilIconsFont,\n  FeatherFont: FeatherFont,\n  FontAwesomeFont: FontAwesomeFont,\n  FoundationFont: FoundationFont,\n  IoniconsFont: IoniconsFont,\n  MaterialCommunityIconsFont: MaterialCommunityIconsFont,\n  MaterialIconsFont: MaterialIconsFont,\n  OcticonsFont: OcticonsFont,\n  SimpleLineIconsFont: SimpleLineIconsFont,\n  ZocialFont: ZocialFont,\n};\n","import * as React from 'react';\nimport { Layer } from 'models/Layer';\nimport { Icons } from './IconMap';\nimport RenderEvent from '../../events/RenderEvent';\n\nconst rerenderProps = [\n  'layout',\n  'children',\n  'props',\n  'style',\n  'innerText',\n  'visible',\n];\nexport default class IconRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  _ref: any;\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n    this.props.layer.dispatchEvent(\n      'domDidMount',\n      new RenderEvent('domDidMount', this)\n    );\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  componentWillUpdate() {\n    this.props.layer.dispatchEvent(\n      'domWillUpdate',\n      new RenderEvent('domWillUpdate', this)\n    );\n  }\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n\n    this.props.layer.dispatchEvent(\n      'domDidUpdate',\n      new RenderEvent('domDidUpdate', this)\n    );\n  }\n\n  render() {\n    const layer: Layer = this.props.layer;\n    const layerProps = { ...layer.props.getAll() };\n    const layerId = layerProps['id'];\n    delete layerProps['id'];\n    let iconStyle = { ...layer.style.getAll(), ...layer.layout.getAll() };\n    iconStyle = {\n      ...iconStyle,\n      overflow: iconStyle.overflow ? iconStyle.overflow : 'hidden',\n      height: 'fit-content',\n      width: 'fit-content',\n    };\n    delete iconStyle['fontPostscriptName'];\n    const iconType = layerProps.type ? layerProps.type : 'Entypo';\n    const Icon = Icons[`${iconType}Icon`] || Icons[`EntypoIcon`];\n    return (\n      <Icon\n        ref={(c: any) => {\n          this._ref = c;\n        }}\n        {...layerProps}\n        style={iconStyle}\n        nativeID={layerId}\n      />\n    );\n  }\n}\n","import { IComponentDefinition } from '../../interfaces';\nconst IconComponentDefinition: IComponentDefinition = {\n  version: '0.0.1',\n  template: {\n    type: 'icon',\n    children: [],\n    import: {\n      layerName: 'Icon',\n      packageName: '@builderx/icons',\n      isDefaultImport: true,\n      asName: '',\n    },\n    locked: false,\n    template: {\n      centerVertical: false,\n      centerHorizontal: false,\n    },\n    layout: {\n      top: 150,\n      left: 150,\n      position: 'absolute',\n    },\n    style: {\n      color: 'rgba(128,128,128,1)',\n      fontSize: 40,\n    },\n    props: {\n      type: 'MaterialCommunityIcons',\n      name: 'home',\n    },\n  },\n  thumbnail: '',\n  name: 'Icon',\n  controlsProperty: [\n    {\n      type: 'AlignmentEditor',\n      title: 'Alignment Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'OrientationEditor',\n      title: 'Orientation Editor',\n      value: {},\n      showForMultiple: true,\n      additionalOptions: {\n        hideSize: true,\n      },\n    },\n    {\n      type: 'ResizingTypeEditor',\n      title: 'ResizingType Editor',\n      value: {},\n      additionalOptions: {\n        hideSize: true,\n      },\n    },\n    {\n      type: 'IconEditor',\n      title: 'Icon Editor',\n      value: {},\n    },\n    {\n      type: 'group',\n      title: 'Layout',\n      value: {},\n      properties: [\n        {\n          type: 'FlexboxEditor',\n          title: 'Flexbox Editor',\n          value: {},\n        },\n        {\n          type: 'MarginPaddingEditor',\n          title: 'MarginPadding Editor',\n          value: {},\n        },\n        /*{\n          type: \"LoopEditor\",\n          title: \"Loop Editor\",\n          value: {}\n       }*/\n      ],\n    },\n    {\n      type: 'group',\n      title: 'Styling',\n      value: {},\n      properties: [\n        {\n          propertyName: 'color',\n          type: 'color',\n          title: 'Color',\n          value: {\n            defaultValue: 'rgba(128,128,128,1)',\n          },\n          category: 'style',\n        },\n        {\n          propertyName: 'fontSize',\n          type: 'range',\n          title: 'Size',\n          value: {\n            defaultValue: 40,\n            min: 0,\n            max: 200,\n          },\n          category: 'style',\n        },\n        {\n          propertyName: 'opacity',\n          type: 'range',\n          title: 'Opacity',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 1,\n          },\n          category: 'style',\n        },\n      ],\n    },\n  ],\n};\n\nexport default IconComponentDefinition;\n","import { Canvas, IPlugin } from '../..';\nimport IconRenderer from './IconRenderer';\nimport IconComponentDefinition from './IconComponentDefinition';\n\nexport default class IconRendererPlugin implements IPlugin {\n  name = 'IconRendererPlugin';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addComponent('icon', IconRenderer, IconComponentDefinition);\n  }\n\n  deactivate() {}\n}\n","import * as React from 'react';\nimport { Layer } from 'models/Layer';\nimport { Switch } from 'react-native-web';\nimport RenderEvent from '../../../events/RenderEvent';\n\nconst rerenderProps = ['layout', 'props', 'style', 'visible'];\nexport default class AndroidSwitchRenderer extends React.PureComponent<\n  any,\n  any\n> {\n  _ref: any;\n\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n\n    this.props.layer.dispatchEvent(\n      'domDidMount',\n      new RenderEvent('domDidMount', this)\n    );\n  }\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n\n    this.props.layer.dispatchEvent(\n      'domDidUpdate',\n      new RenderEvent('domDidUpdate', this)\n    );\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  render() {\n    const layer: Layer = this.props.layer;\n    const switchStyle = { ...layer.style.getAll(), ...layer.layout.getAll() };\n    const layerProps = { ...layer.props.getAll() };\n    const layerId = layerProps['id'];\n    delete layerProps['id'];\n    return (\n      <Switch\n        ref={(c: any) => {\n          this._ref = c;\n        }}\n        {...layerProps}\n        activeThumbColor={layerProps.thumbTintColor}\n        trackColor={{\n          true: layerProps.onTintColor,\n          false: layerProps.tintColor,\n        }}\n        style={{ ...switchStyle, width: undefined, height: undefined }}\n        nativeID={layerId}\n      />\n    );\n  }\n}\n","import styled from 'styled-components';\nimport * as React from 'react';\n\nexport default styled.input<any & React.HTMLProps<HTMLInputElement>>`\n  cursor: ${(props: any) =>\n    props.disabled !== undefined && props.disabled ? 'not-allowed' : 'pointer'};\n  -webkit-appearance: none;\n  font-size: 5px;\n  position: relative;\n  display: inline-block;\n  width: 9em;\n  height: 4.6em;\n  line-height: 4.6em;\n  border-radius: 2.3em;\n  margin: 0;\n  padding: 0;\n  transform: ${(props: any) =>\n    props.style.transform\n      ? `rotate(${props.style.transform[0].rotate})`\n      : `rotate(0deg);`};\n  box-shadow: ${(props: any) =>\n    props.disabled\n      ? 'inset 0 0 0 0.2em #bbb;'\n      : props.tintColor\n      ? 'inset 0 0 0 0.2em ' + props.tintColor\n      : 'inset 0 0 0 0.2em #ddd;'};\n  outline: 1px solid transparent !important;\n  border: none;\n  background: transparent;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n  :checked {\n    content: '';\n    box-shadow: ${(props: any) =>\n      props.disabled\n        ? 'inset 0 0 0 2.62857em #ddd !important;'\n        : props.onTintColor\n        ? 'inset 0 0 0 2.62857em ' + props.onTintColor + '!important;'\n        : 'inset 0 0 0 2.62857em #00c169 !important;'};\n    padding-left: 4.4em;\n  }\n  :before {\n    content: '';\n    display: inline-block;\n    height: 4.2em;\n    width: 4.2em;\n    margin: 0.2em 0 0 0.2em;\n    background-color: ${(props: any) =>\n      props.disabled\n        ? '#ccc'\n        : props.thumbTintColor\n        ? props.thumbTintColor\n        : '#fff'};\n    border-radius: 2.1em;\n    box-shadow: 0 0.2em 0.4em 0 rgba(0, 0, 0, 0.2),\n      0 0 0.1em 0.1em rgba(0, 0, 0, 0.1);\n  }\n`;\n","import * as React from 'react';\nimport { Layer } from 'models/Layer';\nimport IOSSwitch from './IOSSwitch';\nimport RenderEvent from '../../../events/RenderEvent';\nconst rerenderProps = ['layout', 'props', 'style', 'visible'];\nexport default class IOSSwitchRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  _ref: any;\n\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n\n    this.props.layer.dispatchEvent(\n      'domDidMount',\n      new RenderEvent('domDidMount', this)\n    );\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n\n    this.props.layer.dispatchEvent(\n      'domDidUpdate',\n      new RenderEvent('domDidUpdate', this)\n    );\n  }\n\n  render() {\n    const layer = this.props.layer;\n    const switchStyle = { ...layer.style.getAll(), ...layer.layout.getAll() };\n    const layerProps = { ...layer.props.getAll() };\n    const layerId = layerProps['id'];\n    delete layerProps['id'];\n    return (\n      <IOSSwitch\n        ref={(c: any) => {\n          this._ref = c;\n        }}\n        type=\"checkbox\"\n        {...layerProps}\n        checked={layerProps.value}\n        onChange={() => {\n          //\n        }}\n        style={{ ...switchStyle, width: undefined, height: undefined }}\n        nativeID={layerId}\n      />\n    );\n  }\n}\n","import * as React from 'react';\nimport AndroidRenderer from './android/AndroidSwitchRenderer';\nimport IOSRenderer from './iOS/IOSSwitchRenderer';\nimport { Layer } from 'models/Layer';\nimport RenderEvent from '../../events/RenderEvent';\n\nconst rerenderProps = ['layout', 'props', 'style', 'visible'];\nexport default class SwitchRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n  }\n\n  render() {\n    let platform = 'iOS';\n    const deviceData = this.props.layer.executeFunction('getDeviceData');\n\n    if (deviceData) {\n      platform = deviceData.platform;\n    }\n\n    return platform === 'Android' ? (\n      <AndroidRenderer {...this.props} />\n    ) : (\n      <IOSRenderer {...this.props} />\n    );\n  }\n}\n","import { IComponentDefinition } from '../../interfaces';\n\nconst AndroidSwitchComponentDefinition: IComponentDefinition = {\n  version: '0.0.1',\n  template: {\n    type: 'switch',\n    import: {\n      layerName: 'Switch',\n      packageName: 'react-native',\n      isDefaultImport: false,\n      asName: '',\n    },\n    locked: false,\n    template: {\n      centerVertical: false,\n      centerHorizontal: false,\n    },\n    layout: {\n      position: 'absolute',\n      top: 50,\n      left: 50,\n    },\n    style: {},\n    props: {\n      value: true,\n    },\n    children: [],\n  },\n  thumbnail: '',\n  name: 'Switch',\n\n  controlsProperty: [\n    {\n      type: 'AlignmentEditor',\n      title: 'Alignment Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'OrientationEditor',\n      title: 'Orientation Editor',\n      value: {},\n      showForMultiple: true,\n      additionalOptions: {\n        hideSize: true,\n      },\n    },\n    {\n      type: 'ResizingTypeEditor',\n      title: 'ResizingType Editor',\n      value: {},\n      additionalOptions: {\n        hideSize: true,\n      },\n    },\n    {\n      type: 'group',\n      title: 'Styling',\n      value: {},\n      properties: [\n        {\n          propertyName: 'opacity',\n          type: 'range',\n          title: 'Opacity',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 1,\n          },\n          category: 'style',\n        },\n      ],\n    },\n    {\n      type: 'group',\n      title: 'Switch',\n      value: {},\n      properties: [\n        {\n          propertyName: 'value',\n          category: 'props',\n          type: 'boolean',\n          title: 'Value',\n          value: {\n            defaultValue: false,\n          },\n        },\n        {\n          propertyName: 'disabled',\n          category: 'props',\n          type: 'boolean',\n          title: 'Disabled',\n          value: {\n            defaultValue: false,\n          },\n        },\n        {\n          propertyName: 'thumbTintColor',\n          type: 'bareColor',\n          title: 'Grip',\n          value: {\n            defaultValue: '#fff',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'onTintColor',\n          type: 'bareColor',\n          title: 'Turned On',\n          value: {\n            defaultValue: '#fff',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'tintColor',\n          type: 'bareColor',\n          title: 'Turned Off',\n          value: {\n            defaultValue: '#fff',\n          },\n          category: 'props',\n        },\n      ],\n    },\n  ],\n};\n\nexport default AndroidSwitchComponentDefinition;\n","import { Canvas } from '../..';\nimport { IPlugin } from '../..';\nimport SwitchRenderer from './SwitchRenderer';\nimport SwitchComponentDefinition from './SwitchComponentDefinition';\n\nexport default class IOSSwitchRendererPlugin implements IPlugin {\n  name = 'IOSSwitchRenderer';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addComponent(\n      'switch',\n      SwitchRenderer,\n      SwitchComponentDefinition\n    );\n  }\n\n  deactivate() {}\n}\n","import * as React from 'react';\nimport { Layer } from 'models/Layer';\nimport { ActivityIndicator } from 'react-native-web';\nimport RenderEvent from '../../../events/RenderEvent';\nconst rerenderProps = ['layout', 'props', 'style', 'visible'];\nexport default class AndroidActivityIndicatorRenderer extends React.PureComponent<\n  any,\n  any\n> {\n  _ref: any;\n\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n\n    this.props.layer.dispatchEvent(\n      'domDidMount',\n      new RenderEvent('domDidMount', this)\n    );\n  }\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n\n    this.props.layer.dispatchEvent(\n      'domDidUpdate',\n      new RenderEvent('domDidUpdate', this)\n    );\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  render() {\n    const layer: Layer = this.props.layer;\n    const layerProps = { ...layer.props.getAll() };\n    const layerId = layerProps['id'];\n    delete layerProps['id'];\n    const activityIndicatorStyle = {\n      ...layer.style.getAll(),\n      ...layer.layout.getAll(),\n    };\n    const height = layerProps.size === 'large' ? 40 : 22;\n    const width = layerProps.size === 'large' ? 39 : 22;\n\n    return (\n      <ActivityIndicator\n        ref={(c: any) => {\n          this._ref = c;\n        }}\n        {...layerProps}\n        style={{ ...activityIndicatorStyle, height, width }}\n        nativeID={layerId}\n      />\n    );\n  }\n}\n","import * as React from 'react';\nimport styled, { keyframes } from 'styled-components';\n\nconst defaultSpinnerColor = '#353940';\n\nexport const keyFrameFade = keyframes`\nfrom {\n  opacity: 1;\n}\nto {\n  opacitfy: 0.25;\n}\n`;\n\nconst Bar = styled.div<any & React.HTMLProps<HTMLDivElement>>`\n  width: 6%;\n  height: 16%;\n  background: #000;\n  position: absolute;\n  left: 49%;\n  top: 43%;\n  opacity: 0;\n  -webkit-border-radius: 50px;\n  -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);\n  -webkit-animation: ${keyFrameFade} 1s linear infinite;\n  background: ${(props: any) =>\n    props.color ? props.color : defaultSpinnerColor};\n`;\n\nconst SpinnerWrapper = styled.div<any & React.HTMLProps<HTMLDivElement>>`\n  position: relative;\n  display: inline-block;\n`;\n\nconst IOSSpinner = React.forwardRef((props: any, ref: any) => {\n  const { size, color, ...remainingProps } = props;\n  const height = size === 'large' ? 40 : 22;\n  const width = size === 'large' ? 40 : 22;\n  return (\n    <SpinnerWrapper\n      ref={ref}\n      style={{ height: height, width: width }}\n      {...remainingProps}\n    >\n      <Bar\n        color={color}\n        style={{\n          transform: 'rotate(0deg) translate(0, -130%)',\n          animationDelay: '0s',\n        }}\n      />\n      <Bar\n        color={color}\n        style={{\n          transform: 'rotate(30deg) translate(0, -130%)',\n          animationDelay: '-0.9167s',\n        }}\n      />\n      <Bar\n        color={color}\n        style={{\n          transform: 'rotate(60deg) translate(0, -130%)',\n          animationDelay: '-0.833s',\n        }}\n      />\n      <Bar\n        color={color}\n        style={{\n          transform: 'rotate(90deg) translate(0, -130%)',\n          animationDelay: '-0.7497s',\n        }}\n      />\n      <Bar\n        color={color}\n        style={{\n          transform: 'rotate(120deg) translate(0, -130%)',\n          animationDelay: '-0.667s',\n        }}\n      />\n      <Bar\n        color={color}\n        style={{\n          transform: 'rotate(150deg) translate(0, -130%)',\n          animationDelay: '-0.5837s',\n        }}\n      />\n      <Bar\n        color={color}\n        style={{\n          transform: 'rotate(180deg) translate(0, -130%)',\n          animationDelay: '-0.5s',\n        }}\n      />\n      <Bar\n        color={color}\n        style={{\n          transform: 'rotate(210deg) translate(0, -130%)',\n          animationDelay: '-0.4167s',\n        }}\n      />\n      <Bar\n        color={color}\n        style={{\n          transform: 'rotate(240deg) translate(0, -130%)',\n          animationDelay: '-0.333s',\n        }}\n      />\n      <Bar\n        color={color}\n        style={{\n          transform: 'rotate(270deg) translate(0, -130%)',\n          animationDelay: '-0.2497s',\n        }}\n      />\n      <Bar\n        color={color}\n        style={{\n          transform: 'rotate(300deg) translate(0, -130%)',\n          animationDelay: '-0.167s',\n        }}\n      />\n      <Bar\n        color={color}\n        style={{\n          transform: 'rotate(330deg) translate(0, -130%)',\n          animationDelay: '-0.0833s',\n        }}\n      />\n    </SpinnerWrapper>\n  );\n});\nexport default IOSSpinner;\n","import * as React from 'react';\nimport { Layer } from 'models/Layer';\nimport IOSSpinner from './IOSSpinner';\nimport RenderEvent from '../../../events/RenderEvent';\n\nconst rerenderProps = ['layout', 'props', 'style', 'visible'];\nexport default class IOSActivityIndicatorRenderer extends React.PureComponent<\n  any,\n  any\n> {\n  _ref: any;\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n    this.props.layer.dispatchEvent(\n      'domDidMount',\n      new RenderEvent('domDidMount', this)\n    );\n  }\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n    this.props.layer.dispatchEvent(\n      'domDidUpdate',\n      new RenderEvent('domDidUpdate', this)\n    );\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  render() {\n    const layer: Layer = this.props.layer;\n    const layerProps = { ...layer.props.getAll() };\n    const layerId = layerProps['id'];\n    delete layerProps['id'];\n    const layerStyle = {\n      ...layer.style.getAll(),\n      ...layer.layout.getAll(),\n    };\n    const height = layerProps.size === 'large' ? 40 : 22;\n    const width = layerProps.size === 'large' ? 39 : 22;\n    return (\n      <IOSSpinner\n        ref={(c: any) => {\n          this._ref = c;\n        }}\n        {...layerProps}\n        color={layerProps.color}\n        style={{ ...layerStyle, height, width }}\n        className={layerId}\n      />\n    );\n  }\n}\n","import * as React from 'react';\nimport AndroidRenderer from './android/AndroidActivityIndicatorRenderer';\nimport IOSRenderer from './iOS/IOSActivityIndicatorRenderer';\nimport RenderEvent from '../../events/RenderEvent';\nimport { Layer } from 'models/Layer';\n\nconst rerenderProps = ['layout', 'props', 'style', 'visible'];\nexport default class ActivityIndicatorRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n  }\n\n  render() {\n    let platform = 'iOS';\n    const deviceData = this.props.layer.executeFunction('getDeviceData');\n\n    if (deviceData) {\n      platform = deviceData.platform;\n    }\n\n    return platform === 'Android' ? (\n      <AndroidRenderer {...this.props} />\n    ) : (\n      <IOSRenderer {...this.props} />\n    );\n  }\n}\n","import { IComponentDefinition } from '../../interfaces';\n\nconst ActivityIndicatorComponentDefinition: IComponentDefinition = {\n  version: '0.0.1',\n  template: {\n    type: 'activityIndicator',\n    import: {\n      layerName: 'ActivityIndicator',\n      packageName: 'react-native',\n      isDefaultImport: false,\n      asName: '',\n    },\n    locked: false,\n    template: {\n      centerVertical: false,\n      centerHorizontal: false,\n    },\n    layout: { position: 'absolute', top: 50, left: 50 },\n    style: {},\n    props: {},\n    children: [],\n  },\n  thumbnail: '',\n  name: 'ActivityIndicator',\n  controlsProperty: [\n    {\n      type: 'AlignmentEditor',\n      title: 'Alignment Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'OrientationEditor',\n      title: 'Orientation Editor',\n      value: {},\n      showForMultiple: true,\n      additionalOptions: {\n        hideSize: true,\n      },\n    },\n    {\n      type: 'ResizingTypeEditor',\n      title: 'ResizingType Editor',\n      value: {},\n      additionalOptions: {\n        hideSize: true,\n      },\n    },\n    {\n      type: 'group',\n      title: 'Activity Indicator',\n      value: {},\n      properties: [\n        {\n          propertyName: 'color',\n          type: 'simpleColor',\n          title: 'Color',\n          value: {\n            defaultValue: '#fff',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'size',\n          type: 'enum',\n          title: 'Size',\n          value: {\n            options: ['small', 'large'],\n            defaultValue: 'small',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'opacity',\n          type: 'range',\n          title: 'Opacity',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 1,\n          },\n          category: 'style',\n        },\n      ],\n    },\n  ],\n};\n\nexport default ActivityIndicatorComponentDefinition;\n","import { Canvas } from '../..';\nimport { IPlugin } from '../..';\nimport ActivityIndicatorRenderer from './ActivityIndicatorRenderer';\nimport ActivityIndicatorComponentDefinition from './ActivityIndicatorComponentDefinition';\n\nexport default class ActivityIndicatorRendererPlugin implements IPlugin {\n  name = 'ActivityIndicatorRenderer';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addComponent(\n      'activityIndicator',\n      ActivityIndicatorRenderer,\n      ActivityIndicatorComponentDefinition\n    );\n  }\n\n  deactivate() {}\n}\n","import * as React from 'react';\nimport { Layer } from 'models/Layer';\nimport get from 'lodash/get';\nimport Svg, { Ellipse } from 'svgs';\nconst rerenderProps = [\n  'layout',\n  'children',\n  'props',\n  'style',\n  'visible',\n  'gradient',\n];\n\nexport default class EllipseRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  _ref: any;\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this);\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this);\n  }\n\n  render() {\n    const layer: Layer = this.props.layer;\n    let ellipseProps = { ...layer.props.getAll() };\n    const layerId = ellipseProps['id'];\n    delete ellipseProps['id'];\n    let transform = layer.rotation ? `rotate(${layer.rotation}deg)` : undefined;\n    let ellipseStyle = {\n      ...layer.style.getAll(),\n      ...layer.layout.getAll(),\n      transform,\n    };\n    let strokeWidth = Number(get(ellipseProps, 'strokeWidth', 0));\n    let appliedProps = {\n      cx: ellipseProps.cx,\n      cy: ellipseProps.cy,\n      rx: ellipseProps.rx,\n      ry: ellipseProps.ry,\n      fill: get(ellipseProps, 'fill', 'transparent'),\n      // fill: gradientType ? `url(#${gradientId})` : extractedProps.fill,\n      fillOpacity: ellipseProps.fillOpacity,\n      strokeOpacity: ellipseProps.strokeOpacity,\n      stroke: ellipseProps.stroke,\n      strokeWidth,\n    };\n    return (\n      <Svg\n        ref={(c: any) => {\n          this._ref = c;\n        }}\n        // @ts-ignore\n        getRef={(c: any) => {\n          console.log(c, 'ref here');\n        }}\n        // @ts-ignore\n        id={layerId}\n        style={ellipseStyle}\n        viewBox={ellipseProps.viewBox}\n        preserveAspectRatio=\"none\"\n      >\n        <Ellipse {...appliedProps} />\n      </Svg>\n    );\n  }\n}\n","import { IComponentDefinition } from '../../interfaces';\n\nconst componentDefinition: IComponentDefinition = {\n  version: '0.0.1',\n  template: {\n    type: 'ellipse',\n    import: {\n      layerName: 'Ellipse',\n      packageName: 'react-native-svg',\n      isDefaultImport: false,\n      asName: '',\n    },\n    locked: false,\n    template: {\n      centerVertical: false,\n      centerHorizontal: false,\n    },\n    layout: {\n      top: 50,\n      left: 50,\n      width: 100,\n      height: 100,\n      position: 'absolute',\n    },\n    style: {},\n    props: {\n      stroke: 'rgba(230, 230, 230,1)',\n      strokeWidth: 0,\n      fill: 'rgba(230, 230, 230,1)',\n    },\n    children: [],\n  },\n  thumbnail:\n    // tslint:disable-next-line:max-line-length\n    '',\n  name: 'Ellipse',\n  controlsProperty: [\n    {\n      type: 'AlignmentEditor',\n      title: 'Alignment Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'OrientationEditor',\n      title: 'Orientation Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'group',\n      title: 'Styling',\n      value: {},\n      properties: [\n        {\n          propertyName: 'opacity',\n          type: 'range',\n          title: 'Opacity',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 1,\n          },\n          category: 'style',\n        },\n        {\n          propertyName: 'fill',\n          type: 'simpleColor',\n          title: 'Fill',\n          value: {\n            defaultValue: '#fff',\n          },\n          additionalOptions: {\n            showGradient: false,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'stroke',\n          type: 'simpleColor',\n          title: 'Stroke',\n          value: {\n            defaultValue: '#000',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'strokeWidth',\n          type: 'range',\n          title: 'Width',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 100,\n          },\n          category: 'props',\n        },\n      ],\n    },\n    {\n      type: 'group',\n      title: 'Layout',\n      value: {},\n      properties: [\n        {\n          type: 'FlexboxEditor',\n          title: 'Flexbox Editor',\n          value: {},\n        },\n        {\n          type: 'MarginPaddingEditor',\n          title: '',\n          value: {},\n        },\n        /*{\n          type: \"LoopEditor\",\n          title: \"Loop Editor\",\n          value: {}\n       }*/\n      ],\n    },\n  ],\n};\n\nexport default componentDefinition;\n","import { Canvas } from '../..';\nimport { IPlugin } from '../..';\nimport EllipseRenderer from './EllipseRenderer';\nimport EllipseComponentDefinition from './EllipseComponentDefinition';\n\nexport default class EllipseRendererPlugin implements IPlugin {\n  name = 'EllipseRenderer';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n\n    // canvas.registerDataStore(\"MyPlugin\")\n  }\n\n  activate() {\n    this.canvas.addComponent(\n      'ellipse',\n      EllipseRenderer,\n      EllipseComponentDefinition\n    );\n    // this.canvas.addEventListener('click', e => {\n    //   console.log(e);\n    // });\n  }\n\n  deactivate() {}\n}\n","import styled from 'styled-components';\n\ninterface ProgressBarPropTypes {\n  value: number;\n  minimumTrackTintColor: string | undefined;\n  maximumTrackTintColor: string | undefined;\n}\ninterface ButtonPropTypes {\n  value: number;\n  disabled?: boolean;\n  thumbTintColor: string | undefined;\n}\n\nexport const SliderWrapper = styled.div``;\n\nexport const AndroidSliderButton = styled.div<\n  ButtonPropTypes & React.HTMLProps<HTMLDivElement>\n>`\n  -webkit-appearance: none;\n  background-color: #666;\n  width: 14px;\n  height: 14px;\n  // z-index:2;\n  border-radius: 50%;\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  position: relative;\n  top: -5.5px;\n  background: ${(props: any) => {\n    const { disabled, thumbTintColor } = props;\n    return disabled ? '#666' : thumbTintColor ? thumbTintColor : '#00897b';\n  }};\n  left: ${(props: any) => {\n    const { value } = props;\n    return value ? `${value}px` : '0px';\n  }};\n  box-shadow: ${(props: any) =>\n    props.disabled ? '0px 2px 4px transparent' : '0px 2px 4px rgba(0,0,0,.2)'};\n`;\n\nexport const AndroidSliderProgressBar = styled.div<\n  ProgressBarPropTypes & React.HTMLProps<HTMLDivElement>\n>`\n  height: 2px;\n  border-radius: 2px;\n  position: relative;\n  -webkit-appearance: none;\n\n  background-image: ${(props: any) => {\n    const { value, minimumTrackTintColor, maximumTrackTintColor } = props;\n    return value\n      ? `-webkit-gradient(\n              linear,\n              left top,\n              right top,\n              color-stop(${value}, ${\n          minimumTrackTintColor ? minimumTrackTintColor : '#00897b'\n        }),\n              color-stop(${value}, ${\n          maximumTrackTintColor ? maximumTrackTintColor : '#b7b7b7'\n        }))`\n      : `-webkit-gradient(\n              linear,\n              left top,\n              right top,\n              color-stop(0, #00897b),\n              color-stop(0, #b7b7b7))`;\n  }};\n`;\n\nexport const IOSSliderButton = styled.div<\n  ButtonPropTypes & React.HTMLProps<HTMLDivElement>\n>`\n  webkit-appearance: none;\n  background-color: #666;\n  display: block;\n  width: 28px;\n  height: 28px;\n  // z-index:2;\n  border-radius: 50%;\n  background: #fff;\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  position: relative;\n  top: -12.5px;\n\n  left: ${(props: any) => {\n    const { value } = props;\n    return value ? `${value}px` : '0px';\n  }};\n`;\nexport const IOSSliderProgressBar = styled.div<\n  ProgressBarPropTypes & React.HTMLProps<HTMLDivElement>\n>`\n  height: 2px;\n  border-radius: 2px;\n  position: relative;\n  top: -2px;\n  -webkit-appearance: none;\n\n  background-image: ${(props: any) => {\n    const { value, minimumTrackTintColor, maximumTrackTintColor } = props;\n    return value\n      ? `-webkit-gradient(\n          linear,\n          left top,\n          right top,\n          color-stop(${value}, ${\n          minimumTrackTintColor ? minimumTrackTintColor : '#007aff'\n        }),\n          color-stop(${value}, ${\n          maximumTrackTintColor ? maximumTrackTintColor : '#b7b7b7'\n        }))`\n      : `-webkit-gradient(\n          linear,\n          left top,\n          right top,\n          color-stop(0, #007aff),\n          color-stop(0, #b7b7b7))`;\n  }};\n`;\n","import * as React from 'react';\nimport { isNil } from 'lodash';\nimport {\n  SliderWrapper,\n  AndroidSliderButton,\n  AndroidSliderProgressBar,\n  IOSSliderButton,\n  IOSSliderProgressBar,\n} from './SliderStyledComponents';\n\ntype propType = {\n  value?: number;\n  maximumValue?: number;\n  minimumValue?: number;\n  style?: any;\n  minimumTrackTintColor?: string;\n  maximumTrackTintColor?: string;\n  thumbTintColor?: string;\n  disabled?: boolean;\n  platform: string;\n  className?: string;\n};\n\nexport default class Slider extends React.PureComponent<propType, any> {\n  render() {\n    const isAndroid = this.props.platform === 'Android';\n    const SliderProgressBar = isAndroid\n      ? AndroidSliderProgressBar\n      : IOSSliderProgressBar;\n    const SliderButton = isAndroid ? AndroidSliderButton : IOSSliderButton;\n\n    const value = isNil(this.props.value) ? 0 : this.props.value;\n    const maximumValue = isNil(this.props.maximumValue)\n      ? 100\n      : this.props.maximumValue;\n    const minimumValue = this.props.minimumValue || 0;\n    const sliderRange = maximumValue - minimumValue;\n    const sliderValue = value - minimumValue >= 0 ? value - minimumValue : 0;\n    const sliderButtonPosition =\n      ((this.props.style.width || 0) - (isAndroid ? 12 : 28)) *\n      (sliderValue / sliderRange);\n    return (\n      <SliderWrapper\n        style={{\n          ...this.props.style,\n          paddingTop: this.props.style.height ? this.props.style.height / 2 : 0,\n        }}\n        className={this.props.className ? this.props.className : undefined}\n      >\n        <SliderProgressBar\n          style={{\n            width: '100%',\n            height: 2,\n            opacity: this.props.disabled ? (isAndroid ? 0.7 : 0.5) : 1,\n          }}\n          value={sliderValue / sliderRange}\n          minimumTrackTintColor={this.props.minimumTrackTintColor}\n          maximumTrackTintColor={this.props.maximumTrackTintColor}\n        >\n          <SliderButton\n            value={sliderButtonPosition}\n            thumbTintColor={isAndroid ? this.props.thumbTintColor : undefined}\n          />\n        </SliderProgressBar>\n      </SliderWrapper>\n    );\n  }\n}\n","import * as React from 'react';\nimport { Layer } from 'models/Layer';\nimport Slider from './Slider';\n\nconst rerenderProps = ['layout', 'props', 'style', 'visible'];\nexport default class SliderRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  _ref: any;\n\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n  }\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  render() {\n    const layer: Layer = this.props.layer;\n    let sliderProps = { ...layer.props.getAll() };\n    let sliderStyle = {\n      ...layer.style.getAll(),\n      ...layer.layout.getAll(),\n      width: layer.getBoundingClientRect().width,\n      height: layer.getBoundingClientRect().height,\n    };\n\n    let platform = 'iOS';\n    const deviceData = this.props.layer.executeFunction('getDeviceData');\n\n    if (deviceData) {\n      platform = deviceData.platform;\n    }\n\n    return (\n      <Slider\n        ref={(c: any) => {\n          this._ref = c;\n        }}\n        {...sliderProps}\n        platform={platform}\n        style={sliderStyle}\n      />\n    );\n  }\n}\n","import { IComponentDefinition } from '../../interfaces';\n\nconst SliderComponentDefinition: IComponentDefinition = {\n  version: '0.0.1',\n  template: {\n    type: 'slider',\n    import: {\n      layerName: 'Slider',\n      packageName: 'react-native',\n      isDefaultImport: false,\n      asName: '',\n    },\n    locked: false,\n    template: {\n      centerVertical: false,\n      centerHorizontal: false,\n    },\n    layout: {\n      position: 'absolute',\n      top: 50,\n      left: 50,\n      height: 50,\n      width: 50,\n    },\n    style: {},\n    props: {\n      value: 50,\n    },\n    children: [],\n  },\n  thumbnail: '',\n  name: 'Slider',\n  controlsProperty: [\n    {\n      type: 'AlignmentEditor',\n      title: 'Alignment Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'OrientationEditor',\n      title: 'Orientation Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'ResizingTypeEditor',\n      title: 'ResizingType Editor',\n      value: {},\n    },\n    {\n      type: 'group',\n      title: 'Styling',\n      value: {},\n      properties: [\n        {\n          propertyName: 'opacity',\n          type: 'range',\n          title: 'Opacity',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 1,\n          },\n          category: 'style',\n        },\n      ],\n    },\n    {\n      type: 'group',\n      title: 'Slider',\n      value: {},\n      properties: [\n        {\n          propertyName: 'disabled',\n          type: 'boolean',\n          title: 'Disabled',\n          value: {\n            defaultValue: false,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'value',\n          type: 'range',\n          title: 'Value',\n          value: {\n            defaultValue: 0,\n            min: 0,\n            max: 100,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'minimumValue',\n          type: 'number',\n          title: 'Minimum Value',\n          value: {\n            defaultValue: 0,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'maximumValue',\n          type: 'number',\n          title: 'Maximum Value',\n          value: {\n            defaultValue: 100,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'step',\n          type: 'number',\n          title: 'Step',\n          value: {\n            defaultValue: 0,\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'minimumTrackTintColor',\n          type: 'bareColor',\n          title: 'Minimum Track',\n          value: {\n            defaultValue: '#000',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'maximumTrackTintColor',\n          type: 'bareColor',\n          title: 'Maximum Track',\n          value: {\n            defaultValue: '#000',\n          },\n          category: 'props',\n        },\n        {\n          propertyName: 'thumbTintColor',\n          type: 'bareColor',\n          title: 'Thumb',\n          value: {\n            defaultValue: '#000',\n          },\n          category: 'props',\n        },\n      ],\n    },\n  ],\n};\n\nexport default SliderComponentDefinition;\n","import { Canvas } from '../..';\nimport { IPlugin } from '../..';\nimport SliderRenderer from './SliderRenderer';\nimport SliderComponentDefinition from './SliderComponentDefinition';\n\nexport default class SliderRendererPlugin implements IPlugin {\n  name = 'SliderRenderer';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n\n    // canvas.registerDataStore(\"MyPlugin\")\n  }\n\n  activate() {\n    this.canvas.addComponent(\n      'slider',\n      SliderRenderer,\n      SliderComponentDefinition\n    ); // this.canvas.addEventListener('click', e => {\n    //   console.log(e);\n    // });\n  }\n\n  deactivate() {}\n}\n","import * as React from 'react';\nimport { Image } from 'react-native-web';\nimport { Layer } from 'models/Layer';\n\nconst rerenderProps = ['layout', 'children', 'props', 'style', 'visible'];\nexport default class MapViewRenderer extends React.PureComponent<\n  { layer: Layer },\n  any\n> {\n  _ref: any;\n\n  onUpdate = () => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n  }\n  componentWillUnmount() {\n    this.props.layer.off(rerenderProps, this.onUpdate);\n  }\n\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(rerenderProps, this.onUpdate);\n    this.props.layer.on(rerenderProps, this.onUpdate);\n    this.props.layer.setDomRef(this._ref);\n  }\n\n  render() {\n    const layer: Layer = this.props.layer;\n    const layerProps = { ...layer.props.getAll() };\n    const layerId = layerProps['id'];\n    delete layerProps['id'];\n    const mapViewStyles = { ...layer.style.getAll(), ...layer.layout.getAll() };\n    let mapStyle = layerProps.customMapStyle\n      ? layerProps.customMapStyle\n      : 'Standard';\n\n    const canvas = layer.getCanvas();\n\n    try {\n      return (\n        <Image\n          ref={(c: any) => {\n            this._ref = c;\n          }}\n          {...layerProps}\n          style={{\n            resizeMode: 'cover',\n            ...mapViewStyles,\n          }}\n          source={{ uri: `${canvas.assetURL}/${mapStyle}.png` }}\n          nativeID={layerId}\n        />\n      );\n    } catch (Error) {\n      return (\n        <Image\n          ref={(c: any) => {\n            this._ref = c;\n          }}\n          {...layerProps}\n          style={{\n            resizeMode: 'cover',\n            ...mapViewStyles,\n          }}\n          source={{ uri: `${canvas.assetURL}/Standard.png` }}\n          nativeID={layerId}\n        />\n      );\n    }\n  }\n}\n","import { IComponentDefinition } from '../../interfaces';\n\nconst MapViewComponentDefinition: IComponentDefinition = {\n  version: '0.0.1',\n  template: {\n    type: 'mapView',\n    import: {\n      layerName: 'MapView',\n      packageName: 'expo',\n      isDefaultImport: false,\n      asName: '',\n    },\n    locked: false,\n    template: {\n      centerVertical: false,\n      centerHorizontal: false,\n    },\n    layout: { position: 'absolute', top: 50, left: 50 },\n    style: {},\n    props: {\n      provider: 'MapView.PROVIDER_GOOGLE',\n      initialRegion: {\n        latitude: 37.78825,\n        longitude: -122.4324,\n        latitudeDelta: 0.0922,\n        longitudeDelta: 0.0421,\n      },\n      customMapStyle: 'Standard',\n    },\n    children: [],\n  },\n  thumbnail: '',\n  name: 'MapView',\n  controlsProperty: [\n    {\n      type: 'AlignmentEditor',\n      title: 'Alignment Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'OrientationEditor',\n      title: 'Orientation Editor',\n      value: {},\n      showForMultiple: true,\n    },\n    {\n      type: 'ResizingTypeEditor',\n      title: 'ResizingType Editor',\n      value: {},\n    },\n    {\n      type: 'group',\n      title: 'Styling',\n      value: {},\n      properties: [\n        {\n          propertyName: 'opacity',\n          type: 'range',\n          title: 'Opacity',\n          value: {\n            defaultValue: 1,\n            min: 0,\n            max: 1,\n          },\n          category: 'style',\n        },\n        {\n          propertyName: 'customMapStyle',\n          title: 'Map View Style',\n          type: 'enum',\n          value: {\n            options: [\n              'Standard',\n              'Silver',\n              'Retro',\n              'Dark',\n              'Night',\n              'Aubergine',\n            ],\n            defaultValue: 'Standard',\n          },\n          category: 'props',\n        },\n      ],\n    },\n  ],\n};\n\nexport default MapViewComponentDefinition;\n","import { Canvas } from '../..';\nimport { IPlugin } from '../..';\nimport MapViewRenderer from './MapViewRenderer';\nimport MapViewComponentDefinition from './MapViewComponentDefinition';\n\nexport default class MapViewRendererPlugin implements IPlugin {\n  name = 'MapViewRenderer';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addComponent(\n      'mapView',\n      MapViewRenderer,\n      MapViewComponentDefinition\n    );\n  }\n\n  deactivate() {}\n}\n","import * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Canvas, IPlugin, MouseEvent, IContext } from '../..';\nimport { contextMenu, MainMenu } from 'builderx-module-context-menu';\nimport { generateRandomString } from '../../models/utils';\nimport 'builderx-module-context-menu/src/lib/components/utils/ContextMenu.css';\n\nexport default class PopoverMenuPlugin implements IPlugin {\n  name = 'PopoverMenu';\n  canvas!: Canvas;\n  dispose: any;\n  containerElement: any;\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n  }\n  showMenu(context: IContext, json: any, event: MouseEvent) {\n    this.dispose();\n    event.originalEvent.preventDefault();\n    this.containerElement = document.createElement('div');\n    this.dispose = this.canvas.addDomToViewport(this.containerElement);\n    const randomId = generateRandomString(4);\n    const menuReactElement = (\n      <MainMenu menuId={`menuId-${randomId}`} data={json} />\n    );\n    ReactDOM.render(menuReactElement, this.containerElement);\n    contextMenu.show({\n      id: `menuId-${randomId}`,\n      event: event.originalEvent,\n    });\n  }\n  activate() {\n    this.containerElement = document.createElement('div');\n    this.dispose = this.canvas.addDomToViewport(this.containerElement);\n    this.canvas.addFunction('showPopoverMenu', this.showMenu.bind(this));\n  }\n\n  deactivate() {\n    this.canvas.removeFunction('showPopoverMenu');\n    this.dispose();\n  }\n}\n","import ISnapPoints from './interfaces/ISnapPoints';\nimport ISnapXPoint from './interfaces/ISnapXPoint';\nimport ISnapYPoint from './interfaces/ISnapYPoint';\nimport * as _ from 'lodash';\nimport { Layer } from 'models/Layer';\nimport { IContext } from 'interfaces';\nimport Config from './interfaces/Config';\n\nexport default function getAllSiblingLayerPoints(\n  config: Config,\n  context: IContext,\n  layers: Array<Layer>,\n  parent: any\n): ISnapPoints {\n  let snapPoints: ISnapPoints = {\n    x: [],\n    y: [],\n  };\n\n  // if (!layers || layers.length === 0) {\n  //   return snapPoints;\n  // }\n\n  // let selectedLayer = layers[0];\n  if (!parent || !config.snap || !config.siblingSnap) {\n    return {\n      x: [],\n      y: [],\n    };\n  }\n\n  if (parent) {\n    _.forEach(parent.children, async layer => {\n      if (layers.includes(layer)) {\n        return;\n      }\n      // TODO: Figure out what this was for\n      // if (\n      //   layers.indexOf(layer) > -1 ||\n      //   layer.domainCompiledRef.type === 'fileHeader'\n      // ) {\n      //   return;\n      // }\n      let layerPoints: ISnapPoints = getLayerPoints(context, layer);\n\n      snapPoints.x = snapPoints.x.concat(layerPoints.x);\n      snapPoints.y = snapPoints.y.concat(layerPoints.y);\n    });\n  }\n  return snapPoints;\n}\n\nfunction getLayerPoints(context: IContext, layer: Layer): ISnapPoints {\n  let x: Array<ISnapXPoint> = [];\n  let y: Array<ISnapYPoint> = [];\n\n  let minX = undefined;\n  let maxX = undefined;\n\n  let minY = undefined;\n  let maxY = undefined;\n\n  let layerBox = context.canvas.getBoundingBoxWRTParent([layer], true);\n\n  let xSnapPoint1: ISnapXPoint = {\n    value: layerBox.x,\n    rootValue: layerBox.rootX,\n    minY: minY,\n    maxY: maxY,\n    snapTo: { center: true, start: true, end: true },\n  };\n  let xSnapPoint2: ISnapXPoint = {\n    value: layerBox.x + layerBox.width,\n    rootValue: layerBox.rootX + layerBox.width,\n    minY: minY,\n    maxY: maxY,\n    snapTo: { center: true, start: true, end: true },\n  };\n  let xSnapPoint3: ISnapXPoint = {\n    value: layerBox.x + layerBox.width / 2,\n    rootValue: layerBox.rootX + layerBox.width / 2,\n\n    minY: minY,\n    maxY: maxY,\n    snapTo: { center: true, start: true, end: true },\n  };\n\n  let ySnapPoint1: ISnapYPoint = {\n    value: layerBox.y,\n    rootValue: layerBox.rootY,\n    minX: minX,\n    maxX: maxX,\n    snapTo: { center: true, start: true, end: true },\n  };\n  let ySnapPoint2: ISnapYPoint = {\n    value: layerBox.y + layerBox.height,\n    rootValue: layerBox.rootY + layerBox.height,\n    minX: minX,\n    maxX: maxX,\n    snapTo: { center: true, start: true, end: true },\n  };\n  let ySnapPoint3: ISnapYPoint = {\n    value: layerBox.y + layerBox.height / 2,\n    rootValue: layerBox.rootY + layerBox.height / 2,\n    minX: minX,\n    maxX: maxX,\n    snapTo: { center: true, start: true, end: true },\n  };\n\n  x.push(xSnapPoint1);\n  x.push(xSnapPoint2);\n  x.push(xSnapPoint3);\n  y.push(ySnapPoint1);\n  y.push(ySnapPoint2);\n  y.push(ySnapPoint3);\n\n  return {\n    x,\n    y,\n  };\n}\n","import ISnapPoints from './interfaces/ISnapPoints';\nimport ISnapXPoint from './interfaces/ISnapXPoint';\nimport ISnapYPoint from './interfaces/ISnapYPoint';\nimport { IContext } from 'interfaces';\nimport { Layer } from '../../models/Layer';\nimport Config from './interfaces/Config';\n\n// TODO: Add typing to it\n// the arguments need to be the highest parent or whichever is the artboard\nexport default function getParentSnapPoints(\n  config: Config,\n  context: IContext,\n  layers: Array<Layer>\n): ISnapPoints {\n  if (!layers || layers.length === 0 || !config.snap || !config.parentSnap) {\n    return {\n      x: [],\n      y: [],\n    };\n  }\n  const layer = layers[0];\n  let x: Array<ISnapXPoint> = [];\n  let y: Array<ISnapXPoint> = [];\n\n  let minX = undefined;\n  let maxX = undefined;\n\n  let minY = undefined;\n  let maxY = undefined;\n\n  let layerDimensions = layer.getBoundingClientRect();\n\n  let xSnapPoint1: ISnapXPoint = {\n    value: 0,\n    rootValue: layerDimensions.rootX,\n    minY: minY,\n    maxY: maxY,\n    snapTo: {\n      center: false,\n      start: true,\n      end: false,\n    },\n  };\n  let xSnapPoint2: ISnapXPoint = {\n    value: layerDimensions.width,\n    rootValue: layerDimensions.rootX + layerDimensions.width,\n    minY: minY,\n    maxY: maxY,\n    snapTo: { center: false, start: false, end: true },\n  };\n  let xSnapPoint3: ISnapXPoint = {\n    value: layerDimensions.width / 2,\n    rootValue: layerDimensions.rootX + layerDimensions.width / 2,\n    minY: minY,\n    maxY: maxY,\n    snapTo: { center: true, start: true, end: true },\n  };\n\n  let ySnapPoint1: ISnapYPoint = {\n    value: 0,\n    rootValue: layerDimensions.rootY,\n    minX: minX,\n    maxX: maxX,\n    snapTo: { center: false, start: true, end: false },\n  };\n  let ySnapPoint2: ISnapYPoint = {\n    value: layerDimensions.height,\n    rootValue: layerDimensions.rootY + layerDimensions.height,\n    minX: minX,\n    maxX: maxX,\n    snapTo: { center: false, start: false, end: true },\n  };\n  let ySnapPoint3: ISnapYPoint = {\n    value: layerDimensions.height / 2,\n    rootValue: layerDimensions.rootY + layerDimensions.height / 2,\n    minX: minX,\n    maxX: maxX,\n    snapTo: { center: true, start: true, end: true },\n  };\n\n  x.push(xSnapPoint1);\n  x.push(xSnapPoint2);\n  x.push(xSnapPoint3);\n  y.push(ySnapPoint1);\n  y.push(ySnapPoint2);\n  y.push(ySnapPoint3);\n\n  return {\n    x,\n    y,\n  };\n}\n","import * as _ from 'lodash';\nimport ISnapPoints from './interfaces/ISnapPoints';\nimport ISnapXPoint from './interfaces/ISnapXPoint';\nimport ISnapYPoint from './interfaces/ISnapYPoint';\nimport { Layer } from '../../models/Layer';\nimport { IDimensionWithRoot } from '../../interfaces/IDimensionWithRoot';\nimport { IContext } from 'interfaces';\nimport Config from './interfaces/Config';\n\n// The box closer to the start of the axis should be sent as box1 and other one as box2\nfunction getDistance(\n  axis: String,\n  box1: IDimensionWithRoot,\n  box2: IDimensionWithRoot\n): number {\n  if (axis === 'x') {\n    return box2.x - (box1.x + box1.width);\n  } else {\n    return box2.y - (box1.y + box1.height);\n  }\n}\n\nfunction getDistanceBetweenLayers(\n  axis: String,\n  layer1: Layer,\n  layer2: Layer\n): number {\n  let distance = 0;\n\n  let box1 = layer1.getBoundingClientRect();\n  let box2 = layer2.getBoundingClientRect();\n\n  if (axis === 'x') {\n    // In case of overlap\n    if (box1.x < box2.x && box1.x + box1.width > box2.x) {\n      return -1;\n    }\n\n    // In case of overlap\n    if (box2.x < box1.x && box2.x + box2.width > box1.x) {\n      return -1;\n    }\n\n    if (box1.x < box2.x) {\n      distance = getDistance('x', box1, box2);\n    } else {\n      distance = getDistance('x', box2, box1);\n    }\n  } else {\n    if (box1.y < box2.y && box1.y + box1.height > box2.y) {\n      return -1;\n    }\n\n    // In case of overlap\n    if (box2.y < box1.y && box2.y + box2.height > box1.y) {\n      return -1;\n    }\n\n    if (box1.y < box2.y) {\n      distance = getDistance('y', box1, box2);\n    } else {\n      distance = getDistance('y', box2, box1);\n    }\n  }\n\n  return distance;\n}\n\nfunction isAlignedOnAxis(\n  axis: string,\n  layerDims: IDimensionWithRoot,\n  otherLayerDims: IDimensionWithRoot\n) {\n  if (axis === 'x') {\n    if (\n      otherLayerDims.rootY > layerDims.rootY + layerDims.height ||\n      layerDims.rootY > otherLayerDims.rootY + otherLayerDims.height\n    ) {\n      return false;\n    }\n    return true;\n  } else if (axis === 'y') {\n    if (\n      otherLayerDims.rootX > layerDims.rootX + layerDims.width ||\n      layerDims.rootX > otherLayerDims.rootX + otherLayerDims.width\n    ) {\n      return false;\n    }\n    return true;\n  }\n  return false;\n}\n\nfunction getOverlapBetweenLayers(\n  axis: 'x' | 'y',\n  layerDims: IDimensionWithRoot,\n  otherLayerDims: IDimensionWithRoot\n): { max: number; min: number } {\n  let extremities = {\n    min: 0,\n    max: 0,\n  };\n  if (axis === 'y') {\n    extremities.min =\n      layerDims.rootX > otherLayerDims.rootX\n        ? layerDims.rootX\n        : otherLayerDims.rootX;\n    extremities.max =\n      layerDims.rootX + layerDims.width >\n      otherLayerDims.rootX + otherLayerDims.width\n        ? otherLayerDims.rootX + otherLayerDims.width\n        : layerDims.rootX + layerDims.width;\n  } else {\n    extremities.min =\n      layerDims.rootY > otherLayerDims.rootY\n        ? layerDims.rootY\n        : otherLayerDims.rootY;\n    extremities.max =\n      layerDims.rootY + layerDims.height >\n      otherLayerDims.rootY + otherLayerDims.height\n        ? otherLayerDims.rootY + otherLayerDims.height\n        : layerDims.rootY + layerDims.height;\n  }\n\n  return extremities;\n}\n\nfunction getDisconnectedGutterPointsForX(\n  snapXPoints: Array<ISnapXPoint>,\n  restrictedLayers: Array<Layer>,\n  originalAllLayers: Array<Layer>,\n  distance: number\n): Array<ISnapXPoint> {\n  let points: Array<ISnapXPoint> = [];\n  let axis = 'x';\n  let layer1 = restrictedLayers[0];\n  let dims1 = layer1.getBoundingClientRect();\n  let layer2 = restrictedLayers[1];\n  let dims2 = layer2.getBoundingClientRect();\n\n  let allLayers: Array<Layer> = originalAllLayers.filter((layer: Layer) => {\n    return !restrictedLayers.includes(layer);\n  });\n\n  allLayers.forEach((layer: Layer) => {\n    let dims = layer.getBoundingClientRect();\n    if (\n      isAlignedOnAxis(axis, dims1, dims) &&\n      isAlignedOnAxis(axis, dims2, dims)\n    ) {\n      let leftMostPoint = dims.x - distance;\n      let leftMostRootPoint = dims.rootX - distance;\n      let rightMostPoint = dims.x + dims.width + distance;\n      let rightMostRootPoint = dims.rootX + dims.width + distance;\n      let minY = dims.rootY;\n      let maxY = dims.rootY + dims.height;\n\n      addToSnapXPoint(\n        snapXPoints,\n        rightMostPoint,\n        rightMostRootPoint,\n        minY,\n        maxY,\n        distance\n      );\n      addToSnapXPoint(\n        snapXPoints,\n        leftMostPoint,\n        leftMostRootPoint,\n        minY,\n        maxY,\n        distance\n      );\n    }\n  });\n  return points;\n}\n\nfunction getDisconnectedGutterPointsForY(\n  snapYPoints: Array<ISnapXPoint>,\n  restrictedLayers: Array<Layer>,\n  originalAllLayers: Array<Layer>,\n  distance: number\n): Array<ISnapYPoint> {\n  let points: Array<ISnapYPoint> = [];\n  let axis = 'y';\n  let layer1 = restrictedLayers[0];\n  let dims1 = layer1.getBoundingClientRect();\n  let layer2 = restrictedLayers[1];\n  let dims2 = layer2.getBoundingClientRect();\n\n  let allLayers: Array<Layer> = originalAllLayers.filter((layer: Layer) => {\n    return !restrictedLayers.includes(layer);\n  });\n\n  allLayers.forEach((layer: Layer) => {\n    let dims = layer.getBoundingClientRect();\n    if (\n      isAlignedOnAxis(axis, dims1, dims) &&\n      isAlignedOnAxis(axis, dims2, dims)\n    ) {\n      let topMostPoint = dims.y - distance;\n      let topMostRootPoint = dims.rootY - distance;\n      let bottomMostPoint = dims.y + dims.height + distance;\n      let bottomMostRootPoint = dims.rootY + dims.height + distance;\n      let minX = dims.rootX;\n      let maxX = dims.rootX + dims.width;\n\n      addToSnapYPoint(\n        snapYPoints,\n        bottomMostPoint,\n        bottomMostRootPoint,\n        minX,\n        maxX,\n        distance\n      );\n      addToSnapYPoint(\n        snapYPoints,\n        topMostPoint,\n        topMostRootPoint,\n        minX,\n        maxX,\n        distance\n      );\n    }\n  });\n  return points;\n}\n\nfunction addToSnapXPoint(\n  snapXPoints: Array<ISnapXPoint>,\n  value: number,\n  rootValue: number,\n  min: number,\n  max: number,\n  distance: number\n) {\n  if (\n    !_.find(snapXPoints, (val: any) => {\n      return (\n        val.value === value &&\n        val.rootValue === rootValue &&\n        val.minY === min &&\n        val.maxY === max\n      );\n    })\n  ) {\n    snapXPoints.push({\n      value: value,\n      rootValue: rootValue,\n      minY: min,\n      maxY: max,\n      snapLines: {\n        distance,\n      },\n    });\n  }\n}\n\nfunction addToSnapYPoint(\n  snapYPoints: Array<ISnapYPoint>,\n  value: number,\n  rootValue: number,\n  min: number,\n  max: number,\n  distance: number\n) {\n  if (\n    !_.find(snapYPoints, (val: any) => {\n      return (\n        val.value === value &&\n        val.rootValue === rootValue &&\n        val.minY === min &&\n        val.maxY === max\n      );\n    })\n  ) {\n    snapYPoints.push({\n      value: value,\n      rootValue: rootValue,\n      minX: min,\n      maxX: max,\n      snapLines: {\n        distance,\n      },\n    });\n  }\n}\n\nexport default function getGutterSnapPoints(\n  config: Config,\n  context: IContext,\n  layers: Array<Layer>\n): ISnapPoints {\n  if (!layers || layers.length === 0 || !config.snap || !config.gutterSnap) {\n    return {\n      x: [],\n      y: [],\n    };\n  }\n  const layer = layers[0];\n  let snapXPoints: Array<ISnapXPoint> = [];\n  let snapYPoints: Array<ISnapYPoint> = [];\n\n  if (!layer.parent) {\n    return {\n      x: [],\n      y: [],\n    };\n  }\n  let parent = layer.parent as Layer;\n  parent.children.forEach((layer1: Layer) => {\n    // Don't need the distance with this layer as it is being moved\n    if (layers.includes(layer1)) {\n      return;\n    }\n\n    parent.children.forEach((layer2: Layer) => {\n      // No need of comparison between the same layers\n      if (layer1 === layer2) return;\n\n      // No need to do comparison as this layer is being moved\n      if (layers.includes(layer2)) return;\n\n      if (\n        isAlignedOnAxis(\n          'x',\n          layer1.getBoundingClientRect(),\n          layer2.getBoundingClientRect()\n        )\n      ) {\n        let distance = getDistanceBetweenLayers('x', layer1, layer2);\n        if (distance > 0) {\n          let allGutterPoints = getDisconnectedGutterPointsForX(\n            snapXPoints,\n            [layer1, layer2, ...layers],\n            parent.children,\n            distance\n          );\n          snapXPoints.push(...allGutterPoints);\n          let overlapX: {\n            min: number;\n            max: number;\n          } = getOverlapBetweenLayers(\n            'x',\n            layer1.getBoundingClientRect(),\n            layer2.getBoundingClientRect()\n          );\n\n          let box1 = layer1.getBoundingClientRect();\n          let box2 = layer2.getBoundingClientRect();\n\n          let rightMostPoint = 0;\n          let rightMostRootPoint = 0;\n          let leftMostPoint = 0;\n          let leftMostRootPoint = 0;\n\n          let right: IDimensionWithRoot;\n          let left: IDimensionWithRoot;\n          if (box1.x + box1.width > box2.x + box2.width) {\n            right = box1;\n            left = box2;\n            rightMostPoint = box1.x + box1.width;\n            rightMostRootPoint = box1.rootX + box1.width;\n            leftMostPoint = box2.x - distance;\n            leftMostRootPoint = box2.rootX - distance;\n          } else {\n            right = box2;\n            left = box1;\n            rightMostPoint = box2.x + box2.width;\n            rightMostRootPoint = box2.rootX + box2.width;\n            leftMostPoint = box1.x - distance;\n            leftMostRootPoint = box1.rootX - distance;\n          }\n\n          rightMostPoint = rightMostPoint + distance;\n          rightMostRootPoint = rightMostRootPoint + distance;\n\n          addToSnapXPoint(\n            snapXPoints,\n            rightMostPoint,\n            rightMostRootPoint,\n            overlapX.min,\n            overlapX.max,\n            distance\n          );\n          addToSnapXPoint(\n            snapXPoints,\n            leftMostPoint,\n            leftMostRootPoint,\n            overlapX.min,\n            overlapX.max,\n            distance\n          );\n        }\n      }\n\n      if (\n        isAlignedOnAxis(\n          'y',\n          layer1.getBoundingClientRect(),\n          layer2.getBoundingClientRect()\n        )\n      ) {\n        let distance = getDistanceBetweenLayers('y', layer1, layer2);\n        if (distance > 0) {\n          let allGutterPoints = getDisconnectedGutterPointsForY(\n            snapYPoints,\n            [layer1, layer2, ...layers],\n            parent.children,\n            distance\n          );\n          snapYPoints.push(...allGutterPoints);\n          let overlapY: {\n            min: number;\n            max: number;\n          } = getOverlapBetweenLayers(\n            'y',\n            layer1.getBoundingClientRect(),\n            layer2.getBoundingClientRect()\n          );\n\n          let box1 = layer1.getBoundingClientRect();\n          let box2 = layer2.getBoundingClientRect();\n\n          let bottomMostPoint = 0;\n          let bottomMostRootPoint = 0;\n          let topMostPoint = 0;\n          let topMostRootPoint = 0;\n\n          let top: IDimensionWithRoot;\n          let bottom: IDimensionWithRoot;\n          if (box1.y + box1.height > box2.y + box2.height) {\n            bottom = box1;\n            top = box2;\n            bottomMostPoint = box1.y + box1.height;\n            bottomMostRootPoint = box1.rootY + box1.height;\n            topMostPoint = box2.y - distance;\n            topMostRootPoint = box2.rootY - distance;\n          } else {\n            top = box1;\n            bottom = box2;\n            bottomMostPoint = box2.y + box2.height;\n            bottomMostRootPoint = box2.rootY + box2.height;\n            topMostPoint = box1.y - distance;\n            topMostRootPoint = box1.rootY - distance;\n          }\n\n          bottomMostPoint = bottomMostPoint + distance;\n          bottomMostRootPoint = bottomMostRootPoint + distance;\n\n          addToSnapYPoint(\n            snapYPoints,\n            bottomMostPoint,\n            bottomMostRootPoint,\n            overlapY.min,\n            overlapY.max,\n            distance\n          );\n\n          addToSnapYPoint(\n            snapYPoints,\n            topMostPoint,\n            topMostRootPoint,\n            overlapY.min,\n            overlapY.max,\n            distance\n          );\n        }\n      }\n    });\n  });\n  return { x: snapXPoints, y: snapYPoints };\n}\n","import { IContext } from 'interfaces';\nimport ISnapXPoint from './interfaces/ISnapXPoint';\nimport ISnapYPoint from './interfaces/ISnapYPoint';\nimport Config from './interfaces/Config';\n\nfunction gridSnapPoint(\n  delta: number,\n  startPoint: number,\n  gridSpace: number,\n  stretch: number,\n  handle?: any\n): any {\n  let snappedSide = {\n    coordinate: NaN,\n    start: false,\n    center: false,\n    end: false,\n  };\n\n  let point1 = startPoint + delta;\n  point1 = Math.round(point1 / gridSpace) * gridSpace;\n  const delta1 = point1 - startPoint;\n\n  let point2 = startPoint + stretch + delta;\n  point2 = Math.round(point2 / gridSpace) * gridSpace;\n  const delta2 = point2 - stretch - startPoint;\n\n  let outputDelta = delta1;\n\n  snappedSide.coordinate = point1;\n  snappedSide.start = true;\n  outputDelta = delta1;\n\n  if (handle) {\n    if (handle.indexOf('L') === -1 && handle.indexOf('T') === -1) {\n      snappedSide.coordinate = point2;\n      snappedSide.end = true;\n      outputDelta = delta2;\n    }\n  } else {\n    if (\n      Math.abs(delta + startPoint - point1) >\n      Math.abs(delta + startPoint + stretch - point2)\n    ) {\n      snappedSide.coordinate = point2;\n      snappedSide.end = true;\n      outputDelta = delta2;\n    }\n  }\n\n  return {\n    value: snappedSide.coordinate,\n    rootValue: snappedSide.coordinate,\n    snappedSide: snappedSide,\n    snapType: 'grid',\n    delta: outputDelta,\n  };\n}\n\nexport default function snapToGrid(\n  config: Config,\n  context: IContext,\n  startX: number,\n  totalDeltaX: number,\n  startY: number,\n  totalDeltaY: number,\n  stretchX: number,\n  stretchY: number,\n  handle?: any\n): { x: any; y: any } | undefined {\n  if (!config.snap || !config.gridSnap) {\n    return;\n  }\n\n  const gridOffset = context.canvas.executeFunction('getGridOffset');\n\n  let x: any;\n  let y: any;\n\n  let snapBounds = context.canvas.executeFunction('getGridSize');\n\n  if (!snapBounds) {\n    snapBounds = {\n      x: 20,\n      y: 20,\n    };\n  }\n\n  if (!snapBounds) {\n    return {\n      x: {\n        value: startX + totalDeltaX,\n        rootValue: startX + totalDeltaX,\n      },\n      y: {\n        value: startY + totalDeltaY,\n        rootValue: startY + totalDeltaY,\n      },\n    };\n  }\n\n  let xSnapPoint = gridSnapPoint(\n    totalDeltaX,\n    startX - gridOffset.x,\n    snapBounds.x,\n    stretchX,\n    handle\n  );\n\n  x = xSnapPoint;\n  let ySnapPoints = gridSnapPoint(\n    totalDeltaY,\n    startY - gridOffset.y,\n    snapBounds.y,\n    stretchY,\n    handle\n  );\n  // snappedSideY.coordinate = ySnapPoint;\n  y = ySnapPoints;\n\n  return {\n    x,\n    y,\n  };\n}\n","import ISnapPoints from './interfaces/ISnapPoints';\nimport ISnapXPoint from './interfaces/ISnapXPoint';\nimport { IDimensionWithRoot, IContext } from 'interfaces';\nimport { minBy } from 'lodash';\nimport ModelUtils from './../../models/utils';\nimport ISnapYPoint from './interfaces/ISnapYPoint';\nexport function snapToPoints(\n  context: IContext,\n  snapPoints: {\n    parentSnapPoints: ISnapPoints;\n    siblingSnapPoints: ISnapPoints;\n    gutterSnapPoints: ISnapPoints;\n    rulerSnapPoints: { x: Array<number>; y: Array<number> };\n    gridSnap: boolean;\n  },\n  startPoint: any,\n  totalDelta: any,\n  dims: IDimensionWithRoot,\n  absoluteDelta: any = [0, 0],\n  startAbsolutePoint: any = [0, 0],\n  parentAbsoluteRotation: number,\n  boundingBoxWRTWorld: any,\n  handle?: any\n) {\n  //\n\n  let meta: any = {\n    snappedSide: {\n      x: undefined,\n      y: undefined,\n    },\n  };\n\n  let x = totalDelta[0];\n  let y = totalDelta[1];\n\n  if (snapPoints) {\n    const snappedData = snapPoint(\n      context,\n      snapPoints,\n      startPoint,\n      totalDelta,\n      dims,\n      absoluteDelta,\n      startAbsolutePoint,\n      parentAbsoluteRotation,\n      boundingBoxWRTWorld,\n      handle\n    );\n    x = snappedData.delta.x;\n    y = snappedData.delta.y;\n\n    meta.snappedSide.x = snappedData.meta.x;\n    meta.snappedSide.y = snappedData.meta.y;\n  }\n  let delta = {\n    x: x,\n    y: y,\n  };\n\n  return {\n    x,\n    y,\n    delta,\n    meta,\n  };\n}\nexport default function snapPoint(\n  context: IContext,\n  snapPoints: {\n    parentSnapPoints: ISnapPoints;\n    siblingSnapPoints: ISnapPoints;\n    gutterSnapPoints: ISnapPoints;\n    rulerSnapPoints: { x: Array<number>; y: Array<number> };\n    gridSnap: boolean;\n  },\n  startPoint: any,\n  totalDelta: any,\n  dims: IDimensionWithRoot,\n  absoluteDelta: any,\n  startAbsolutePoint: any,\n  parentAbsoluteRotation: number,\n  boundingBoxWRTWorld: any,\n  handle?: any\n): {\n  value: number;\n  delta: any;\n  meta: any;\n} {\n  let stretchX = dims.width;\n  let stretchY = dims.height;\n\n  let rulerCoordinatesX = snapPoints.rulerSnapPoints.y;\n  let rulerCoordinatesY = snapPoints.rulerSnapPoints.x;\n\n  let documentCoordinatesX = snapPoints.parentSnapPoints.x;\n  let documentCoordinatesY = snapPoints.parentSnapPoints.y;\n\n  let layerCoordinatesX = snapPoints.siblingSnapPoints.x;\n  let layerCoordinatesY = snapPoints.siblingSnapPoints.y;\n\n  // let gutterCoordinates =\n  //   axis === 'x'\n  //     ? snapPoints.gutterSnapPoints.x\n  //     : snapPoints.gutterSnapPoints.y;\n\n  let snapBounds =\n    context.canvas.executeFunction('getSnapBound') / context.canvas.getZoom();\n  let coordinateValueX = startPoint[0] + totalDelta[0];\n  let coordinateValueY = startPoint[1] + totalDelta[1];\n\n  let parentSnappedDataX = getPointForParentSnap(\n    documentCoordinatesX,\n    coordinateValueX,\n    stretchX,\n    snapBounds\n  );\n\n  let parentSnappedDataY = getPointForParentSnap(\n    documentCoordinatesY,\n    coordinateValueY,\n    stretchY,\n    snapBounds\n  );\n\n  parentSnappedDataX.snapType = 'documentBounds';\n  parentSnappedDataY.snapType = 'documentBounds';\n  parentSnappedDataX.delta = parentSnappedDataX.value - startPoint[0];\n  parentSnappedDataY.delta = parentSnappedDataY.value - startPoint[1];\n\n  const siblingDataX = getPointForSiblingSnap(\n    layerCoordinatesX,\n    coordinateValueX,\n    stretchX,\n    snapBounds,\n    true\n  );\n  siblingDataX.snapType = 'sibling';\n\n  const siblingDataY = getPointForSiblingSnap(\n    layerCoordinatesY,\n    coordinateValueY,\n    stretchY,\n    snapBounds\n  );\n  siblingDataY.snapType = 'sibling';\n\n  siblingDataX.delta = siblingDataX.value - startPoint[0];\n  siblingDataY.delta = siblingDataY.value - startPoint[1];\n\n  let rulersDataX = getPointForRulerLines(\n    rulerCoordinatesX,\n    startAbsolutePoint[0] + absoluteDelta[0],\n    stretchX,\n    snapBounds\n  );\n  let rulersDataY = getPointForRulerLines(\n    rulerCoordinatesY,\n    startAbsolutePoint[1] + absoluteDelta[1],\n    stretchY,\n    snapBounds\n  );\n\n  rulersDataX.snapType = 'ruler';\n  rulersDataY.snapType = 'ruler';\n  rulersDataX.delta = rulersDataX.value - startAbsolutePoint[0];\n  rulersDataY.delta = rulersDataY.value - startAbsolutePoint[1];\n\n  const rotateDelta = ModelUtils.rotatePoint(\n    [rulersDataX.delta, rulersDataY.delta],\n    360 - parentAbsoluteRotation,\n    [0, 0]\n  );\n\n  rulersDataX.delta = rotateDelta[0];\n  rulersDataY.delta = rotateDelta[1];\n\n  // grid snapping\n  let gridDataX: any = {\n    delta: 0,\n    snappedSide: {\n      coordinate: NaN,\n      start: true,\n      center: false,\n      end: true,\n    },\n  };\n  let gridDataY: any = {\n    delta: 0,\n    snappedSide: {\n      coordinate: NaN,\n      start: true,\n      center: false,\n      end: true,\n    },\n  };\n\n  // console.log(\n  //   gridOffset.x,\n  //   gridOffset.y,\n  //   startAbsolutePoint[1],\n  //   startAbsolutePoint[0],\n  //   'grid snap points here'\n  // );\n  let gridSnapPoints: {\n    x: ISnapXPoint;\n    y: ISnapYPoint;\n  } = context.canvas.executeFunction(\n    'snapToGrid',\n    boundingBoxWRTWorld.x,\n    absoluteDelta[0],\n    boundingBoxWRTWorld.y,\n    absoluteDelta[1],\n    stretchX,\n    stretchY,\n    handle\n  );\n\n  if (gridSnapPoints) {\n    gridDataX = gridSnapPoints.x;\n    gridDataY = gridSnapPoints.y;\n    const rotateDeltaGrid = ModelUtils.rotatePoint(\n      [gridDataX.delta, gridDataY.delta],\n      360 - parentAbsoluteRotation,\n      [0, 0]\n    );\n\n    gridDataX.delta = rotateDeltaGrid[0];\n    gridDataY.delta = rotateDeltaGrid[1];\n  }\n\n  // console.log(gridSnapPoints, 'grid snap points');\n\n  let minSnappedDataX = minBy(\n    [rulersDataX, gridDataX, siblingDataX, parentSnappedDataX],\n    data => {\n      let point = startPoint[0];\n\n      if (data.snappedSide.end) {\n        point = startPoint[0] + stretchX;\n      }\n\n      if (data.snappedSide.center) {\n        point = startPoint[0] + stretchX / 2;\n      }\n\n      // console.log(\n      //   point,\n      //   data.delta,\n      //   totalDelta[0],\n      //   coordinateValueX,\n      //   data.snapType,\n      //   data.snappedSide.coordinate,\n      //   Math.abs(data.snappedSide.coordinate - coordinateValueX),\n      //   '&&&&&&&&'\n      // );\n      if (!isNaN(data.snappedSide.coordinate))\n        return Math.abs(data.delta - totalDelta[0]);\n      else return Number.MAX_VALUE;\n    }\n  );\n\n  // console.log(minSnappedDataX, '&&&&&&&& ******');\n  let minSnappedDataY = minBy(\n    [rulersDataY, gridDataY, siblingDataY, parentSnappedDataY],\n    data => {\n      let point = startPoint[1];\n\n      if (data.snappedSide.end) {\n        point = startPoint[1] + stretchY;\n      }\n\n      if (data.snappedSide.center) {\n        point = startPoint[1] + stretchY / 2;\n      }\n\n      if (!isNaN(data.snappedSide.coordinate))\n        return Math.abs(data.delta - totalDelta[1]);\n      else return Number.MAX_VALUE;\n    }\n  );\n\n  return {\n    value: minSnappedDataX.value,\n    delta: {\n      x: minSnappedDataX.delta,\n      y: minSnappedDataY.delta,\n    },\n    meta: {\n      x: {\n        snappedSide: minSnappedDataX.snappedSide,\n        snapType: minSnappedDataX.snapType,\n      },\n      y: {\n        snappedSide: minSnappedDataY.snappedSide,\n        snapType: minSnappedDataY.snapType,\n      },\n    },\n  };\n}\n\nfunction getPointForParentSnap(\n  documentCoordinates: Array<ISnapXPoint>,\n  coordinateValue: number,\n  stretch: number,\n  snapBounds: number = 0\n): any {\n  // TODO: think of a better logic\n  let distance = Number.MAX_VALUE;\n  // let snappedSide;\n  let coordinate;\n  let snappedSide = {\n    coordinate: NaN,\n    start: false,\n    center: false,\n    end: false,\n    snappedPoint: {\n      value: NaN,\n      rootValue: NaN,\n    },\n  };\n  const originalCoordinateValue = coordinateValue;\n  for (let coordinate of documentCoordinates) {\n    let newData = calculateCoordinate(\n      originalCoordinateValue,\n      coordinateValue,\n      coordinate,\n      snapBounds,\n      stretch,\n      distance,\n      snappedSide\n    );\n    coordinateValue = newData.coordinateValue;\n\n    distance = newData.distance;\n    snappedSide = newData.snapped;\n    coordinate = coordinate;\n\n    // snappedSide.snappedPoint = newData.snappedPoint;\n  }\n  return { value: coordinateValue, snappedSide };\n}\n\nfunction getPointForSiblingSnap(\n  layerCoordinates: Array<ISnapXPoint>,\n  coordinateValue: number,\n  stretch: number,\n  snapBounds: number = 0,\n  showLog?: boolean\n): any {\n  // TODO: think of a better logic\n  let distance = Number.MAX_VALUE;\n\n  let snappedSide = {\n    coordinate: NaN,\n    start: false,\n    center: false,\n    end: false,\n    snappedPoint: {\n      value: NaN,\n      rootValue: NaN,\n    },\n  };\n\n  let originalCoordinateValue = coordinateValue;\n  for (let coordinate of layerCoordinates) {\n    let newData = calculateCoordinate(\n      originalCoordinateValue,\n      coordinateValue,\n      coordinate,\n      snapBounds,\n      stretch,\n      distance,\n      snappedSide,\n      showLog\n    );\n    coordinateValue = newData.coordinateValue;\n    // coordinateValueFinal = newData.coordinateValue;\n    distance = newData.distance;\n\n    snappedSide = newData.snapped;\n\n    // snappedSide = newData.snapped;\n  }\n\n  return { value: coordinateValue, snappedSide };\n}\n\nfunction getPointForRulerLines(\n  rulerCoordinates: Array<any>,\n  coordinateValue: number,\n  stretch: number,\n  snapBounds: number = 0\n): any {\n  let snappedSide = {\n    coordinate: NaN,\n    start: false,\n    center: false,\n    end: false,\n    snappedPoint: {\n      value: NaN,\n      rootValue: NaN,\n    },\n  };\n\n  let distance = Number.MAX_VALUE;\n\n  let originalCoordinateValue = coordinateValue;\n  for (let coordinate of rulerCoordinates) {\n    let newData = calculateCoordinate(\n      originalCoordinateValue,\n      coordinateValue,\n      coordinate,\n      snapBounds,\n      stretch,\n      distance,\n      snappedSide\n    );\n\n    // if (newData) {\n\n    // }\n\n    snappedSide = newData.snapped;\n    coordinateValue = newData.coordinateValue;\n    distance = newData.distance;\n  }\n  return { value: coordinateValue, snappedSide };\n}\n\nfunction getDistance(value1: number, value2: number): number {\n  return Math.abs(value1 - value2);\n}\n\nfunction getPointForGutterSnap(\n  gutterCoordinates: Array<any>,\n  axis: 'x' | 'y',\n  coordinateValue: number,\n  stretch: number,\n  snapBounds: number = 0,\n  dims: IDimensionWithRoot\n): any {\n  // TODO: think of a better logic\n  // let distance = Number.MAX_VALUE;\n  // let snappedSide;\n  // for (let coordinate of gutterCoordinates) {\n  //   if (!isAlignedToAxis(dims, coordinate, axis)) {\n  //     return coordinateValue;\n  //   }\n  //   let newData = calculateCoordinate(\n  //     coordinateValue,\n  //     coordinate,\n  //     snapBounds,\n  //     stretch,\n  //     distance\n  //   );\n  //   coordinateValue = newData.coordinateValue;\n  //   distance = newData.distance;\n  //   snappedSide = newData.snapped;\n  // }\n  // return { value: coordinateValue, snappedSide };\n}\n\nfunction calculateCoordinate(\n  originalCoordinateValue: number,\n  coordinateValue: number,\n  coordinate: ISnapXPoint,\n  snapMagnet: number,\n  stretch: number,\n  distance: number,\n  snappedSide: any,\n  showLog?: boolean\n): {\n  coordinateValue: number;\n  distance: number;\n  snapped: any;\n  // snappedPoint: any;\n} {\n  let snapTo = {\n    start: true,\n    center: true,\n    end: true,\n  };\n\n  let snapped = snappedSide;\n  snapped.coordinateValue = coordinateValue;\n  snapped.distance = distance;\n\n  if (coordinate.snapTo) {\n    snapTo = coordinate.snapTo;\n  }\n\n  if (\n    Math.abs(originalCoordinateValue - coordinate.value) <= snapMagnet &&\n    snapTo.start &&\n    distance >= getDistance(originalCoordinateValue, coordinate.value)\n  ) {\n    // coordinateValue = coordinate.value;\n    // distance = getDistance(coordinateValue, coordinate.value);\n    snapped.start = true;\n    snapped.coordinate = coordinate.value;\n    snapped.snappedPoint = {\n      value: coordinate.value,\n      rootValue: coordinate.rootValue,\n    };\n    snapped.distance = getDistance(originalCoordinateValue, coordinate.value);\n    snapped.coordinateValue = coordinate.value;\n  }\n  if (\n    Math.abs(originalCoordinateValue + stretch / 2 - coordinate.value) <=\n      snapMagnet &&\n    snapTo.center &&\n    distance >=\n      getDistance(originalCoordinateValue + stretch / 2, coordinate.value)\n  ) {\n    // coordinateValue = coordinate.value - stretch / 2;\n    // distance = getDistance(coordinateValue + stretch / 2, coordinate.value);\n    // let snapped = snappedSide;\n    snapped.distance = getDistance(\n      originalCoordinateValue + stretch / 2,\n      coordinate.value\n    );\n    snapped.coordinateValue = coordinate.value - stretch / 2;\n\n    snapped.center = true;\n    snapped.coordinate = coordinate.value;\n    snapped.snappedPoint = {\n      value: coordinate.value,\n      rootValue: coordinate.rootValue,\n    };\n    // snappedArray.push(snapped);\n  }\n  if (\n    Math.abs(originalCoordinateValue + stretch - coordinate.value) <=\n      snapMagnet &&\n    snapTo.end &&\n    distance >= getDistance(originalCoordinateValue + stretch, coordinate.value)\n  ) {\n    // coordinateValue = coordinate.value - stretch;\n    // distance = getDistance(coordinateValue + stretch, coordinate.value);\n    // let snapped = snappedSide;\n\n    snapped.distance = getDistance(\n      originalCoordinateValue + stretch,\n      coordinate.value\n    );\n    snapped.coordinateValue = coordinate.value - stretch;\n\n    snapped.end = true;\n    snapped.coordinate = coordinate.value;\n\n    snapped.snappedPoint = {\n      value: coordinate.value,\n      rootValue: coordinate.rootValue,\n    };\n    // snappedArray.push(snapped);\n  }\n\n  return {\n    coordinateValue: snapped.coordinateValue,\n    distance: snapped.distance,\n    snapped: snapped,\n  };\n}\n\nfunction isAlignedToAxis(\n  dims: IDimensionWithRoot,\n  coordinates: any,\n  axis: 'x' | 'y'\n): boolean {\n  if (axis === 'x') {\n    if (\n      dims.rootY > coordinates.minY + (coordinates.maxY - coordinates.minY) ||\n      coordinates.minY > dims.rootY + dims.height\n    ) {\n      return false;\n    }\n    return true;\n  } else {\n    if (\n      dims.rootX > coordinates.minX + (coordinates.maxX - coordinates.minX) ||\n      coordinates.minX > dims.rootX + dims.width\n    ) {\n      return false;\n    }\n    return true;\n  }\n}\n","import { Canvas } from '../../models/Canvas';\nimport { Layer } from '../../models/Layer';\nimport ISnapPoints from './interfaces/ISnapPoints';\nimport ModelUtils from './../../models/utils';\nimport _, { forEach } from 'lodash';\nimport { IContext } from 'interfaces';\nimport Config from './interfaces/Config';\n\nfunction filterSnapPointX(snapPoint: any, handle: any) {\n  //\n  snapPoint.snapTo.center = false;\n  snapPoint.snapTo.start = true;\n  snapPoint.snapTo.end = true;\n\n  if (handle.indexOf('R') !== -1) {\n    snapPoint.snapTo.start = false;\n  }\n  if (handle.indexOf('L') !== -1) {\n    snapPoint.snapTo.end = false;\n  }\n}\nfunction filterSnapPointY(snapPoint: any, handle: any) {\n  snapPoint.snapTo.center = false;\n  snapPoint.snapTo.start = true;\n  snapPoint.snapTo.end = true;\n  if (handle.indexOf('B') !== -1) {\n    snapPoint.snapTo.start = false;\n  }\n  if (handle.indexOf('T') !== -1) {\n    snapPoint.snapTo.end = false;\n  }\n}\n\nexport default function getSnapPoints(\n  config: Config,\n  context: IContext,\n  selectedLayers: Array<Layer>,\n  parent: any = undefined,\n  handle?: any\n) {\n  let snapPoints: ISnapPoints = {\n    x: [],\n    y: [],\n  };\n\n  if (!parent || !config.snap) {\n    return {\n      parentSnapPoints: snapPoints,\n      siblingSnapPoints: snapPoints,\n      gutterSnapPoints: snapPoints,\n      rulerSnapPoints: snapPoints,\n      gridSnap: undefined,\n    };\n  }\n  let layers: any = [];\n\n  if (parent) {\n    layers = parent.children;\n  }\n  // TODO: Suraj review\n  if (layers.length === 0 && !parent) {\n    return {\n      parentSnapPoints: snapPoints,\n      siblingSnapPoints: snapPoints,\n      gutterSnapPoints: snapPoints,\n      rulerSnapPoints: snapPoints,\n      gridSnap: config.gridSnap,\n    };\n  }\n\n  let layerParent = parent;\n  if (!layerParent) {\n    layerParent = layers[0].parent;\n  }\n\n  // document bound snap points\n  let documentBound: Layer = layerParent;\n  let parentSnapPoints = snapPoints;\n  if (documentBound && config.parentSnap) {\n    // @ts-ignore\n    parentSnapPoints = documentBound.executeFunction('getParentSnapPoints', [\n      documentBound,\n    ]);\n  }\n\n  snapPoints.x = snapPoints.x.concat(parentSnapPoints.x);\n  snapPoints.y = snapPoints.y.concat(parentSnapPoints.y);\n\n  // layers snap points\n  let siblingSnapPoints: ISnapPoints = { x: [], y: [] };\n\n  if (config.siblingSnap && layers[0]) {\n    siblingSnapPoints = layers[0].executeFunction(\n      'getSiblingSnapPoints',\n      selectedLayers,\n      parent\n    );\n  }\n\n  let gutterSnapPoints: ISnapPoints = { x: [], y: [] };\n\n  if (config.gutterSnap && parent && layers[0]) {\n    // @ts-ignore\n    gutterSnapPoints = layers[0].executeFunction(\n      'getGutterSnapPoints',\n      selectedLayers\n    );\n  }\n\n  let rulerSnapPoints: { x: Array<any>; y: Array<any> } = {\n    x: [],\n    y: [],\n  };\n\n  if (config.rulerSnap) {\n    rulerSnapPoints = context.canvas.executeFunction(\n      'RulerLines.getLineCoordinates'\n    );\n\n    const boundingBox = context.canvas.getBoundingBox([parent], true);\n\n    forEach(rulerSnapPoints.x, (coordinate, index) => {\n      let point = coordinate - boundingBox.y;\n      rulerSnapPoints.x[index] = { value: point, rootValue: coordinate };\n    });\n    forEach(rulerSnapPoints.y, (coordinate, index) => {\n      const point = coordinate - boundingBox.x;\n      rulerSnapPoints.y[index] = { value: point, rootValue: coordinate };\n    });\n  }\n  // window['ModelUtils'] = ModelUtils;\n\n  // filtered snap point based on handle\n\n  if (handle) {\n    parentSnapPoints.x.forEach((snapPoint: any) => {\n      filterSnapPointX(snapPoint, handle);\n    });\n\n    parentSnapPoints.y.forEach((snapPoint: any) => {\n      filterSnapPointY(snapPoint, handle);\n    });\n\n    siblingSnapPoints.x.forEach((snapPoint: any) => {\n      // console.log(snapPoint, 'snap pont');\n      // snapPoint.snapTo.center = false;\n\n      filterSnapPointX(snapPoint, handle);\n    });\n\n    siblingSnapPoints.y.forEach((snapPoint: any) => {\n      // snapPoint.snapTo.center = false;\n\n      filterSnapPointY(snapPoint, handle);\n    });\n  }\n\n  // console.log(paren)\n  return {\n    parentSnapPoints,\n    siblingSnapPoints,\n    gutterSnapPoints,\n    rulerSnapPoints,\n    gridSnap: config.gridSnap,\n  };\n}\n","import { IPlugin, IContext, Canvas } from '../..';\nimport getSiblingPoints from './getSiblingPoints';\nimport getParentSnapPoints from './getParentSnapPoints';\nimport getGutterSnapPoints from './getGutterPoints';\nimport snapToGrid from './snapToGrid';\nimport snapPoint, { snapToPoints } from './snapPoint';\nimport getSnapPoints from './getSnapPoints';\nimport Config from './interfaces/Config';\n\nexport default class SnapPointsCalculator implements IPlugin {\n  name = 'SnapPointsCalculator';\n  canvas!: Canvas;\n  config!: Config;\n  snapBound: number = 5;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.config = {\n      snap: false,\n      parentSnap: false,\n      siblingSnap: false,\n      gutterSnap: false,\n      gridSnap: false,\n      rulerSnap: false,\n    };\n  }\n\n  setSnapBound = (context: IContext, bound: any) => {\n    this.snapBound = bound;\n  };\n  getSnapBound = (context: IContext) => {\n    return this.snapBound;\n  };\n\n  getConfig = (): Config => {\n    return this.config;\n  };\n\n  setConfig = (context: IContext, config: Config) => {\n    this.config = {\n      // snap: config.snap ? config.snap : this.config.snap,\n      // parentSnap: config.parentSnap\n      //   ? config.parentSnap\n      //   : this.config.parentSnap,\n      // siblingSnap: config.siblingSnap\n      //   ? config.siblingSnap\n      //   : this.config.siblingSnap,\n      // gutterSnap: config.gutterSnap\n      //   ? config.gutterSnap\n      //   : this.config.gutterSnap,\n      // gridSnap: config.gridSnap ? config.gridSnap : this.config.gridSnap,\n      // rulerSnap: config.rulerSnap ? config.rulerSnap : this.config.rulerSnap,\n      ...this.config,\n      ...config,\n    };\n  };\n\n  activate() {\n    this.canvas.addFunction('getSnapConfig', this.getConfig);\n    this.canvas.addFunction('setSnapConfig', this.setConfig);\n\n    this.canvas.addFunction('getSiblingSnapPoints', (...args: any[]) =>\n      // @ts-ignore\n      getSiblingPoints(this.config, ...args)\n    );\n    this.canvas.addFunction('getParentSnapPoints', (...args: any[]) =>\n      // @ts-ignore\n      getParentSnapPoints(this.config, ...args)\n    );\n    this.canvas.addFunction('getGutterSnapPoints', (...args: any[]) =>\n      // @ts-ignore\n      getGutterSnapPoints(this.config, ...args)\n    );\n    this.canvas.addFunction('snapToGrid', (...args: any[]) =>\n      // @ts-ignore\n      snapToGrid(this.config, ...args)\n    );\n    this.canvas.addFunction('snapToPoints', snapToPoints);\n    this.canvas.addFunction('getSnapPoints', (...args: any[]) =>\n      // @ts-ignore\n      getSnapPoints(this.config, ...args)\n    );\n    this.canvas.addFunction('setSnapBound', this.setSnapBound);\n    this.canvas.addFunction('getSnapBound', this.getSnapBound);\n  }\n\n  deactivate() {\n    this.canvas.removeFunction('getSiblingSnapPoints');\n    this.canvas.removeFunction('getParentSnapPoints');\n    this.canvas.removeFunction('getGutterSnapPoints');\n    this.canvas.removeFunction('snapToGrid');\n    this.canvas.removeFunction('snapToPoints');\n    this.canvas.removeFunction('getSnapPoints');\n    this.canvas.removeFunction('setSnapBound');\n    this.canvas.removeFunction('getSnapBound');\n  }\n}\n","import { Canvas, IPlugin, Layer } from '../..';\n\nexport default class ConstructionLinesPlugin implements IPlugin {\n  name = 'ConstructionLinesPlugin';\n  canvas!: Canvas;\n  dispose: any;\n  canvasDOMElement!: HTMLCanvasElement;\n  constructionLinesWrapper!: HTMLDivElement;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n  }\n\n  activate() {\n    this.canvas.addFunction(\n      'showConstructionLines',\n      this.showConstructionLines.bind(this)\n    );\n    this.canvas.addFunction(\n      'hideConstructionLines',\n      this.hideConstructionLines.bind(this)\n    );\n\n    this.canvas.addEventListener('setLayout', this.setDimensions.bind(this));\n\n    this.constructionLinesWrapper = document.createElement('div');\n    this.constructionLinesWrapper.className = 'construction-line-wrapper';\n    this.dispose = this.canvas.addDomToWorld(this.constructionLinesWrapper);\n    this.canvasDOMElement = document.createElement('canvas');\n\n    this.setDimensions();\n    // this.canvasDOMElement.setAttribute(\n    //   'height',\n    //   this.canvas.getBoundingClientRect().height.toString() + 'px'\n    // );\n    // this.canvasDOMElement.setAttribute(\n    //   'width',\n    //   this.canvas.getBoundingClientRect().width.toString() + 'px'\n    // );\n    this.canvasDOMElement.style.pointerEvents = 'none';\n    const context = this.canvasDOMElement.getContext('2d');\n    this.constructionLinesWrapper.style.pointerEvents = 'none';\n    this.constructionLinesWrapper.appendChild(this.canvasDOMElement);\n    const collisionScope = this.canvas.collisionScope;\n    this.attachListeners(this.canvas);\n    if (context && collisionScope) {\n      context.strokeStyle = '#f00';\n      context.beginPath();\n      collisionScope.drawBVH(context);\n      context.stroke();\n    }\n  }\n\n  attachListeners(layer: Layer) {\n    layer.on('*', this.updateLines);\n\n    layer.on(['children'], () => {\n      layer.children.forEach((child: Layer) => {\n        this.attachListeners(child);\n      });\n    });\n\n    layer.children.forEach((child: Layer) => {\n      this.attachListeners(child);\n    });\n  }\n\n  updateLines = () => {\n    const context = this.canvasDOMElement.getContext('2d');\n    const collisionScope = this.canvas.collisionScope;\n    if (context && collisionScope) {\n      context.clearRect(\n        0,\n        0,\n        this.canvasDOMElement.width,\n        this.canvasDOMElement.height\n      );\n      context.strokeStyle = '#f00';\n      context.beginPath();\n      collisionScope.drawBVH(context);\n      context.stroke();\n    }\n  };\n\n  deactivate() {\n    this.dispose();\n    this.canvas.removeFunction('showConstructionLines');\n    this.canvas.removeFunction('hideConstructionLines');\n    this.canvas.removeEventListener('setLayout', this.setDimensions);\n  }\n\n  showConstructionLines = () => {\n    this.constructionLinesWrapper.style.display = 'block';\n  };\n\n  setDimensions = () => {\n    this.canvasDOMElement.setAttribute(\n      'height',\n      this.canvas.getBoundingClientRect().height.toString() + 'px'\n    );\n    this.canvasDOMElement.setAttribute(\n      'width',\n      this.canvas.getBoundingClientRect().width.toString() + 'px'\n    );\n  };\n  hideConstructionLines = () => {\n    this.constructionLinesWrapper.style.display = 'none';\n  };\n}\n","import { Canvas, IPlugin } from '../../';\n\nexport default class ScrollMousePositionPlugin implements IPlugin {\n  name = 'ScrollMousePositionPlugin';\n  canvas!: Canvas;\n  dispose: any;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n  }\n\n  activate() {\n    const wrapperLayer = document.createElement('div');\n    this.dispose = this.canvas.addDomToViewport(wrapperLayer);\n\n    const positionElement = document.createElement('div');\n    wrapperLayer.appendChild(positionElement);\n    positionElement.style.position = 'absolute';\n    positionElement.style.top = '10px';\n    positionElement.style.right = '10px';\n    positionElement.style.height = '95px';\n    positionElement.style.width = '245px';\n    positionElement.style.pointerEvents = 'none';\n    positionElement.style.backgroundColor = 'skyblue';\n    positionElement.style.zIndex = '10';\n    let mousePosWorldNode = document.createTextNode(\n      ` Mouse World: {x:0, y:0} `\n    );\n    positionElement.appendChild(mousePosWorldNode);\n    positionElement.appendChild(document.createElement('br'));\n    let mousePosViewportNode = document.createTextNode(\n      `Mouse Viewport: {x: 0, y:0} `\n    );\n    positionElement.appendChild(mousePosViewportNode);\n\n    positionElement.appendChild(document.createElement('br'));\n    let pagePosPageNode = document.createTextNode(`Mouse Page: {x: 0, y:0} `);\n    positionElement.appendChild(pagePosPageNode);\n    positionElement.appendChild(document.createElement('br'));\n\n    let scroll = this.canvas.getScroll();\n    let scrollPosNode = document.createTextNode(\n      `Scroll: {x:${scroll.x}, y:${scroll.y}}`\n    );\n    positionElement.appendChild(scrollPosNode);\n    positionElement.appendChild(document.createElement('br'));\n\n    let zoom = this.canvas.getZoom();\n    let zoomNode = document.createTextNode(`Zoom: ${Number(zoom.toFixed(2))}`);\n    positionElement.appendChild(zoomNode);\n\n    this.canvas.on('scroll', () => {\n      scroll = this.canvas.getScroll();\n      scrollPosNode.nodeValue = `Scroll: {x:${Number(\n        scroll.x.toFixed(2)\n      )}, y:${Number(scroll.y.toFixed(2))}}`;\n    });\n    this.canvas.on('zoom', (e: any) => {\n      zoom = this.canvas.getZoom();\n      zoomNode.nodeValue = `Zoom: ${Number(zoom.toFixed(2))}`;\n    });\n    this.canvas.addEventListener('mousemove', (e: any) => {\n      mousePosWorldNode.nodeValue = `Mouse W: {x:${Number(\n        e.worldX.toFixed(2)\n      )}, y:${Number(e.worldY.toFixed(2))}}`;\n      mousePosViewportNode.nodeValue = `Mouse VP: {x:${Number(\n        e.viewportX.toFixed(2)\n      )}, y:${Number(e.viewportY.toFixed(2))}}`;\n\n      pagePosPageNode.nodeValue = `Mouse P: {x:${Number(\n        e.pageX.toFixed(2)\n      )}, y:${Number(e.pageY.toFixed(2))}}`;\n    });\n  }\n\n  deactivate() {\n    this.dispose();\n  }\n}\n","import { Box } from '../types';\nimport { round } from 'lodash';\nexport function isContained(axis: string, box: Box, helperBox: Box): boolean {\n  if (axis === 'x') {\n    const leftContained = box.x <= helperBox.x;\n    const rightContained =\n      round(box.x + box.width, 2) >= round(helperBox.x + helperBox.width, 2);\n    if (leftContained && rightContained) {\n      return true;\n    }\n  }\n\n  if (axis === 'y') {\n    const topContained = box.y <= helperBox.y;\n    const bottomContained =\n      round(box.y + box.height, 2) >= round(helperBox.y + helperBox.height, 2);\n    if (topContained && bottomContained) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function isAlignedonAxis(axis: string, box: any, helperBox: any) {\n  if (axis === 'x') {\n    if (\n      helperBox.y > box.y + box.height ||\n      box.y > helperBox.y + helperBox.height\n    ) {\n      return false;\n    }\n    return true;\n  } else if (axis === 'y') {\n    if (\n      helperBox.x > box.x + box.width ||\n      box.x > helperBox.x + helperBox.width\n    ) {\n      return false;\n    }\n    return true;\n  }\n  return false;\n}\n\nexport function getDirection(axis: string, box: Box, helperBox: Box): string {\n  if (axis === 'x') {\n    if (helperBox.x > box.x) {\n      return 'left';\n    }\n    return 'right';\n  } else if (axis === 'y') {\n    if (helperBox.y > box.y) {\n      return 'top';\n    }\n    return 'bottom';\n  }\n  return 'No Axis';\n}\n","import { Canvas } from '../../';\nimport { IPlugin, Layer } from '../../';\nimport drawXLines from './components/XLines';\nimport drawYLines from './components/YLines';\nimport { get } from 'lodash';\nimport { Box } from './types';\n\nexport default class MeasurementLinesPlugin implements IPlugin {\n  name = 'MeasurementLinesPlugin';\n  namespace = 'MeasurementLines';\n  canvas!: Canvas;\n  dispose: any;\n  show: boolean = false;\n  lines: Array<any> = [];\n  currentHoveredLayer: any;\n  temporarilyHidden: boolean = false;\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n  }\n  display() {\n    if (this.show) {\n      const hoveredLayers = this.canvas.hoveredLayers.filter(\n        (layer: Layer) => layer.type !== 'canvas'\n      );\n      const emptyBox = { x: 0, y: 0, height: 0, width: 0 };\n      let box: Box = emptyBox;\n      let helperBox: Box = emptyBox;\n      let hoveredDims;\n      let parentHoveredLayer;\n      if (hoveredLayers.length) {\n        hoveredDims = this.canvas.getBoundingBox([hoveredLayers[0]]);\n        this.currentHoveredLayer = hoveredLayers[0];\n        parentHoveredLayer = get(hoveredLayers, '[0].parent');\n      }\n      if (this.canvas.selectedLayers.length && hoveredDims) {\n        helperBox = this.canvas.getBoundingBox(this.canvas.selectedLayers);\n        box = hoveredDims;\n      } else if (\n        parentHoveredLayer &&\n        parentHoveredLayer.type !== 'canvas' &&\n        hoveredDims\n      ) {\n        helperBox = hoveredDims;\n        box = this.canvas.getBoundingBox([parentHoveredLayer]);\n      } else if (this.canvas.selectedLayers.length) {\n        helperBox = this.canvas.getBoundingBox(this.canvas.selectedLayers);\n        let parent = get(this.canvas, 'selectedLayers[0].parent');\n        box =\n          parent && parent.type !== 'canvas'\n            ? this.canvas.getBoundingBox([parent])\n            : emptyBox;\n      }\n      const xLines = drawXLines({\n        box,\n        helperBox,\n        canvas: this.canvas,\n      });\n      const yLines = drawYLines({\n        box,\n        helperBox,\n        canvas: this.canvas,\n      });\n      if (this.lines && this.lines.length > 0) {\n        this.lines.forEach(line => {\n          line.parentNode.removeChild(line);\n        });\n        this.lines = [];\n      }\n      this.lines = [...xLines, ...yLines];\n    }\n  }\n  showLines() {\n    this.show = true;\n    this.temporarilyHidden = false;\n    this.display();\n  }\n  hideLines() {\n    this.show = false;\n    if (this.lines && this.lines.length > 0) {\n      this.lines.forEach(line => {\n        line.parentNode.removeChild(line);\n      });\n      this.lines = [];\n    }\n    this.currentHoveredLayer = undefined;\n  }\n  activate() {\n    this.canvas.addFunction(\n      `${this.namespace}.show`,\n      this.showLines.bind(this)\n    );\n    this.canvas.addFunction(\n      `${this.namespace}.hide`,\n      this.hideLines.bind(this)\n    );\n    this.canvas.addEventListener('keyUp', (data: any) => {\n      let event = data.originalEvent ? data.originalEvent : data;\n      if (event.keyCode === 18) {\n        this.temporarilyHidden = false;\n        this.hideLines();\n      }\n    });\n    this.canvas.addEventListener('blur', (data: any) => {\n      this.hideLines();\n    });\n    this.canvas.addEventListener('keyDown', (data: any) => {\n      let event = data.originalEvent ? data.originalEvent : data;\n      if (event.keyCode === 18) {\n        this.showLines();\n      }\n    });\n    this.canvas.on('mouseEventsBlocked', () => {\n      if (this.canvas.mouseEventsBlocked && this.show) {\n        this.temporarilyHidden = true;\n        this.hideLines();\n      } else if (this.temporarilyHidden) {\n        this.temporarilyHidden = false;\n        this.showLines();\n      }\n    });\n    this.canvas.on('hoveredLayers', () => {\n      if (\n        this.show &&\n        this.canvas.hoveredLayers.length > 0 &&\n        this.canvas.hoveredLayers[0].type !== 'canvas' &&\n        this.canvas.hoveredLayers[0] !== this.currentHoveredLayer\n      ) {\n        this.display();\n      }\n    });\n  }\n\n  deactivate() {\n    this.canvas.removeFunction(`${this.namespace}.show`);\n    this.canvas.removeFunction(`${this.namespace}.hide`);\n    this.dispose();\n  }\n}\n","import { PropTypes, Box } from '../types';\nimport { isContained, isAlignedonAxis, getDirection } from '../utils';\n\nconst getLeftEnd = (xContained: boolean, yContained: boolean, box: Box) => {\n  if (xContained && yContained) {\n    return box.x;\n  }\n  return box.x + box.width;\n};\nconst getLeftWidth = (\n  xContained: boolean,\n  yContained: boolean,\n  box: Box,\n  helperBox: Box\n) => {\n  if (xContained && yContained) {\n    return helperBox.x - box.x;\n  }\n  return helperBox.x - box.x - box.width;\n};\nconst getTop = (helperBox: Box) => {\n  return helperBox.y + Math.floor(helperBox.height / 2);\n};\n\nconst getRightEnd = (helperBox: Box) => {\n  return helperBox.x + helperBox.width;\n};\n\nconst getRightWidth = (\n  xContained: boolean,\n  yContained: boolean,\n  box: Box,\n  helperBox: Box\n) => {\n  if (xContained && yContained) {\n    return box.x + box.width - (helperBox.x + helperBox.width);\n  }\n  return box.x - helperBox.x - helperBox.width;\n};\n\nconst drawXLines = (props: PropTypes) => {\n  let { box, helperBox } = props;\n  let xContained = isContained('x', box, helperBox);\n  let yContained = isContained('y', box, helperBox);\n  let xAligned = isAlignedonAxis('x', box, helperBox);\n  let leftAligned = false;\n  let rightAligned = false;\n  let direction = getDirection('x', box, helperBox);\n  if (xAligned) {\n    if (direction === 'left') {\n      leftAligned = true;\n    } else if (direction === 'right') {\n      rightAligned = true;\n    }\n  }\n  let leftEnd = getLeftEnd(xContained, yContained, props.box);\n  let leftWidth = getLeftWidth(\n    xContained,\n    yContained,\n    props.box,\n    props.helperBox\n  );\n  let top = getTop(props.helperBox);\n  let rightEnd = getRightEnd(props.helperBox);\n  let rightWidth = getRightWidth(\n    xContained,\n    yContained,\n    props.box,\n    props.helperBox\n  );\n  let leftDistance =\n    xContained && yContained\n      ? helperBox.x - box.x\n      : helperBox.x - box.x - box.width;\n  let rightDistance =\n    xContained && yContained\n      ? box.x + box.width - (helperBox.x + helperBox.width)\n      : box.x - helperBox.x - helperBox.width;\n  let leftShow =\n    (leftAligned || (xContained && yContained)) && leftDistance > 0;\n  let rightShow =\n    (rightAligned || (xContained && yContained)) && rightDistance > 0;\n  const lines = [];\n  if (leftShow) {\n    leftDistance = Math.round(leftDistance);\n    lines.push(\n      props.canvas.executeFunction(\n        'drawLine',\n        'y',\n        leftEnd,\n        'measurementXLine1-edge',\n        top - 2.5,\n        top + 3,\n        false\n      )\n    );\n    lines.push(\n      props.canvas.executeFunction(\n        'drawLine',\n        'x',\n        top,\n        'measurementXLine1',\n        leftEnd,\n        leftEnd + leftWidth,\n        false,\n        leftDistance\n      )\n    );\n    lines.push(\n      props.canvas.executeFunction(\n        'drawLine',\n        'y',\n        leftEnd + leftWidth - 1,\n        'measurementXLine1-edge',\n        top - 2.5,\n        top + 3,\n        false\n      )\n    );\n  }\n  if (rightShow) {\n    rightDistance = Math.round(rightDistance);\n    lines.push(\n      props.canvas.executeFunction(\n        'drawLine',\n        'y',\n        rightEnd,\n        'measurementXLine1-edge',\n        top - 2.5,\n        top + 3,\n        false\n      )\n    );\n    lines.push(\n      props.canvas.executeFunction(\n        'drawLine',\n        'x',\n        top,\n        'measurementXLine2',\n        rightEnd,\n        rightWidth + rightEnd,\n        false,\n        rightDistance\n      )\n    );\n    lines.push(\n      props.canvas.executeFunction(\n        'drawLine',\n        'y',\n        rightWidth + rightEnd - 1,\n        'measurementXLine1-edge',\n        top - 2.5,\n        top + 3,\n        false\n      )\n    );\n  }\n  return lines;\n};\n\nexport default drawXLines;\n","import { PropTypes, Box } from '../types';\nimport { isContained, isAlignedonAxis, getDirection } from '../utils';\n\nconst getTopEnd = (xContained: boolean, yContained: boolean, box: Box) => {\n  if (xContained && yContained) {\n    return box.y;\n  }\n  return box.y + box.height;\n};\n\nconst getTopHeight = (\n  xContained: boolean,\n  yContained: boolean,\n  box: Box,\n  helperBox: Box\n) => {\n  if (xContained && yContained) {\n    return helperBox.y - box.y;\n  }\n  return helperBox.y - box.y - box.height;\n};\n\nconst getLeft = (helperBox: Box) => {\n  return helperBox.x + Math.floor(helperBox.width / 2);\n};\n\nconst getBottomEnd = (helperBox: Box) => {\n  return helperBox.y + helperBox.height;\n};\n\nconst getBottomHeight = (\n  xContained: boolean,\n  yContained: boolean,\n  box: Box,\n  helperBox: Box\n) => {\n  if (xContained && yContained) {\n    return box.y + box.height - (helperBox.y + helperBox.height);\n  }\n  return box.y - helperBox.y - helperBox.height;\n};\n\nconst drawYLines = (props: PropTypes) => {\n  let { box, helperBox } = props;\n  let xContained = isContained('x', box, helperBox);\n  let yContained = isContained('y', box, helperBox);\n  let yAligned = isAlignedonAxis('y', box, helperBox);\n  let topAligned = false;\n  let bottomAligned = false;\n  let direction = getDirection('y', box, helperBox);\n  if (yAligned) {\n    if (direction === 'top') {\n      topAligned = true;\n    } else if (direction === 'bottom') {\n      bottomAligned = true;\n    }\n  }\n  let topEnd = getTopEnd(xContained, yContained, props.box);\n  let topHeight = getTopHeight(\n    xContained,\n    yContained,\n    props.box,\n    props.helperBox\n  );\n  let left = getLeft(props.helperBox);\n  let bottomEnd = getBottomEnd(props.helperBox);\n  let bottomHeight = getBottomHeight(\n    xContained,\n    yContained,\n    props.box,\n    props.helperBox\n  );\n\n  let topDistance =\n    xContained && yContained\n      ? helperBox.y - box.y\n      : helperBox.y - box.y - box.height;\n  let topShow = (topAligned || (xContained && yContained)) && topDistance > 0;\n\n  let bottomDistance =\n    xContained && yContained\n      ? box.y + box.height - (helperBox.y + helperBox.height)\n      : box.y - helperBox.y - helperBox.height;\n\n  let bottomShow =\n    (bottomAligned || (xContained && yContained)) && bottomDistance > 0;\n  const lines = [];\n  if (topShow) {\n    topDistance = Math.round(topDistance);\n    lines.push(\n      props.canvas.executeFunction(\n        'drawLine',\n        'x',\n        topEnd,\n        'measurementXLine1-edge',\n        left - 2.5,\n        left + 3,\n        false\n      )\n    );\n    lines.push(\n      props.canvas.executeFunction(\n        'drawLine',\n        'y',\n        left,\n        'measurementYLine1',\n        topEnd,\n        topEnd + topHeight,\n        false,\n        topDistance\n      )\n    );\n    lines.push(\n      props.canvas.executeFunction(\n        'drawLine',\n        'x',\n        topEnd + topHeight - 1,\n        'measurementXLine1-edge',\n        left - 2.5,\n        left + 3,\n        false\n      )\n    );\n  }\n  if (bottomShow) {\n    bottomDistance = Math.round(bottomDistance);\n    lines.push(\n      props.canvas.executeFunction(\n        'drawLine',\n        'x',\n        bottomEnd,\n        'measurementXLine1-edge',\n        left - 2.5,\n        left + 3,\n        false\n      )\n    );\n    lines.push(\n      props.canvas.executeFunction(\n        'drawLine',\n        'y',\n        left,\n        'measurementYLine2',\n        bottomEnd,\n        bottomEnd + bottomHeight,\n        false,\n        bottomDistance\n      )\n    );\n    lines.push(\n      props.canvas.executeFunction(\n        'drawLine',\n        'x',\n        bottomEnd + bottomHeight - 1,\n        'measurementXLine1-edge',\n        left - 2.5,\n        left + 3,\n        false\n      )\n    );\n  }\n  return lines;\n};\n\nexport default drawYLines;\n","import { Event, Layer } from './../../..';\n\nexport default class MouseRectEvent extends Event {\n  payload: Array<Layer>;\n  constructor(\n    name: string,\n    target: Layer,\n    payload: Array<Layer>,\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    this.payload = payload;\n  }\n}\n","import { Canvas, Layer } from '../../';\nimport { IPlugin } from '../../';\nimport MouseRectEvent from './events';\nimport { IDimension } from 'interfaces';\n\nexport default class MouseRectPlugin implements IPlugin {\n  name = 'MouseRectPlugin';\n  namespace = 'MouseRect';\n  canvas!: Canvas;\n  dispose: any;\n  dragStarted: boolean = false;\n  dragStart: any = {\n    x: 0,\n    y: 0,\n  };\n  dims: IDimension = { x: 0, y: 0, height: 0, width: 0 };\n  wrapperLayer: any;\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n  }\n  getLayers = () => {\n    const hitRectResult = this.canvas.getHitRectResult(\n      this.dims.x,\n      this.dims.y,\n      this.dims.width,\n      this.dims.height\n    );\n    return this.canvas.executeMiddleware(\n      'MouseRect.getHitRectResult',\n      hitRectResult,\n      (hitRectResult: Array<Layer>) => {\n        return hitRectResult;\n      }\n    );\n  };\n  activate() {\n    let zoom = this.canvas.getZoom();\n\n    this.wrapperLayer = document.createElement('div');\n\n    this.dispose = this.canvas.addDomToWorld(this.wrapperLayer, true, 105);\n\n    this.wrapperLayer.style.position = 'absolute';\n    this.wrapperLayer.style.border = `${1 /\n      this.canvas.getZoom()}px solid #25B9D1`;\n    this.wrapperLayer.style.top = '0px';\n    this.wrapperLayer.style.left = '0px';\n    this.wrapperLayer.style.height = '0px';\n    this.wrapperLayer.style.width = '0px';\n    this.wrapperLayer.style.display = 'none';\n    this.wrapperLayer.style.backgroundColor = 'rgba(121,121,121,0.09)';\n    this.wrapperLayer.style.pointerEvents = 'none';\n\n    this.canvas.addEventListener('dragStart', (event: any) => {\n      return this.canvas.executeMiddleware(\n        'MouseRect.dragStart',\n        event,\n        (event: any) => {\n          this.dragStarted = true;\n          this.dragStart = {\n            x: event.worldX,\n            y: event.worldY,\n          };\n\n          this.wrapperLayer.style.display = '';\n          this.wrapperLayer.style.left = this.dragStart.x + 'px';\n          this.wrapperLayer.style.top = this.dragStart.y + 'px';\n        }\n      );\n    });\n    this.canvas.addEventListener('drag', (event: any) => {\n      if (this.dragStarted) {\n        this.dims.x =\n          event.worldX < this.dragStart.x ? event.worldX : this.dragStart.x;\n        this.dims.y =\n          event.worldY < this.dragStart.y ? event.worldY : this.dragStart.y;\n        this.dims.height = Math.abs(event.worldY - this.dragStart.y);\n        this.dims.width = Math.abs(event.worldX - this.dragStart.x);\n        this.wrapperLayer.style.left = this.dims.x + 'px';\n        this.wrapperLayer.style.top = this.dims.y + 'px';\n        this.wrapperLayer.style.height = this.dims.height + 'px';\n        this.wrapperLayer.style.width = this.dims.width + 'px';\n\n        const drawEvent = new MouseRectEvent(\n          `${this.namespace}.draw`,\n          this.canvas,\n          this.getLayers(),\n          this.canvas\n        );\n        this.canvas.dispatchEvent(`${this.namespace}.draw`, drawEvent);\n      }\n    });\n\n    this.canvas.addEventListener('dragEnd', (event: any) => {\n      if (this.dragStarted) {\n        this.wrapperLayer.style.top = '0px';\n        this.wrapperLayer.style.left = '0px';\n        this.wrapperLayer.style.height = '0px';\n        this.wrapperLayer.style.width = '0px';\n        this.wrapperLayer.style.display = 'none';\n        const drawEndEvent = new MouseRectEvent(\n          `${this.namespace}.drawEnd`,\n          this.canvas,\n          this.getLayers(),\n          this.canvas\n        );\n        this.canvas.dispatchEvent(`${this.namespace}.drawEnd`, drawEndEvent);\n        this.dragStarted = false;\n      }\n    });\n    this.canvas.on('zoom', (e: any) => {\n      let zoom = this.canvas.getZoom();\n\n      this.wrapperLayer.style.border = `${1 / zoom}px solid #25B9D1`;\n    });\n  }\n\n  deactivate() {\n    this.dispose();\n  }\n}\n","import * as React from 'react';\nimport {\n  Editor,\n  EditorState,\n  ContentState,\n  getDefaultKeyBinding,\n  Modifier,\n} from 'draft-js';\nimport { Layer, TextEditorEvent } from '../../';\nimport './Draft.css';\nimport { IDimensionWithRoot } from 'interfaces';\nimport { isNil } from 'lodash';\n\ntype propType = {\n  layer: Layer;\n  onEvent: (event: TextEditorEvent) => void;\n};\n\nexport default class TextEditor extends React.Component<propType, any> {\n  isBlurred: boolean = false;\n  text: string = '';\n  dims: IDimensionWithRoot = this.props.layer.getBoundingClientRect();\n  editorRef: any;\n  isText: boolean = this.props.layer.type === 'text';\n  isAuto: boolean =\n    this.props.layer &&\n    this.props.layer.layout &&\n    isNil(this.props.layer.layout.get('width'));\n  constructor(props: any) {\n    super(props);\n    this.text = this.isText\n      ? this.props.layer.innerText\n      : this.props.layer.props\n      ? this.props.layer.props.get('placeholder')\n      : ' ';\n    this.state = {\n      editorState: EditorState.moveFocusToEnd(\n        EditorState.createWithContent(\n          ContentState.createFromText(this.text || '')\n        )\n      ),\n    };\n  }\n  componentDidMount() {\n    this.onFocus();\n    document.addEventListener('keydown', this.handleNumpadEnter);\n    document.execCommand('selectAll', false, undefined);\n  }\n  isNumpadEnter(e: any) {\n    return e.key === 'Enter' && e.location === 3 && e.which === 13;\n  }\n  onBlur = () => {\n    this.isBlurred = true;\n    const event = new TextEditorEvent(\n      'onEditorBlur',\n      this.props.layer,\n      this.state.editorState.getCurrentContent().getPlainText(),\n      this.isBlurred\n    );\n    this.props.onEvent(event);\n  };\n\n  onFocus = () => {\n    this.isBlurred = false;\n    const event = new TextEditorEvent(\n      'onEditorFocus',\n      this.props.layer,\n      this.state.editorState.getCurrentContent().getPlainText()\n    );\n    this.props.onEvent(event);\n  };\n  handleNumpadEnter = (e: any) => {\n    if (this.isNumpadEnter(e)) {\n      this.onBlur();\n    }\n  };\n  removePositionalAttribute = (style: any) => {\n    let newStyle = { ...style };\n    delete newStyle['left'];\n    delete newStyle['top'];\n    delete newStyle['width'];\n    delete newStyle['height'];\n    delete newStyle['flex'];\n    delete newStyle['margin'];\n    delete newStyle['marginTop'];\n    delete newStyle['marginRight'];\n    delete newStyle['marginBottom'];\n    delete newStyle['marginLeft'];\n    if (!newStyle['fontFamily'] || newStyle['fontFamily'] === 'System') {\n      newStyle['fontFamily'] = 'system-ui';\n    }\n    return newStyle;\n  };\n  onChange = (editorState: any) => {\n    if (this.isBlurred) {\n      return;\n    }\n    if (editorState.getCurrentContent().getPlainText() !== this.text) {\n      const event = new TextEditorEvent(\n        'onEditorChange',\n        this.props.layer,\n        this.state.editorState.getCurrentContent().getPlainText(),\n        this.isBlurred\n      );\n      this.props.onEvent(event);\n    }\n    this.setState({ editorState });\n  };\n  myBlockStyleFn = (contentBlock: any) => {\n    const type = contentBlock.getType();\n    if (type === 'unstyled') {\n      return 'defaultTextStyle';\n    }\n    return '';\n  };\n  getStringStyle = (propertyName: string) => {\n    let property = this.props.layer.layout.isValidKey(propertyName)\n      ? this.props.layer.layout.get(propertyName)\n      : this.props.layer.style.get(propertyName);\n    return typeof property === 'number' ? property.toString() + 'px' : property;\n  };\n  handleTab = (event: any) => {\n    event.preventDefault();\n    if (this.isBlurred) {\n      return;\n    }\n    let newContentState = Modifier.replaceText(\n      this.state.editorState.getCurrentContent(),\n      this.state.editorState.getSelection(),\n      '\\t'\n    );\n    const editorState = EditorState.push(\n      this.state.editorState,\n      newContentState,\n      'insert-characters'\n    );\n    if (editorState.getCurrentContent().getPlainText() !== this.text) {\n      const event = new TextEditorEvent(\n        'onEditorChange',\n        this.props.layer,\n        this.state.editorState.getCurrentContent().getPlainText(),\n        this.isBlurred\n      );\n      this.props.onEvent(event);\n    }\n    this.setState({ editorState });\n  };\n  handleKeyBinding = (event: any) => {\n    if (event.keyCode === 27) {\n      this.onBlur();\n    }\n    return getDefaultKeyBinding(event);\n  };\n  render() {\n    let style = this.removePositionalAttribute({\n      ...this.props.layer.style.getAll(),\n      ...this.props.layer.layout.getAll(),\n    });\n    return (\n      <div\n        className=\"editorWrapper\"\n        style={{\n          ...style,\n          display: '',\n          visibility: 'visible',\n          position: 'absolute',\n          transform: this.props.layer.rotation\n            ? `rotate(${this.props.layer.rotation}deg)`\n            : undefined,\n          top:\n            this.dims.rootY +\n            (!this.isText\n              ? this.dims.height / 2 - 7.6 // No clue how, but it works\n              : 0),\n          left: this.dims.rootX,\n          height: this.dims.height,\n          width: this.isAuto ? undefined : this.dims.width,\n          caretColor: this.isText ? style.color || 'black' : 'grey',\n          color: this.isText ? style.color || 'black' : '#757575',\n          fontSize: style.fontSize ? parseInt(style.fontSize, 10) : 14,\n          lineHeight: this.getStringStyle('lineHeight') || 'normal',\n          letterSpacing: this.getStringStyle('letterSpacing'),\n          WebkitFontSmoothing: 'antialiased',\n        }}\n      >\n        <Editor\n          ref={(c: any) => {\n            this.editorRef = c;\n          }}\n          editorState={this.state.editorState}\n          onChange={this.onChange}\n          keyBindingFn={this.handleKeyBinding}\n          blockStyleFn={this.myBlockStyleFn}\n          handleReturn={(e: any, editorState: EditorState) =>\n            this.isNumpadEnter(e) ? 'handled' : 'not-handled'\n          }\n          onBlur={this.onBlur}\n          onFocus={this.onFocus}\n          onTab={this.handleTab}\n        />\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Canvas, IPlugin, TextEditorEvent, Layer } from '../..';\nimport { IDimensionWithRoot, IContext } from 'interfaces';\nimport TextEditorRenderer from './TextEditorRenderer';\n\nexport default class TextEditorPlugin implements IPlugin {\n  name = 'TextEditorPlugin';\n  canvas!: Canvas;\n  dispose: any;\n  wrapperLayer: any;\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n  }\n  mountTextEditor(context: IContext, layer: Layer) {\n    if (layer && (layer.type == 'text' || layer.type == 'textInput')) {\n      // layer.setStyle('display', 'none');\n      layer.setStyle('visibility', 'hidden');\n      const dims: IDimensionWithRoot = this.canvas.getBoundingClientRect();\n      this.wrapperLayer.style.display = '';\n      this.wrapperLayer.style.top = dims.rootY + 'px';\n      this.wrapperLayer.style.left = dims.rootX + 'px';\n      this.wrapperLayer.style.height = dims.height + 'px';\n      this.wrapperLayer.style.width = dims.width + 'px';\n      ReactDOM.render(\n        <TextEditorRenderer\n          layer={layer}\n          onEvent={(event: TextEditorEvent) => {\n            if (event.name === 'onEditorChange' && event.target) {\n              event.target.dispatchEvent('setText', event);\n            } else if (event.name === 'onEditorBlur' && event.target) {\n              this.wrapperLayer.style.display = 'none';\n              // event.target.setStyle('display', '');\n              event.target.removeStyle('visibility');\n              event.target.dispatchEvent('setText', event);\n            }\n          }}\n        />,\n        this.wrapperLayer\n      );\n    }\n  }\n  unmountTextEditor(context: IContext) {\n    ReactDOM.unmountComponentAtNode(this.wrapperLayer);\n  }\n  activate() {\n    this.wrapperLayer = document.createElement('div');\n    this.dispose = this.canvas.addDomToWorld(this.wrapperLayer);\n    this.wrapperLayer.style.position = 'absolute';\n    this.wrapperLayer.style.top = '0';\n    this.wrapperLayer.style.left = '0';\n    this.wrapperLayer.style.height = '0';\n    this.wrapperLayer.style.width = '0';\n    this.wrapperLayer.style.display = 'none';\n    this.canvas.addFunction(\n      'TextEditorPlugin.mountEditor',\n      this.mountTextEditor.bind(this)\n    );\n    this.canvas.addFunction(\n      'TextEditorPlugin.unmountEditor',\n      this.unmountTextEditor.bind(this)\n    );\n  }\n\n  deactivate() {\n    this.canvas.removeFunction('TextEditorPlugin.mountEditor');\n    this.canvas.removeFunction('TextEditorPlugin.unmountEditor');\n    this.dispose();\n  }\n}\n","import * as React from 'react';\n//@ts-ignore\nimport paper from 'paper';\nimport {\n  getPaperPathFromPoints,\n  convertPaperPointToBxObj,\n} from '@builderx-core/conversions';\nimport { PathEvent, MouseEvent } from '../../';\nimport { get } from 'lodash';\n\ntype PathEditorProps = {\n  onEvent: (event: any) => void;\n  pathProps?: any;\n  newPath?: boolean;\n  bounds: any;\n  dimensions: any;\n  canvas: any;\n  layer: any;\n};\n\nexport default class PathEditor extends React.PureComponent<\n  PathEditorProps,\n  any\n> {\n  paper: any = paper;\n  path!: paper.Path | null;\n  segment!: paper.Segment | null | any;\n  tool!: paper.Tool | null;\n  handle!: string | null;\n  xFactor: number = 1;\n  yFactor: number = 1;\n  oldBounds: any;\n  isFirstClick: boolean = true;\n  onUpdate = (keys: any) => {\n    this.forceUpdate();\n  };\n  componentDidMount() {\n    const canvas = document.getElementById('path-editor-canvas');\n    if (!canvas) {\n      return;\n    }\n    this.props.canvas.on('zoom', this.onUpdate);\n    this.paper.setup(canvas as HTMLCanvasElement);\n    this.init();\n    let tool = new paper.Tool();\n    tool.onMouseDrag = this.onMouseDrag;\n    tool.onMouseDown = this.onMouseDown;\n    tool.onMouseUp = this.onMouseUp;\n    tool.onMouseMove = this.onMouseMove;\n    this.tool = tool;\n    this.paper.settings.handleSize = 7 / this.props.canvas.getZoom();\n    this.ready();\n  }\n\n  ready() {\n    let pointMode = '';\n    if (this.segment) {\n      if (this.segment.handleIn.isZero() || this.segment.handleOut.isZero()) {\n        pointMode = 'straight';\n      } else {\n        pointMode = 'disconnected';\n      }\n    }\n    const event = new PathEvent('pathEditorOnReady', this.props.layer, {\n      actions: {\n        deleteSelectedPoint: this.deleteSelectedPoint,\n        straightenSelectedPoint: this.straightenSelectedPoint,\n        disconnectSelectedPoint: this.disconnectSelectedPoint,\n        finishEditing: this.finishEditing,\n        closePath: this.closePath,\n      },\n      pointMode,\n    });\n    this.props.onEvent(event);\n  }\n\n  componentDidUpdate(prevProps: PathEditorProps) {\n    this.paper.settings.handleSize = 7 / this.props.canvas.getZoom();\n    this.init();\n  }\n\n  componentWillUnmount() {\n    if (this.tool) {\n      this.tool.remove();\n    }\n    this.pathEditorOnEnd(true);\n    this.paper.project.clear();\n    this.paper.project.remove();\n  }\n\n  init() {\n    let { layer, dimensions, newPath } = this.props;\n    let path: paper.Path | any;\n    if (newPath) {\n      path = new paper.Path();\n      this.segment = path.add(new paper.Point(0, 0));\n      path.selectedColor = '#A3A3A3';\n      path.strokeColor = '#A3A3A3';\n      path.strokeWidth = 1 / this.props.canvas.getZoom();\n      this.paper.project.clear();\n      let paperLayer = new paper.Layer([path]);\n      this.paper.project.addLayer(paperLayer);\n    } else {\n      if (this.path) {\n        this.path.remove();\n      }\n      this.isFirstClick = false;\n      let pathProps = layer.props.getAll();\n      let points = pathProps.points;\n      let isClosed = pathProps.isClosed;\n      let pathJSON = getPaperPathFromPoints(points, isClosed);\n      path = pathJSON;\n      this.xFactor = dimensions.width / path.bounds.width;\n      this.yFactor = dimensions.height / path.bounds.height;\n      this.oldBounds = path.bounds;\n      path.applyMatrix = true;\n      path.bounds.x = 0;\n      path.bounds.y = 0;\n      path.translate(new paper.Point(dimensions.rootX, dimensions.rootY));\n      path.scale(this.xFactor, this.yFactor, path.bounds.topLeft);\n      const rotation = this.getRotation();\n      if (rotation) {\n        path.rotate(rotation);\n      }\n      path.selectedColor = '#A3A3A3';\n      path.strokeColor = '#A3A3A3';\n      path.fillColor = pathProps.fill;\n      this.paper.project.clear();\n      let paperLayer = new paper.Layer([path]);\n      this.paper.project.addLayer(paperLayer);\n    }\n    path.selected = true;\n    //@ts-ignore\n    this.paper.view.draw();\n    this.paper.view.update();\n    this.path = path;\n  }\n\n  getRotation = () => {\n    // TODO: handle rotation here\n    // const rotation = get(\n    //   this.props.layer,\n    //   'domainCompiledRefs[0].renderCompiledRef.rotation'\n    // );\n    return 0;\n  };\n\n  finishEditing = () => {\n    if (this.segment) {\n      this.segment.remove();\n      this.segment = null;\n    }\n  };\n\n  closePath = () => {\n    this.finishEditing();\n    if (this.path) {\n      this.path.closePath();\n    }\n  };\n\n  deleteSelectedPoint = () => {\n    if (this.segment) {\n      this.segment.remove();\n      this.ready();\n    }\n  };\n\n  straightenSelectedPoint = () => {\n    if (this.segment) {\n      this.segment.clearHandles();\n      this.ready();\n    }\n  };\n\n  disconnectSelectedPoint = () => {\n    if (this.segment) {\n      if (this.segment.handleIn.isZero()) {\n        this.segment.smooth();\n      }\n      if (this.segment.handleOut.isZero()) {\n        this.segment.smooth();\n      }\n      this.ready();\n    }\n  };\n\n  emitUpdatedJSON = () => {\n    if (this.path) {\n      if (this.props.newPath) {\n        let tempPath = this.path.clone({ insert: false, deep: true });\n        tempPath.translate(\n          new paper.Point(-this.path.bounds.x, -this.path.bounds.y)\n        );\n\n        let convertedJSON = convertPaperPointToBxObj(tempPath);\n        const emitEvent = new PathEvent(\n          'pathEditorOnChange',\n          this.props.layer,\n          {\n            pathProps: convertedJSON,\n            bounds: this.path.bounds,\n          }\n        );\n        this.props.onEvent(emitEvent);\n      } else {\n        let tempPath = this.path.clone({ insert: false, deep: true });\n        tempPath.translate(\n          new paper.Point(-this.props.dimensions.x, -this.props.dimensions.y)\n        );\n        let tempPath2 = this.path.clone({ insert: false, deep: true });\n\n        const rotation = this.getRotation();\n        if (rotation) {\n          tempPath.rotate(-rotation);\n          tempPath2.rotate(-rotation);\n        }\n        tempPath.bounds = this.oldBounds;\n        let convertedJSON = convertPaperPointToBxObj(tempPath);\n        const emitEvent = new PathEvent(\n          'pathEditorOnChange',\n          this.props.layer,\n          {\n            pathProps: convertedJSON,\n            bounds: tempPath2.bounds,\n          }\n        );\n        this.props.onEvent(emitEvent);\n      }\n    }\n  };\n\n  render() {\n    return (\n      <canvas\n        width={this.props.bounds.width}\n        height={this.props.bounds.height}\n        style={{\n          cursor: 'crosshair',\n          position: 'absolute',\n          pointerEvents: 'auto',\n          // border: '2px solid red',\n        }}\n        id=\"path-editor-canvas\"\n      />\n    );\n  }\n\n  private onMouseUp = (event: paper.ToolEvent) => {\n    let { point } = event;\n    let canvasEvent = new MouseEvent(\n      'PaperEvent',\n      this.props.canvas,\n      (event as any).event\n    );\n    point.x = canvasEvent.worldX;\n    point.y = canvasEvent.worldY;\n    if (this.props.newPath && this.path) {\n      if (this.segment) {\n        this.segment.selected = false;\n      }\n      const hitResult = this.paper.project.hitTest(point, {\n        segments: true,\n        tolerance: 5,\n      });\n      if (\n        (hitResult &&\n          hitResult.segment &&\n          hitResult.segment.index === 0 &&\n          hitResult.segment.next) ||\n        get(event, 'event.detail') === 2\n      ) {\n        this.closePath();\n        this.emitUpdatedJSON();\n      } else {\n        this.segment = this.path.add(point);\n        this.segment.selected = true;\n      }\n    }\n    this.handle = null;\n  };\n  private onMouseDrag = (event: paper.ToolEvent) => {\n    let { point, downPoint } = event;\n    if (downPoint) {\n      let canvasEvent = new MouseEvent(\n        'PaperEvent',\n        this.props.canvas,\n        (event as any).event\n      );\n      point.x = canvasEvent.worldX;\n      point.y = canvasEvent.worldY;\n      if (this.props.newPath && this.segment) {\n        this.segment.handleIn = downPoint.subtract(point);\n        this.segment.handleOut = point.subtract(downPoint);\n      } else {\n        if (this.segment) {\n          switch (this.handle) {\n            case 'segment':\n              this.segment.point = point;\n              this.emitUpdatedJSON();\n              break;\n            case 'handle-in':\n              this.segment.handleIn = point.subtract(this.segment.point);\n              this.emitUpdatedJSON();\n              break;\n            case 'handle-out':\n              this.segment.handleOut = point.subtract(this.segment.point);\n              this.emitUpdatedJSON();\n              break;\n            default:\n              break;\n          }\n        }\n      }\n    }\n  };\n  private pathEditorOnEnd = (isLastUpdate: boolean = false) => {\n    if (!isLastUpdate) {\n      this.emitUpdatedJSON();\n    }\n    const emitEvent = new PathEvent('pathEditorOnEnd', this.props.layer);\n    this.props.onEvent(emitEvent);\n  };\n  private onMouseDown = (event: paper.ToolEvent) => {\n    if (this.isFirstClick) {\n      const emitEvent = new MouseEvent(\n        'pathEditor.selectParent',\n        this.props.canvas,\n        (event as any).event\n      );\n      this.props.onEvent(emitEvent);\n      this.isFirstClick = false;\n    }\n    if (this.path) {\n      let downPoint = event.downPoint;\n      let canvasEvent = new MouseEvent(\n        'PaperEvent',\n        this.props.canvas,\n        (event as any).event\n      );\n      downPoint.x = canvasEvent.worldX;\n      downPoint.y = canvasEvent.worldY;\n      if (!this.props.newPath) {\n        const hitResult = this.paper.project.hitTest(downPoint, {\n          stroke: true,\n          segments: true,\n          handles: true,\n          tolerance: 5,\n        });\n        if (this.segment) {\n          this.segment.selected = false;\n        }\n        if (hitResult) {\n          this.handle = hitResult.type;\n          switch (hitResult.type) {\n            case 'stroke':\n              if (hitResult.location) {\n                const { location } = hitResult;\n                const newCurve = location.curve.divideAt(location);\n                if (newCurve) {\n                  this.segment = newCurve.segment1;\n                  this.segment!.selected = true;\n                  this.handle = 'segment';\n                }\n              }\n              break;\n            case 'segment':\n            case 'handle-in':\n            case 'handle-out':\n              this.segment = hitResult.segment;\n              this.segment.selected = true;\n              break;\n            default:\n              break;\n          }\n          this.ready();\n        } else {\n          if (!this.path.contains(downPoint)) {\n            this.pathEditorOnEnd();\n          }\n        }\n      }\n    }\n  };\n  private onMouseMove = (event: paper.ToolEvent) => {\n    let { newPath } = this.props;\n    let { point } = event;\n    let canvasEvent = new MouseEvent(\n      'PaperEvent',\n      this.props.canvas,\n      (event as any).event\n    );\n    point.x = canvasEvent.worldX;\n    point.y = canvasEvent.worldY;\n    if (newPath && this.segment) {\n      this.segment.point.set(point);\n    }\n  };\n}\n","import * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Canvas, IPlugin, PathEvent } from '../..';\nimport { IDimensionWithRoot } from 'interfaces';\nimport PathEditorRenderer from './PathEditorRenderer';\n\nexport default class PathEditorPlugin implements IPlugin {\n  name = 'PathEditorPlugin';\n  nameSpace: string = 'PathEditor';\n  canvas!: Canvas;\n  dispose: any;\n  wrapperLayer: any;\n  selectedTool: string = 'pen';\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n  }\n\n  handlePathEditorEvents = (event: any) => {\n    const { payload, target, name } = event;\n    switch (name) {\n      case 'pathEditorOnReady':\n        const {\n          deleteSelectedPoint,\n          disconnectSelectedPoint,\n          straightenSelectedPoint,\n          finishEditing,\n          closePath,\n        } = payload.actions;\n        this.canvas.addFunction(\n          `${this.nameSpace}.deleteSelectedPoint`,\n          deleteSelectedPoint\n        );\n        this.canvas.addFunction(\n          `${this.nameSpace}.disconnectSelectedPoint`,\n          disconnectSelectedPoint\n        );\n        this.canvas.addFunction(\n          `${this.nameSpace}.straightenSelectedPoint`,\n          straightenSelectedPoint\n        );\n        this.canvas.addFunction(\n          `${this.nameSpace}.finishEditing`,\n          finishEditing\n        );\n        this.canvas.addFunction(`${this.nameSpace}.closePath`, closePath);\n        break;\n\n      case 'pathEditorOnChange':\n        const { pathProps, bounds } = payload;\n        let viewBox = `0 0 ${bounds.width} ${bounds.height}`;\n        let style = {\n          left: bounds.x,\n          top: bounds.y,\n          width: bounds.width,\n          height: bounds.height,\n          position: 'absolute',\n        };\n        if (this.selectedTool === 'path' && target) {\n          target.dispatchEvent(\n            `${this.nameSpace}.onEdit`,\n            new PathEvent(`${this.nameSpace}.onEdit`, target, {\n              viewBox,\n              points: pathProps.points,\n              style,\n              isClosed: pathProps.closed,\n            })\n          );\n        } else if (this.selectedTool === 'pen') {\n          this.canvas.dispatchEvent(\n            `${this.nameSpace}.addNew`,\n            new PathEvent(`${this.nameSpace}.addNew`, this.canvas, {\n              viewBox,\n              points: pathProps.points,\n              style,\n              isClosed: pathProps.closed,\n            })\n          );\n          this.hide();\n        }\n        break;\n      case 'pathEditorOnEnd':\n        this.hide();\n        target.setStyle('display', '');\n        this.canvas.dispatchEvent(\n          `${this.nameSpace}.isClosed`,\n          new PathEvent(`${this.nameSpace}.isClosed`, this.canvas)\n        );\n        break;\n      case 'pathEditor.selectParent':\n        this.canvas.dispatchEvent(`${this.nameSpace}.selectParent`, event);\n        break;\n      default:\n        break;\n    }\n  };\n\n  hide = () => {\n    ReactDOM.unmountComponentAtNode(this.wrapperLayer);\n    this.wrapperLayer.style.display = 'none';\n    this.canvas.removeFunction(`${this.nameSpace}.deleteSelectedPoint`);\n    this.canvas.removeFunction(`${this.nameSpace}.disconnectSelectedPoint`);\n    this.canvas.removeFunction(`${this.nameSpace}.straightenSelectedPoint`);\n    this.canvas.removeFunction(`${this.nameSpace}.finishEditing`);\n    this.canvas.removeFunction(`${this.nameSpace}.closePath`);\n  };\n  getScrollShift = () => {\n    const canvasScroll = this.canvas.getScroll();\n    const zoom = this.canvas.getZoom();\n    const viewPortLeftPos: number =\n      canvasScroll.x *\n      (this.canvas.layout.get('width') * zoom -\n        this.canvas.getViewport().width);\n    const viewPortTopPos: number =\n      canvasScroll.y *\n      (this.canvas.layout.get('height') * zoom -\n        this.canvas.getViewport().height);\n    return { x: viewPortLeftPos, y: viewPortTopPos };\n  };\n  handleEvent = (data: PathEvent) => {\n    this.selectedTool = data.payload.selectedTool;\n    let dims: IDimensionWithRoot;\n    const viewPort = this.canvas.getViewport();\n    const { x, y } = this.getScrollShift();\n    const zoom = this.canvas.getZoom();\n    // let bounds = {\n    //   x: x / zoom,\n    //   y: y / zoom,\n    //   rootX: x / zoom,\n    //   rootY: y / zoom,\n    //   height: viewPort.height / zoom,\n    //   width: viewPort.width / zoom,\n    // };\n    let bounds = this.canvas.getBoundingClientRect();\n    if (this.selectedTool === 'path') {\n      data.target.setStyle('display', 'none');\n      dims = data.target.getBoundingClientRect();\n    } else {\n      dims = bounds;\n    }\n    this.wrapperLayer.style.display = '';\n    // this.wrapperLayer.style.top = dims.rootY + 'px';\n    // this.wrapperLayer.style.left = dims.rootX + 'px';\n    this.wrapperLayer.style.height = dims.height + 'px';\n    this.wrapperLayer.style.width = dims.width + 'px';\n    // this.wrapperLayer.style.border = '2px solid green';\n    ReactDOM.render(\n      <PathEditorRenderer\n        onEvent={this.handlePathEditorEvents}\n        layer={this.selectedTool === 'pen' ? this.canvas : data.target}\n        newPath={this.selectedTool === 'pen'}\n        bounds={{\n          left: bounds.x,\n          top: bounds.y,\n          width: bounds.width / this.canvas.getZoom(),\n          height: bounds.height / this.canvas.getZoom(),\n        }}\n        canvas={this.canvas}\n        dimensions={dims}\n      />,\n      this.wrapperLayer\n    );\n  };\n  activate() {\n    this.wrapperLayer = document.createElement('div');\n    this.dispose = this.canvas.addDomToWorld(this.wrapperLayer);\n    this.wrapperLayer.style.position = 'absolute';\n    this.wrapperLayer.style.top = '0';\n    this.wrapperLayer.style.left = '0';\n    this.wrapperLayer.style.height = '0';\n    this.wrapperLayer.style.width = '0';\n    this.wrapperLayer.style.display = 'none';\n    this.canvas.addFunction(\n      `${this.nameSpace}.open`,\n      (context: any, data: PathEvent) => {\n        this.handleEvent(data);\n      }\n    );\n    this.canvas.addFunction(\n      `${this.nameSpace}.mount`,\n      this.mountEditor.bind(this)\n    );\n    this.canvas.addFunction(`${this.nameSpace}.unmount`, this.hide.bind(this));\n  }\n  mountEditor(context: any, targetLayer: any) {\n    this.handleEvent(\n      new PathEvent('PathEditor.open', targetLayer, { selectedTool: 'path' })\n    );\n    this.canvas.dispatchEvent(\n      `${this.nameSpace}.isOpened`,\n      new PathEvent(`${this.nameSpace}.isOpened`, this.canvas)\n    );\n  }\n  deactivate() {\n    this.canvas.removeFunction(`${this.nameSpace}.open`);\n    this.canvas.removeFunction(`${this.nameSpace}.mount`);\n    this.canvas.removeFunction(`${this.nameSpace}.unmount`);\n    this.dispose();\n  }\n}\n","import * as React from 'react';\nimport { Layer, Gradient, Canvas } from '../../';\nimport { StopPoints } from '../../models/Gradient';\nimport LineSegmentSliderInput, { Stop } from 'line-segment-slider-input';\nimport {\n  IDimensionWithRoot,\n  IDimensionWithRotation,\n  IPosition,\n} from 'interfaces';\n\ntype propType = {\n  layer: Layer;\n  dims: IDimensionWithRoot & IDimensionWithRotation;\n  gradient: Gradient;\n  canvas: Canvas;\n  zoom: number;\n  scroll: IPosition;\n  onChange: (\n    gradient: LineSegmentGradient,\n    type: '' | 'Skip' | 'Forget'\n  ) => void;\n  onClickOutside: (e: any) => void;\n  onWrapperMouseDown: (e: any) => void;\n  onWrapperContexMenu: (e: any) => void;\n  onWrapperDoubleClick: (e: any) => void;\n  onWrapperMouseOut: (e: any) => void;\n  onWrapperDrop: (e: any) => void;\n  onDragOver: (e: any) => void;\n  onWrapperMouseMove: (e: any) => void;\n  onWrapperMouseUp: (e: any) => void;\n};\n\nexport type LineSegmentGradient = {\n  from: number[];\n  to: number[];\n  stops: Stop[];\n  activeIndex: number;\n  gradientType: 'LinearGradient' | 'RadialGradient' | 'AngularGradient';\n};\n\nexport const getLineSegmentObject = (gradient: Gradient) => {\n  let stops: Array<Stop> = [];\n  gradient.stops.map(stop => {\n    stops.push({\n      position: stop.offset,\n      color: stop.stopColor,\n    });\n  });\n  return {\n    from: [gradient.from.x, gradient.from.y],\n    to: [gradient.to.x, gradient.to.y],\n    stops,\n    activeIndex: gradient.activeIndex,\n    gradientType: gradient.gradientType,\n  };\n};\n\nexport const getGradientFromLineSegmentObject = (\n  gradient: LineSegmentGradient\n) => {\n  let stops: Array<StopPoints> = [];\n  gradient.stops.map((stop: Stop) => {\n    stops.push({\n      offset: stop.position,\n      stopColor: stop.color,\n    });\n  });\n  return {\n    from: { x: gradient.from[0], y: gradient.from[1] },\n    to: { x: gradient.to[0], y: gradient.to[1] },\n    stops,\n    activeIndex: gradient.activeIndex,\n    gradientType: gradient.gradientType,\n  };\n};\n\nexport default class GradientEditorRenderer extends React.Component<\n  propType,\n  any\n> {\n  constructor(props: propType) {\n    super(props);\n    this.state = {\n      activeIndex: props.gradient.activeIndex,\n      ...getLineSegmentObject(props.gradient),\n    };\n  }\n  componentDidMount() {\n    const { canvas } = this.props;\n    canvas.addFunction(\n      'GradientEditor.changeStopColor',\n      (context: any, payload: any) => {\n        let newStops: Stop[] = this.state.stops;\n        newStops[this.state.activeIndex].color = payload.color;\n        this.setState({ stops: newStops });\n        this.props.onChange({ ...this.state } as LineSegmentGradient, 'Skip');\n      }\n    );\n    canvas.addFunction(\n      'GradientEditor.change',\n      (context: any, gradient: Gradient) => {\n        if (gradient) {\n          const lineSegmentObj = getLineSegmentObject(gradient);\n          this.setState({\n            ...lineSegmentObj,\n          });\n        }\n      }\n    );\n  }\n  handleMove = (type: string, handle: number[] | Stop[]) => {\n    if (type === 'from') {\n      this.props.onChange(\n        {\n          ...this.state,\n          from: handle,\n        } as LineSegmentGradient,\n        'Skip'\n      );\n      this.setState({ from: handle });\n    } else if (type === 'to') {\n      this.props.onChange(\n        {\n          ...this.state,\n          to: handle,\n        } as LineSegmentGradient,\n        'Skip'\n      );\n      this.setState({ to: handle });\n    } else {\n      this.props.onChange(\n        {\n          ...this.state,\n          stops: handle,\n        } as LineSegmentGradient,\n        'Skip'\n      );\n      this.setState({ stops: handle });\n    }\n    return null;\n  };\n  removeHandle = () => {\n    if (this.state.activeIndex) {\n      let stops = this.state.stops;\n      if (\n        !(\n          this.state.activeIndex === 0 ||\n          this.state.activeIndex === stops.length - 1\n        )\n      ) {\n        stops.splice(this.state.activeIndex, 1);\n      }\n\n      this.setState({ stops });\n      this.props.onChange({ ...this.state } as LineSegmentGradient, '');\n    }\n  };\n\n  changeIndex = (activeIndex: number) => {\n    this.setState({ activeIndex });\n    this.props.onChange(\n      { ...this.state, activeIndex } as LineSegmentGradient,\n      'Skip'\n    );\n  };\n  handleDragStart = () => {\n    this.props.onChange({ ...this.state } as LineSegmentGradient, 'Forget');\n  };\n  handleDragEnd = () => {\n    this.props.onChange({ ...this.state } as LineSegmentGradient, '');\n  };\n  render() {\n    const { props, state } = this;\n    const { dims, zoom, scroll } = props;\n    return (\n      <LineSegmentSliderInput\n        //@ts-ignore\n        x={dims.rootX}\n        y={dims.rootY}\n        width={dims.width}\n        height={dims.height}\n        from={state.from}\n        to={state.to}\n        stops={state.stops}\n        index={state.activeIndex}\n        zoom={zoom}\n        rotation={dims.rotation}\n        scroll={scroll}\n        changeIndex={this.changeIndex}\n        handleMove={this.handleMove}\n        removeHandle={this.removeHandle}\n        onClickOutside={this.props.onClickOutside}\n        onWrapperMouseDown={this.props.onWrapperMouseDown}\n        onWrapperContexMenu={this.props.onWrapperContexMenu}\n        onWrapperDoubleClick={this.props.onWrapperDoubleClick}\n        onWrapperMouseOut={this.props.onWrapperMouseOut}\n        onWrapperDrop={this.props.onWrapperDrop}\n        onDragOver={this.props.onDragOver}\n        onWrapperMouseMove={this.props.onWrapperMouseMove}\n        onWrapperMouseUp={this.props.onWrapperMouseUp}\n        onDragStart={this.handleDragStart}\n        onDragEnd={this.handleDragEnd}\n      />\n    );\n  }\n}\n","import { Layer } from '../models/Layer';\nimport { Event } from './index';\n\ntype CommandParams = {\n  [key: string]: any;\n};\n\nexport default class CommandEvent extends Event {\n  commandParams!: CommandParams;\n  type: '' | 'Skip' | 'Forget';\n  constructor(\n    name: string,\n    target: Layer,\n    commandParams: CommandParams,\n    currentTarget?: Layer,\n    type?: '' | 'Skip' | 'Forget'\n  ) {\n    super(name, target, currentTarget);\n    this.commandParams = commandParams;\n    this.type = type || '';\n  }\n}\n","import * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  Canvas,\n  IPlugin,\n  Layer,\n  Gradient,\n  MouseEvent as DesignerMouseEvent,\n} from '../..';\nimport { IDimensionWithRoot, IDimensionWithRotation } from 'interfaces';\nimport GradientEditorRenderer, {\n  getGradientFromLineSegmentObject,\n  LineSegmentGradient,\n} from './EditorRenderer';\nimport CommandEvent from '../../events/CommandEvent';\nexport default class GradientEditorPlugin implements IPlugin {\n  name = 'GradientEditorPlugin';\n  nameSpace = 'GradientEditor';\n  gradient?: Gradient;\n  activeIndex?: number;\n  initialShift?: { x: number; y: number };\n  canvas!: Canvas;\n  dispose: any;\n  isOpened: boolean = false;\n  wrapperLayer?: any;\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n  getScrollShift = () => {\n    const canvasScroll = this.canvas.getScroll();\n    const zoom = this.canvas.getZoom();\n    const viewPortLeftPos: number =\n      canvasScroll.x *\n      (this.canvas.layout.get('width') * zoom -\n        this.canvas.getViewport().width);\n    const viewPortTopPos: number =\n      canvasScroll.y *\n      (this.canvas.layout.get('height') * zoom -\n        this.canvas.getViewport().height);\n    return { x: viewPortLeftPos, y: viewPortTopPos };\n  };\n  render = (layer: Layer) => {\n    this.gradient = layer.style.get('gradient');\n    if (!this.gradient) {\n      this.gradient = new Gradient(\n        'LinearGradient',\n        { x: 0.1, y: 0.1 },\n        { x: 0.9, y: 0.9 },\n        [\n          { stopColor: '#E70B0B', offset: 0 },\n          { stopColor: '#EEEEEE', offset: 1 },\n        ],\n        1\n      );\n      this.canvas.dispatchEvent(\n        'setStyleAttribute',\n        new CommandEvent('setStyleAttribute', this.canvas, {\n          layer,\n          key: 'gradient',\n          value: this.gradient.toJS(),\n          stylePropName: 'style',\n        })\n      );\n    }\n    const dims: IDimensionWithRoot &\n      IDimensionWithRotation = layer.getBoundingClientRect();\n    if (!this.wrapperLayer) {\n      return;\n    }\n    this.isOpened = true;\n    this.wrapperLayer.style.display = '';\n    let scroll = this.getScrollShift();\n    if (this.initialShift) {\n      scroll = {\n        x: scroll.x - this.initialShift.x,\n        y: scroll.y - this.initialShift.y,\n      };\n    }\n    ReactDOM.render(\n      <GradientEditorRenderer\n        layer={layer}\n        dims={dims}\n        zoom={this.canvas.getZoom()}\n        scroll={scroll}\n        canvas={this.canvas}\n        gradient={this.gradient}\n        onChange={(\n          gradient: LineSegmentGradient,\n          type: '' | 'Skip' | 'Forget'\n        ) => {\n          const gradientProps = getGradientFromLineSegmentObject(gradient);\n          this.gradient = new Gradient(\n            gradient ? gradient.gradientType : 'LinearGradient',\n            gradientProps.from,\n            gradientProps.to,\n            gradientProps.stops,\n            gradientProps.activeIndex\n          );\n          this.canvas.dispatchEvent(\n            'setStyleAttribute',\n            new CommandEvent(\n              'setStyleAttribute',\n              this.canvas,\n              {\n                layer,\n                key: 'gradient',\n                value: this.gradient.toJS(),\n                stylePropName: 'style',\n              },\n              undefined,\n              type\n            )\n          );\n        }}\n        onClickOutside={(e: any) => {\n          this.closeEditor();\n          this.canvas.dispatchEventOnHitLayer(\n            e.type,\n            new DesignerMouseEvent(e.type, this.canvas, e, this.canvas)\n          );\n        }}\n        onWrapperMouseDown={(e: any) => {\n          this.canvas.dispatchEventOnHitLayer(\n            e.type,\n            new DesignerMouseEvent(e.type, this.canvas, e, this.canvas)\n          );\n        }}\n        onWrapperContexMenu={(e: any) => {\n          this.canvas.dispatchEventOnHitLayer(\n            e.type,\n            new DesignerMouseEvent(e.type, this.canvas, e, this.canvas)\n          );\n        }}\n        onWrapperDoubleClick={(e: any) => {\n          this.canvas.dispatchEventOnHitLayer(\n            e.type,\n            new DesignerMouseEvent(e.type, this.canvas, e, this.canvas)\n          );\n        }}\n        onWrapperMouseOut={(e: any) => {\n          this.canvas.dispatchEventOnHitLayer(\n            e.type,\n            new DesignerMouseEvent(e.type, this.canvas, e, this.canvas)\n          );\n        }}\n        onWrapperDrop={(e: any) => {\n          this.canvas.dispatchEventOnHitLayer(\n            e.type,\n            new DesignerMouseEvent(e.type, this.canvas, e, this.canvas)\n          );\n        }}\n        onDragOver={(e: any) => {\n          this.canvas.dispatchEventOnHitLayer(\n            e.type,\n            new DesignerMouseEvent(e.type, this.canvas, e, this.canvas)\n          );\n        }}\n        onWrapperMouseMove={(e: any) => {\n          this.canvas.dispatchEventOnHitLayer(\n            e.type,\n            new DesignerMouseEvent(e.type, this.canvas, e, this.canvas)\n          );\n        }}\n        onWrapperMouseUp={(e: any) => {\n          this.canvas.dispatchEventOnHitLayer(\n            e.type,\n            new DesignerMouseEvent(e.type, this.canvas, e, this.canvas)\n          );\n        }}\n      />,\n      this.wrapperLayer\n    );\n  };\n  rerender = () => {\n    const layer = this.canvas.selectedLayers[0];\n    if (layer && this.isOpened) {\n      this.render(layer);\n    }\n  };\n  closeEditor = () => {\n    if (this.isOpened) {\n      ReactDOM.unmountComponentAtNode(this.wrapperLayer);\n      this.isOpened = false;\n      this.wrapperLayer.style.display = 'none';\n      this.canvas.off('zoom', this.rerender);\n      this.canvas.off('scroll', this.rerender);\n      this.canvas.removeFunction(`${this.nameSpace}.change`);\n      this.canvas.removeFunction(`${this.nameSpace}.changeStopColor`);\n    }\n  };\n  activate() {\n    this.wrapperLayer = document.createElement('div');\n    this.dispose = this.canvas.addDomToWorld(this.wrapperLayer);\n    this.wrapperLayer.style.position = 'absolute';\n    this.wrapperLayer.style.top = '0';\n    this.wrapperLayer.style.left = '0';\n    this.wrapperLayer.style.right = '0';\n    this.wrapperLayer.style.bottom = '0';\n    this.wrapperLayer.style.display = 'none';\n    this.wrapperLayer.style.zIndex = 101;\n    this.canvas.addEventListener(`${this.nameSpace}.open`, (data: any) => {\n      if (!this.isOpened) {\n        const layer = this.canvas.selectedLayers[0];\n        this.initialShift = this.getScrollShift();\n        if (layer) {\n          this.render(layer);\n        }\n        this.canvas.on('zoom', this.rerender);\n        this.canvas.on('scroll', this.rerender);\n      }\n    });\n    this.canvas.addFunction(`${this.nameSpace}.isOpen`, (context: any) => {\n      return this.isOpened;\n    });\n    this.canvas.addEventListener(`${this.nameSpace}.close`, this.closeEditor);\n  }\n  deactivate() {\n    this.canvas.removeFunction(`${this.nameSpace}.isOpen`);\n    this.canvas.removeEventListener(\n      `${this.nameSpace}.close`,\n      this.closeEditor\n    );\n    this.dispose();\n  }\n}\n","import { Canvas, IPlugin } from '../../';\nimport { IDimensionWithRotation, IPosition } from 'interfaces';\nimport ModelUtils from './../../models/utils';\nimport NativeHtmlDragEvent from './NativeHtmlDragEvent';\nexport default class NativeHtmlDrag implements IPlugin {\n  name = 'NativeHtmlDrag';\n  namespace = 'NativeHtmlDrag';\n  canvas!: Canvas;\n  mouseDown: boolean = false;\n  dragStarted: boolean = false;\n  dragDom: any;\n  boundMouseMove: any;\n  boundMouseUp: any;\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  onMouseMove = (dragDom: any, e: any) => {\n    if (this.mouseDown && !this.dragStarted) {\n      this.dragStarted = true;\n      var event = new MouseEvent('htmlDragStart', e);\n      dragDom.dispatchEvent(event);\n    } else if (this.dragStarted) {\n      var event = new MouseEvent('htmlDrag', e);\n      dragDom.dispatchEvent(event);\n    }\n  };\n\n  disableSelect = (event: Event) => {\n    event.preventDefault();\n  };\n  onMouseUp = (dragDom: any, e: any) => {\n    e.preventDefault();\n    if (this.dragStarted) {\n      var event = new MouseEvent('htmlDragEnd', e);\n      dragDom.dispatchEvent(event);\n    }\n\n    this.mouseDown = false;\n    this.dragStarted = false;\n    dragDom.ownerDocument.removeEventListener('mousemove', this.boundMouseMove);\n    dragDom.ownerDocument.removeEventListener('mouseup', this.boundMouseUp);\n    dragDom.ownerDocument.removeEventListener('contextmenu', this.boundMouseUp);\n    window.removeEventListener('selectstart', this.disableSelect);\n  };\n  handleHtmlDrag(context: any, dragDom: any) {\n    this.dragDom = dragDom;\n    dragDom.addEventListener('mousedown', (event: any) => {\n      window.addEventListener('selectstart', this.disableSelect);\n\n      // event.preventDefault();\n      if (event.button !== 2 && event.which !== 3) {\n        // Ignore right click mousedown\n        this.mouseDown = true;\n        this.dragStarted = false;\n\n        if (dragDom && dragDom.ownerDocument) {\n          this.boundMouseMove = this.onMouseMove.bind(this, dragDom);\n          this.boundMouseUp = this.onMouseUp.bind(this, dragDom);\n          dragDom.ownerDocument.addEventListener(\n            'mousemove',\n            this.boundMouseMove\n          );\n          dragDom.ownerDocument.addEventListener('mouseup', this.boundMouseUp);\n          dragDom.ownerDocument.addEventListener(\n            'contextmenu',\n            this.boundMouseUp\n          );\n        }\n      }\n    });\n\n    // dragDom.addEventListener('mousemove', (e: any) => {\n    //   if (this.mouseDown && !this.dragStarted) {\n    //     this.dragStarted = true;\n    //     var event = new MouseEvent('htmlDragStart', e);\n    //     dragDom.dispatchEvent(event);\n    //   } else if (this.dragStarted) {\n    //     var event = new MouseEvent('htmlDrag', e);\n    //     dragDom.dispatchEvent(event);\n    //   }\n    // });\n\n    // dragDom.addEventListener('mouseup', (e: any) => {\n    //   e.preventDefault();\n    //   if (this.dragStarted) {\n    //     var event = new MouseEvent('htmlDragEnd', e);\n    //     dragDom.dispatchEvent(event);\n    //   }\n\n    //   this.mouseDown = false;\n    //   this.dragStarted = false;\n    // });\n  }\n\n  activate() {\n    this.canvas.addFunction(`handleHtmlDrag`, this.handleHtmlDrag.bind(this));\n  }\n\n  deactivate() {\n    //\n    this.canvas.removeFunction(`handleHtmlDrag`);\n  }\n}\n","import { Canvas, IPlugin, Layer, IContext } from '../..';\nconst path = require('path');\nexport default class StageDesignerDeviceData implements IPlugin {\n  name = 'StageDesignerDeviceData';\n  canvas!: Canvas;\n  dataMap = new Map<Layer, any>();\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n  activate() {\n    this.canvas.addFunction('getDeviceData', this.getDeviceData);\n  }\n\n  getDeviceData = (context: IContext) => {\n    const layer = context.layer;\n\n    return this.getDeviceDataOnLayer(layer);\n  };\n\n  getDeviceDataOnLayer = (layer: Layer): any => {\n    const deviceData = layer.executeFunction('getData', 'deviceData');\n    if (deviceData) {\n      return deviceData;\n    } else if (layer.parent) {\n      return this.getDeviceDataOnLayer(layer.parent);\n    }\n\n    return null;\n  };\n\n  deactivate() {\n    this.canvas.removeFunction('getDeviceData');\n  }\n}\n","import { Layer } from '../models/Layer';\nimport { Event } from './index';\n\nexport default class PathEvent extends Event {\n  payload: any;\n  constructor(\n    name: string,\n    target: Layer,\n    payload?: any,\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    this.payload = payload;\n  }\n}\n","import { Layer } from '../models/Layer';\nimport { Event } from './index';\n\nexport default class ArtboardEvent extends Event {\n  artboard: Layer;\n  constructor(\n    name: string,\n    target: Layer,\n    artboard: Layer,\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    this.artboard = artboard;\n  }\n}\n","import { Layer } from '../models/Layer';\nimport { Event } from './index';\nexport default class TextEditorEvent extends Event {\n  payload: any;\n  isFinal: boolean;\n  constructor(\n    name: string,\n    target: Layer,\n    payload?: any,\n    isFinal?: boolean,\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    this.payload = payload;\n    this.isFinal = isFinal || false;\n  }\n}\n","import { Layer } from '../../models/Layer';\nimport DesignerMouseEvent from '../../events/MouseEvent';\nexport default class LayerDragEvent extends DesignerMouseEvent {\n  layout: any;\n  meta: any;\n  snapPoints: any;\n  constructor(\n    name: string,\n    target: Layer,\n    originalEvent: any,\n    payload: {\n      layerWorldX: number;\n      layerWorldY: number;\n      meta?: any;\n      snapPoints?: any;\n    },\n    currentTarget?: Layer\n  ) {\n    super(name, target, originalEvent, currentTarget);\n    let dims = target.getBoundingClientRect();\n    let newDims = target.convertLayerDimensions({\n      x: payload.layerWorldX,\n      y: payload.layerWorldY,\n      width: dims.width,\n      height: dims.height,\n      rotation: dims.rotation,\n    });\n    this.layout = newDims;\n    this.meta = payload.meta;\n    this.snapPoints = payload.snapPoints;\n  }\n}\n","import { IPlugin } from 'interfaces/IPlugin';\nimport { Canvas } from 'models/Canvas';\nimport ISnapPoints from './interfaces/ISnapPoints';\n// import getSnapPoints from './getSnapPoints';\nimport LayerDragEvent from './LayerDragEvent';\nimport ISnapXPoint from './interfaces/ISnapXPoint';\nimport ISnapYPoint from './interfaces/ISnapYPoint';\nimport Config from './interfaces/Config';\nimport { IDimensionWithRoot, IDimension, IContext } from 'interfaces';\nimport ModelUtils from '../../models/utils';\n\nexport default class LayerDrag implements IPlugin {\n  name = 'LayerDrag';\n  nameSpace: string = 'LayerDrag';\n  canvas!: Canvas;\n  dispose: any;\n  targetLayer: any;\n  dragStarted = false;\n  boundingBox: any;\n  boundingBoxWRTWorld: any;\n  startX: any = 0;\n  startY: any = 0;\n  startLayoutX: any = 0;\n  startLayoutY: any = 0;\n  startAbsoluteX: any = 0;\n  startAbsoluteY: any = 0;\n  totalDx: any = 0;\n  totalDy: any = 0;\n  snapPoints: any;\n\n  isAltPressed: boolean = false;\n  isShiftPressed: boolean = false;\n  shiftDirection: string = '';\n\n  oldDelta: any;\n  dragEventData: any;\n  applyDimensions(eventType: string, showLog: boolean = false) {\n    const data = this.dragEventData;\n    // if (showLog)\n    // console.log(this.totalDx, this.totalDy, 'database me chal raha hai');\n    const worldDx = isNaN(data.worldDx) ? 0 : data.worldDx;\n    const worldDy = isNaN(data.worldDy) ? 0 : data.worldDy;\n    // this.totalDx += worldDx;\n    // this.totalDy += worldDy;\n\n    // const deltaX  = worldDx;\n    // const deltaY += worldDy;\n\n    this.totalDx += worldDx;\n    this.totalDy += worldDy;\n\n    let currentDeltaX = this.totalDx;\n    let currentDeltaY = this.totalDy;\n\n    if (!this.targetLayer.parent) {\n      return;\n    }\n\n    const parentAbsoluteRotation = this.targetLayer\n      ? this.targetLayer.parent.getAbsoluteRotation()\n      : 0;\n\n    let rotateDelta = ModelUtils.rotatePoint(\n      [currentDeltaX, currentDeltaY],\n      360 - parentAbsoluteRotation,\n      [0, 0]\n    );\n\n    const snappedData = this.canvas.executeFunction(\n      'snapToPoints',\n      this.snapPoints,\n      [this.startX, this.startY],\n      [rotateDelta[0], rotateDelta[1]],\n      {\n        ...this.boundingBox,\n      },\n      [currentDeltaX, currentDeltaY],\n      [this.startAbsoluteX, this.startAbsoluteY],\n      parentAbsoluteRotation,\n      this.boundingBoxWRTWorld\n    );\n\n    this.boundingBox = {\n      ...this.boundingBox,\n      x: this.boundingBox.x + snappedData.delta.x,\n      y: snappedData.y + snappedData.delta.y,\n    };\n\n    let delta = snappedData.delta;\n\n    if (!this.isShiftPressed) {\n      this.shiftDirection = '';\n    }\n\n    let payload = {\n      layerWorldX: this.startLayoutX + delta.x,\n      layerWorldY: this.startLayoutY + delta.y,\n      meta: snappedData.meta,\n    };\n\n    if (this.isShiftPressed) {\n      if (!this.shiftDirection) {\n        if (Math.abs(data.worldDx) !== Math.abs(data.worldDy)) {\n          if (Math.abs(data.worldDx) > Math.abs(data.worldDy)) {\n            this.shiftDirection = 'horizontal';\n          } else {\n            this.shiftDirection = 'vertical';\n          }\n        }\n      }\n      if (this.shiftDirection) {\n        if (this.shiftDirection === 'horizontal') {\n          payload.layerWorldY = this.targetLayer.getBoundingClientRect().y;\n        } else {\n          payload.layerWorldX = this.targetLayer.getBoundingClientRect().x;\n        }\n      }\n    }\n\n    // this.oldDelta = {\n    //   x: delta.x,\n    //   y: delta.y,\n    // };\n\n    let layerDragEvent = new LayerDragEvent(\n      eventType,\n      this.targetLayer,\n      data.originalEvent,\n      payload\n    );\n    this.targetLayer.dispatchEvent(eventType, layerDragEvent, data);\n\n    // this.setNewLayout(\n    //   this.selectedLayers,\n    //   this.boundingBox,\n    //   data.session,\n    //   data.targetHandle,\n    //   eventType,\n    //   data,\n    //   delta\n    //   // { x: rotateDelta[0], y: rotateDelta[1] }\n    // );\n  }\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n  }\n\n  activate() {\n    let snapPoints: ISnapPoints;\n\n    let totalDx: number = 0;\n    let totalDy: number = 0;\n\n    let startX: number = 0;\n    let startY: number = 0;\n\n    let startRootX: number = 0;\n    let startRootY: number = 0;\n\n    this.canvas.addFunction(`${this.nameSpace}.isDragging`, () => {\n      return this.dragStarted;\n    });\n\n    this.canvas.addEventListener('dragStart', (event: any) => {\n      return this.canvas.executeMiddleware(\n        'LayerDrag.dragStart',\n        event,\n        async (event: any) => {\n          this.dragStarted = true;\n          this.targetLayer = event.target;\n\n          if (this.targetLayer) {\n            //\n\n            this.targetLayer.setDragging(true);\n            this.boundingBox = this.canvas.getContainerBoundingBoxWRTParent([\n              this.targetLayer,\n            ]);\n\n            this.boundingBoxWRTWorld = this.canvas.getContainerBoundingBox([\n              this.targetLayer,\n            ]);\n\n            const parentLayer = this.targetLayer.parent;\n\n            if (!parentLayer) {\n              return;\n            }\n\n            this.startX = this.boundingBox.x;\n            this.startY = this.boundingBox.y;\n\n            this.startAbsoluteX =\n              this.boundingBoxWRTWorld.x -\n              this.canvas.getContainerBoundingBox([parentLayer]).x;\n\n            this.startAbsoluteY =\n              this.boundingBoxWRTWorld.y -\n              this.canvas.getContainerBoundingBox([parentLayer]).y;\n\n            this.snapPoints = this.canvas.executeFunction(\n              'getSnapPoints',\n              [this.targetLayer],\n              parentLayer\n            );\n\n            //\n            let layoutData: IDimensionWithRoot = this.targetLayer.getBoundingClientRect();\n            this.startLayoutX = layoutData.x;\n            this.startLayoutY = layoutData.y;\n\n            let payload = {\n              layerWorldX: layoutData.x,\n              layerWorldY: layoutData.y,\n              snapPoints: this.snapPoints,\n            };\n\n            let layerDragEvent = new LayerDragEvent(\n              'layerDragStart',\n              this.targetLayer,\n              event.originalEvent,\n              payload\n            );\n\n            // TODO: data to be removed later\n            this.targetLayer.dispatchEvent(\n              'layerDragStart',\n              layerDragEvent,\n              event\n            );\n          }\n        }\n      );\n    });\n\n    this.canvas.addEventListener('drag', (data: any) =>\n      this.canvas.executeMiddleware('LayerDrag.drag', data, (data: any) => {\n        if (this.dragStarted) {\n          if (!this.targetLayer) {\n            return;\n          }\n          this.dragEventData = data;\n          this.applyDimensions('layerDrag');\n          // let layoutData = this.targetLayer\n          //   ? this.canvas.getBoundingBoxWRTParent([this.targetLayer], true)\n          //   : null;\n\n          // // let dims = this.canvas.getBoundingBoxWRTParent([data.target], true); //.getBoundingClientRect();\n\n          // totalDx += data.worldDx;\n          // totalDy += data.worldDy;\n\n          // let left = startX + totalDx;\n          // let top = startY + totalDy;\n\n          // const absoluteRotation = this.targetLayer.parent.getAbsoluteRotation();\n          // let rotateDelta = ModelUtils.rotatePoint(\n          //   [totalDx, totalDy],\n          //   360 - absoluteRotation,\n          //   [0, 0]\n          // );\n          // const newDx = rotateDelta[0];\n          // const newDy = rotateDelta[1];\n\n          // let newSnapPoints = this.getSnapPointCoordinates(\n          //   snapPoints,\n          //   top,\n          //   left,\n          //   startX,\n          //   startY,\n          //   newDx,\n          //   newDy,\n          //   layoutData\n          // );\n\n          // left = newSnapPoints.left;\n          // top = newSnapPoints.top;\n\n          // let payload = { layerWorldX: left, layerWorldY: top };\n          // let layerDragEvent = new LayerDragEvent(\n          //   'layerDrag',\n          //   this.targetLayer,\n          //   data.originalEvent,\n          //   payload\n          // );\n          // this.targetLayer.dispatchEvent('layerDrag', layerDragEvent, data);\n        }\n      })\n    );\n\n    this.canvas.addEventListener('dragEnd', (data: LayerDragEvent) =>\n      this.canvas.executeMiddleware(\n        'LayerDrag.dragEnd',\n        data,\n        (data: LayerDragEvent) => {\n          if (this.dragStarted) {\n            if (!this.targetLayer) {\n              return;\n            }\n            this.targetLayer.setDragging(false);\n            this.dragEventData = data;\n            this.applyDimensions('layerDragEnd');\n            this.shiftDirection = '';\n\n            this.totalDx = 0;\n            this.totalDy = 0;\n            this.startX = 0;\n            this.startY = 0;\n            this.startAbsoluteX = 0;\n            this.startAbsoluteY = 0;\n            this.dragStarted = false;\n            this.dragEventData = undefined;\n          }\n        }\n      )\n    );\n\n    this.canvas.addEventListener('blur', () => {\n      if (this.isAltPressed) this.isAltPressed = false;\n      if (this.isShiftPressed) this.isShiftPressed = false;\n    });\n    this.canvas.addEventListener('keyUp', (data: any) => {\n      let event = data.originalEvent ? data.originalEvent : data;\n      if (event.keyCode === 16) {\n        this.isShiftPressed = false;\n      }\n      if (event.keyCode === 18) {\n        this.isAltPressed = false;\n      }\n\n      if (this.dragEventData) {\n        this.applyDimensions('layerDrag', true);\n      }\n    });\n    this.canvas.addEventListener('keyDown', (data: any) => {\n      let event = data.originalEvent ? data.originalEvent : data;\n      if (event.keyCode === 16) {\n        this.isShiftPressed = true;\n      }\n      if (event.keyCode === 18) {\n        this.isAltPressed = true;\n      }\n\n      if (this.dragEventData) {\n        this.applyDimensions('layerDrag');\n      }\n    });\n  }\n\n  deactivate() {\n    this.dispose();\n  }\n}\n","import { IPlugin, IContext, Canvas } from '../../';\nimport GridDimension from './interfaces/GridDimension';\nimport GridData from './interfaces/GridData';\nimport { Layer } from '../../models/Layer';\nimport SetLayoutEvent from '../../events/SetLayoutEvent';\n\nexport default class GridRenderer implements IPlugin {\n  name = 'GridRenderer';\n  canvas!: Canvas;\n  dispose: any;\n  gridLayers: Map<Layer, GridData> = new Map<Layer, GridData>();\n  gridWrapper: any;\n  gridLayersRef: Map<Layer, Map<string, any>> = new Map<\n    Layer,\n    Map<string, any>\n  >();\n\n  gridOffset: {\n    x: number;\n    y: number;\n  } = {\n    x: 0,\n    y: 0,\n  };\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    let canvasDims = this.canvas.getBoundingClientRect();\n    this.gridWrapper = document.createElement('div');\n    this.dispose = this.canvas.addDomToWorld(this.gridWrapper, true);\n    this.gridWrapper.style.pointerEvents = 'none';\n    this.gridWrapper.style.position = 'absolute';\n    this.gridWrapper.style.height = canvasDims.height + 'px';\n    this.gridWrapper.style.width = canvasDims.width + 'px';\n\n    this.canvas.addFunction('showGrid', this.showGrid);\n    this.canvas.addFunction('hideGrid', this.hideGrid);\n    this.canvas.addFunction('getGridSize', this.getGridSize);\n    this.canvas.addFunction('setGridSize', this.setGridSize);\n    this.canvas.addFunction('setGridOffset', this.setGridOffset);\n    this.canvas.addFunction('getGridOffset', this.getGridOffset);\n\n    this.canvas.addEventListener('setLayout', (data: SetLayoutEvent) => {\n      if (data.target.type === 'canvas') {\n        let newDims = data.target.getBoundingClientRect();\n        this.gridWrapper.style.height = newDims.height;\n        this.gridWrapper.style.width = newDims.width;\n        this.gridLayers.forEach((gridData, layer) => {\n          this.refreshGrid(layer);\n        });\n      }\n      if (this.gridLayers.has(data.target)) {\n        let gridData = this.gridLayers.get(data.target);\n        if (gridData) {\n          let dims = gridData.dimensions;\n          data.target.executeFunction('showGrid', dims);\n        }\n      }\n    });\n\n    this.canvas.on('zoom', () => {\n      this.adjustStroke();\n    });\n  }\n  deactivate() {\n    this.canvas.removeFunction('showGrid');\n    this.canvas.removeFunction('hideGrid');\n    this.canvas.removeFunction('getGridSize');\n    this.canvas.removeFunction('setGridSize');\n    this.canvas.removeFunction('setGridOffset');\n    this.canvas.removeFunction('getGridOffset');\n    this.dispose();\n  }\n  refreshGrid = (layer: Layer) => {\n    let gridData = this.gridLayers.get(layer);\n    if (layer.type !== 'canvas') {\n      if (gridData) {\n        this.createGrid(layer, gridData.dimensions);\n      } else {\n        this.createGrid(layer, {\n          x: 0,\n          y: 0,\n        });\n      }\n    }\n  };\n\n  getGridSize = (context: IContext) => {\n    let layer = context.layer;\n    let data = this.gridLayers.get(layer);\n    if (data) {\n      return data.dimensions;\n    }\n    return null;\n  };\n\n  setGridSize = (context: IContext, gridSize: any) => {\n    let layer = context.layer;\n    if (this.gridLayers.has(layer)) {\n      this.gridLayers.delete(layer);\n    }\n\n    this.gridLayers.set(layer, {\n      dimensions: gridSize,\n    });\n  };\n\n  hideGrid = (context: IContext) => {\n    let layer = context.layer;\n    if (this.gridLayers.has(layer)) {\n      this.gridLayers.delete(layer);\n      if (this.gridLayersRef.get(layer)) {\n        let gridElementMap = this.gridLayersRef.get(layer);\n        if (gridElementMap) {\n          let wrapperElement = gridElementMap.get('wrapper');\n          this.gridWrapper.removeChild(wrapperElement);\n        }\n        this.gridLayersRef.delete(layer);\n      }\n    }\n    this.gridLayers.forEach((gridData, layer) => {\n      this.refreshGrid(layer);\n    });\n  };\n\n  showGrid = (context: IContext, dims: GridDimension) => {\n    this.setGridSize(context, dims);\n    this.gridLayers.forEach((gridData, layer) => {\n      this.refreshGrid(layer);\n    });\n  };\n\n  setGridOffset = (context: IContext, offset: any) => {\n    this.gridOffset = offset;\n  };\n\n  getGridOffset = (context: IContext, dims: GridDimension) => {\n    return this.gridOffset;\n  };\n  adjustStroke = () => {\n    this.gridLayers.forEach((gridData, layer) => {\n      let gridElementMap = this.gridLayersRef.get(layer);\n      if (gridElementMap) {\n        let pathElement = gridElementMap.get('path');\n        if (pathElement) {\n          pathElement.setAttributeNS(\n            null,\n            'stroke-width',\n            `${1 / this.canvas.getZoom()}px`\n          );\n        }\n      }\n    });\n  };\n  createGrid = (layer: Layer, gridDims: GridDimension): void => {\n    const dims = layer.getBoundingClientRect();\n    let gridElementMap = this.gridLayersRef.get(layer);\n    if (gridElementMap) {\n      let wrapperElement = gridElementMap.get('wrapper');\n      if (!wrapperElement) {\n        wrapperElement = document.createElement('div');\n        wrapperElement.style.pointerEvents = 'none';\n        wrapperElement.style.position = 'absolute';\n        this.gridWrapper.appendChild(wrapperElement);\n        gridElementMap.set('wrapper', wrapperElement);\n      }\n      wrapperElement.style.left = dims.rootX + 'px';\n      wrapperElement.style.top = dims.rootY + 'px';\n      wrapperElement.style.height = dims.height + 'px';\n      wrapperElement.style.width = dims.width + 'px';\n      const svgns = 'http://www.w3.org/2000/svg';\n      let svgElement = gridElementMap.get('svg');\n      if (!svgElement) {\n        svgElement = document.createElementNS(svgns, 'svg');\n        svgElement.setAttributeNS(null, 'height', '100%');\n        svgElement.setAttributeNS(null, 'width', '100%');\n        wrapperElement.appendChild(svgElement);\n        gridElementMap.set('svg', svgElement);\n      }\n      let defsElement = gridElementMap.get('defs');\n      if (!defsElement) {\n        defsElement = document.createElementNS(svgns, 'defs');\n        svgElement.appendChild(defsElement);\n        gridElementMap.set('defs', defsElement);\n      }\n      let patternElement = gridElementMap.get('pattern');\n      if (!patternElement) {\n        patternElement = document.createElementNS(svgns, 'pattern');\n        defsElement.appendChild(patternElement);\n        patternElement.setAttributeNS(null, 'id', 'grid-pattern');\n        patternElement.setAttributeNS(null, 'patternUnits', 'userSpaceOnUse');\n        gridElementMap.set('pattern', patternElement);\n      }\n      patternElement.setAttributeNS(null, 'width', gridDims.x + 'px');\n      patternElement.setAttributeNS(null, 'height', gridDims.y + 'px');\n      let pathElement = gridElementMap.get('path');\n      if (!pathElement) {\n        pathElement = document.createElementNS(svgns, 'path');\n        patternElement.appendChild(pathElement);\n        pathElement.setAttributeNS(null, 'fill', 'none');\n        pathElement.setAttributeNS(null, 'stroke', '#DBDBDB');\n        gridElementMap.set('path', pathElement);\n      }\n      pathElement.setAttributeNS(\n        null,\n        'd',\n        `M ${gridDims.x} 0 L 0 0 0 ${gridDims.y}`\n      );\n      pathElement.setAttributeNS(\n        null,\n        'stroke-width',\n        `${1 / this.canvas.getZoom()}px`\n      );\n      let rectElement = gridElementMap.get('rect');\n      if (!rectElement) {\n        rectElement = document.createElementNS(svgns, 'rect');\n        svgElement.appendChild(rectElement);\n        rectElement.setAttributeNS(null, 'height', '100%');\n        rectElement.setAttributeNS(null, 'width', '100%');\n        rectElement.setAttributeNS(null, 'fill', `url(#grid-pattern)`);\n        gridElementMap.set('rect', rectElement);\n      }\n    } else {\n      this.gridLayersRef.set(layer, new Map<string, any>());\n      this.createGrid(layer, gridDims);\n    }\n  };\n}\n","import { Layer } from '../models/Layer';\nimport { Event } from './index';\nexport default class SelectLayers extends Event {\n  layers: Array<Layer>;\n\n  constructor(\n    name: string,\n    target: Layer,\n    layers: Array<Layer>,\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    this.layers = layers;\n  }\n}\n","import { Layer } from '../models/Layer';\nimport { Event } from './index';\n\nexport default class ResetResizerEvent extends Event {\n  originalEvent: any;\n  constructor(name: string, target: Layer, event: any, currentTarget?: Layer) {\n    super(name, target, currentTarget);\n    this.originalEvent = event;\n  }\n}\n","import {\n  Canvas,\n  IPlugin,\n  Layer,\n  IContext,\n  MouseEvent as DesignerMouseEvent,\n  Event as DesignerEvent,\n  ArtboardEvent,\n  stopRerender,\n  startRerender,\n} from '../..';\nimport { union } from 'lodash';\nimport {\n  forEach,\n  isEmpty,\n  indexOf,\n  findLast,\n  intersection,\n  filter,\n} from 'lodash';\nimport SelectLayers from '../../events/SelectLayers';\nimport ResetResizerEvent from '../../events/ResetResizerEvent';\nimport CommandEvent from '../../events/CommandEvent';\nimport { generateRandomString } from '../../models/utils';\n\nexport default class StageDesigner implements IPlugin {\n  name = 'StageDesigner';\n  canvas!: Canvas;\n  artboards = new Map<string, Layer>();\n  selectedArtboard?: Layer;\n  topLayerSelectionMode: boolean = false;\n  previousMovedLayers: Array<Layer> = [];\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n  activate() {\n    this.canvas.addFunction('addArtboard', this.addArtboard.bind(this));\n    this.canvas.addFunction('removeArtboard', this.removeArtboard.bind(this));\n    this.canvas.addFunction('selectArtboard', this.selectArtboard.bind(this));\n    this.canvas.addFunction(\n      'getSelectedArtboard',\n      this.getSelectedArtboard.bind(this)\n    );\n    this.canvas.addFunction('getArtboard', this.getArtboard.bind(this));\n    this.canvas.addFunction('focusArtboard', this.focusArtboard.bind(this));\n    this.canvas.addFunction('getAllArtboards', this.getAllArtboards.bind(this));\n    this.canvas.addFunction('getArtboardById', this.getArtboardById.bind(this));\n    this.canvas.addFunction(\n      'getSelectedArtboardId',\n      this.getSelectedArtboardId.bind(this)\n    );\n\n    this.canvas.addFunction(\n      'getNewArtboardPosition',\n      this.getNewArtboardPosition.bind(this)\n    );\n    this.canvas.addFunction('getHitArtboard', this.getHitArtboard.bind(this));\n\n    this.canvas.on('selectedLayers', () => {\n      if (\n        this.canvas.selectedLayers[0] &&\n        this.canvas.selectedLayers[0].parent &&\n        this.canvas.selectedLayers[0].parent.parent &&\n        this.canvas.selectedLayers[0].parent.parent.type === 'canvas' &&\n        this.canvas.selectedLayers[0].type !== 'scrollView'\n      ) {\n        // TODO: heavy jugaad\n        // if root layer is selected, select artboard instead\n        stopRerender();\n        const artboardLayer = this.canvas.selectedLayers[0].parent;\n        this.canvas.selectLayers(artboardLayer);\n\n        if (artboardLayer.children[0].children.length === 0) {\n          artboardLayer.executeFunction('LayerResizer.showLayer');\n        } else {\n          artboardLayer.executeFunction('LayerResizer.hideLayer');\n        }\n\n        startRerender();\n      }\n    });\n\n    // Filter layers in hitRect other that direct children of root layer in selected artboard\n    this.canvas.addMiddleware(\n      'MouseRect.getHitRectResult',\n      (next, hitRectResult: Array<Layer>) => {\n        const selectedArtboard = this.canvas.executeFunction(\n          'getSelectedArtboard'\n        );\n        // console.log(hitRectResult, 'Layer.getHitRectResult original *(*(*(');\n        if (selectedArtboard) {\n          let selectedArtboardLayers: Array<Layer> = [];\n          let lowestIndexArtboardLayers: Array<Layer> = [];\n          const allArtboards = Array.from(this.artboards.values());\n          let lowestIndex = allArtboards.length - 1;\n\n          const ignoredHitRectLayers: Array<Layer> = [];\n          hitRectResult.forEach(layer => {\n            if (\n              layer.parent &&\n              layer.parent.style.get('pointerEvents') === 'none'\n            ) {\n              ignoredHitRectLayers.push(layer.parent);\n            }\n          });\n\n          const hitRectResultWithIgnored = union(\n            hitRectResult,\n            ignoredHitRectLayers\n          );\n\n          hitRectResultWithIgnored.forEach((layer: Layer): any => {\n            if (layer.type === 'canvas') return;\n            const currentLayerArtboard = layer.executeFunction('getArtboard');\n\n            if (!currentLayerArtboard) {\n              return;\n            }\n\n            let modLayers; // Layers to consider for comparing. Should be a direct child of root layer\n            // or should be a child of ignored layer which is a direct child of root layer\n            if (\n              currentLayerArtboard.children[0] &&\n              currentLayerArtboard.children[0].children.includes(layer)\n            ) {\n              if (layer.style.get('pointerEvents') !== 'none') {\n                modLayers = [layer];\n              } else {\n                // if ignored layer, then consider its children and add to modLayers\n                modLayers = intersection(hitRectResult, layer.children);\n              }\n            }\n\n            if (modLayers) {\n              if (\n                // Layer belongs to selectedArtboard\n                currentLayerArtboard === selectedArtboard\n              ) {\n                selectedArtboardLayers = union(\n                  selectedArtboardLayers,\n                  modLayers\n                );\n              }\n              // Check if layer belongs to lowestIndexArtboard\n              else {\n                const index = indexOf(allArtboards, currentLayerArtboard);\n                if (index < lowestIndex) {\n                  // If index is lesser than previous, createNewArray and change index\n                  lowestIndexArtboardLayers = [];\n\n                  lowestIndexArtboardLayers = union(\n                    lowestIndexArtboardLayers,\n                    modLayers\n                  );\n                  lowestIndex = index;\n                } else if (index === lowestIndex) {\n                  lowestIndexArtboardLayers = union(\n                    lowestIndexArtboardLayers,\n                    modLayers\n                  );\n                }\n              }\n            }\n          });\n          if (selectedArtboardLayers.length) {\n            return next(selectedArtboardLayers);\n          } else {\n            return next(lowestIndexArtboardLayers);\n          }\n        } else {\n          return next(hitRectResult);\n        }\n      }\n    );\n\n    // Modify event.target in Canvas.dispatchEventOnHitLayer according to selected layer,\n    this.canvas.addMiddleware(\n      'Canvas.dispatchEventOnHitLayer',\n      (next, event) => {\n        if (event.name === 'click') {\n          this.modifyEventForSelectableLayers(event);\n          return next(event);\n        } else if (event.name === 'mousemove') {\n          this.modifyEventForSelectableLayers(event);\n          return next(event);\n        }\n\n        return next(event);\n      }\n    );\n\n    this.canvas.addMiddleware('LayerDrag.dragStart', (next, event) => {\n      const target = event.target;\n      if (\n        target.type === 'canvas' ||\n        // (target.parent && target.parent.type === 'canvas') ||\n        (target.parent.parent && target.parent.parent.type === 'canvas') ||\n        this.canvas.moveWithGrabHandle\n      ) {\n        return;\n      }\n      // const allRootLayers: Array<Layer> = [];\n\n      //   const artboardArray = Array.from(this.artboards.values());\n\n      //   artboardArray.forEach((artboard: Layer) => {\n      //     const rootLayer = artboard.children[0];\n\n      //     if (rootLayer) {\n      //       allRootLayers.push(rootLayer);\n      //     }\n      //   });\n\n      //   if (allRootLayers.includes(hitLayer)) {\n      //     next(event);\n      //   }\n\n      this.modifyEventForSelectableLayers(event, true);\n\n      return next(event);\n    });\n    // this.canvas.on('selectedLayers', () => {\n    //   if (this.canvas.selectedLayers[0]) {\n    //     const artboard = this.canvas.selectedLayers[0].executeFunction(\n    //       'getArtboard'\n    //     );\n    //     if (this.selectedArtboard !== artboard) {\n    //       this.canvas.dispatchEvent(\n    //         'selectArtboard',\n    //         new Event('selectArtboard', artboard)\n    //       );\n    //       this.selectArtboard(\n    //         { canvas: this.canvas, layer: this.canvas },\n    //         artboard\n    //       );\n    //     }\n    //   }\n    // });\n\n    this.canvas.addEventListener('dblclick', (e: DesignerMouseEvent) => {\n      let parentLayer = e.target.parent;\n      const hitLayers = e.target.getHitResult(e.worldX, e.worldY);\n\n      let currentLayer: Layer | null = e.target;\n      while (\n        currentLayer &&\n        currentLayer.type !== 'canvas' &&\n        !this.canvas.selectedLayers.includes(currentLayer)\n      ) {\n        if (this.canvas.selectedLayers.includes(currentLayer.parent as Layer)) {\n          const filteredLayer = filterIgnoredLayers(currentLayer, hitLayers);\n\n          if (filteredLayer) {\n            this.canvas.dispatchEvent(\n              'selectLayers',\n              new SelectLayers('selectLayers', this.canvas, [filteredLayer])\n            );\n          }\n          break;\n        }\n        currentLayer = currentLayer.parent;\n      }\n    });\n\n    this.canvas.addMiddleware('MouseRect.dragStart', (next, event) => {\n      if (this.canvas.moveWithGrabHandle) {\n        return;\n      }\n      const hitLayer = this.canvas.getHitLayer(event.worldX, event.worldY);\n      if (\n        hitLayer &&\n        (hitLayer.locked ||\n          (hitLayer.type === 'canvas' &&\n            event.target &&\n            event.target.type === 'canvas'))\n      ) {\n        next(event);\n      } else {\n        const allRootLayers: Array<Layer> = [];\n\n        const artboardArray = Array.from(this.artboards.values());\n\n        artboardArray.forEach((artboard: Layer) => {\n          const rootLayer = artboard.children[0];\n\n          if (rootLayer) {\n            allRootLayers.push(rootLayer);\n          }\n        });\n\n        if (allRootLayers.includes(hitLayer)) {\n          next(event);\n        }\n      }\n    });\n\n    this.canvas.addMiddleware('LayerResizer.dragStart', (next, event) => {\n      if (this.canvas.moveWithGrabHandle) {\n        return;\n      } else {\n        next(event);\n      }\n    });\n    this.canvas.addMiddleware('LayerResizer.drag', (next, event) => {\n      if (this.canvas.moveWithGrabHandle) {\n        return;\n      } else {\n        next(event);\n      }\n    });\n    this.canvas.addMiddleware('LayerResizer.dragEnd', (next, event) => {\n      if (this.canvas.moveWithGrabHandle) {\n        return;\n      } else {\n        next(event);\n      }\n    });\n    // this.canvas.addEventListener('layerDrag', this.handleMoveLayerArtboard);\n    // this.canvas.addEventListener(\n    //   'LayerResizer.drag',\n    //   this.handleMoveLayerArtboard\n    // );\n    this.canvas.addEventListener('keyUp', (data: any) => {\n      let event = data.originalEvent ? data.originalEvent : data;\n      if (event.keyCode === 91) {\n        this.setTopLayerSelectionMode(false);\n      }\n    });\n    this.canvas.addEventListener('keyDown', (data: any) => {\n      let event = data.originalEvent ? data.originalEvent : data;\n      if (event.keyCode === 91) {\n        this.setTopLayerSelectionMode(true);\n      }\n    });\n    this.canvas.addMiddleware(\n      `LayerResizer.getHandles`,\n      (next: any, layers: Array<Layer>) => {\n        if (layers?.[0]?.parent?.type === 'canvas') {\n          // if layer is an artboard\n          const handles = next(layers);\n\n          const handlesWithoutRotation = filter(handles, h => h !== 'ROTATE');\n          return handlesWithoutRotation;\n        } else {\n          return next(layers);\n        }\n      }\n    );\n\n    // this.canvas.addEventListener('drag', (e: DesignerMouseEvent) => {\n    //   this.setScroll(\n    //     { canvas: this.canvas, layer: this.canvas },\n    //     {\n    //       x:\n    //         (this.canvas.layout.get('width') - e.worldX) /\n    //         this.canvas.layout.get('width'),\n    //       y:\n    //         (this.canvas.layout.get('height') - e.worldY) /\n    //         this.canvas.layout.get('height'),\n    //     }\n    //   );\n    // });\n\n    this.canvas.addEventListener('keyDown', (event: any) => {\n      event = event.originalEvent ? event.originalEvent : event;\n      if (event.keyCode === 32) {\n        this.canvas.enableMoveWithGrabHandle();\n      }\n    });\n\n    this.canvas.addEventListener('keyUp', (event: any) => {\n      event = event.originalEvent ? event.originalEvent : event;\n      if (event.keyCode === 32) {\n        this.canvas.disableMoveWithGrabHandle();\n      }\n    });\n  }\n\n  getNewRootLayer = (targetDims: any, currentArtboard: any) => {\n    const { rootX, rootY, width, height } = targetDims;\n\n    const layersHit = this.canvas.getHitRectResult(rootX, rootY, width, height);\n    const currentRootLayer = currentArtboard.children[0];\n\n    const newRootLayersHit: Array<Layer> = filter(layersHit, (layer: Layer) => {\n      if (\n        layer !== currentRootLayer &&\n        layer.parent &&\n        layer.parent.parent &&\n        layer.parent.parent.type === 'canvas'\n      ) {\n        return true;\n      }\n      return false;\n    });\n    let newRootLayer: Layer | undefined;\n    newRootLayersHit.forEach((layer: any) => {\n      const dims = layer.getBoundingClientRect();\n      const x_overlap = Math.max(\n        0,\n        Math.min(dims.rootX + dims.width, targetDims.rootX + targetDims.width) -\n          Math.max(dims.rootX, targetDims.rootX)\n      );\n      const y_overlap = Math.max(\n        0,\n        Math.min(\n          dims.rootY + dims.height,\n          targetDims.rootY + targetDims.height\n        ) - Math.max(dims.rootY, targetDims.rootY)\n      );\n      const overlapArea = x_overlap * y_overlap;\n      newRootLayer =\n        overlapArea > (targetDims.width * targetDims.height) / 2\n          ? layer\n          : undefined;\n    });\n    return newRootLayer;\n  };\n\n  handleMoveLayerArtboard = (event: any) => {\n    if (indexOf(this.previousMovedLayers, event.target) !== -1) {\n      return;\n    }\n    this.canvas.executeFunction('Hover.hideAllHoverBoxes');\n    const layerDims = event.target.getBoundingClientRect();\n    const currentArtboard = event.target.executeFunction('getArtboard');\n    const currentSelectedLayers: Array<Layer> = filter(\n      this.canvas.selectedLayers,\n      (layer: Layer) => {\n        if (layer.parent && layer.parent.type === 'canvas') {\n          return false;\n        }\n        return true;\n      }\n    );\n    let hitRectParams = {};\n    if (currentSelectedLayers.length > 1) {\n      const boundingBox = this.canvas.getBoundingBox(currentSelectedLayers);\n      hitRectParams = {\n        rootX: boundingBox.x,\n        rootY: boundingBox.y,\n        width: boundingBox.width,\n        height: boundingBox.height,\n      };\n    } else {\n      hitRectParams = {\n        rootX: layerDims.rootX,\n        rootY: layerDims.rootY,\n        width: layerDims.width,\n        height: layerDims.height,\n      };\n    }\n    const newRootLayer: Layer | undefined = this.getNewRootLayer(\n      hitRectParams,\n      currentArtboard\n    );\n\n    if (newRootLayer) {\n      if (\n        currentSelectedLayers.length > 0 &&\n        currentSelectedLayers.includes(event.target)\n      ) {\n        let newToSelectLayers: Array<Layer> = [];\n        currentSelectedLayers.forEach((layer: Layer) => {\n          this.previousMovedLayers.push(layer);\n          const newLayer: Layer | undefined = this.moveLayer(\n            layer,\n            newRootLayer\n          );\n          if (newLayer) {\n            newToSelectLayers.push(newLayer);\n          }\n        });\n\n        this.canvas.selectLayers(newToSelectLayers);\n        this.canvas.dispatchEvent(\n          'resetResizer',\n          new ResetResizerEvent(\n            'resetResizer',\n            this.canvas,\n            event.originalEvent\n          )\n        );\n      } else {\n        // Synthetic Mouse Up event\n        const mouseUpEvent = new DesignerMouseEvent(\n          'mouseup',\n          this.canvas,\n          event.originalEvent,\n          this.canvas\n        );\n        this.canvas.dispatchEventOnHitLayer('mouseup', mouseUpEvent);\n\n        this.moveLayer(event.target, newRootLayer);\n\n        // Synthetic mouseDown event for LayerDrag\n        const mouseDownEvent = new DesignerMouseEvent(\n          'mousedown',\n          this.canvas,\n          event.originalEvent,\n          this.canvas\n        );\n        this.canvas.dispatchEventOnHitLayer('mousedown', mouseDownEvent);\n      }\n    }\n    this.canvas.executeFunction('Hover.showAllHoverBoxes');\n  };\n\n  moveLayer = (layer: Layer, newRootLayer: Layer) => {\n    const fromIndex = indexOf(layer.parent?.children, layer);\n    const toIndex = newRootLayer.children.length;\n    this.canvas.dispatchEvent(\n      'moveLayer',\n      new CommandEvent('moveLayer', this.canvas, {\n        fromParent: layer.parent,\n        toParent: newRootLayer,\n        fromIndex: fromIndex,\n        toIndex: toIndex,\n      })\n    );\n    const newLayer: Layer = newRootLayer.children[toIndex];\n    const dims = layer.getBoundingClientRect();\n    const newRootLayerDims = newRootLayer.getBoundingClientRect();\n    const newLayerDims = {\n      ...layer.getBoundingClientRect(),\n      x: dims.rootX - newRootLayerDims.rootX,\n      y: dims.rootY - newRootLayerDims.rootY,\n    };\n    if (newLayer) {\n      forEach(newLayer.convertLayerDimensions(newLayerDims), (value, key) => {\n        this.canvas.dispatchEvent(\n          'setStyleAttribute',\n          new CommandEvent('setStyleAttribute', this.canvas, {\n            layer: newLayer,\n            key,\n            value,\n            stylePropName: 'style',\n          })\n        );\n      });\n    }\n    return newLayer;\n  };\n\n  addArtboard(context: IContext, filePath: string): Layer {\n    const position = this.getNewArtboardPosition();\n    const artboard = this.canvas.createLayer();\n    this.canvas.addChild(artboard);\n    artboard.setLayout({\n      top: position.artTop,\n      left: position.artLeft,\n      height: 600,\n      width: 300,\n      position: 'absolute',\n    });\n    artboard.setStyle('backgroundColor', 'white');\n    artboard.setProp('id', generateRandomString(20));\n    this.artboards.set(filePath, artboard);\n    artboard.on('layout', () => {\n      this.canvas.dispatchEvent(\n        'artboardLayoutChanges',\n        new DesignerEvent('artboardLayoutChanges', this.canvas, this.canvas)\n      );\n    });\n    artboard.on('updateDom', () => {\n      this.canvas.dispatchEvent(\n        'artboardLayoutChanges',\n        new DesignerEvent('artboardLayoutChanges', this.canvas, this.canvas)\n      );\n    });\n\n    this.canvas.dispatchEvent(\n      'artboardLayoutChanges',\n      new DesignerEvent('artboardLayoutChanges', this.canvas, this.canvas)\n    );\n\n    return artboard;\n  }\n\n  removeArtboard(context: IContext, filePath: string) {\n    const artboard = this.artboards.get(filePath);\n    if (artboard) {\n      this.artboards.delete(filePath);\n      this.canvas.removeChild(artboard);\n    }\n\n    this.canvas.dispatchEvent(\n      'artboardLayoutChanges',\n      new DesignerEvent('artboardLayoutChanges', this.canvas, this.canvas)\n    );\n  }\n\n  selectArtboard(context: IContext, artboard: Layer) {\n    this.selectedArtboard = artboard;\n\n    if (this.selectedArtboard) {\n      const artboardDims = this.selectedArtboard.getBoundingClientRect();\n\n      // set grid configuration\n      this.canvas.executeFunction('setGridOffset', {\n        x: artboardDims.rootX,\n        y: artboardDims.rootY,\n      });\n      this.canvas.executeFunction(\n        'setGridSize',\n        this.selectedArtboard.executeFunction('getGridSize')\n      );\n    }\n\n    this.canvas.dispatchEvent(\n      'artboardSelected',\n      new ArtboardEvent('artboardSelected', this.canvas, artboard, this.canvas)\n    );\n  }\n\n  focusArtboard(context: IContext) {\n    const canvasDims = this.canvas.getBoundingClientRect();\n    const artboardDims = context.layer.getBoundingClientRect();\n\n    const scrollDims = {\n      x: (artboardDims.x + artboardDims.width / 2) / canvasDims.width,\n      y: (artboardDims.y + artboardDims.height / 2) / canvasDims.height,\n    };\n\n    this.canvas.executeFunction('setScroll', scrollDims);\n  }\n\n  getHitArtboard(context: IContext, x: number, y: number) {\n    let hitLayers = this.canvas.getHitResult(x, y);\n    const artboardArray = Array.from(this.artboards.values());\n    let artboards: Array<Layer> = [];\n\n    forEach(hitLayers.reverse(), layer => {\n      if (artboardArray.includes(layer)) {\n        artboards.push(layer);\n      }\n    });\n\n    if (isEmpty(artboards)) {\n      return null;\n    }\n\n    return artboards[artboards.length - 1];\n  }\n\n  getSelectedArtboard(context: IContext, filePath: string) {\n    return this.selectedArtboard;\n  }\n  getSelectedArtboardId(context: IContext) {\n    return this.selectedArtboard\n      ? this.selectedArtboard.props.get('id')\n      : undefined;\n  }\n  getAllArtboards(context: IContext) {\n    return this.artboards;\n  }\n\n  getArtboardById(context: IContext, path: string) {\n    return this.artboards.get(path);\n  }\n\n  getArtboard(context: IContext) {\n    let layer = context.layer;\n    if (layer.type !== 'canvas') {\n      const artboardArray = Array.from(this.artboards.values());\n      while (!artboardArray.includes(layer) && layer.parent) {\n        layer = layer.parent;\n      }\n      if (artboardArray.includes(layer)) {\n        return layer;\n      } else {\n        return null;\n      }\n    } else {\n      throw new Error('getArtboard should be called on layer only');\n    }\n  }\n\n  getNewArtboardPosition = () => {\n    let left = Number.MIN_VALUE;\n    let artLeft = Number.MIN_VALUE;\n    let artTop = Number.MIN_VALUE;\n    let top = Number.MIN_VALUE;\n    const zoom = 1; // TODO: get actual zoom later\n\n    if (this.artboards.size === 0) {\n      return { left: 300, top: 50, artTop: 50, artLeft: 300 };\n    }\n    this.artboards.forEach((artboard: Layer) => {\n      const artboardClientRect = artboard.getBoundingClientRect();\n      const artMaxX = artboardClientRect.x + artboardClientRect.width;\n      const artMidY = artboardClientRect.y + artboardClientRect.height / 2;\n      if (left < artMaxX) {\n        left = artMaxX;\n        top = artMidY;\n        artTop = artboardClientRect.y;\n      }\n    });\n    artLeft = left + 50;\n    left = left * zoom + 50;\n    top = top * zoom - 40;\n    return { left, top, artTop, artLeft };\n  };\n\n  modifyEventForSelectableLayers(event: any, forLayerDrag: boolean = false) {\n    // Traverse up the chain to all the parents and modify e.target as soon as you find a layer that matches one of the following conditions\n    // - It is a sibling of selected layers,\n    // - It is one of the direct ancestors of the selected layer upto the root layer, siblings of those parents, or a direct children of root layer of any artboard\n\n    // console.log(\n    //   event.target,\n    //   'Canvas.dispatchEventOnHitLayer click original *(*(*('\n    // );\n\n    if (event.target && event.target.type === 'canvas') {\n      // event.target = null;\n      return;\n    }\n\n    const hitLayers = (event.target as Layer).getHitResult(\n      event.worldX,\n      event.worldY\n    );\n\n    const selectedArtboard = this.canvas.executeFunction('getSelectedArtboard');\n    let currentRootLayer: Layer | undefined;\n    if (selectedArtboard) {\n      currentRootLayer = selectedArtboard.children[0];\n    }\n\n    let allRootLayerChildren: Array<Layer> = [];\n    const allRootLayers: Array<Layer> = [];\n\n    const artboardArray = Array.from(this.artboards.values());\n\n    artboardArray.forEach((artboard: Layer) => {\n      const rootLayer = artboard.children[0];\n\n      if (rootLayer) {\n        allRootLayerChildren = allRootLayerChildren.concat(rootLayer.children);\n        // allRootLayerChildren.push(rootLayer);\n        allRootLayers.push(rootLayer);\n      }\n    });\n\n    // Because artboard should be draggable (when dragging its label) but not clickable or hoverable\n    if (artboardArray.includes(event.target) && forLayerDrag) {\n      return;\n    }\n\n    let currentLayer: Layer | null = event.target;\n    while (\n      currentLayer &&\n      currentLayer.type !== 'canvas'\n      // !this.canvas.selectedLayers.includes(currentLayer)\n    ) {\n      if (this.topLayerSelectionMode) {\n        // Don't modify target, select top layer\n        break;\n      }\n\n      // If currentLayer is a sibling of selected Layer\n      if (\n        this.canvas.selectedLayers.length > 0 &&\n        this.canvas.selectedLayers[0].parent &&\n        this.canvas.selectedLayers[0].parent.children.includes(\n          currentLayer as Layer\n        )\n      ) {\n        const filteredLayer = filterIgnoredLayers(currentLayer, hitLayers);\n        if (filteredLayer) {\n          event.target = filteredLayer;\n        }\n        // console.log(currentLayer, 'is being hovered *(*(*(*');\n        break;\n      }\n\n      if (allRootLayerChildren.includes(currentLayer)) {\n        const filteredLayer = filterIgnoredLayers(currentLayer, hitLayers);\n        if (filteredLayer) {\n          event.target = filteredLayer;\n        }\n        break;\n      }\n\n      if (allRootLayers.includes(currentLayer)) {\n        const filteredLayer = filterIgnoredLayers(currentLayer, hitLayers);\n        if (filteredLayer) {\n          event.target = filteredLayer;\n        }\n        break;\n      }\n\n      const ancestorsList = [];\n\n      let parent: Layer | null = this.canvas.selectedLayers[0];\n      while (\n        currentRootLayer &&\n        parent &&\n        !currentRootLayer.children.includes(parent) &&\n        parent.parent\n      ) {\n        parent = parent.parent;\n        ancestorsList.push(parent);\n      }\n\n      let ancestorSiblingsList: Layer[] = [];\n      ancestorsList.forEach((ancestor: Layer) => {\n        if (ancestor.parent) {\n          ancestorSiblingsList = ancestorSiblingsList.concat(\n            ancestor.parent.children\n          );\n        }\n      });\n\n      if (union(ancestorsList, ancestorSiblingsList).includes(currentLayer)) {\n        const filteredLayer = filterIgnoredLayers(currentLayer, hitLayers);\n        if (filteredLayer) {\n          event.target = filteredLayer;\n        }\n        break;\n      }\n\n      currentLayer = currentLayer.parent;\n      // while (currentLayer && !hitLayers.includes(currentLayer?.parent)) {\n      //   currentLayer = currentLayer.parent;\n      // }\n\n      event.target = null;\n    }\n  }\n\n  setTopLayerSelectionMode(value: boolean) {\n    this.topLayerSelectionMode = value;\n  }\n\n  deactivate() {\n    this.canvas.removeFunction('addArtboard');\n    this.canvas.removeFunction('removeArtboard');\n    this.canvas.removeFunction('getArtboardById');\n    this.canvas.removeFunction('getNewArtboardPosition');\n    this.canvas.removeFunction('getSelectedArtboardId');\n  }\n}\n\nfunction filterIgnoredLayers(currentLayer: Layer, hitLayers: Array<Layer>) {\n  if (hitLayers.includes(currentLayer)) {\n    return currentLayer;\n  } else if (currentLayer.style.get('pointerEvents') === 'none') {\n    const topChildInHitLayers = findLast(currentLayer.children, child => {\n      if (hitLayers.includes(child)) {\n        return true;\n      }\n      return false;\n    });\n\n    if (topChildInHitLayers) {\n      return topChildInHitLayers;\n    }\n  }\n  return;\n}\n","import { Canvas, IPlugin, IContext } from '../..';\n\nexport default class LayerMouseCursorPlugin implements IPlugin {\n  name = 'LayerMouseCursorPlugin';\n  canvas!: Canvas;\n  dispose: any;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n  }\n\n  activate() {\n    this.canvas.addFunction(\n      'setMouseCursor',\n      (context: IContext, cursor: string) => {\n        context.layer.addEventListener('mouseEnter', (data: any) => {\n          this.canvas.setMouseCursor(cursor);\n        });\n        context.layer.addEventListener('mouseLeave', (data: any) => {\n          this.canvas.setMouseCursor('default');\n        });\n      }\n    );\n  }\n\n  deactivate() {\n    this.canvas.removeFunction('setMouseCursor');\n    this.dispose();\n  }\n}\n","import { Canvas, IPlugin, Layer, IContext } from '../..';\nconst path = require('path');\nexport default class DataStore implements IPlugin {\n  name = 'DataStore';\n  canvas!: Canvas;\n  dataMap = new Map<Layer, any>();\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n  activate() {\n    this.canvas.addFunction('setData', this.setData.bind(this));\n    this.canvas.addFunction('getData', this.getData.bind(this));\n    this.canvas.addFunction('removeData', this.removeData.bind(this));\n  }\n\n  setData(context: IContext, key: any, value: any) {\n    //\n    const layer = context.layer;\n    let layerData = this.dataMap.get(layer);\n\n    if (layerData) {\n      layerData = { ...layerData, [key]: value };\n    } else {\n      layerData = {\n        [key]: value,\n      };\n    }\n    // console.log(layerData, layer, 'layer data here');\n\n    this.dataMap.set(layer, layerData);\n  }\n\n  getData(context: IContext, key?: any) {\n    const layer = context.layer;\n    let layerData = this.dataMap.get(layer);\n    if (layerData) {\n      if (key) {\n        return layerData[key];\n      } else {\n        return layerData;\n      }\n    }\n  }\n\n  removeData(context: IContext, key?: any) {\n    const layer = context.layer;\n    let layerData = this.dataMap.get(layer);\n    if (key) {\n      delete layerData[key];\n    } else {\n      this.dataMap.delete(layer);\n    }\n  }\n\n  deactivate() {\n    this.canvas.removeFunction('setData');\n    this.canvas.removeFunction('getData');\n    this.canvas.removeFunction('removeData');\n  }\n}\n","import { Canvas, IPlugin, IPosition, IContext } from '../..';\n\nexport default class TooltipPlugin implements IPlugin {\n  name = 'Tooltip';\n  canvas!: Canvas;\n  dispose: any;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n  }\n\n  activate() {\n    const containerDiv = document.createElement('div');\n    containerDiv.style.position = 'absolute';\n    this.dispose = this.canvas.addDomToViewport(containerDiv);\n    containerDiv.style.pointerEvents = 'none';\n    containerDiv.style.padding = '.25em .4em';\n    containerDiv.style.fontWeight = '700px';\n    containerDiv.style.textAlign = 'center';\n    containerDiv.style.flexDirection = 'row';\n    containerDiv.style.alignItems = 'center';\n    containerDiv.style.justifyContent = 'center';\n    containerDiv.style.display = 'none';\n    containerDiv.style.whiteSpace = 'nowrap';\n    containerDiv.style.verticalAlign = 'middle';\n    containerDiv.style.borderRadius = '2px';\n    containerDiv.style.position = 'absolute';\n    containerDiv.style.color = 'white';\n    containerDiv.style.fontSize = '10px';\n    containerDiv.style.background = '#1FB2CC';\n    containerDiv.style.fontFamily =\n      'Roboto, -apple-system, BlinkMacSystemFont, sans-serif';\n\n    this.canvas.addFunction(\n      `${this.name}.show`,\n      (context: IContext, coords: IPosition, text: string) => {\n        containerDiv.style.left = `${coords.x}px`;\n        containerDiv.style.top = `${coords.y}px`;\n        containerDiv.style.display = 'flex';\n        if (containerDiv.childNodes.length) {\n          containerDiv.childNodes[0].nodeValue = text;\n        } else {\n          containerDiv.appendChild(document.createTextNode(text));\n        }\n      }\n    );\n\n    this.canvas.addFunction(`${this.name}.hide`, (context: IContext) => {\n      containerDiv.style.display = 'none';\n    });\n\n    this.canvas.addFunction(\n      `${this.name}.setPosition`,\n      (context: IContext, coords: IPosition) => {\n        containerDiv.style.left = `${coords.x}px`;\n        containerDiv.style.top = `${coords.y}px`;\n      }\n    );\n\n    this.canvas.addFunction(\n      `${this.name}.setText`,\n      (context: IContext, text: string) => {\n        if (containerDiv.childNodes.length) {\n          containerDiv.childNodes[0].nodeValue = text;\n        } else {\n          containerDiv.appendChild(document.createTextNode(text));\n        }\n      }\n    );\n  }\n\n  deactivate() {\n    this.canvas.removeFunction(`${this.name}.show`);\n    this.canvas.removeFunction(`${this.name}.hide`);\n    this.canvas.removeFunction(`${this.name}.setPosition`);\n    this.canvas.removeFunction(`${this.name}.setText`);\n    this.dispose();\n  }\n}\n","import { Canvas, IPlugin, Layer } from '../..';\nimport CommandEvent from '../../events/CommandEvent';\nexport default class OpacityShortcutPlugin implements IPlugin {\n  name = 'OpacityShortcut';\n  canvas!: Canvas;\n  dispose: any;\n  previousEvent: any;\n  opacity: number = 100;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n  }\n\n  activate() {\n    this.canvas.addEventListener('keyDown', this.handleKeyPress);\n  }\n\n  handleKeyPress = (event: any) => {\n    const originalEvent = event.originalEvent;\n    const keycode = originalEvent.keyCode || originalEvent.which;\n    let newOpacity = this.opacity;\n    const isModifierKeyPressed =\n      originalEvent.altKey ||\n      originalEvent.ctrlKey ||\n      originalEvent.metaKey ||\n      originalEvent.shiftKey;\n    if (\n      !isModifierKeyPressed &&\n      this.canvas.selectedLayers.length > 0 &&\n      keycode >= 48 &&\n      keycode <= 57\n    ) {\n      if (\n        this.previousEvent &&\n        originalEvent.timeStamp - this.previousEvent.timeStamp < 1000\n      ) {\n        newOpacity = this.opacity * 10 + parseInt(originalEvent.key);\n        if (newOpacity > 100) {\n          const opacityInString = newOpacity.toString();\n          newOpacity = parseInt(\n            opacityInString.slice(\n              opacityInString.length - 2,\n              opacityInString.length\n            )\n          );\n        }\n        this.opacity = newOpacity;\n      } else {\n        newOpacity = parseInt(originalEvent.key) * 10;\n        this.opacity = parseInt(originalEvent.key);\n      }\n      this.previousEvent = originalEvent;\n\n      this.canvas.selectedLayers.map((selectedLayer: Layer) => {\n        const commandParams = {\n          layer: selectedLayer,\n          key: 'opacity',\n          value: newOpacity / 100,\n          stylePropName: 'style',\n        };\n        this.canvas.dispatchEvent(\n          'setStyleAttribute',\n          new CommandEvent('setStyleAttribute', this.canvas, commandParams)\n        );\n      });\n    }\n  };\n\n  deactivate() {\n    this.dispose();\n  }\n}\n","import { Event, Layer } from '../..';\n\nexport class FontResizerEvent extends Event {\n  fontSize!: number;\n  y!: number;\n  x!: number;\n  constructor(\n    name: string,\n    target: Layer,\n    payload: {\n      fontSize?: number;\n      x?: number;\n      y?: number;\n    },\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    const { x, y, fontSize } = payload;\n    if (fontSize) this.fontSize = fontSize;\n    if (y) this.y = y;\n    if (x) this.x = x;\n  }\n}\n","import { Canvas, Layer, IPlugin } from '../..';\nimport { FontResizerEvent } from './FontResizerEvent';\nimport { IDimensionWithRoot } from 'interfaces';\n\nexport default class FontResizerPlugin implements IPlugin {\n  name = 'FontResizerPlugin';\n  namespace = 'FontResizer';\n  canvas!: Canvas;\n  disabled: boolean = false;\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addMiddleware(\n      `LayerResizer.handleDragStart`,\n      this.handleDragStart\n    );\n    this.canvas.addMiddleware(`LayerResizer.handleDrag`, this.handleDrag);\n    this.canvas.addMiddleware(`LayerResizer.handleDragEnd`, this.handleDragEnd);\n    this.canvas.addMiddleware(`LayerResizer.getHandles`, this.getHandles);\n    this.canvas.addFunction(\n      `${this.namespace}.disable`,\n      this.disableDrag.bind(this)\n    );\n  }\n  disableDrag() {\n    this.disabled = true;\n  }\n  isInsideCenterBox(\n    layerDims: IDimensionWithRoot,\n    parentDims: IDimensionWithRoot\n  ): boolean {\n    const parentBoundaries = {\n      left: parentDims.rootX + parentDims.width / 5,\n      right: parentDims.rootX + (parentDims.width * 4) / 5,\n      top: parentDims.rootY + parentDims.height / 10,\n      bottom: parentDims.rootY + (parentDims.height * 9) / 10,\n    };\n    const layerCenterY = layerDims.rootY + layerDims.height / 2;\n    const layerCenterX = layerDims.rootX + layerDims.width / 2;\n    return (\n      layerCenterX > parentBoundaries.left &&\n      layerCenterX < parentBoundaries.right &&\n      layerCenterY > parentBoundaries.top &&\n      layerCenterY < parentBoundaries.bottom\n    );\n  }\n  getHandles = (next: any, layers: Array<Layer>) => {\n    if (\n      layers.length === 1 &&\n      layers[0].type === 'text' &&\n      !layers[0].layout.get('height') &&\n      !layers[0].layout.get('width')\n    ) {\n      const textLayer = layers[0];\n      const parentDims = textLayer.parent?.getBoundingClientRect();\n      const textLayerDims = textLayer.getBoundingClientRect();\n      let newHandle = '';\n\n      if (parentDims) {\n        let parentCenterY = parentDims.rootY + parentDims.height / 2;\n        let parentCenterX = parentDims.rootX + parentDims.width / 2;\n\n        let textLayerCenterY = textLayerDims.rootY + textLayerDims.height / 2;\n        let textLayerCenterX = textLayerDims.rootX + textLayerDims.width / 2;\n        if (textLayerCenterY < parentCenterY) {\n          newHandle = 'B';\n        } else if (textLayerCenterY > parentCenterY) {\n          newHandle += 'T';\n        } else {\n          newHandle += '';\n        }\n\n        if (textLayerCenterX < parentCenterX) {\n          newHandle += 'R';\n        } else if (textLayerCenterX > parentCenterX) {\n          newHandle += 'L';\n        } else {\n          newHandle += '';\n        }\n\n        if (\n          textLayer.parent &&\n          this.isInsideCenterBox(textLayerDims, parentDims)\n        ) {\n          newHandle = 'B';\n        }\n        return [newHandle, 'ROTATE'];\n      }\n    } else {\n      return next(layers);\n    }\n  };\n  handleDragStart = (next: any, data: any) => {\n    const event = data.data;\n    const selectedLayer = data.selectedLayer;\n    if (\n      (event.targetHandle && event.targetHandle.includes('ROTATE')) ||\n      this.disabled\n    ) {\n      return next(data);\n    }\n    if (\n      selectedLayer &&\n      selectedLayer.type === 'text' &&\n      !selectedLayer.layout.get('height') &&\n      !selectedLayer.layout.get('width')\n    ) {\n      this.canvas.executeFunction('Tooltip.hide');\n      selectedLayer.executeFunction(\n        'setData',\n        'fontSize',\n        selectedLayer.layout.get('fontSize') || 14\n      );\n      selectedLayer.executeFunction(\n        'setData',\n        'initialDimensions',\n        selectedLayer.getBoundingClientRect()\n      );\n      this.canvas.executeFunction('LayerResizer.stopHandleRerender');\n      this.canvas.dispatchEvent(\n        `${this.namespace}.dragStart`,\n        new FontResizerEvent(`${this.namespace}.dragStart`, selectedLayer, {})\n      );\n    } else {\n      return next(data);\n    }\n  };\n\n  handleDrag = (next: any, data: any) => {\n    const event = data.data;\n    const selectedLayer = data.selectedLayer;\n\n    if (\n      (event.targetHandle && event.targetHandle.includes('ROTATE')) ||\n      this.disabled\n    ) {\n      return next(data);\n    }\n    if (\n      selectedLayer &&\n      selectedLayer.type === 'text' &&\n      !selectedLayer.layout.get('height') &&\n      !selectedLayer.layout.get('width')\n    ) {\n      const { session, targetHandle } = event;\n\n      let deltaInput = {\n        x: session.current.x - session.start.x,\n        y: session.current.y - session.start.y,\n      };\n\n      const currentFontSize = selectedLayer.executeFunction(\n        'getData',\n        'fontSize'\n      );\n      const initialDims = selectedLayer.executeFunction(\n        'getData',\n        'initialDimensions'\n      );\n\n      const ratioX = deltaInput.x / initialDims.width;\n      const ratioY = deltaInput.y / initialDims.height;\n      let newFontSize = currentFontSize;\n      let newLeft = initialDims.x;\n      let newTop = initialDims.y;\n\n      if (targetHandle === 'B') {\n        newFontSize += currentFontSize * ratioY;\n      } else if (targetHandle === 'T') {\n        newFontSize += -currentFontSize * ratioY;\n      } else {\n        if (targetHandle.indexOf('L') === -1) {\n          newFontSize += currentFontSize * ratioX;\n        } else {\n          newFontSize += -currentFontSize * ratioX;\n        }\n      }\n      if (newFontSize <= 0) {\n        newFontSize *= -1;\n      }\n      this.canvas.dispatchEvent(\n        `${this.namespace}.setFontSize`,\n        new FontResizerEvent(`${this.namespace}.setFontSize`, selectedLayer, {\n          fontSize: Math.round(newFontSize),\n        })\n      );\n      const currentDims = selectedLayer.getBoundingClientRect();\n      const widthChanged = currentDims.width - initialDims.width;\n      const heightChanged = currentDims.height - initialDims.height;\n      if (targetHandle === 'L' || targetHandle === 'R') {\n        newTop = newTop - heightChanged / 2;\n      } else if (!(targetHandle.indexOf('B') !== -1)) {\n        newTop = newTop - heightChanged;\n      }\n      if (!(targetHandle.indexOf('L') === -1)) {\n        newLeft = newLeft - widthChanged;\n      } else if (targetHandle === 'T' || targetHandle === 'B') {\n        newLeft = newLeft - widthChanged / 2;\n      }\n      const positionChanged =\n        initialDims.y !== newTop || initialDims.x !== newLeft;\n      if (positionChanged) {\n        this.canvas.dispatchEvent(\n          `${this.namespace}.setPosition`,\n          new FontResizerEvent(`${this.namespace}.setPosition`, selectedLayer, {\n            y: newTop,\n            x: newLeft,\n          })\n        );\n      }\n      this.canvas.executeFunction(\n        'Tooltip.show',\n        {\n          x: event.viewportX + 20,\n          y: event.viewportY + 20,\n        },\n        `${Math.round(newFontSize)}`\n      );\n    } else {\n      return next(data);\n    }\n  };\n\n  handleDragEnd = (next: any, data: any) => {\n    const event = data.data;\n    const selectedLayer = data.selectedLayer;\n    if (\n      (event.targetHandle && event.targetHandle.includes('ROTATE')) ||\n      this.disabled\n    ) {\n      return next(data);\n    }\n    if (\n      selectedLayer &&\n      selectedLayer.type === 'text' &&\n      !selectedLayer.layout.get('height') &&\n      !selectedLayer.layout.get('width')\n    ) {\n      this.canvas.executeFunction('Tooltip.hide');\n      selectedLayer.executeFunction(\n        'setData',\n        'fontSize',\n        selectedLayer.layout.get('fontSize') || 14\n      );\n      selectedLayer.executeFunction(\n        'setData',\n        'initialDimensions',\n        selectedLayer.getBoundingClientRect()\n      );\n      this.canvas.executeFunction('LayerResizer.startHandleRerender');\n      this.canvas.dispatchEvent(\n        `${this.namespace}.dragEnd`,\n        new FontResizerEvent(`${this.namespace}.dragEnd`, selectedLayer, {})\n      );\n    } else {\n      return next(data);\n    }\n  };\n\n  deactivate() {}\n}\n","import { Canvas, Layer, IPlugin } from '../..';\nimport { forEach, indexOf, sortBy, cloneDeep, isNil, get } from 'lodash';\nimport { IDimensionWithRotation } from 'interfaces';\nimport DesignerMouseEvent from '../../events/MouseEvent';\nimport { Event } from '../../events';\nimport CommandEvent from '../../events/CommandEvent';\n\nconst transitionStyle = document.createElement('style');\ntransitionStyle.innerHTML = `\n #transition {\n   transition: top 0.2s ease-in 0s, left 0.2s ease-in 0s, right 0.2s ease-in 0s,\n     bottom 0.2s ease-in 0s;\n }`;\n\nexport default class FlexDragPlugin implements IPlugin {\n  name = 'FlexDragPlugin';\n  namespace = 'FlexDrag';\n  canvas!: Canvas;\n  disabled: boolean = false;\n  layerOpacities: Map<Layer, number> = new Map<Layer, number>();\n  previousTriggerPoint: number | null = null;\n  nextTriggerPoint: number | null = null;\n  targetInitialDims!: IDimensionWithRotation;\n  target: Array<Layer> | Layer = [];\n  flexDirection!: string;\n  flexLayers: Array<Layer | undefined> = [];\n  totalDx: number = 0;\n  totalDy: number = 0;\n  newTargetIndex: number | undefined;\n  initialSnapshotData: Map<Layer, any> = new Map();\n  beforeDragSnapshotData: Map<Layer, any> = new Map();\n  currentSnapshotData: Map<Layer, any> = new Map();\n  ghostLayer!: Layer;\n  targetGhostLayer!: Layer;\n  isFlex: boolean = false;\n  layersHeightWidth: Map<Layer, { height: any; width: any }> = new Map();\n  initialParentData: { layer: Layer; dims: any } | undefined;\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addMiddleware(`LayerDrag.dragStart`, this.layerDragStart);\n    this.canvas.addMiddleware(`LayerDrag.drag`, this.layerDrag);\n    this.canvas.addMiddleware(`LayerDrag.dragEnd`, this.layerDragEnd);\n\n    this.canvas.addMiddleware(`LayerResizer.dragStart`, this.layerDragStart);\n    this.canvas.addMiddleware(`LayerResizer.drag`, this.layerResizerDrag);\n    this.canvas.addMiddleware(`LayerResizer.dragEnd`, this.layerResizerDragEnd);\n    this.canvas.addFunction(`${this.namespace}.disable`, () => {\n      this.disabled = true;\n    });\n  }\n  saveLayersHeightWidth = (layer: Layer) => {\n    if (!this.layersHeightWidth.get(layer)) {\n      this.layersHeightWidth.set(layer, {\n        height: layer.layout.get('height'),\n        width: layer.layout.get('width'),\n      });\n    }\n  };\n  clearFlexLayersHeightWidth = () => {\n    this.layersHeightWidth.clear();\n  };\n  saveSiblingOpacity = (parentLayer: Layer) => {\n    forEach(parentLayer.children, (layer: Layer) => {\n      if (layer.isFlexChild()) {\n        let opacity = !isNil(layer.style.get('opacity'))\n          ? layer.style.get('opacity')\n          : 1;\n        this.layerOpacities.set(layer, opacity);\n        layer.setStyle('opacity', 0.3);\n      }\n    });\n  };\n  revertSiblingOpacity = () => {\n    this.layerOpacities.forEach((opacity: any, layer: Layer) => {\n      layer.setStyle('opacity', this.layerOpacities.get(layer));\n    });\n    this.layerOpacities.clear();\n  };\n  layerResizerDrag = (next: any, event: any) => {\n    if (this.disabled) return;\n    if (event.selectedLayers.length === 0) {\n      return;\n    }\n    if (!this.isFlex) {\n      return next(event);\n    } else {\n    }\n  };\n  layerResizerDragEnd = (next: any, event: any) => {\n    if (this.disabled) return;\n    if (event.selectedLayers.length === 0) {\n      return;\n    }\n    this.revertParentDims();\n    this.canvas.dispatchEvent(\n      `${this.namespace}.dragEnd`,\n      new Event(`${this.namespace}.dragEnd`, this.canvas)\n    );\n    if (!this.isFlex) {\n      return next(event);\n    }\n  };\n  revertParentDims = () => {\n    if (this.initialParentData) {\n      const layer = this.initialParentData.layer;\n      const dims = this.initialParentData.dims;\n      if (layer.isAutoHeight() || layer.isAutoWidth()) {\n        layer.removeLayout(['position', 'top', 'left', 'right', 'bottom']);\n        if (!dims.hasOwnProperty('height')) {\n          layer.removeLayout('height');\n        }\n        if (!dims.hasOwnProperty('width')) {\n          layer.removeLayout('width');\n        }\n        layer.setLayout(dims);\n        this.initialParentData = undefined;\n      }\n    }\n  };\n  changeParentDims = (layer: Layer) => {\n    if (\n      !this.initialParentData &&\n      (layer.isAutoHeight() || layer.isAutoWidth())\n    ) {\n      this.initialParentData = { layer, dims: layer.layout.getAll() };\n      const dims = this.getMarginAdjustedBounds(layer);\n      layer.setLayout({\n        position: 'absolute',\n        left: dims.x,\n        top: dims.y,\n        width: dims.width,\n        height: dims.height,\n      });\n    }\n  };\n  /*\n    ---> This is used to differentiate between both in the code wherever required:\n    - Event from layerResizer is of type {data:Event,selectedLayers:current selected layers}\n    - Event from layer drag is directly Event\n    ---> On each drag start a ghost layer is created and everything else is handeled on that\n         ghost layer only.\n  */\n\n  setFlexLayers = () => {\n    let parent;\n    if (this.target instanceof Layer) {\n      parent = this.target.parent;\n    } else {\n      parent = this.target[0].parent;\n    }\n    if (parent) {\n      this.flexLayers = [];\n      forEach(parent.children, (layer: Layer) => {\n        document.body.appendChild(transitionStyle);\n        if (layer.isFlexChild()) {\n          layer.setProp('id', 'transition');\n          this.saveLayersHeightWidth(layer);\n          this.flexLayers.push(layer);\n        } else {\n          this.flexLayers.push(undefined);\n        }\n      });\n    }\n  };\n\n  createGhostLayer = (layout: any, parent: Layer) => {\n    const dims = {\n      width: layout.width,\n      height: layout.height,\n      left: layout.x,\n      top: layout.y,\n      position: 'absolute',\n    };\n    if (this.target instanceof Layer) {\n      this.ghostLayer = this.canvas.createLayer();\n      parent.addChild(this.ghostLayer);\n      this.ghostLayer.setLayout(dims);\n      this.ghostLayer.executeFunction('Hover.hideLayer');\n      this.target.setStyle('opacity', this.layerOpacities.get(this.target));\n      const layerStyles = { ...this.target.style.getAll() };\n      this.ghostLayer.setStyle({ ...layerStyles, opacity: 0 });\n    } else {\n      const wrapperLayer = this.canvas.createLayer();\n      parent.addChild(wrapperLayer);\n      wrapperLayer.setLayout(dims);\n      wrapperLayer.executeFunction('Hover.hideLayer');\n      this.target.forEach((layer: Layer) => {\n        const copyLayer = this.canvas.createLayer();\n        wrapperLayer.addChild(copyLayer);\n        const layerDims = this.getMarginAdjustedBounds(layer);\n        const layerStyles = { ...layer.style.getAll() };\n        layer.setStyle('opacity', this.layerOpacities.get(layer));\n        const wrapperLayerDims = this.getMarginAdjustedBounds(wrapperLayer);\n        copyLayer.setLayout({\n          left: layerDims.x - wrapperLayerDims.x,\n          top: layerDims.y - wrapperLayerDims.y,\n          width: layerDims.width,\n          height: layerDims.height,\n          position: 'absolute',\n        });\n        copyLayer.setStyle({ ...layerStyles, opacity: 0 });\n      });\n      this.ghostLayer = wrapperLayer;\n    }\n  };\n\n  startGhostDragging = (event: any) => {\n    document.addEventListener('mousemove', this.ghostMove);\n    document.addEventListener('mouseup', this.ghostMouseUp);\n    document.addEventListener('contextmenu', this.ghostMouseUp);\n    this.canvas.setDragging(true);\n    const mouseDownEvent = new DesignerMouseEvent(\n      'mousedown',\n      this.canvas,\n      event.originalEvent,\n      this.canvas\n    );\n    this.canvas.dispatchEventOnHitLayer('mousedown', mouseDownEvent);\n  };\n  ghostMove = (e: any) => {\n    this.canvas.handleNativeEvent(e);\n  };\n  ghostMouseUp = (e: any) => {\n    document.removeEventListener('mousemove', this.ghostMove);\n    document.removeEventListener('mouseup', this.ghostMouseUp);\n    document.removeEventListener('contextmenu', this.ghostMouseUp);\n    this.canvas.handleNativeEvent(e);\n    this.canvas.setDragging(false);\n  };\n  getMarginAdjustedBounds = (layer: Layer) => {\n    let initialBounds = layer.getBoundingClientRect();\n    return {\n      ...initialBounds,\n      x: initialBounds.x - layer.getMarginLeft(),\n      y: initialBounds.y - layer.getMarginTop(),\n    };\n  };\n  endFlexLayerDragging = (event: any) => {\n    const mouseUpEvent = new DesignerMouseEvent(\n      'mouseup',\n      this.canvas,\n      event.originalEvent,\n      this.canvas\n    );\n    this.canvas.dispatchEventOnHitLayer('mouseup', mouseUpEvent);\n  };\n\n  recordCurrentSnapshot = (parent: Layer) => {\n    this.currentSnapshotData.clear();\n    parent.children.forEach((child: Layer, index: number) => {\n      if (child !== this.ghostLayer)\n        this.currentSnapshotData.set(child, {\n          index,\n          dims: cloneDeep(this.getMarginAdjustedBounds(child)),\n        });\n    });\n  };\n\n  changeToAbsolute = (parent: Layer) => {\n    parent.children.forEach((sibling: Layer) => {\n      if (sibling !== this.ghostLayer) {\n        const siblingDims = this.getMarginAdjustedBounds(sibling);\n        sibling.setLayout({\n          position: 'absolute',\n          left: siblingDims.x,\n          top: siblingDims.y,\n          width: siblingDims.width,\n          height: siblingDims.height,\n        });\n      }\n    });\n  };\n\n  revertBackToSnapshot = (parent: Layer, snapshotData: Map<Layer, any>) => {\n    snapshotData.forEach((value: any, layer: Layer) => {\n      if (layer.getIndexInParent() !== value.index)\n        layer.move(parent, value.index);\n      if (this.flexLayers.includes(layer)) {\n        layer.removeLayout(['position', 'top', 'left', 'right', 'bottom']);\n      }\n      const originalHW = this.layersHeightWidth.get(layer);\n      if (this.flexLayers.includes(layer) && originalHW) {\n        if (!originalHW.height && !isNil(layer.layout.get('height')))\n          layer.removeLayout('height');\n        if (!originalHW.width && !isNil(layer.layout.get('width')))\n          layer.removeLayout('width');\n      }\n    });\n  };\n\n  findAbsolutePreviousLayer = (index: number) => {\n    let previousLayer = undefined;\n    let prevLayerIndex = index - 1;\n    while (isNil(previousLayer) && prevLayerIndex >= 0) {\n      if (this.flexLayers[prevLayerIndex]) {\n        previousLayer = this.flexLayers[prevLayerIndex];\n      }\n      prevLayerIndex--;\n    }\n    return previousLayer;\n  };\n  findPreviousLayer = (index: number) => {\n    if (this.flexDirection && this.flexDirection.includes('reverse')) {\n      return this.findAbsoluteNextLayer(index);\n    }\n    return this.findAbsolutePreviousLayer(index);\n  };\n  findAbsoluteNextLayer = (index: any) => {\n    let nextLayer = undefined;\n    let nextLayerIndex = index + 1;\n    while (isNil(nextLayer) && nextLayerIndex < this.flexLayers.length) {\n      if (this.flexLayers[nextLayerIndex]) {\n        nextLayer = this.flexLayers[nextLayerIndex];\n      }\n      nextLayerIndex++;\n    }\n    return nextLayer;\n  };\n  findNextLayer = (index: number) => {\n    if (this.flexDirection && this.flexDirection.includes('reverse')) {\n      return this.findAbsolutePreviousLayer(index);\n    }\n    return this.findAbsoluteNextLayer(index);\n  };\n\n  setTriggerPoints = () => {\n    this.previousTriggerPoint = null;\n    this.nextTriggerPoint = null;\n    if (this.target instanceof Layer) {\n      const targetIndexInParent = indexOf(this.flexLayers, this.target);\n      if (targetIndexInParent !== -1) {\n        let previousLayer = this.findPreviousLayer(targetIndexInParent);\n        let nextLayer = this.findNextLayer(targetIndexInParent);\n        const currentTargetDims = this.getMarginAdjustedBounds(this.target);\n        if (previousLayer) {\n          const previousLayerDims = this.getMarginAdjustedBounds(previousLayer);\n          this.previousTriggerPoint = this.calculateTriggerPoint(\n            previousLayerDims,\n            currentTargetDims\n          );\n        }\n\n        if (nextLayer) {\n          const nextLayerDims = this.getMarginAdjustedBounds(nextLayer);\n          this.nextTriggerPoint = this.calculateTriggerPoint(\n            currentTargetDims,\n            nextLayerDims\n          );\n        }\n      }\n    } else {\n      const sortedSelectedLayers = sortBy(this.target, (layer: Layer) =>\n        layer.getIndexInParent()\n      );\n\n      const firstSelectedLayerIndex = indexOf(\n        this.flexLayers,\n        sortedSelectedLayers[0]\n      );\n      const lastSelectedLayerIndex = indexOf(\n        this.flexLayers,\n        sortedSelectedLayers[sortedSelectedLayers.length - 1]\n      );\n\n      if (firstSelectedLayerIndex !== -1 && lastSelectedLayerIndex !== -1) {\n        const previousLayer = this.findPreviousLayer(firstSelectedLayerIndex);\n        const nextLayer = this.findNextLayer(lastSelectedLayerIndex);\n\n        const boundingBoxDims = this.canvas.getBoundingBox(\n          sortedSelectedLayers\n        );\n        const parentDims =\n          sortedSelectedLayers.length && sortedSelectedLayers[0].parent\n            ? this.getMarginAdjustedBounds(sortedSelectedLayers[0].parent)\n            : undefined;\n\n        if (parentDims) {\n          const boundingBoxDimsWRTParent = {\n            ...boundingBoxDims,\n            x: boundingBoxDims.x - parentDims.rootX,\n            y: boundingBoxDims.y - parentDims.rootY,\n          };\n          if (previousLayer) {\n            const previousLayerDims = this.getMarginAdjustedBounds(\n              previousLayer\n            );\n            this.previousTriggerPoint = this.calculateTriggerPoint(\n              previousLayerDims,\n              boundingBoxDimsWRTParent\n            );\n          }\n\n          if (nextLayer) {\n            const nextLayerDims = this.getMarginAdjustedBounds(nextLayer);\n            this.nextTriggerPoint = this.calculateTriggerPoint(\n              boundingBoxDimsWRTParent,\n              nextLayerDims\n            );\n          }\n        }\n      }\n    }\n  };\n\n  calculateTriggerPoint = (\n    previousLayerDims: IDimensionWithRotation,\n    nextLayerDims: IDimensionWithRotation\n  ) => {\n    if (this.flexDirection === 'row' || this.flexDirection === 'row-reverse') {\n      return (previousLayerDims.x + nextLayerDims.x + nextLayerDims.width) / 2;\n    } else {\n      return (nextLayerDims.y + nextLayerDims.height + previousLayerDims.y) / 2;\n    }\n  };\n\n  handleSwapWRTNewPosition = (oldCenter: number, newCenter: number) => {\n    const crossedPreviousTriggerPoint =\n      this.previousTriggerPoint &&\n      oldCenter > this.previousTriggerPoint &&\n      newCenter < this.previousTriggerPoint;\n\n    const crossedNextTriggerPoint =\n      this.nextTriggerPoint &&\n      oldCenter < this.nextTriggerPoint &&\n      newCenter > this.nextTriggerPoint;\n    let targetLayerIndex;\n    let newIndex;\n    let toMoveLayer;\n    if (this.target instanceof Layer) {\n      targetLayerIndex = indexOf(this.flexLayers, this.target);\n      newIndex = targetLayerIndex;\n      toMoveLayer = crossedPreviousTriggerPoint\n        ? this.findPreviousLayer(targetLayerIndex)\n        : crossedNextTriggerPoint\n        ? this.findNextLayer(targetLayerIndex)\n        : null;\n      if (toMoveLayer)\n        this.newTargetIndex = indexOf(this.flexLayers, toMoveLayer);\n    } else {\n      const sortedSelectedLayers = sortBy(this.target, (layer: Layer) =>\n        layer.getIndexInParent()\n      );\n\n      const firstSelectedLayerIndex = indexOf(\n        this.flexLayers,\n        sortedSelectedLayers[0]\n      );\n      const lastSelectedLayerIndex = indexOf(\n        this.flexLayers,\n        sortedSelectedLayers[sortedSelectedLayers.length - 1]\n      );\n      if (crossedPreviousTriggerPoint) {\n        newIndex = lastSelectedLayerIndex;\n        toMoveLayer = this.findPreviousLayer(firstSelectedLayerIndex);\n        if (toMoveLayer)\n          this.newTargetIndex = indexOf(this.flexLayers, toMoveLayer);\n      } else if (crossedNextTriggerPoint) {\n        newIndex = firstSelectedLayerIndex;\n        toMoveLayer = this.findNextLayer(lastSelectedLayerIndex);\n        if (toMoveLayer)\n          this.newTargetIndex = indexOf(this.flexLayers, toMoveLayer);\n      }\n    }\n    if (!isNil(newIndex) && newIndex >= 0 && toMoveLayer) {\n      this.internalMove(toMoveLayer, newIndex);\n    }\n  };\n\n  internalMove = (targetLayer: Layer, newIndex: number) => {\n    let parent = targetLayer.parent;\n    if (parent) {\n      this.revertBackToSnapshot(parent, this.currentSnapshotData);\n      targetLayer.move(parent, newIndex);\n      const newPositionData: Map<Layer, any> = new Map();\n      parent.children.forEach((child: Layer) => {\n        if (child !== this.ghostLayer) {\n          newPositionData.set(child, this.getMarginAdjustedBounds(child));\n        }\n      });\n      this.recordCurrentSnapshot(parent);\n      this.setFlexLayers();\n      this.setTriggerPoints();\n      this.revertBackToSnapshot(parent, this.beforeDragSnapshotData);\n      this.changeToAbsolute(parent);\n      parent.children.forEach((child: Layer) => {\n        const newChildLayout = newPositionData.get(child);\n        if (child !== this.ghostLayer && newChildLayout) {\n          child.setLayout({\n            left: newChildLayout.x,\n            top: newChildLayout.y,\n          });\n        }\n      });\n    }\n  };\n  layerDragStart = (next: any, event: any) => {\n    if (this.disabled) return;\n    this.totalDx = 0;\n    this.totalDy = 0;\n    this.canvas.dispatchEvent(\n      `${this.namespace}.dragStart`,\n      new Event(`${this.namespace}.dragStart`, this.canvas)\n    );\n    if (event.selectedLayers) {\n      const isFlex = event.selectedLayers.every((layer: Layer) =>\n        layer.isFlexChild()\n      );\n      this.isFlex = isFlex;\n      if (!isFlex) {\n        return next(event);\n      }\n      this.target = event.selectedLayers;\n\n      const parent: Layer = get(event.selectedLayers, '[0].parent');\n      const boundingBoxDims = this.canvas.getBoundingBox(event.selectedLayers);\n      if (parent) {\n        const parentDims = this.getMarginAdjustedBounds(parent);\n        this.saveSiblingOpacity(parent);\n        const boundingBoxDimsWRTParent = {\n          ...boundingBoxDims,\n          x: boundingBoxDims.x - parentDims.rootX,\n          y: boundingBoxDims.y - parentDims.rootY,\n        };\n        this.targetInitialDims = boundingBoxDimsWRTParent;\n        this.flexDirection = parent.layout.get('flexDirection');\n        this.setFlexLayers();\n        this.recordCurrentSnapshot(parent);\n        this.initialSnapshotData = new Map(this.currentSnapshotData);\n        this.beforeDragSnapshotData = new Map(this.currentSnapshotData);\n        this.endFlexLayerDragging(event.data);\n        this.createGhostLayer(this.targetInitialDims, parent);\n        this.startGhostDragging(event.data);\n        this.changeParentDims(parent);\n        this.changeToAbsolute(parent);\n        this.setTriggerPoints();\n      }\n    } else {\n      if (!event || !(event && event.target)) {\n        return next(event);\n      }\n      const isFlex = event.target ? event.target.isFlexChild() : false;\n      this.isFlex = isFlex;\n      if (event.target === this.ghostLayer) {\n        this.targetGhostLayer = event.target;\n      }\n      if (!isFlex) {\n        return next(event);\n      }\n      this.target = event.target;\n      this.targetInitialDims = this.getMarginAdjustedBounds(event.target);\n      const parent: Layer = event.target.parent;\n      if (parent) {\n        this.saveSiblingOpacity(parent);\n        this.flexDirection = parent.layout.get('flexDirection');\n        this.setFlexLayers();\n        this.recordCurrentSnapshot(parent);\n        this.initialSnapshotData = new Map(this.currentSnapshotData);\n        this.beforeDragSnapshotData = new Map(this.currentSnapshotData);\n        this.endFlexLayerDragging(event);\n        this.createGhostLayer(this.targetInitialDims, parent);\n        this.startGhostDragging(event);\n        this.changeParentDims(parent);\n        this.changeToAbsolute(parent);\n        this.setTriggerPoints();\n      }\n    }\n  };\n\n  layerDrag = (next: any, event: any) => {\n    if (this.disabled) return;\n    // if (!this.isFlex) {\n    //   return next(event);\n    // }\n    this.canvas.dispatchEvent(\n      `${this.namespace}.drag`,\n      new Event(`${this.namespace}.drag`, this.canvas)\n    );\n    if (this.targetGhostLayer) {\n      this.canvas.selectLayers([]);\n      this.totalDx += event.worldDx;\n      this.totalDy += event.worldDy;\n\n      let targetNewDims;\n      if (this.target instanceof Layer) {\n        targetNewDims = this.getMarginAdjustedBounds(this.target);\n      } else {\n        const boundingBoxDims = this.canvas.getBoundingBox(this.target);\n        const parentDims = this.target[0].parent\n          ? this.getMarginAdjustedBounds(this.target[0].parent)\n          : undefined;\n        if (parentDims) {\n          targetNewDims = {\n            ...boundingBoxDims,\n            x: boundingBoxDims.x - parentDims.rootX,\n            y: boundingBoxDims.y - parentDims.rootY,\n          };\n        } else {\n          targetNewDims = boundingBoxDims;\n        }\n      }\n\n      const newLeft = this.targetInitialDims.x + this.totalDx;\n      const newTop = this.targetInitialDims.y + this.totalDy;\n      this.ghostLayer.setLayout({ left: newLeft, top: newTop });\n\n      let oldCenterTargetLayer = null;\n      let newCenterTargetLayer = null;\n      if (\n        this.flexDirection === 'row' ||\n        this.flexDirection === 'row-reverse'\n      ) {\n        oldCenterTargetLayer = targetNewDims.x + targetNewDims.width / 2;\n        newCenterTargetLayer = newLeft + this.targetInitialDims.width / 2;\n      } else {\n        oldCenterTargetLayer = targetNewDims.y + targetNewDims.height / 2;\n        newCenterTargetLayer = newTop + this.targetInitialDims.height / 2;\n      }\n      this.handleSwapWRTNewPosition(oldCenterTargetLayer, newCenterTargetLayer);\n    } else {\n      next(event);\n    }\n  };\n  layerDragEnd = (next: any, event: any) => {\n    if (this.disabled) return;\n    if (this.targetGhostLayer) {\n      this.isFlex = false;\n      const parent = this.targetGhostLayer.parent;\n      this.revertSiblingOpacity();\n      if (parent) {\n        while (this.ghostLayer.children.length !== 0) {\n          this.ghostLayer.removeChild(this.ghostLayer.children[0]);\n        }\n        parent.removeChild(this.ghostLayer);\n        delete this.ghostLayer;\n        this.revertBackToSnapshot(parent, this.beforeDragSnapshotData);\n      }\n      document.body.removeChild(transitionStyle);\n      delete this.targetGhostLayer;\n      if (this.target instanceof Layer) {\n        if (\n          !isNil(this.newTargetIndex) &&\n          this.target.getIndexInParent() !== this.newTargetIndex\n        ) {\n          this.canvas.dispatchEvent(\n            'moveLayer',\n            new CommandEvent('moveLayer', this.canvas, {\n              fromParent: this.target.parent,\n              toParent: this.target.parent,\n              fromIndex: this.target.getIndexInParent(),\n              toIndex: this.newTargetIndex,\n            })\n          );\n        }\n        this.target.parent?.children.forEach((sibling: Layer) => {\n          sibling.setProp('id', undefined);\n        });\n      } else {\n        let sortedSelectedLayers = sortBy(this.target, (layer: Layer) =>\n          layer.getIndexInParent()\n        );\n\n        if (\n          !isNil(this.newTargetIndex) &&\n          sortedSelectedLayers[0].getIndexInParent() > this.newTargetIndex\n        ) {\n          sortedSelectedLayers = sortedSelectedLayers.reverse();\n        }\n        let newToSelectLayers: Array<Layer> = [];\n        if (\n          !isNil(this.newTargetIndex) &&\n          sortedSelectedLayers[0].getIndexInParent() !== this.newTargetIndex\n        ) {\n          sortedSelectedLayers.forEach((layer: Layer) => {\n            const parent = layer.parent;\n            this.canvas.dispatchEvent(\n              'moveLayer',\n              new CommandEvent('moveLayer', this.canvas, {\n                fromParent: parent,\n                toParent: parent,\n                fromIndex: layer.getIndexInParent(),\n                toIndex: this.newTargetIndex,\n              })\n            );\n            if (parent && !isNil(this.newTargetIndex))\n              newToSelectLayers.push(parent.children[this.newTargetIndex]);\n          });\n        }\n\n        if (newToSelectLayers.length)\n          this.canvas.selectLayers(newToSelectLayers);\n        else this.canvas.selectLayers(this.target);\n\n        this.target[0].parent?.children.forEach((sibling: Layer) => {\n          sibling.setProp('id', undefined);\n        });\n      }\n      this.clearFlexLayersHeightWidth();\n      this.revertParentDims();\n      delete this.newTargetIndex;\n      this.canvas.dispatchEvent(\n        `${this.namespace}.dragEnd`,\n        new Event(`${this.namespace}.dragEnd`, this.canvas)\n      );\n    } else {\n      return next(event);\n    }\n  };\n\n  deactivate() {}\n}\n","import * as React from 'react';\nexport default class Ruler extends React.PureComponent<any, any> {\n  domWidth: any;\n  domHeight: any;\n  height: any;\n  width: any;\n  ruler: any;\n  ctx: any;\n  lock: any;\n  vertical: any;\n  onLineChange: any;\n  fontScale: any;\n  bgColor: any;\n  fgColor: any;\n  fontColor: any;\n  lineColor: any;\n  shadowColor: any;\n  horLineValue: any;\n  verLineValue: any;\n  startX: any;\n  startY: any;\n  perWidth: any;\n  ratio: any;\n  shadow: any;\n  componentDidMount() {\n    this.handleResize(true);\n    window.addEventListener('resize', this.handleResize);\n  }\n  componentDidUpdate() {\n    this.handleResize(true);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize);\n  }\n  handleResize = (render: any) => {\n    const height = this.props.height;\n    const width = this.props.width;\n    this.domWidth = width;\n    this.domHeight = height;\n    this.width = width * this.props.ratio;\n    this.height = height * this.props.ratio;\n    this.ruler.width = this.width;\n    this.ruler.height = this.height;\n\n    const ctx = this.ruler.getContext('2d');\n    ctx.font = `${12 *\n      this.props.ratio}px Roboto, -apple-system, \".SFNSText-Regular\",\n      \"SF UI Text\", \"Helvetica Neue\", Arial, \"PingFang SC\",\n      \"Hiragino Sans GB\", \"Microsoft YaHei\", \"WenQuanYi Zen Hei\", sans-serif`;\n\n    ctx.lineWidth = this.props.ratio;\n    ctx.strokeStyle = '#6F727D';\n    ctx.textBaseline = 'middle';\n    this.ctx = ctx;\n\n    const { start } = this.props;\n    if (render) {\n      this.drawRuler(start, ctx);\n    }\n  };\n  drawRuler(start: any, select: any) {\n    // console.log('*** drawRuler');\n  }\n  render() {\n    return (\n      <canvas\n        style={{ pointerEvents: 'none' }}\n        className=\"ruler\"\n        ref={ref => (this.ruler = ref)}\n      />\n    );\n  }\n}\n","import Ruler from './Ruler';\n\nexport default class HorizontalRuler extends Ruler {\n  drawRuler(start: any, ctx: any) {\n    let {\n      fontColor,\n      bgColor,\n      fontScale,\n      width,\n      height,\n      ratio,\n      perWidth,\n      scale,\n      zoom,\n    } = this.props;\n    ctx.fillStyle = bgColor;\n    ctx.fillRect(0, 0, width, height);\n    ctx.translate(-start * ratio, 0);\n    ctx.beginPath();\n    ctx.fillStyle = fontColor;\n\n    const startX = start - (start % perWidth);\n    for (let i = startX; i < startX + width / ratio; i += perWidth) {\n      let tempX = ((i >> 0) + 0.5) * ratio;\n      ctx.lineWidth = 0.5;\n      ctx.moveTo(tempX, height);\n      let text: any = i / zoom;\n      text = Math.round(text / scale) * scale;\n\n      if (text % (scale * 10) === 0) {\n        ctx.save();\n        ctx.translate((i + 2) * ratio, 0);\n        ctx.scale(fontScale, fontScale);\n        ctx.fillText(text, 2 * ratio, height / 2);\n        ctx.restore();\n        ctx.lineTo(tempX, 0);\n      } else if (text % (scale * 5) === 0) {\n        ctx.lineTo(tempX, height / 2);\n      } else {\n        ctx.lineTo(tempX, (height * 2) / 3);\n      }\n      ctx.stroke();\n    }\n    ctx.closePath();\n    ctx.translate(start * ratio, 0);\n  }\n}\n","import Ruler from './Ruler';\n\nexport default class VerticalRuler extends Ruler {\n  constructor(props: any) {\n    super(props);\n    this.vertical = true;\n  }\n  drawRuler(start: any, ctx: any) {\n    const {\n      fontColor,\n      bgColor,\n      fontScale,\n      width,\n      height,\n      ratio,\n      perWidth,\n      scale,\n      zoom,\n    } = this.props;\n\n    ctx.fillStyle = bgColor;\n    ctx.fillRect(0, 0, width, height);\n    ctx.translate(0, -start * ratio);\n    ctx.beginPath();\n    ctx.fillStyle = fontColor;\n    const perHeight = perWidth;\n    const startY = start - (start % perHeight);\n    for (let i = startY; i < startY + height / ratio; i += perHeight) {\n      let tempY = ((i >> 0) + 0.5) * ratio;\n      let text: any = i / zoom;\n      text = Math.round(text / scale) * scale;\n      ctx.moveTo(width, tempY);\n      if (text % (scale * 10) === 0) {\n        ctx.save();\n        ctx.translate(width, (i - 2) * ratio);\n        ctx.rotate(-Math.PI / 2);\n        ctx.scale(fontScale, fontScale);\n        ctx.fillText(text, 2 * ratio, (-width / 3) * 2);\n        ctx.restore();\n        ctx.lineTo(0, tempY);\n      } else if (text % (scale * 5) === 0) {\n        ctx.lineTo(width / 2, tempY);\n      } else {\n        ctx.lineTo((width * 2) / 3, tempY);\n      }\n      ctx.stroke();\n    }\n    ctx.closePath();\n    ctx.translate(0, start * ratio);\n  }\n}\n","import * as React from 'react';\nimport HorizontalRuler from './components/HorizontalRuler';\nimport VerticalRuler from './components/VerticalRuler';\nimport { Canvas } from '../..';\nimport { isEmpty } from 'lodash';\n\nexport default class RulerScaleWrapper extends React.PureComponent<any, any> {\n  // TODO: move it to somewhere else\n  getPixelRatio() {\n    var context: any = document.createElement('canvas').getContext('2d');\n    var backingStore = 1;\n\n    if (context) {\n      backingStore =\n        context.backingStorePixelRatio ||\n        context.webkitBackingStorePixelRatio ||\n        context.mozBackingStorePixelRatio ||\n        context.msBackingStorePixelRatio ||\n        context.oBackingStorePixelRatio ||\n        context.backingStorePixelRatio ||\n        1;\n    }\n    return (window.devicePixelRatio || 1) / backingStore;\n  }\n  render() {\n    const { horLineArr, verLineArr, shadow } = this.props;\n    const canvas: Canvas = this.props.canvas;\n    const { x, y, width, height } = shadow;\n    const props = {\n      perWidth: this.props.perWidth,\n      scale: this.props.scale,\n      zoom: this.props.zoom,\n      fontScale: 0.83,\n      ratio: 1,\n      bgColor: this.props.bgColor,\n      fgColor: this.props.fgColor,\n      fontColor: this.props.fontColor,\n      shadowColor: this.props.shadowColor,\n    };\n    return (\n      <div>\n        <div\n          className=\"hor-ruler\"\n          onContextMenu={this.props.onContextMenu}\n          style={{ cursor: 'row-resize', pointerEvents: 'auto' }}\n          draggable\n          onDragStart={this.props.onDragStartHorizontal}\n          onDrag={this.props.onDragHorizontal}\n          onDragEnd={this.props.onDragEndHorizontal}\n        >\n          <HorizontalRuler\n            start={-this.props.initialPoint.x}\n            lines={horLineArr}\n            select={{ x, width }}\n            height={20}\n            width={canvas.getViewport().width}\n            {...props}\n          />\n        </div>\n        <div\n          className=\"ver-ruler\"\n          style={{\n            position: 'absolute',\n            marginTop: -24,\n            cursor: 'col-resize',\n            pointerEvents: 'auto',\n          }}\n          draggable\n          onDragStart={this.props.onDragStartVertical}\n          onDrag={this.props.onDragVertical}\n          onDragEnd={this.props.onDragEndVertical}\n          onContextMenu={this.props.onContextMenu}\n        >\n          <VerticalRuler\n            start={-this.props.initialPoint.y}\n            lines={verLineArr}\n            select={{ y, height }}\n            height={canvas.getViewport().height}\n            width={20}\n            {...props}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Canvas, IPlugin } from '../..';\nimport RulerScaleWrapper from './RulerScaleWrapper';\n\nexport default class RulerScalePlugin implements IPlugin {\n  name = 'RulerScalePlugin';\n  canvas!: Canvas;\n  dispose: any;\n  show!: boolean;\n  wrapperLayer: any;\n  selectedLineIndex: any;\n  ghostImageDOM?: any;\n  initialPoint: { x: number; y: number } = { x: 0, y: 0 };\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n    this.show = true;\n  }\n  showRulers() {\n    this.show = true;\n    this.renderScale();\n    this.wrapperLayer.style.display = '';\n  }\n  hideRulers() {\n    this.show = false;\n    this.wrapperLayer.style.display = 'none';\n    ReactDOM.unmountComponentAtNode(this.wrapperLayer);\n  }\n  setInitialPoint(context: any, point: { x: number; y: number }) {\n    this.initialPoint = point;\n    if (this.show) {\n      this.renderScale();\n    }\n  }\n  handleGhostImage(e: any) {\n    var crt = e.target.cloneNode(true);\n    crt.style.backgroundColor = 'red';\n    crt.style.opacity = 0;\n    crt.style.pointerEvents = 'none';\n    document.body.appendChild(crt);\n    this.ghostImageDOM = crt;\n    e.dataTransfer.setDragImage(crt, 0, 0);\n  }\n\n  disposeGhostImage() {\n    if (this.ghostImageDOM) this.ghostImageDOM.remove();\n  }\n  calculateScaleFromZoom(zoom: number) {\n    let scale = 1;\n    if (zoom <= 0.01) {\n      scale = 1000;\n    } else if (zoom <= 0.03) {\n      scale = 500;\n    } else if (zoom <= 0.06) {\n      scale = 200;\n    } else if (zoom <= 0.12) {\n      scale = 100;\n    } else if (zoom <= 0.25) {\n      scale = 50;\n    } else if (zoom > 0.25 && zoom <= 0.5) {\n      scale = 20;\n    } else if (zoom > 0.5 && zoom <= 1) {\n      scale = 10;\n    } else if (zoom > 1 && zoom <= 2) {\n      scale = 5;\n    } else if (zoom > 2 && zoom <= 4) {\n      scale = 2;\n    }\n    return scale;\n  }\n  onDragStartHorizontal = (e: any) => {\n    this.handleGhostImage(e);\n    const dims = {\n      x: 0,\n      y: 19,\n      height: 1,\n      width: 1000,\n      rotation: 0,\n    };\n    this.canvas.executeFunction('HtmlDragToWorld.dragStart', e, dims);\n    this.selectedLineIndex = this.canvas.executeFunction(\n      'RulerLines.addLine',\n      'x',\n      19\n    );\n  };\n  onDragEndHorizontal = (e: any) => {\n    this.disposeGhostImage();\n    e.preventDefault();\n    let dragVal = this.canvas.executeFunction('HtmlDragToWorld.dragEnd', e);\n    this.canvas.executeFunction(\n      'RulerLines.setPosition',\n      dragVal.session.current.y,\n      this.selectedLineIndex\n    );\n    this.selectedLineIndex = undefined;\n  };\n  onDragHorizontal = (e: any) => {\n    if (e.pageX && e.pageY) {\n      let dragVal = this.canvas.executeFunction('HtmlDragToWorld.drag', e);\n      if (\n        dragVal.session.current.deltaX !== 0 ||\n        dragVal.session.current.deltaY !== 0\n      ) {\n        if (dragVal.session.current.y > 18) {\n          this.canvas.executeFunction(\n            'RulerLines.setPosition',\n            dragVal.session.current.y,\n            this.selectedLineIndex\n          );\n        }\n      }\n    }\n  };\n  onDragStartVertical = (e: any) => {\n    this.handleGhostImage(e);\n    const dims = {\n      x: 19,\n      y: 0,\n      height: 1000,\n      width: 1,\n      rotation: 0,\n    };\n    this.canvas.executeFunction('HtmlDragToWorld.dragStart', e, dims);\n    this.selectedLineIndex = this.canvas.executeFunction(\n      'RulerLines.addLine',\n      'y',\n      19\n    );\n  };\n  onDragEndVertical = (e: any) => {\n    this.disposeGhostImage();\n    e.preventDefault();\n    let dragVal = this.canvas.executeFunction('HtmlDragToWorld.dragEnd', e);\n    this.canvas.executeFunction(\n      'RulerLines.setPosition',\n      dragVal.session.current.x,\n      this.selectedLineIndex\n    );\n    this.selectedLineIndex = undefined;\n  };\n  onDragVertical = (e: any) => {\n    if (e.pageX && e.pageY) {\n      let dragVal = this.canvas.executeFunction('HtmlDragToWorld.drag', e);\n      if (\n        dragVal.session.current.deltaX !== 0 ||\n        dragVal.session.current.deltaY !== 0\n      ) {\n        if (dragVal.session.current.x > 18) {\n          this.canvas.executeFunction(\n            'RulerLines.setPosition',\n            dragVal.session.current.x,\n            this.selectedLineIndex\n          );\n        }\n      }\n    }\n  };\n  renderScale() {\n    let zoom: any = this.canvas.getZoom();\n    let scale = this.calculateScaleFromZoom(zoom);\n    let perWidth = scale * zoom;\n    ReactDOM.render(\n      <RulerScaleWrapper\n        canvas={this.canvas}\n        initialPoint={this.initialPoint}\n        thick={0.5}\n        perWidth={perWidth}\n        zoom={zoom}\n        scale={scale}\n        horLineArr={[1, 1]}\n        verLineArr={[1, 1]}\n        bgColor={'#252a31'}\n        fgColor={'#6F727D'}\n        fontColor={'#6F727D'}\n        lineColor={'#FF0000'}\n        shadowColor={'#6F727D'}\n        horLineValue={[100, 200]}\n        verLineValue={[100, 200]}\n        shadow={{\n          x: 200,\n          y: 100,\n          width: 100,\n          height: 400,\n        }}\n        onDragStartHorizontal={this.onDragStartHorizontal}\n        onDragEndHorizontal={this.onDragEndHorizontal}\n        onDragHorizontal={this.onDragHorizontal}\n        onDragStartVertical={this.onDragStartVertical}\n        onDragEndVertical={this.onDragEndVertical}\n        onDragVertical={this.onDragVertical}\n        // onContextMenu={this.props.onContextMenu}\n      />,\n      this.wrapperLayer\n    );\n  }\n  activate() {\n    if (this.show) {\n      this.wrapperLayer = document.createElement('div');\n      this.dispose = this.canvas.addDomToViewport(this.wrapperLayer);\n      this.wrapperLayer.style.position = 'absolute';\n      this.wrapperLayer.style.top = '0px';\n      this.wrapperLayer.style.left = '0px';\n      this.wrapperLayer.style.bottom = '0px';\n      this.wrapperLayer.style.right = '0px';\n      this.wrapperLayer.style.display = this.show ? '' : 'none';\n      this.wrapperLayer.id = 'ruler-wrapper';\n      this.wrapperLayer.style.zIndex = '1';\n      this.wrapperLayer.style.pointerEvents = 'none';\n      if (this.show) {\n        this.renderScale();\n      }\n      this.canvas.on('zoom', () => {\n        if (this.show) {\n          this.renderScale();\n        }\n      });\n    }\n    this.canvas.addFunction(\n      'RulerScale.setInitialPoint',\n      this.setInitialPoint.bind(this)\n    );\n    this.canvas.addFunction('RulerScale.show', this.showRulers.bind(this));\n    this.canvas.addFunction('RulerScale.hide', this.hideRulers.bind(this));\n  }\n\n  deactivate() {\n    this.dispose();\n    this.canvas.removeFunction('RulerScale.setInitialPoint');\n    this.canvas.removeFunction('RulerScale.show');\n    this.canvas.removeFunction('RulerScale.hide');\n  }\n}\n","import { Layer, Event } from '../../..';\n\nexport default class RulerLinesAddEvent extends Event {\n  axis: 'x' | 'y';\n  axisCoordinate: number;\n  constructor(\n    name: string,\n    target: Layer,\n    axis: 'x' | 'y',\n    axisCoordinate: number,\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    this.axisCoordinate = axisCoordinate;\n    this.axis = axis;\n  }\n}\n","import { Layer, Event } from '../../..';\n\nexport default class RulerLinesSetPositionEvent extends Event {\n  axis: 'x' | 'y';\n  axisCoordinate: number;\n  index?: number;\n  constructor(\n    name: string,\n    target: Layer,\n    axis: 'x' | 'y',\n    axisCoordinate: number,\n    index?: number,\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    this.axisCoordinate = axisCoordinate;\n    this.axis = axis;\n    this.index = index;\n  }\n}\n","import { Layer, Event } from '../../..';\n\nexport default class RulerLinesRemoveEvent extends Event {\n  index: number;\n  constructor(\n    name: string,\n    target: Layer,\n    index: number,\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    this.index = index;\n  }\n}\n","import { Canvas, IPlugin, IContext } from '../..';\nimport { LineDrawerDragEvent } from '../LineDrawer/events';\nimport { isNil, findIndex } from 'lodash';\nimport RulerLinesAddEvent from './events/RulerLinesAddEvent';\nimport RulerLinesSetPositionEvent from './events/RulerLinesSetPositionEvent';\nimport RulerLinesRemoveEvent from './events/RulerLinesRemoveEvent';\nimport IRulerLine from './interfaces/IRulerLine';\n\nexport default class RulerLinesPlugin implements IPlugin {\n  name = 'RulerLinesPlugin';\n  canvas!: Canvas;\n  lines: Array<IRulerLine> = [];\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.lines = [];\n  }\n\n  addLine = (\n    context: IContext,\n    axis: 'x' | 'y',\n    axisCoordinate: number,\n    noEmit: boolean = false\n  ) => {\n    const lineWrapper = this.canvas.executeFunction(\n      'drawLine',\n      axis,\n      axisCoordinate,\n      'rulerHorizontalLine',\n      0,\n      null,\n      true\n    );\n    this.lines.push({ axis, axisCoordinate, dom: lineWrapper });\n    if (!noEmit)\n      this.canvas.dispatchEvent(\n        'RulerLines.add',\n        new RulerLinesAddEvent(\n          'RulerLines.add',\n          lineWrapper,\n          axis,\n          axisCoordinate\n        )\n      );\n    this.canvas.addEventListener(\n      'LineDrawer.dragStart',\n      (data: LineDrawerDragEvent) => {\n        const deltaInput = {\n          x: data.session.current.x,\n          y: data.session.current.y,\n        };\n        const target = data.originalEvent.originalEvent.target;\n        const index = findIndex(this.lines, function(o) {\n          return o.dom == target;\n        });\n        this.setPosition(\n          { layer: target, canvas: this.canvas },\n          data.axis == 'y' ? deltaInput.x : deltaInput.y,\n          index\n        );\n      }\n    );\n    this.canvas.addEventListener(\n      'LineDrawer.onDrag',\n      (data: LineDrawerDragEvent) => {\n        const deltaInput = {\n          x: data.session.current.x,\n          y: data.session.current.y,\n        };\n        const target = data.originalEvent.originalEvent.target;\n        const index = findIndex(this.lines, function(o) {\n          return o.dom == target;\n        });\n        this.setPosition(\n          { layer: target, canvas: this.canvas },\n          data.axis == 'y' ? deltaInput.x : deltaInput.y,\n          index\n        );\n      }\n    );\n    this.canvas.addEventListener(\n      'LineDrawer.dragEnd',\n      (data: LineDrawerDragEvent) => {\n        const deltaInput = {\n          x: data.session.current.x,\n          y: data.session.current.y,\n        };\n        const target = data.originalEvent.originalEvent.target;\n        const index = findIndex(this.lines, function(o) {\n          return o.dom == target;\n        });\n        this.setPosition(\n          { layer: target, canvas: this.canvas },\n          data.axis == 'y' ? deltaInput.x : deltaInput.y,\n          index,\n          true\n        );\n      }\n    );\n    return this.lines.length - 1;\n  };\n\n  removeLine = (context: IContext, index: number) => {\n    const { dom } = this.lines[index];\n    if (dom && dom.parentNode) {\n      dom.parentNode.removeChild(dom);\n      this.canvas.removeDomFromWorld(dom);\n      this.lines.splice(index, 1);\n      this.canvas.dispatchEvent(\n        'RulerLines.remove',\n        new RulerLinesRemoveEvent('RulerLines.remove', this.canvas, index)\n      );\n    }\n  };\n\n  setPosition = (\n    context: IContext,\n    axisCoordinate: number,\n    index?: number,\n    dragEnd?: boolean\n  ) => {\n    let indexOfLayer;\n    if (isNil(index)) {\n      indexOfLayer = this.lines.length - 1;\n    } else {\n      indexOfLayer = index;\n    }\n    const line = this.lines[indexOfLayer];\n    if (line) {\n      const { dom, axis } = line;\n      if (axis == 'y') {\n        dom.style.left = axisCoordinate + 'px';\n      } else {\n        dom.style.top = axisCoordinate + 'px';\n      }\n      this.lines[indexOfLayer] = { axis, axisCoordinate, dom };\n      this.canvas.dispatchEvent(\n        'RulerLines.setPosition',\n        new RulerLinesSetPositionEvent(\n          'RulerLines.setPosition',\n          this.canvas,\n          axis,\n          axisCoordinate,\n          indexOfLayer\n        )\n      );\n\n      if (dragEnd) {\n        let axisPoint = {\n          x: axis == 'y' ? axisCoordinate : 0,\n          y: axis == 'x' ? axisCoordinate : 0,\n        };\n        let viewportPoint = this.canvas.convertPoint(\n          axisPoint,\n          'world',\n          'viewport'\n        );\n        let viewportAxisCoordinate =\n          axis === 'y' ? viewportPoint.x : viewportPoint.y;\n        if (viewportAxisCoordinate < 18) {\n          this.removeLine(\n            { layer: this.canvas, canvas: this.canvas },\n            indexOfLayer\n          );\n        }\n      }\n    }\n  };\n\n  removeAll = (context: IContext) => {\n    this.lines.forEach((line: any) => {\n      const dom = line.dom;\n      if (dom) {\n        dom.remove();\n        this.canvas.removeDomFromWorld(dom);\n      }\n    });\n    this.lines = [];\n  };\n\n  addAll = (\n    context: IContext,\n    data: [{ axis: 'x' | 'y'; axisCoordinate: number }],\n    emit: boolean = true\n  ) => {\n    data.forEach((line: { axis: 'x' | 'y'; axisCoordinate: number }) => {\n      this.addLine(\n        { layer: this.canvas, canvas: this.canvas },\n        line.axis,\n        line.axisCoordinate,\n        emit\n      );\n    });\n  };\n\n  show = (context: IContext) => {\n    this.lines.forEach((line: any) => {\n      const dom = line.dom;\n      if (dom) {\n        dom.style.display = '';\n      }\n    });\n  };\n\n  hide = (context: IContext) => {\n    this.lines.forEach((line: any) => {\n      const dom = line.dom;\n      if (dom) {\n        dom.style.display = 'none';\n      }\n    });\n  };\n\n  getLineCoordinates = (context: IContext) => {\n    let coordinates: { x: Array<number>; y: Array<number> } = {\n      x: [],\n      y: [],\n    };\n\n    if (this.lines && this.lines.length > 0) {\n      if (this.lines[0].dom.style.display !== 'none') {\n        for (let line of this.lines) {\n          if (line.axis === 'x') {\n            coordinates.x.push(line.axisCoordinate);\n          } else {\n            coordinates.y.push(line.axisCoordinate);\n          }\n        }\n      }\n    }\n\n    return coordinates;\n  };\n\n  activate() {\n    this.canvas.addFunction('RulerLines.addLine', this.addLine);\n    this.canvas.addFunction('RulerLines.removeLine', this.removeLine);\n    this.canvas.addFunction('RulerLines.setPosition', this.setPosition);\n    this.canvas.addFunction('RulerLines.removeAll', this.removeAll);\n    this.canvas.addFunction('RulerLines.addAll', this.addAll);\n    this.canvas.addFunction('RulerLines.show', this.show);\n    this.canvas.addFunction('RulerLines.hide', this.hide);\n    this.canvas.addFunction(\n      'RulerLines.getLineCoordinates',\n      this.getLineCoordinates\n    );\n  }\n\n  deactivate() {\n    this.canvas.removeFunction('RulerLines.addLine');\n    this.canvas.removeFunction('RulerLines.removeLine');\n    this.canvas.removeFunction('RulerLines.setPosition');\n    this.canvas.removeFunction('RulerLines.removeAll');\n    this.canvas.removeFunction('RulerLines.addAll');\n    this.canvas.removeFunction('RulerLines.show');\n    this.canvas.removeFunction('RulerLines.hide');\n    this.canvas.removeFunction('RulerLines.getLineCoordinates');\n  }\n}\n","import { Layer } from '../../models/Layer';\nimport ISnapPoints from './interfaces/ISnapPoints';\nimport drawLineForAxis from './drawLineForAxis';\nimport { Canvas } from 'models/Canvas';\nimport ModelUtils from '../../models/utils';\nimport { get, forEach } from 'lodash';\n\nexport default function drawLinesForSnap(\n  canvas: Canvas,\n  layer: Layer,\n  boundingBox: any,\n  meta?: any,\n  className?: string\n) {\n  if (!className) {\n    className = 'snap-lines';\n  }\n\n  let parent = layer.parent ? layer.parent : meta && meta.parent;\n  if (!parent) {\n    return;\n  }\n\n  // // @ts-ignore\n  let snapLinesX = document.querySelectorAll('.' + className + '-x');\n  let snapLinesY = document.querySelectorAll('.' + className + '-y');\n  // @ts-ignore\n  for (let snapLine of snapLinesX) {\n    snapLine.style.visibility = 'hidden';\n  }\n  // @ts-ignore\n  for (let snapLine of snapLinesY) {\n    snapLine.style.visibility = 'hidden';\n  }\n\n  if (\n    !isNaN(get(meta, 'snappedSide.x.snappedSide.snappedPoint.rootValue', NaN))\n  ) {\n    let point = meta.snappedSide.x.snappedSide.snappedPoint.rootValue;\n    if (\n      ModelUtils.pointsOverlap(point, boundingBox.x) ||\n      ModelUtils.pointsOverlap(point, boundingBox.width / 2 + boundingBox.x) ||\n      ModelUtils.pointsOverlap(point, boundingBox.width + boundingBox.x)\n    ) {\n      // TODO: remove using architecture instead of DOM\n      let snapLines = document.querySelectorAll('.' + className + '-y');\n      // @ts-ignore\n      for (let snapLine of snapLines) {\n        snapLine.style.visibility = 'visible';\n        snapLine.style.left = point + 'px';\n\n        const parentAbsoluteRotation = parent.getAbsoluteRotation();\n        const parentDims = parent.getRotatedPolygon();\n        let offset = Math.max(boundingBox.width, boundingBox.height);\n        snapLine.style.transform = `rotate(${parentAbsoluteRotation}deg)`;\n        snapLine.style.transformOrigin = `${parentDims.centroid[0] -\n          point}px ${parentDims.centroid[1] + offset}px`;\n      }\n    }\n  }\n\n  if (\n    !isNaN(get(meta, 'snappedSide.y.snappedSide.snappedPoint.rootValue', NaN))\n  ) {\n    let point = meta.snappedSide.y.snappedSide.snappedPoint.rootValue;\n    // jugaad: cheking if bounding box is touches snap line\n\n    if (\n      ModelUtils.pointsOverlap(point, boundingBox.y) ||\n      ModelUtils.pointsOverlap(point, boundingBox.height / 2 + boundingBox.y) ||\n      ModelUtils.pointsOverlap(point, boundingBox.height + boundingBox.y)\n    ) {\n      let snapLines = document.querySelectorAll('.' + className + '-x');\n      // @ts-ignore\n      for (let snapLine of snapLines) {\n        snapLine.style.visibility = 'visible';\n        snapLine.style.top = point + 'px';\n\n        // transform changes\n        const parentAbsoluteRotation = parent.getAbsoluteRotation();\n        const parentDims = parent.getRotatedPolygon();\n        let offset = Math.max(boundingBox.width, boundingBox.height);\n        snapLine.style.transform = `rotate(${parentAbsoluteRotation}deg)`;\n        snapLine.style.transformOrigin = `${parentDims.centroid[0] +\n          offset}px ${parentDims.centroid[1] - point}px`;\n      }\n    }\n  }\n}\n\nfunction drawLine(\n  canvas: any,\n  layer: any,\n  point: any,\n  boundingBox: any,\n  axis: 'x' | 'y',\n  meta?: any,\n  className?: string\n) {\n  let parent = layer.parent ? layer.parent : meta && meta.parent;\n\n  if (!parent) {\n    return;\n  }\n  const parentAbsoluteRotation = parent.getAbsoluteRotation();\n  const parentDims = parent.getRotatedPolygon();\n  let offset = Math.max(boundingBox.width, boundingBox.height);\n\n  const value = point;\n  let extraStyle: any = {\n    // visibility: 'hidden',\n  };\n  if (axis === 'y') {\n    extraStyle = {\n      ...extraStyle,\n      transform: `rotate(${parentAbsoluteRotation}deg)`,\n      transformOrigin: `${parentDims.centroid[0] - value}px ${parentDims\n        .centroid[1] + offset}px`,\n    };\n  } else {\n    extraStyle = {\n      ...extraStyle,\n      transform: `rotate(${parentAbsoluteRotation}deg)`,\n      transformOrigin: `${parentDims.centroid[0] + offset}px ${parentDims\n        .centroid[1] - value}px`,\n    };\n  }\n\n  canvas.executeFunction(\n    'drawLine',\n    axis,\n    value,\n    className + '-' + axis,\n    -offset,\n    undefined,\n    undefined,\n    undefined,\n    extraStyle\n  );\n}\nexport function drawAllLinesForSnap(\n  canvas: Canvas,\n  layer: Layer,\n  boundingBox: any,\n  snapLines: any,\n  className: string = 'snap-lines',\n  meta?: any\n) {\n  drawLine(canvas, layer, -100, boundingBox, 'y', meta, className);\n  drawLine(canvas, layer, -100, boundingBox, 'x', meta, className);\n}\n","import { IPlugin } from '../../interfaces/IPlugin';\nimport { Canvas } from '../../models/Canvas';\nimport LayerDragEvent from '../../plugins/LayerDrag/LayerDragEvent';\nimport ISnapPoints from './interfaces/ISnapPoints';\nimport drawLinesForSnap, { drawAllLinesForSnap } from './drawLinesForSnap';\nimport Config from './interfaces/Config';\nimport drawLinesForGutterSnap from './drawLinesForGutterSnap';\nimport { Layer } from '../../models/Layer';\nimport StageDesignerDrawEvent from 'plugins/StageDesignerDrawComponent/events/stageDesignerDrawEvent';\n\nexport default class SnapLines implements IPlugin {\n  name = 'SnapLines';\n  canvas!: Canvas;\n\n  layer: Layer | undefined;\n  layerParent: Layer | null | undefined;\n\n  parentSnapPoints: ISnapPoints | undefined;\n  siblingSnapPoints: ISnapPoints | undefined;\n  gutterSnapPoints: ISnapPoints | undefined;\n\n  config: Config | undefined;\n\n  removeElementsWithClass(name: string) {\n    let snapLinesX = document.querySelectorAll('.' + name + '-x');\n    // TODO: remove using architecture instead of DOM\n    // @ts-ignore\n    for (let snapLine of snapLinesX) {\n      snapLine.remove();\n      this.canvas.removeDomFromWorld(snapLine);\n    }\n\n    let snapLinesY = document.querySelectorAll('.' + name + '-y');\n    // TODO: remove using architecture instead of DOM\n    // @ts-ignore\n    for (let snapLine of snapLinesY) {\n      snapLine.remove();\n      this.canvas.removeDomFromWorld(snapLine);\n    }\n  }\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  dragStartListener(data: LayerDragEvent, className: string = 'snap-lines') {\n    this.removeElementsWithClass(className);\n    let boundingBox = this.canvas.getContainerBoundingBoxWRTParent([\n      data.target,\n    ]);\n    drawAllLinesForSnap(\n      this.canvas,\n      data.target,\n      boundingBox,\n      data.snapPoints,\n      className,\n      data.meta\n    );\n  }\n  dragListener(data: LayerDragEvent, className: string = 'snap-lines') {\n    // this.removeElementsWithClass(className);\n\n    let boundingBox = this.canvas.getContainerBoundingBoxWRTParent([\n      data.target,\n    ]);\n    if (data.target.parent) {\n      boundingBox = {\n        ...boundingBox,\n        x: boundingBox.x + data.target.parent.rootX,\n        y: boundingBox.y + data.target.parent.rootY,\n      };\n    }\n    if (data.target) {\n      drawLinesForSnap(\n        this.canvas,\n        data.target,\n        boundingBox,\n        data.meta,\n        className\n      );\n    }\n  }\n\n  dragListenerDraw(\n    data: StageDesignerDrawEvent,\n    className: string = 'snap-lines'\n  ) {\n    // this.removeElementsWithClass(className);\n\n    const boundingBox = {\n      x: data.worldX,\n      y: data.worldY,\n      width: data.dimensions.width,\n      height: data.dimensions.height,\n    };\n    if (data.target) {\n      drawLinesForSnap(\n        this.canvas,\n        data.target,\n        boundingBox,\n        data.meta,\n        className\n      );\n    }\n  }\n\n  dragListenerResizer(data: LayerDragEvent, className: string = 'snap-lines') {\n    // this.removeElementsWithClass(className);\n    let boundingBox = this.canvas.getContainerBoundingBoxWRTParent(\n      this.canvas.selectedLayers\n    );\n    if (this.canvas.selectedLayers[0].parent) {\n      boundingBox = {\n        ...boundingBox,\n        x: boundingBox.x + this.canvas.selectedLayers[0].parent.rootX,\n        y: boundingBox.y + this.canvas.selectedLayers[0].parent.rootY,\n      };\n    }\n    if (data.target) {\n      drawLinesForSnap(\n        this.canvas,\n        data.target,\n        boundingBox,\n        data.meta,\n        className\n      );\n    }\n  }\n\n  drawComponentMouseMoveListener(\n    data: LayerDragEvent,\n    className: string = 'snap-lines'\n  ) {\n    // this.removeElementsWithClass(className);\n\n    const boundingBox = {\n      x: data.worldX,\n      y: data.worldY,\n      width: 0,\n      height: 0,\n    };\n\n    if (data.target) {\n      drawLinesForSnap(\n        this.canvas,\n        data.target,\n        boundingBox,\n        data.meta,\n        className\n      );\n    }\n  }\n\n  activate() {\n    // layer drag listener\n\n    this.canvas.addEventListener('layerDragStart', (data: LayerDragEvent) => {\n      this.dragStartListener(data);\n    });\n\n    this.canvas.addEventListener('layerDrag', (data: LayerDragEvent) => {\n      this.dragListener(data);\n    });\n\n    this.canvas.addEventListener('layerDragEnd', (data: LayerDragEvent) => {\n      this.removeElementsWithClass('snap-lines');\n    });\n\n    // resizer listener\n    this.canvas.addEventListener(\n      'LayerResizer.dragStart',\n      (data: LayerDragEvent) => {\n        this.dragStartListener(data);\n      }\n    );\n\n    this.canvas.addEventListener(\n      'LayerResizer.drag',\n      (data: LayerDragEvent) => {\n        this.dragListenerResizer(data);\n      }\n    );\n\n    this.canvas.addEventListener(\n      'LayerResizer.dragEnd',\n      (data: LayerDragEvent) => {\n        this.removeElementsWithClass('snap-lines');\n      }\n    );\n\n    // resizer handle drag listener\n    this.canvas.addEventListener(\n      'LayerResizer.handleDragStart',\n      (data: LayerDragEvent) => {\n        this.dragStartListener(data);\n      }\n    );\n    this.canvas.addEventListener(\n      'LayerResizer.handleDrag',\n      (data: LayerDragEvent) => {\n        this.dragListenerResizer(data);\n      }\n    );\n\n    this.canvas.addEventListener(\n      'LayerResizer.handleDragEnd',\n      (data: LayerDragEvent) => {\n        this.removeElementsWithClass('snap-lines');\n      }\n    );\n\n    /// draw component listener\n    this.canvas.addEventListener(\n      'StageDesignerDrawComponent.drawShape',\n      (data: LayerDragEvent) => {\n        this.dragStartListener(data, 'snap-lines-draw');\n      }\n    );\n    this.canvas.addEventListener(\n      'StageDesignerDrawComponent.mousemove',\n      (data: LayerDragEvent) => {\n        this.drawComponentMouseMoveListener(data, 'snap-lines-draw');\n      }\n    );\n\n    // resizer listener\n    this.canvas.addEventListener(\n      'StageDesignerDrawComponent.drawStart',\n      (data: LayerDragEvent) => {\n        this.dragStartListener(data);\n      }\n    );\n\n    this.canvas.addEventListener(\n      'StageDesignerDrawComponent.draw',\n      (data: StageDesignerDrawEvent) => {\n        this.dragListenerDraw(data);\n      }\n    );\n\n    this.canvas.addEventListener(\n      'StageDesignerDrawComponent.drawEnd',\n      (data: LayerDragEvent) => {\n        this.removeElementsWithClass('snap-lines');\n        this.removeElementsWithClass('snap-lines-draw');\n      }\n    );\n  }\n\n  deactivate() {}\n}\n","import { Layer, MouseEvent } from '../../..';\nimport { IPosition, IDimensionWithRotation } from 'interfaces';\n\nexport class LineDrawerDragEvent extends MouseEvent {\n  startValues: IDimensionWithRotation;\n  session: {\n    start: IPosition;\n    current: IPosition;\n    end: IPosition;\n  };\n  axis?: 'x' | 'y';\n  constructor(\n    name: string,\n    startValues: IDimensionWithRotation,\n    session: { start: IPosition; current: IPosition; end: IPosition },\n    originalEvent: any,\n    target: Layer,\n    currentTarget?: Layer,\n    axis?: 'x' | 'y'\n  ) {\n    super(name, target, originalEvent, currentTarget);\n    this.session = session;\n    this.startValues = startValues;\n    this.axis = axis;\n  }\n}\n","import { IPlugin, IContext } from 'interfaces';\nimport { Canvas } from 'models/Canvas';\nimport { LineDrawerDragEvent } from './events';\n\nexport default class LineDrawer implements IPlugin {\n  name = 'LineDrawer';\n  canvas!: Canvas;\n  namespace = 'LineDrawer';\n  ghostImageDOM?: any;\n  dispose: any;\n  handleGhostImage(e: any) {\n    var crt = e.target.cloneNode(true);\n    crt.style.backgroundColor = 'red';\n    crt.style.opacity = 0;\n    crt.style.pointerEvents = 'none';\n    document.body.appendChild(crt);\n    this.ghostImageDOM = crt;\n    e.dataTransfer.setDragImage(crt, 0, 0);\n  }\n\n  disposeGhostImage() {\n    if (this.ghostImageDOM) this.ghostImageDOM.remove();\n  }\n\n  drawLine(\n    context: IContext,\n    axis: 'x' | 'y',\n    axisCoordinate: number,\n    className: string | null,\n    startCoordinate?: number,\n    endCoordinate?: number,\n    draggable?: boolean,\n    label?: string,\n    style: any = {}\n  ): HTMLDivElement {\n    const lineWrappedLayer = document.createElement('div');\n    this.dispose = this.canvas.addDomToWorld(lineWrappedLayer, true, 103);\n    let zoom = this.canvas.getZoom();\n    let lineWidth = 1 / zoom;\n    let lineWrapperDim = 8 / zoom;\n    let line = document.createElement('div');\n    this.canvas.on('zoom', (e: any) => {\n      zoom = this.canvas.getZoom();\n      lineWidth = 1 / zoom;\n      lineWrapperDim = 8 / zoom;\n      if (line && lineWrappedLayer) {\n        if (axis === 'x') {\n          line.style.height = lineWidth + 'px';\n          lineWrappedLayer.style.height = `${lineWrapperDim}px`;\n        } else {\n          lineWrappedLayer.style.width = `${lineWrapperDim}px`;\n          line.style.width = lineWidth + 'px';\n        }\n      }\n    });\n    if (className) {\n      lineWrappedLayer.className = className;\n    }\n\n    let labelBox;\n    let boxWidth = 30;\n    let boxHeight = 15;\n    let fontSize = 10;\n    let labelSpacing = 10;\n    let length;\n\n    startCoordinate = startCoordinate ? startCoordinate : 0;\n\n    line.style.position = 'absolute';\n    lineWrappedLayer.style.position = 'absolute';\n    line.style.backgroundColor = '#22b9d1';\n    lineWrappedLayer.style.pointerEvents = 'none';\n\n    lineWrappedLayer.style.transform = style.transform;\n    lineWrappedLayer.style.transformOrigin = style.transformOrigin;\n    lineWrappedLayer.style.visibility = style.visibility;\n\n    const lineLength = Math.max(\n      this.canvas.getBoundingClientRect().width,\n      this.canvas.getBoundingClientRect().height\n    );\n\n    if (draggable) {\n      lineWrappedLayer.style.pointerEvents = 'auto';\n      lineWrappedLayer.draggable = true;\n      let x, y;\n\n      if (axis == 'x') {\n        endCoordinate = endCoordinate ? endCoordinate : lineLength;\n        x = Math.min(startCoordinate, endCoordinate);\n        y = axisCoordinate;\n        lineWrappedLayer.onmouseover = (e: any) => {\n          if (!this.canvas.executeFunction('LayerDrag.isDragging'))\n            this.canvas.setMouseCursor('row-resize');\n        };\n      } else {\n        endCoordinate = endCoordinate ? endCoordinate : lineLength;\n        y = Math.min(startCoordinate, endCoordinate);\n        x = axisCoordinate;\n        lineWrappedLayer.onmouseover = (e: any) => {\n          if (!this.canvas.executeFunction('LayerDrag.isDragging'))\n            this.canvas.setMouseCursor('col-resize');\n        };\n      }\n      lineWrappedLayer.onmouseleave = (e: any) => {\n        this.canvas.setMouseCursor('default');\n      };\n      const dims = {\n        x,\n        y,\n        height: lineWidth,\n        width: Math.abs(startCoordinate - endCoordinate),\n        rotation: 0,\n      };\n      lineWrappedLayer.ondragstart = e => {\n        this.handleGhostImage(e);\n        let dragVal = this.canvas.executeFunction(\n          'HtmlDragToWorld.dragStart',\n          e,\n          dims\n        );\n        this.canvas.dispatchEvent(\n          `${this.namespace}.dragStart`,\n          new LineDrawerDragEvent(\n            `${this.namespace}.dragStart`,\n            dragVal.startValues,\n            dragVal.session,\n            dragVal.event,\n            this.canvas,\n            undefined,\n            axis\n          )\n        );\n      };\n      lineWrappedLayer.ondrag = e => {\n        if (e.pageX && e.pageY) {\n          let dragVal = this.canvas.executeFunction('HtmlDragToWorld.drag', e);\n          if (\n            dragVal.session.current.deltaX !== 0 ||\n            dragVal.session.current.deltaY !== 0\n          ) {\n            this.canvas.dispatchEvent(\n              `${this.namespace}.onDrag`,\n              new LineDrawerDragEvent(\n                `${this.namespace}.onDrag`,\n                dragVal.startValues,\n                dragVal.session,\n                dragVal.event,\n                this.canvas,\n                undefined,\n                axis\n              )\n            );\n          }\n        }\n      };\n      lineWrappedLayer.ondragend = e => {\n        this.disposeGhostImage();\n        e.preventDefault();\n        let dragVal = this.canvas.executeFunction('HtmlDragToWorld.dragEnd', e);\n        this.canvas.dispatchEvent(\n          `${this.namespace}.dragEnd`,\n          new LineDrawerDragEvent(\n            `${this.namespace}.dragEnd`,\n            dragVal.startValues,\n            dragVal.session,\n            dragVal.event,\n            this.canvas,\n            undefined,\n            axis\n          )\n        );\n      };\n    }\n\n    switch (axis) {\n      case 'x':\n        endCoordinate = endCoordinate ? endCoordinate : lineLength;\n        length = Math.abs(startCoordinate - endCoordinate);\n        line.style.height = lineWidth + 'px';\n        line.style.width = length + 'px';\n        lineWrappedLayer.style.width = length + 'px';\n        lineWrappedLayer.style.height = `${lineWrapperDim}px`;\n        lineWrappedLayer.style.left =\n          Math.min(startCoordinate, endCoordinate) + 'px';\n        lineWrappedLayer.style.top = axisCoordinate + 'px';\n        lineWrappedLayer.appendChild(line);\n        labelBox = this.createLabelBox(\n          label,\n          'x',\n          axisCoordinate,\n          length / 2 - boxWidth / 2,\n          boxHeight,\n          boxWidth,\n          labelSpacing,\n          fontSize\n        );\n        if (labelBox) {\n          lineWrappedLayer.appendChild(labelBox);\n        }\n        break;\n\n      case 'y':\n        endCoordinate = endCoordinate ? endCoordinate : lineLength;\n        length = Math.abs(startCoordinate - endCoordinate);\n        line.style.width = lineWidth + 'px';\n        line.style.height = length + 'px';\n        lineWrappedLayer.style.height = length + 'px';\n        lineWrappedLayer.style.width = `${lineWrapperDim}px`;\n        lineWrappedLayer.style.top =\n          Math.min(startCoordinate, endCoordinate) + 'px';\n        lineWrappedLayer.style.left = axisCoordinate + 'px';\n        lineWrappedLayer.appendChild(line);\n        labelBox = this.createLabelBox(\n          label,\n          'y',\n          axisCoordinate,\n          length / 2 - boxHeight / 2,\n          boxHeight,\n          boxWidth,\n          labelSpacing,\n          fontSize\n        );\n        if (labelBox) {\n          lineWrappedLayer.appendChild(labelBox);\n        }\n        break;\n\n      default:\n        break;\n    }\n\n    return lineWrappedLayer;\n  }\n  setLabelBoxStyle(\n    labelBox: any,\n    height: any,\n    width: any,\n    axis: any,\n    labelSpacing: any,\n    pointOnAxis: any,\n    text: any,\n    fontSize: any\n  ) {\n    const zoom = this.canvas.getZoom();\n    height = height / zoom;\n    width = width / zoom;\n    labelSpacing = labelSpacing / zoom;\n\n    labelBox.style.width = width + 'px';\n    labelBox.style.height = height + 'px';\n    labelBox.style.borderRadius = `${2 / zoom}px`;\n\n    if (axis === 'x') {\n      if (height - labelSpacing <= 0) {\n        labelBox.style.top = labelSpacing + 'px';\n      } else {\n        labelBox.style.top = -(labelSpacing + height) + 'px';\n      }\n      labelBox.style.left = pointOnAxis + 'px';\n    } else {\n      if (width - labelSpacing <= 0) {\n        labelBox.style.left = -(labelSpacing + width) + 'px';\n      } else {\n        labelBox.style.left = labelSpacing + 'px';\n      }\n      labelBox.style.top = pointOnAxis + 'px';\n    }\n    text.style.fontSize = fontSize / zoom + 'px';\n  }\n  createLabelBox(\n    label: string | undefined,\n    axis: 'x' | 'y',\n    coordinate: number,\n    pointOnAxis: number,\n    boxHeight: number,\n    boxWidth: number,\n    labelSpacing: number,\n    fontSize: number\n  ): HTMLDivElement | undefined {\n    if (!label) return;\n\n    let labelBox = document.createElement('div');\n    labelBox.style.position = 'absolute';\n    labelBox.style.backgroundColor = '#22b9d1';\n\n    let text = document.createElement('span');\n    text.style.backgroundColor = 'transparent';\n    text.style.color = 'white';\n    text.style.left = 0 + 'px';\n    text.style.right = 0 + 'px';\n    text.style.top = 0 + 'px';\n    text.style.bottom = 0 + 'px';\n    text.style.position = 'absolute';\n    text.style.display = 'flex';\n    text.style.textAlign = 'center';\n    text.style.justifyContent = 'center';\n    text.style.alignItems = 'center';\n    this.setLabelBoxStyle(\n      labelBox,\n      boxHeight,\n      boxWidth,\n      axis,\n      labelSpacing,\n      pointOnAxis,\n      text,\n      fontSize\n    );\n    text.innerHTML = label;\n    labelBox.appendChild(text);\n    this.canvas.on('zoom', () => {\n      this.setLabelBoxStyle(\n        labelBox,\n        boxHeight,\n        boxWidth,\n        axis,\n        labelSpacing,\n        pointOnAxis,\n        text,\n        fontSize\n      );\n    });\n    return labelBox;\n  }\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addFunction('drawLine', this.drawLine.bind(this));\n  }\n\n  deactivate() {\n    this.canvas.removeFunction('drawLine');\n    this.dispose();\n  }\n}\n","import { Canvas, IPlugin, IContext, Layer, Event } from '../..';\nimport { indexOf, map, isEqual } from 'lodash';\nimport { iconLeft, iconRight } from './iconsBase64';\n\nfunction getButtonCss(zoom: number) {\n  return `\nbackground: transparent;\nwidth: auto;\ncolor: rgb(251,251,251);\nheight: 80px;\npadding-left: ${6 / zoom}px;\npadding-right: ${6 / zoom}px;\nmargin-top: 0px;\nborder:none;\nmin-width: ${100 / zoom}px;\n`;\n}\nfunction getImgCss(zoom: number) {\n  return `\n  border: none;\n  margin-right: 0px;\n  margin-left: 0px;\n  opacity: 1;\n  width: ${32 / zoom}px;\n  height: ${32 / zoom}px;\n  `;\n}\n\nconst containerCss = `\nposition: absolute;\npointer-events: auto;\nz-index: 4;\ntransform-origin: 0px 0px;\n`;\n\nexport default class StageDesignerPreviewModePlugin implements IPlugin {\n  name = 'StageDesignerPreviewMode';\n  canvas!: Canvas;\n  disposeNextBtn: any;\n  disposePreviousBtn: any;\n  nextBtnContainerNode: any;\n  previousBtnContainerNode: any;\n  artboards: Array<Layer> = [];\n  prevBtnElement: any;\n  nextBtnElement: any;\n  prevImgElement: any;\n  nextImgElement: any;\n  currentMode!: string;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.disposeNextBtn = null;\n    this.disposePreviousBtn = null;\n    this.currentMode = 'stage';\n  }\n\n  activate() {\n    this.canvas.addFunction('switchToPreviewMode', this.previewMode.bind(this));\n    this.canvas.addFunction('switchToStageMode', this.stageMode.bind(this));\n    this.disposeNextBtn = this.renderNextButton();\n    this.disposePreviousBtn = this.renderPreviousButton();\n    this.previousBtnContainerNode.style.display = 'none';\n    this.nextBtnContainerNode.style.display = 'none';\n    this.canvas.on('zoom', () => {\n      if (this.currentMode === 'preview' && this.artboards.length > 1) {\n        this.prevImgElement.style.cssText = getImgCss(this.canvas.getZoom());\n        this.prevBtnElement.style.cssText = getButtonCss(this.canvas.getZoom());\n        this.nextBtnElement.style.cssText = getButtonCss(this.canvas.getZoom());\n        this.nextImgElement.style.cssText = getImgCss(this.canvas.getZoom());\n        this.setPreviousButtonContainerLayout();\n        this.setNextButtonContainerLayout();\n        this.setDisplayForButtons();\n      }\n    });\n  }\n\n  previewMode(context: IContext) {\n    this.currentMode = 'preview';\n    const artboards = this.canvas.executeFunction('getAllArtboards');\n    this.artboards = Array.from(artboards.values());\n    this.canvas.executeFunction('hidePlusButton');\n\n    if (this.artboards.length > 1) {\n      this.handleSelectedArtboardChange();\n    }\n  }\n\n  stageMode(context: IContext) {\n    this.currentMode = 'stage';\n    const artboards = this.canvas.executeFunction('getAllArtboards');\n    this.artboards = Array.from(artboards.values());\n    this.previousBtnContainerNode.style.display = 'none';\n    this.nextBtnContainerNode.style.display = 'none';\n    this.canvas.executeFunction('showPlusButton');\n    map(this.artboards, (artboard: Layer) => {\n      artboard.show();\n      artboard.executeFunction('LayerLabel.show');\n      artboard.executeFunction(\n        'showGrid',\n        this.canvas.executeFunction('getGridSize')\n      );\n    });\n  }\n\n  nextArtboard() {\n    const selectedArtboard = this.canvas.executeFunction('getSelectedArtboard');\n    selectedArtboard.hide();\n    let selectedArtboardIndex = 0;\n    if (selectedArtboard)\n      selectedArtboardIndex = indexOf(this.artboards, selectedArtboard);\n    selectedArtboardIndex += 1;\n    this.artboards[selectedArtboardIndex].show();\n    this.canvas.dispatchEvent(\n      'StageDesignerPreviewMode.selectArtboard',\n      new Event(\n        'StageDesignerPreviewMode.selectArtboard',\n        this.artboards[selectedArtboardIndex]\n      )\n    );\n    this.handleSelectedArtboardChange();\n  }\n\n  previousArtboard() {\n    const selectedArtboard = this.canvas.executeFunction('getSelectedArtboard');\n    selectedArtboard.hide();\n    let selectedArtboardIndex = 0;\n    if (selectedArtboard)\n      selectedArtboardIndex = indexOf(this.artboards, selectedArtboard);\n    selectedArtboardIndex -= 1;\n    this.artboards[selectedArtboardIndex].show();\n    this.canvas.dispatchEvent(\n      'StageDesignerPreviewMode.selectArtboard',\n      new Event(\n        'StageDesignerPreviewMode.selectArtboard',\n        this.artboards[selectedArtboardIndex]\n      )\n    );\n    this.handleSelectedArtboardChange();\n  }\n  setDisplayForButtons() {\n    let selectedArtboard = this.canvas.executeFunction('getSelectedArtboard');\n    if (selectedArtboard) {\n      let selectedArtboardIndex = indexOf(this.artboards, selectedArtboard);\n      if (selectedArtboardIndex === 0) {\n        this.previousBtnContainerNode.style.display = 'none';\n        this.nextBtnContainerNode.style.display = '';\n      } else if (selectedArtboardIndex === this.artboards.length - 1) {\n        this.nextBtnContainerNode.style.display = 'none';\n        this.previousBtnContainerNode.style.display = '';\n      } else {\n        this.previousBtnContainerNode.style.display = '';\n        this.nextBtnContainerNode.style.display = '';\n      }\n    } else {\n      this.nextBtnContainerNode.style.display = 'none';\n      this.previousBtnContainerNode.style.display = 'none';\n    }\n  }\n  handleSelectedArtboardChange() {\n    this.setPreviousButtonContainerLayout();\n    this.setNextButtonContainerLayout();\n    let selectedArtboard = this.canvas.executeFunction('getSelectedArtboard');\n    if (selectedArtboard) {\n      this.setDisplayForButtons();\n    } else {\n      selectedArtboard = this.artboards[0];\n      if (selectedArtboard) {\n        this.canvas.dispatchEvent(\n          'StageDesignerPreviewMode.selectArtboard',\n          new Event('StageDesignerPreviewMode.selectArtboard', selectedArtboard)\n        );\n      }\n      this.previousBtnContainerNode.style.display = 'none';\n      this.nextBtnContainerNode.style.display = '';\n    }\n    map(this.artboards, (artboard: Layer) => {\n      if (!isEqual(artboard, selectedArtboard)) {\n        artboard.hide();\n        artboard.executeFunction('LayerLabel.hide');\n        artboard.executeFunction('hideGrid');\n      } else {\n        artboard.show();\n        artboard.executeFunction('LayerLabel.show');\n        artboard.executeFunction(\n          'showGrid',\n          this.canvas.executeFunction('getGridSize')\n        );\n\n        if (artboard) {\n          this.canvas.dispatchEvent(\n            'StageDesignerPreviewMode.selectArtboard',\n            new Event('StageDesignerPreviewMode.selectArtboard', artboard)\n          );\n        }\n      }\n    });\n    selectedArtboard.executeFunction('focusArtboard');\n  }\n\n  renderNextButton() {\n    this.nextBtnContainerNode = document.createElement('div');\n    this.nextBtnElement = document.createElement('button');\n    this.nextBtnElement.style.cssText = getButtonCss(this.canvas.getZoom());\n    this.nextBtnElement.onclick = () => this.nextArtboard();\n    this.nextImgElement = document.createElement('img');\n    this.nextImgElement.src = iconRight;\n    this.nextImgElement.style.cssText = getImgCss(this.canvas.getZoom());\n    this.nextBtnElement.append(this.nextImgElement);\n    this.nextBtnContainerNode.appendChild(this.nextBtnElement);\n    return this.canvas.addDomToWorld(this.nextBtnContainerNode);\n  }\n\n  renderPreviousButton() {\n    this.previousBtnContainerNode = document.createElement('div');\n    this.prevBtnElement = document.createElement('button');\n    this.prevBtnElement.style.cssText = getButtonCss(this.canvas.getZoom());\n    this.prevBtnElement.onclick = () => this.previousArtboard();\n    this.prevImgElement = document.createElement('img');\n    this.prevImgElement.src = iconLeft;\n    this.prevImgElement.style.cssText = getImgCss(this.canvas.getZoom());\n    this.prevBtnElement.append(this.prevImgElement);\n    this.previousBtnContainerNode.appendChild(this.prevBtnElement);\n    return this.canvas.addDomToWorld(this.previousBtnContainerNode);\n  }\n  setPreviousButtonContainerLayout() {\n    let selectedArtboard = this.canvas.executeFunction('getSelectedArtboard');\n    if (!selectedArtboard) selectedArtboard = this.artboards[0];\n    const containerLayout = {\n      left: selectedArtboard.layout.data.left - 150 / this.canvas.getZoom(),\n      top:\n        selectedArtboard.layout.data.height / 2 +\n        selectedArtboard.layout.data.top -\n        40 / this.canvas.getZoom(),\n    };\n    this.previousBtnContainerNode.style.cssText =\n      containerCss +\n      `left:${containerLayout.left}px;top:${containerLayout.top}px`;\n  }\n\n  setNextButtonContainerLayout() {\n    let selectedArtboard = this.canvas.executeFunction('getSelectedArtboard');\n    if (!selectedArtboard) selectedArtboard = this.artboards[0];\n\n    const containerLayout = {\n      left:\n        selectedArtboard.layout.data.left +\n        selectedArtboard.layout.data.width +\n        50 / this.canvas.getZoom(),\n      top:\n        selectedArtboard.layout.data.height / 2 +\n        selectedArtboard.layout.data.top -\n        40 / this.canvas.getZoom(),\n    };\n    this.nextBtnContainerNode.style.cssText =\n      containerCss +\n      `left:${containerLayout.left}px;top:${containerLayout.top}px`;\n  }\n\n  deactivate() {\n    this.canvas.removeFunction('switchToPreviewMode');\n    this.canvas.removeFunction('switchToStageMode');\n    this.disposeNextBtn();\n    this.disposePreviousBtn();\n  }\n}\n","export const iconRight =\n  'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0OS4zICg1MTE2NykgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+aWNvbl9yaWdodDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJpY29uX3JpZ2h0IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0icmlnaHRfYXJyb3ciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDAuMDAwMDAwKSIgZmlsbD0iIzZGNzI3RCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBvbHlnb24gaWQ9Iu+PkiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUzLjU1Mzk4NiwgMjU1LjkyMzMwOSkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMTUzLjU1Mzk4NiwgLTI1NS45MjMzMDkpICIgcG9pbnRzPSIzMDcuMTA3OTcxIDMwLjM5MDg5MyA2Ny4xNzk4Njk4IDI1NS45MjMzMDkgMzA3LjEwNzk3MSA0ODEuNDU1NzI0IDI3My41MTgwMzcgNTExLjg0NjYxNyAxLjE0OTgxMjhlLTA2IDI1NS45MjMzMDkgMjczLjUxODAzNyAwIj48L3BvbHlnb24+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=';\n\nexport const iconLeft =\n  'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0OS4zICg1MTE2NykgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+aWNvbl9sZWZ0PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9Imljb25fbGVmdCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InJpZ2h0X2Fycm93IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNTYuMDAwMDAwLCAyNTYuMDAwMDAwKSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC0yNTYuMDAwMDAwLCAtMjU2LjAwMDAwMCkgdHJhbnNsYXRlKDEwMi4wMDAwMDAsIDAuMDAwMDAwKSIgZmlsbD0iIzZGNzI3RCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBvbHlnb24gaWQ9Iu+PkiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUzLjU1Mzk4NiwgMjU1LjkyMzMwOSkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMTUzLjU1Mzk4NiwgLTI1NS45MjMzMDkpICIgcG9pbnRzPSIzMDcuMTA3OTcxIDMwLjM5MDg5MyA2Ny4xNzk4Njk4IDI1NS45MjMzMDkgMzA3LjEwNzk3MSA0ODEuNDU1NzI0IDI3My41MTgwMzcgNTExLjg0NjYxNyAxLjE0OTgxMjhlLTA2IDI1NS45MjMzMDkgMjczLjUxODAzNyAwIj48L3BvbHlnb24+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=';\n","import { Layer } from '../../models/Layer';\nimport { Canvas } from 'models/Canvas';\nimport DesignerDropEvent from '../../events/DropEvent';\nexport default class StageDesignerDropEvent extends DesignerDropEvent {\n  artboard: Layer;\n\n  constructor(\n    name: string,\n    target: Layer,\n    originalEvent: any,\n    artboard: Layer,\n    currentTarget?: Layer\n  ) {\n    super(name, target, originalEvent, currentTarget);\n    this.artboard = artboard;\n  }\n}\n","import { Canvas, IPlugin, Layer } from '../..';\nimport { map } from 'lodash';\nimport DesignerDropEvent from '../../events/DropEvent';\nimport StageDesignerDropEvent from './StageDesignerDropEvent';\n\nexport default class StageDesignerDropPlugin implements IPlugin {\n  name = 'StageDesignerDrop';\n  canvas!: Canvas;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addEventListener('drop', (e: DesignerDropEvent) => {\n      const draggedLayerStyles = JSON.parse(\n        e.originalEvent.dataTransfer.getData('text')\n      );\n      const hitResult = this.canvas.getHitRectResult(\n        e.worldX - draggedLayerStyles.offsetX,\n        e.worldY - draggedLayerStyles.offsetY,\n        parseInt(draggedLayerStyles.width.replace('px', '')),\n        parseInt(draggedLayerStyles.height.replace('px', ''))\n      );\n      const canvas = hitResult.pop();\n      let artboard = null;\n\n      map(hitResult, (hitLayer: Layer) => {\n        if (canvas.children.indexOf(hitLayer) >= 0) {\n          artboard = hitLayer;\n        }\n      });\n      if (!artboard) {\n        artboard = this.canvas.executeFunction('getSelectedArtboard');\n      }\n\n      this.canvas.dispatchEvent(\n        'StageDesigner.drop',\n        new StageDesignerDropEvent(\n          'StageDesigner.drop',\n          this.canvas,\n          e.originalEvent,\n          artboard,\n          this.canvas\n        )\n      );\n    });\n  }\n\n  deactivate() {\n    // TODO: call remove event listener with callback\n    // this.canvas.removeEventListener('drop');\n  }\n}\n","import { Event, Layer } from '../../..';\n\nexport default class StageDesignerDrawEvent extends Event {\n  dimensions: { x: number; y: number; height?: number; width?: number };\n  worldX: number;\n  worldY: number;\n  meta?: any;\n  snapPoints?: any;\n  constructor(\n    name: string,\n    target: Layer,\n    payload: {\n      x: number;\n      y: number;\n      height?: number;\n      width?: number;\n      worldX: number;\n      worldY: number;\n    },\n    currentTarget?: Layer,\n    meta?: any,\n    snapPoints?: any\n  ) {\n    super(name, target, currentTarget);\n    this.dimensions = {\n      x: payload.x,\n      y: payload.y,\n      height: payload.height,\n      width: payload.width,\n    };\n    this.worldX = payload.worldX;\n    this.worldY = payload.worldY;\n    this.meta = meta;\n    this.snapPoints = snapPoints;\n  }\n}\n","import { IPlugin } from 'interfaces/IPlugin';\nimport { Canvas } from 'models/Canvas';\nimport DrawEvent from '../../plugins/DrawComponent/events/drawEvent';\nimport StageDesignerDrawEvent from './events/stageDesignerDrawEvent';\nimport { Layer, Event, IContext } from '../..';\nimport { get } from 'lodash';\nimport Config from './interfaces/Config';\n\nexport default class StageDesignerDrawComponent implements IPlugin {\n  name = 'StageDesignerDrawComponent';\n  canvas!: Canvas;\n  selectedArtboard!: Layer;\n  firstTime: boolean = true;\n\n  setSelectedArtboard = (data: DrawEvent) => {\n    let { worldX, worldY } = data.dimensions;\n\n    const artboard = this.canvas.executeFunction(\n      'getHitArtboard',\n      worldX,\n      worldY\n    );\n\n    let selectedArtboard = this.canvas.executeFunction('getSelectedArtboard');\n\n    if (artboard) {\n      if (selectedArtboard !== artboard) {\n        this.canvas.dispatchEvent(\n          'selectArtboard',\n          new Event('selectArtboard', artboard)\n        );\n      }\n      this.selectedArtboard = artboard;\n    } else if (selectedArtboard) {\n      this.selectedArtboard = selectedArtboard;\n    } else {\n      throw new Error('No artboard is selected');\n    }\n  };\n\n  drawShape = (data: any) => {\n    let { worldX, worldY } = data.dimensions;\n    let relativeDims = this.getDimsFromArtboard(data.dimensions);\n\n    data.meta.parent = this.selectedArtboard.children[0];\n\n    this.snapPoints = this.canvas.executeFunction(\n      'getSnapPoints',\n      [],\n      this.selectedArtboard.children[0]\n    );\n    this.canvas.executeFunction('DrawComponent.setSnapPoints', this.snapPoints);\n\n    let stageDesignerDrawEvent = new StageDesignerDrawEvent(\n      `${this.name}.drawShape`,\n      this.canvas,\n      { ...relativeDims, worldX, worldY },\n      undefined,\n      data.meta,\n      this.snapPoints\n    );\n    this.canvas.dispatchEvent(`${this.name}.drawShape`, stageDesignerDrawEvent);\n  };\n  addListeners = () => {\n    this.canvas.addEventListener(\n      'DrawComponent.drawShape',\n      (data: DrawEvent) => {\n        if (this.selectedArtboard) {\n          data.meta.parent = this.selectedArtboard.children[0];\n          this.drawShape(data);\n        }\n      }\n    );\n    this.canvas.addEventListener(\n      'DrawComponent.mousemove',\n      (data: DrawEvent) => {\n        //\n        let { worldX, worldY } = data.dimensions;\n        const oldSelectedArtboard = this.selectedArtboard;\n        this.setSelectedArtboard(data);\n        let relativeDims = this.getDimsFromArtboard(data.dimensions);\n        data.meta.parent = this.selectedArtboard.children[0];\n\n        if (oldSelectedArtboard !== this.selectedArtboard) {\n          this.drawShape(data);\n        }\n\n        let stageDesignerDrawEvent = new StageDesignerDrawEvent(\n          `${this.name}.mousemove`,\n          this.canvas,\n          { ...relativeDims, worldX, worldY },\n          undefined,\n          data.meta\n        );\n        this.canvas.dispatchEvent(\n          `${this.name}.mousemove`,\n          stageDesignerDrawEvent\n        );\n      }\n    );\n    this.canvas.addEventListener(\n      'DrawComponent.drawStart',\n      (data: DrawEvent) => {\n        this.setSelectedArtboard(data);\n        let { worldX, worldY } = data.dimensions;\n\n        let relativeDims = this.getDimsFromArtboard(data.dimensions);\n\n        const parent = this.selectedArtboard.children[0];\n\n        let stageDesignerDrawStartEvent = new StageDesignerDrawEvent(\n          `${this.name}.drawStart`,\n          this.canvas,\n          { ...relativeDims, worldX, worldY },\n          undefined,\n          { parent },\n          this.snapPoints\n        );\n\n        this.canvas.dispatchEvent(\n          `${this.name}.drawStart`,\n          stageDesignerDrawStartEvent\n        );\n\n        this.canvas.executeFunction(\n          'DrawComponent.setSnapPoints',\n          this.snapPoints\n        );\n      }\n    );\n\n    this.canvas.addEventListener('DrawComponent.draw', (data: DrawEvent) => {\n      let { worldX, worldY } = data.dimensions;\n\n      // data.target.setParent(this.selectedArtboard.children[0]);\n      // (data.target as any).parent = this.selectedArtboard.children[0];\n\n      data.meta.parent = this.selectedArtboard.children[0];\n      let relativeDims = this.getDimsFromArtboard(data.dimensions);\n      let stageDesignerDrawEvent = new StageDesignerDrawEvent(\n        `${this.name}.draw`,\n        this.canvas,\n        {\n          ...relativeDims,\n          worldX: data.dimensions.worldX,\n          worldY: data.dimensions.worldY,\n        },\n        undefined,\n        data.meta\n      );\n\n      this.canvas.dispatchEvent(`${this.name}.draw`, stageDesignerDrawEvent);\n    });\n\n    this.canvas.addEventListener('DrawComponent.drawEnd', (data: DrawEvent) => {\n      let { worldX, worldY } = data.dimensions;\n      let relativeDims = this.getDimsFromArtboard(data.dimensions);\n      let stageDesignerDrawEndEvent = new StageDesignerDrawEvent(\n        `${this.name}.drawEnd`,\n        this.canvas,\n        { ...relativeDims, worldX, worldY }\n      );\n\n      this.canvas.dispatchEvent(\n        `${this.name}.drawEnd`,\n        stageDesignerDrawEndEvent\n      );\n    });\n\n    this.canvas.addEventListener('DrawComponent.click', (data: DrawEvent) => {\n      let { worldX, worldY } = data.dimensions;\n      let relativeDims = this.getDimsFromArtboard(data.dimensions);\n\n      let stageDesignerClickEvent = new StageDesignerDrawEvent(\n        `${this.name}.click`,\n        this.canvas,\n        { ...relativeDims, worldX, worldY, height: undefined, width: undefined }\n      );\n\n      this.canvas.dispatchEvent(`${this.name}.click`, stageDesignerClickEvent);\n    });\n  };\n\n  getDimsFromArtboard = (\n    layerPoints:\n      | { worldX: number; worldY: number; height: number; width: number }\n      | {}\n  ) => {\n    let relativeX = 0;\n    let relativeY = 0;\n    let layerX = get(layerPoints, 'worldX', undefined);\n    let layerY = get(layerPoints, 'worldY', undefined);\n    let height = get(layerPoints, 'height', undefined);\n    let width = get(layerPoints, 'width', undefined);\n    if (layerX && this.selectedArtboard) {\n      relativeX = layerX - this.selectedArtboard.rootX;\n    }\n\n    if (layerY && this.selectedArtboard) {\n      relativeY = layerY - this.selectedArtboard.rootY;\n    }\n\n    return {\n      x: relativeX,\n      y: relativeY,\n      height,\n      width,\n    };\n  };\n  snapPoints: any;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n  activate() {\n    this.addListeners();\n  }\n  deactivate() {}\n}\n","import { Canvas, IPlugin, Layer } from '../..';\nimport RulerLinesAddEvent from '../../plugins/RulerLines/events/RulerLinesAddEvent';\nimport RulerLinesRemoveEvent from '../../plugins/RulerLines/events/RulerLinesRemoveEvent';\nimport RulerLinesSetPositionEvent from '../../plugins/RulerLines/events/RulerLinesSetPositionEvent';\nimport ArtboardEvent from 'events/ArtboardEvent';\nimport { IContext } from 'interfaces';\nimport { forEach } from 'lodash';\n\ntype RulerLineData = {\n  axis: 'x' | 'y';\n  axisCoordinate: number;\n};\n\nexport default class StageDesignerRulerPlugin implements IPlugin {\n  name = 'StageDesignerRuler';\n  canvas!: Canvas;\n  rulerVisibility: boolean = true;\n  artboardLinesMap: Map<Layer, Array<RulerLineData>> = new Map();\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n\n  activate() {\n    this.canvas.addEventListener('artboardSelected', this.artboardSelected);\n    this.canvas.addEventListener('RulerLines.add', this.addLine);\n    this.canvas.addEventListener('RulerLines.setPosition', this.setPosition);\n    this.canvas.addEventListener('RulerLines.remove', this.removeLine);\n    this.canvas.addFunction(`${this.name}.getAllLines`, this.getAllLines);\n    this.canvas.addFunction(\n      `${this.name}.getLineCoordinates`,\n      this.getLineCoordinates\n    );\n    this.canvas.addFunction(`${this.name}.show`, this.showRuler);\n    this.canvas.addFunction(`${this.name}.hide`, this.hideRuler);\n    this.canvas.on('scroll', (e: any) => {\n      const selectedArtboard: Layer = this.canvas.executeFunction(\n        'getSelectedArtboard'\n      );\n      if (selectedArtboard) {\n        const { x, y } = this.canvas.convertPoint(\n          { x: selectedArtboard.rootX, y: selectedArtboard.rootY },\n          'world',\n          'viewport'\n        );\n        this.canvas.executeFunction('RulerScale.setInitialPoint', {\n          x,\n          y,\n        });\n      }\n    });\n  }\n\n  showRuler = (context: IContext) => {\n    this.rulerVisibility = true;\n    this.canvas.executeFunction('RulerScale.show');\n    this.canvas.executeFunction('RulerLines.show');\n  };\n  hideRuler = (context: IContext) => {\n    this.rulerVisibility = false;\n    this.canvas.executeFunction('RulerScale.hide');\n    this.canvas.executeFunction('RulerLines.hide');\n  };\n\n  artboardSelected = (event: ArtboardEvent) => {\n    const selectedArtboard = event.artboard;\n    const artboardDims = selectedArtboard.getBoundingClientRect();\n    if (selectedArtboard) {\n      const { x, y } = this.canvas.convertPoint(\n        { x: selectedArtboard.rootX, y: selectedArtboard.rootY },\n        'world',\n        'viewport'\n      );\n      this.canvas.executeFunction('RulerScale.setInitialPoint', {\n        x,\n        y,\n      });\n    }\n    this.canvas.executeFunction('RulerLines.removeAll');\n    let artboardLines: Array<RulerLineData> =\n      this.artboardLinesMap.get(selectedArtboard) || [];\n\n    if (artboardLines.length !== 0) {\n      artboardLines = artboardLines.map((ruler: RulerLineData) => {\n        if (ruler.axis === 'x') {\n          return {\n            axis: 'x',\n            axisCoordinate: artboardDims.rootY + ruler.axisCoordinate,\n          };\n        } else {\n          return {\n            axis: 'y',\n            axisCoordinate: artboardDims.rootX + ruler.axisCoordinate,\n          };\n        }\n      });\n    }\n\n    this.canvas.executeFunction('RulerLines.addAll', artboardLines);\n\n    if (!this.rulerVisibility) {\n      this.canvas.executeFunction('RulerLines.hide', artboardLines);\n    }\n  };\n\n  getAllLines = (context: IContext, selectedArtboard: Layer) => {\n    if (!selectedArtboard) {\n      selectedArtboard = this.canvas.executeFunction('getSelectedArtboard');\n    }\n    return this.artboardLinesMap.get(selectedArtboard);\n  };\n  getLineCoordinates = () => {\n    let selectedArtboard = this.canvas.executeFunction('getSelectedArtboard');\n\n    let coordinates: { x: Array<number>; y: Array<number> } = {\n      x: [],\n      y: [],\n    };\n    if (!selectedArtboard) {\n      return coordinates;\n    }\n    const rulerLines = this.artboardLinesMap.get(selectedArtboard);\n\n    if (!rulerLines) {\n      return coordinates;\n    }\n\n    forEach(rulerLines, line => {\n      if (line.axis === 'y') {\n        coordinates.y.push(line.axisCoordinate);\n      } else {\n        coordinates.x.push(line.axisCoordinate);\n      }\n    });\n\n    return coordinates;\n  };\n\n  addLine = (event: RulerLinesAddEvent) => {\n    const selectedArtboard: Layer = this.canvas.executeFunction(\n      'getSelectedArtboard'\n    );\n    if (!selectedArtboard) return;\n    const artboardDims = selectedArtboard.getBoundingClientRect();\n    let artboardLines = this.artboardLinesMap.get(selectedArtboard);\n    if (!artboardLines) {\n      artboardLines = [];\n    }\n    const artboardAxisCoordinate =\n      event.axis === 'x' ? artboardDims.rootY : artboardDims.rootX;\n    artboardLines.push({\n      axis: event.axis,\n      axisCoordinate: event.axisCoordinate - artboardAxisCoordinate,\n    });\n    this.artboardLinesMap.set(selectedArtboard, artboardLines);\n  };\n\n  setPosition = (event: RulerLinesSetPositionEvent) => {\n    const selectedArtboard = this.canvas.executeFunction('getSelectedArtboard');\n    if (!selectedArtboard) return;\n    const artboardDims = selectedArtboard.getBoundingClientRect();\n    let artboardLines = this.artboardLinesMap.get(selectedArtboard);\n\n    const artboardAxisCoordinate =\n      event.axis === 'x' ? artboardDims.rootY : artboardDims.rootX;\n\n    const line = {\n      axis: event.axis,\n      axisCoordinate: event.axisCoordinate - artboardAxisCoordinate,\n    };\n    if (artboardLines) {\n      if (event.index || event.index === 0) {\n        artboardLines[event.index] = line;\n      } else {\n        artboardLines[artboardLines.length - 1] = line;\n      }\n    } else {\n      artboardLines = [];\n      artboardLines.push(line);\n    }\n    this.artboardLinesMap.set(selectedArtboard, artboardLines);\n  };\n\n  removeLine = (event: RulerLinesRemoveEvent) => {\n    const selectedArtboard = this.canvas.executeFunction('getSelectedArtboard');\n    if (!selectedArtboard) return;\n    let artboardLines = this.artboardLinesMap.get(selectedArtboard);\n    artboardLines?.splice(event.index, 1);\n    this.artboardLinesMap.set(selectedArtboard, artboardLines || []);\n  };\n\n  deactivate() {\n    this.canvas.removeEventListener('artboardSelected', this.artboardSelected);\n    this.canvas.removeEventListener('RulerLines.add', this.addLine);\n    this.canvas.removeEventListener('RulerLines.setPosition', this.setPosition);\n    this.canvas.removeEventListener('RulerLines.remove', this.removeLine);\n    this.canvas.removeFunction(`${this.name}.getAllLines`);\n    this.canvas.removeFunction(`${this.name}.getLineCoordinates`);\n    this.canvas.removeFunction(`${this.name}.show`);\n    this.canvas.removeFunction(`${this.name}.hide`);\n  }\n}\n","import { Event, Layer } from './../../..';\n\nexport default class DrawEvent extends Event {\n  dimensions: {\n    worldX: number;\n    worldY: number;\n    height?: number;\n    width?: number;\n  };\n  meta?: any;\n\n  constructor(\n    name: string,\n    target: Layer,\n    payload: { x: number; y: number; height?: number; width?: number },\n    currentTarget?: Layer,\n    meta?: any\n  ) {\n    super(name, target, currentTarget);\n    this.dimensions = {\n      worldX: payload.x,\n      worldY: payload.y,\n      height: payload.height,\n      width: payload.width,\n    };\n    this.meta = meta;\n  }\n}\n","import { IPlugin } from 'interfaces/IPlugin';\nimport { Canvas } from 'models/Canvas';\nimport { IContext, IDimension } from 'interfaces';\nimport DrawEvent from './events/drawEvent';\nimport {\n  // computeOrientationWithDeltaMultiple,\n  computeOrientation,\n  // calculateRotation,\n} from './../../models/utils';\nexport default class DrawComponent implements IPlugin {\n  name = 'DrawComponent';\n  canvas!: Canvas;\n  removeDom: any;\n  mouseDown!: boolean;\n  dragStarted!: boolean;\n  dragStart: any = {\n    x: 0,\n    y: 0,\n  };\n  renderer: any;\n  isShiftPressed: boolean = false;\n  isAltPressed: boolean = false;\n  overlayDispose: any;\n  overlayLayer: any;\n  dims: IDimension = { x: 0, y: 0, height: 0, width: 0 };\n  dragSession = {\n    start: { x: 0, y: 0, deltaX: 0, deltaY: 0 },\n    current: { x: 0, y: 0, deltaX: 0, deltaY: 0 },\n    end: { x: 0, y: 0, deltaX: 0, deltaY: 0 },\n  };\n  shapeType: any;\n  ellipseRenderer: any;\n  boundMouseMove: any;\n  boundMouseUp: any;\n  snapPoints: any;\n  initialDelta: any;\n  initialDimensions: any = {\n    x: 0,\n    y: 0,\n    height: 0,\n    width: 0,\n    rotation: 0,\n  };\n  newDimensions: any = {\n    x: 0,\n    y: 0,\n    height: 0,\n    width: 0,\n    rotation: 0,\n  };\n  getQuad = (\n    start: { x: number; y: number },\n    current: { x: number; y: number }\n  ) => {\n    if (current.x < start.x && current.y > start.y) return 2;\n    else if (current.x < start.x && current.y <= start.y) return 3;\n    else if (current.x >= start.x && current.y < start.y) return 4;\n    else return 1;\n    // DOC:  quad as  3|4\n    //                2|1\n  };\n\n  onMouseMove = (shapeType: any, e: any) => {\n    let startX = 0;\n    let startY = 0;\n    // let initialDimensions = {\n    //   x: startX,\n    //   y: startY,\n    //   height: 0,\n    //   width: 0,\n    //   rotation: 0,\n    // };\n    if (this.mouseDown && !this.dragStarted) {\n      if (e.pageX && e.pageY) {\n        // let val = this.canvas.executeFunction('HtmlDragToWorld.drag', e);\n\n        startX = this.dims.x;\n        startY = this.dims.y;\n        this.initialDimensions.x = startX;\n        this.initialDimensions.y = startY;\n        this.initialDimensions.width = 0;\n        this.initialDimensions.height = 0;\n\n        const snappedData = this.canvas.executeFunction(\n          'snapToPoints',\n          this.snapPoints,\n          [this.initialDimensions.x, this.initialDimensions.y],\n          [0, 0],\n          {\n            ...this.initialDimensions,\n          },\n          [0, 0],\n          [this.initialDimensions.x, this.initialDimensions.y],\n          0,\n          this.initialDimensions\n        );\n\n        this.initialDelta = snappedData.delta;\n\n        this.newDimensions = computeOrientation(\n          this.initialDimensions,\n          snappedData.delta,\n          'C',\n          false,\n          false\n        );\n\n        this.dims.x = this.newDimensions.x;\n        this.dims.y = this.newDimensions.y;\n\n        this.initialDimensions.x = this.dims.x;\n        this.initialDimensions.y = this.dims.y;\n\n        this.dragStarted = true;\n\n        const drawEvent = new DrawEvent(\n          `${this.name}.draw`,\n          this.canvas,\n          {\n            ...this.initialDimensions,\n          },\n          undefined,\n          snappedData.meta\n        );\n        this.canvas.dispatchEvent(`${this.name}.draw`, drawEvent);\n      }\n    } else if (this.dragStarted) {\n      let zoom = this.canvas.getZoom();\n      let canvasDims = this.canvas.getBoundingClientRect();\n      // console.log(this.dims, 'dims here @@@@');\n\n      if (e.pageX && e.pageY) {\n        let val = this.canvas.executeFunction('HtmlDragToWorld.drag', e);\n\n        this.dragSession.current = val.session.current;\n        // this.dims.x =\n        //   this.dragSession.current.x <= this.dragSession.start.x\n        //     ? this.dragSession.current.x\n        //     : this.dragSession.start.x;\n        // this.dims.y =\n        //   this.dragSession.current.y <= this.dragSession.start.y\n        //     ? this.dragSession.current.y\n        //     : this.dragSession.start.y;\n        // this.dims.height = Math.abs(\n        //   this.dragSession.current.y - this.dragSession.start.y\n        // );\n        // this.dims.width = Math.abs(\n        //   this.dragSession.current.x - this.dragSession.start.x\n        // );\n        let left: any = this.dims.x;\n        let top: any = this.dims.y;\n        // console.log(this.dims, 'dims here @@@@');\n\n        let right;\n        let bottom;\n\n        const totalDx =\n          val.session.current.x - val.session.start.x + this.initialDelta.x;\n        const totalDy =\n          val.session.current.y - val.session.start.y + this.initialDelta.y;\n\n        const snappedData = this.canvas.executeFunction(\n          'snapToPoints',\n          this.snapPoints,\n          [this.initialDimensions.x, this.initialDimensions.y],\n          [totalDx, totalDy],\n          {\n            ...this.initialDimensions,\n          },\n          [totalDx, totalDy],\n          [this.initialDimensions.x, this.initialDimensions.y],\n          0,\n          this.initialDimensions\n        );\n\n        const delta = snappedData.delta;\n        let handle = '';\n\n        if (delta.x >= 0) {\n          handle += 'R';\n        }\n        if (delta.x < 0) {\n          handle += 'L';\n        }\n        if (delta.y >= 0) {\n          handle += 'B';\n        }\n        if (delta.y < 0) {\n          handle += 'T';\n        }\n        this.newDimensions = computeOrientation(\n          this.initialDimensions,\n          delta,\n          handle,\n          this.isShiftPressed,\n          this.isAltPressed\n        );\n\n        this.renderer.style.backgroundColor = 'transparent';\n        if (shapeType === 'rect') {\n          this.renderer.style.position = 'absolute';\n          this.renderer.style.left = this.newDimensions.x\n            ? this.newDimensions.x + 'px'\n            : '';\n          this.renderer.style.top = this.newDimensions.y\n            ? this.newDimensions.y + 'px'\n            : '';\n          // this.renderer.style.right = right ? right + 'px' : '';\n          // this.renderer.style.bottom = bottom ? bottom + 'px' : '';\n          this.renderer.style.height = this.newDimensions.height + 'px';\n          this.renderer.style.width = this.newDimensions.width + 'px';\n          this.renderer.style.border = `${1 / zoom}px solid black`;\n        } else if (shapeType === 'ellipse') {\n          this.overlayLayer.style.display = 'block';\n          this.renderer.style.position = 'absolute';\n          this.renderer.style.left = this.newDimensions.x;\n          this.renderer.style.top = this.newDimensions.y;\n          this.renderer.setAttribute(\n            'height',\n            this.newDimensions.height + 'px'\n          );\n          this.renderer.setAttribute('width', this.newDimensions.width + 'px');\n          this.ellipseRenderer.setAttribute(\n            'cx',\n            this.newDimensions.width / 2 + 'px'\n          );\n          this.ellipseRenderer.setAttribute(\n            'cy',\n            this.newDimensions.height / 2 + 'px'\n          );\n          let strokeZoomAdjustment = 1 / (2 * zoom);\n          this.ellipseRenderer.setAttribute(\n            'rx',\n            this.newDimensions.width !== 0\n              ? this.newDimensions.width / 2 - strokeZoomAdjustment + 'px'\n              : 0\n          );\n          this.ellipseRenderer.setAttribute(\n            'ry',\n            this.newDimensions.height !== 0\n              ? this.newDimensions.height / 2 - strokeZoomAdjustment + 'px'\n              : 0\n          );\n          this.ellipseRenderer.style.strokeWidth = `${1 / zoom}px`;\n        }\n\n        this.overlayLayer.appendChild(this.renderer);\n        // snap logic\n\n        const drawEvent = new DrawEvent(\n          `${this.name}.draw`,\n          this.canvas,\n          {\n            ...this.newDimensions,\n          },\n          undefined,\n          snappedData.meta\n        );\n        const viewportDims = this.canvas.convertPoint(\n          this.newDimensions,\n          'world',\n          'viewport'\n        );\n        this.canvas.executeFunction(\n          'Tooltip.show',\n          {\n            x: viewportDims.x + this.newDimensions.width * zoom,\n            y: viewportDims.y + this.newDimensions.height * zoom,\n          },\n          `${Math.round(this.newDimensions.width)}  ${Math.round(\n            this.newDimensions.height\n          )}`\n        );\n        this.canvas.dispatchEvent(`${this.name}.draw`, drawEvent);\n      }\n    } else {\n    }\n  };\n  onMouseUp = (e: any) => {\n    this.dragStarted = false;\n    this.mouseDown = false;\n    let drawEndEvent = new DrawEvent(`${this.name}.drawEnd`, this.canvas, {\n      x: this.newDimensions.x,\n      y: this.newDimensions.y,\n      height: this.newDimensions.height,\n      width: this.newDimensions.width,\n    });\n    this.canvas.executeFunction('Tooltip.hide');\n    this.newDimensions.height = 0;\n    this.newDimensions.width = 0;\n    this.renderer.style.width = '0px';\n    this.renderer.style.height = '0px';\n    this.renderer.style.display = 'none';\n    this.overlayDispose();\n    this.canvas.setMouseCursor('default');\n    this.canvas.dispatchEvent(`${this.name}.drawEnd`, drawEndEvent);\n\n    if (this.overlayLayer) {\n      this.overlayLayer.ownerDocument.removeEventListener(\n        'mousemove',\n        this.boundMouseMove\n      );\n      this.overlayLayer.ownerDocument.removeEventListener(\n        'mouseup',\n        this.boundMouseUp\n      );\n      this.overlayLayer.ownerDocument.removeEventListener(\n        'contextmenu',\n        this.boundMouseUp\n      );\n    }\n\n    this.renderer = undefined;\n    this.overlayLayer = undefined;\n    this.shapeType = undefined;\n  };\n  drawShape(\n    context: IContext,\n    shapeType: string = 'rect',\n    cursor: string = 'crosshair'\n  ): void {\n    if (this.shapeType && this.shapeType !== shapeType) {\n      this.abortDraw();\n    }\n\n    if (!this.mouseDown && !this.overlayLayer) {\n      let left = 0;\n      let top = 0;\n\n      const drawShape = new DrawEvent(\n        `${this.name}.drawShape`,\n        this.canvas,\n        {\n          x: left,\n          y: top,\n          height: 0,\n          width: 0,\n        },\n        undefined,\n        {}\n      );\n      this.canvas.dispatchEvent(`${this.name}.drawShape`, drawShape);\n\n      this.canvas.setMouseCursor(cursor);\n      this.shapeType = shapeType;\n      if (shapeType === 'rect') {\n        this.renderer = document.createElement('div');\n      } else if (shapeType === 'ellipse') {\n        let svgns = 'http://www.w3.org/2000/svg';\n        this.renderer = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'svg'\n        );\n        this.ellipseRenderer = document.createElementNS(svgns, 'ellipse');\n        this.ellipseRenderer.style.fill = 'transparent';\n        this.ellipseRenderer.style.stroke = 'black';\n        this.renderer.appendChild(this.ellipseRenderer);\n      }\n      this.renderer.style.position = 'absolute';\n      let canvasDims = this.canvas.getBoundingClientRect();\n\n      this.overlayLayer = document.createElement('div');\n      this.overlayLayer.style.background = 'transparent';\n      this.overlayLayer.style.height = canvasDims.height + 'px';\n      this.overlayLayer.style.width = canvasDims.width + 'px';\n      this.overlayLayer.style.top = canvasDims.y + 'px';\n      this.overlayLayer.style.left = canvasDims.x + 'px';\n      this.overlayLayer.style.pointerEvents = 'none';\n      this.overlayLayer.style.position = 'absolute';\n      this.overlayLayer.style.zIndex = 1;\n\n      this.overlayDispose = this.canvas.addDomToWorld(\n        this.overlayLayer,\n        true,\n        105\n      );\n\n      this.overlayLayer.addEventListener(`mousemove`, (e: any) => {\n        //\n        if (!this.mouseDown) {\n          let dragStartVal = this.canvas.executeFunction(\n            'HtmlDragToWorld.dragStart',\n            e,\n            { x: 0, y: 0, height: 0, width: 0, rotation: 0 }\n          );\n          left = dragStartVal.session.start.x;\n          top = dragStartVal.session.start.y;\n\n          let dimension = {\n            x: left,\n            y: top,\n            width: 0,\n            height: 0,\n          };\n\n          const snappedData = this.canvas.executeFunction(\n            'snapToPoints',\n            this.snapPoints,\n            [left, top],\n            [0, 0],\n            {\n              ...dimension,\n            },\n            [0, 0],\n            [left, top],\n            0,\n            this.initialDimensions\n          );\n\n          dimension = {\n            ...dimension,\n            x: dimension.x + snappedData.delta.x,\n            y: dimension.y + snappedData.delta.y,\n          };\n\n          const drawEvent = new DrawEvent(\n            `${this.name}.mousemove`,\n            this.canvas,\n            {\n              ...dimension,\n            },\n            undefined,\n            snappedData.meta\n          );\n          this.canvas.dispatchEvent(`${this.name}.mousemove`, drawEvent);\n        }\n        //   let dragStartVal = this.canvas.executeFunction(\n        //     'HtmlDragToWorld.dragStart',\n        //     e,\n        //     { x: 0, y: 0, height: 0, width: 0, rotation: 0 }\n        //   );\n        //   left = dragStartVal.session.start.x;\n        //   top = dragStartVal.session.start.y;\n        // }\n\n        // const snappedData = this.canvas.executeFunction(\n        //   'snapToPoints',\n        //   this.snapPoints,\n        //   [left, top],\n        //   [0, 0],\n        //   {\n        //     x: left,\n        //     y: top,\n        //     width: 0,\n        //     height: 0,\n        //     rotation: 0,\n        //   },\n        //   [0, 0],\n        //   [top, left],\n        //   0\n        // );\n      });\n      this.overlayLayer.addEventListener(`mousedown`, (e: any) => {\n        let dragStartVal = this.canvas.executeFunction(\n          'HtmlDragToWorld.dragStart',\n          e,\n          { x: 0, y: 0, height: 0, width: 0, rotation: 0 }\n        );\n        left = dragStartVal.session.start.x;\n        top = dragStartVal.session.start.y;\n        this.dragSession.start = dragStartVal.session.start;\n        this.mouseDown = true;\n        this.dragStarted = false;\n        this.dims = { x: left, y: top, height: 0, width: 0 };\n        this.newDimensions = { x: left, y: top, height: 0, width: 0 };\n\n        this.boundMouseMove = this.onMouseMove.bind(this, shapeType);\n        this.boundMouseUp = this.onMouseUp;\n        this.overlayLayer.ownerDocument.addEventListener(\n          'mousemove',\n          this.boundMouseMove\n        );\n        this.overlayLayer.ownerDocument.addEventListener(\n          'mouseup',\n          this.boundMouseUp\n        );\n        this.overlayLayer.ownerDocument.addEventListener(\n          'contextmenu',\n          this.boundMouseUp\n        );\n\n        const drawStartEvent = new DrawEvent(\n          `${this.name}.drawStart`,\n          this.canvas,\n          {\n            x: left,\n            y: top,\n            height: 0,\n            width: 0,\n          }\n        );\n        this.canvas.dispatchEvent(`${this.name}.drawStart`, drawStartEvent);\n      });\n      this.canvas.addEventListener('click', this.clickEvent);\n    }\n  }\n  clickEvent = (data: any) => {\n    let clickEvent = new DrawEvent(`${this.name}.click`, this.canvas, {\n      x: data.worldX,\n      y: data.worldY,\n      height: undefined,\n      width: undefined,\n    });\n    this.canvas.dispatchEvent(`${this.name}.click`, clickEvent);\n  };\n  abortDraw = () => {\n    this.dragStarted = false;\n    this.mouseDown = false;\n    this.dims.height = 0;\n    this.dims.width = 0;\n    if (this.renderer && this.renderer.style) {\n      this.renderer.style.width = '0px';\n      this.renderer.style.height = '0px';\n      this.renderer.style.display = 'none';\n    }\n    this.canvas.executeFunction('Tooltip.hide');\n    if (this.overlayDispose) {\n      this.overlayDispose();\n    }\n    this.canvas.setMouseCursor('default');\n    this.canvas.removeEventListener('click', this.clickEvent);\n    if (this.overlayLayer) {\n      this.overlayLayer.ownerDocument.removeEventListener(\n        'mousemove',\n        this.boundMouseMove\n      );\n      this.overlayLayer.ownerDocument.removeEventListener(\n        'mouseup',\n        this.boundMouseUp\n      );\n      this.overlayLayer.ownerDocument.removeEventListener(\n        'contextmenu',\n        this.boundMouseUp\n      );\n      this.renderer = undefined;\n      this.overlayLayer = undefined;\n    }\n    this.shapeType = undefined;\n  };\n\n  setSnapPoints = (context: IContext, snapPoints: any) => {\n    this.snapPoints = snapPoints;\n    if (this.snapPoints) {\n      this.snapPoints.parentSnapPoints.x.forEach((point: any) => {\n        point.value = point.rootValue;\n      });\n\n      this.snapPoints.parentSnapPoints.y.forEach((point: any) => {\n        point.value = point.rootValue;\n      });\n\n      this.snapPoints.siblingSnapPoints.x.forEach((point: any) => {\n        point.value = point.rootValue;\n      });\n\n      this.snapPoints.siblingSnapPoints.y.forEach((point: any) => {\n        point.value = point.rootValue;\n      });\n\n      this.snapPoints.rulerSnapPoints.x.forEach((point: any) => {\n        point.value = point.rootValue;\n      });\n\n      this.snapPoints.rulerSnapPoints.y.forEach((point: any) => {\n        point.value = point.rootValue;\n      });\n    }\n  };\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n  activate() {\n    this.canvas.addFunction('drawShape', this.drawShape.bind(this));\n    this.canvas.addFunction('abortDraw', this.abortDraw.bind(this));\n    this.canvas.addFunction(\n      'DrawComponent.setSnapPoints',\n      this.setSnapPoints.bind(this)\n    );\n    this.canvas.addEventListener('blur', () => {\n      if (this.isAltPressed) this.isAltPressed = false;\n      if (this.isShiftPressed) this.isShiftPressed = false;\n    });\n    this.canvas.addEventListener('keyUp', (data: any) => {\n      let event = data.originalEvent ? data.originalEvent : data;\n      if (event.keyCode === 16) {\n        this.isShiftPressed = false;\n      }\n      if (event.keyCode === 18) {\n        this.isAltPressed = false;\n      }\n    });\n    this.canvas.addEventListener('keyDown', (data: any) => {\n      let event = data.originalEvent ? data.originalEvent : data;\n      if (event.keyCode === 16) {\n        this.isShiftPressed = true;\n      }\n      if (event.keyCode === 18) {\n        this.isAltPressed = true;\n      }\n    });\n  }\n  deactivate() {\n    this.canvas.removeFunction('drawShape');\n    this.canvas.removeFunction('abortDraw');\n    this.canvas.removeFunction('DrawComponent.setSnapPoints');\n    this.overlayDispose();\n  }\n}\n","import { Layer } from '../../../models/Layer';\nimport { Canvas } from 'models/Canvas';\nimport DesignerMouseEvent from '../../../events/MouseEvent';\nexport default class LayerLabelEvent extends DesignerMouseEvent {\n  pageDx: number;\n  pageDy: number;\n  worldDx: number;\n  worldDy: number;\n  viewportDx: number;\n  viewportDy: number;\n  constructor(\n    name: string,\n    target: Layer,\n    originalEvent: any,\n    payload: any,\n    currentTarget?: Layer\n  ) {\n    super(name, target, originalEvent, currentTarget);\n    const canvas: Canvas = target.getCanvas();\n    this.worldDx = payload.worldDx;\n    this.worldDy = payload.worldDy;\n\n    let pagePoints = canvas.convertPoint(\n      { x: payload.worldDx, y: payload.worldDy },\n      'world',\n      'page'\n    );\n    this.pageDx = pagePoints.x;\n    this.pageDy = pagePoints.y;\n\n    let viewportPoints = canvas.convertPoint(\n      { x: this.pageDx, y: this.pageDy },\n      'page',\n      'viewport'\n    );\n\n    this.viewportDx = viewportPoints.x;\n    this.viewportDy = viewportPoints.y;\n  }\n}\n","// import { IPlugin } from '../../interfaces/IPlugin';\n// import { Canvas } from '../../models/Canvas';\nimport { IContext, IDimension } from 'interfaces';\nimport LayerLabelEvent from './events/layerLabelEvent';\nimport RemoveChildEvent from 'events/RemoveChildEvent';\nimport ArtboardEvent from 'events/ArtboardEvent';\nimport { Canvas, IPlugin, MouseEvent as DesignerMouseEvent } from '../../';\n\nexport default class LayerLabel implements IPlugin {\n  name = 'LayerLabel';\n  canvas!: Canvas;\n  labeltext: any;\n  removeDom: any;\n  lastPageX = 0;\n  lastPageY = 0;\n  dragStart: any = {\n    x: 0,\n    y: 0,\n  };\n  dims: IDimension = { x: 0, y: 0, height: 0, width: 0 };\n  layerLabelMap: Map<any, any> = new Map([]);\n  ghostImageDOM: any;\n\n  handleGhostImage(e: any) {\n    var crt = e.target.cloneNode(true);\n    crt.style.backgroundColor = 'red';\n    crt.style.opacity = 0;\n    crt.style.pointerEvents = 'none';\n    document.body.appendChild(crt);\n    this.ghostImageDOM = crt;\n    e.dataTransfer.setDragImage(crt, 0, 0);\n  }\n\n  updateLabelLayout(label: any, layer: any) {\n    label.style.top = layer.rootY - 20 / this.canvas.getZoom() + 'px';\n    label.style.left = layer.rootX + 'px';\n    label.style.height = `${20 / this.canvas.getZoom()}px`;\n    label.style.fontSize = `${12 / this.canvas.getZoom()}px`;\n  }\n\n  setLabel(context: IContext, layerLabel: string): void {\n    let layer = this.layerLabelMap.get(context.layer);\n    let layertextNode = layer.labeltextNode;\n    layertextNode.nodeValue = layerLabel;\n  }\n\n  selectedArtboardChanged = (event: ArtboardEvent) => {\n    const selectedArtboard = event.artboard;\n    if (selectedArtboard) {\n      this.layerLabelMap.forEach((label: any, artboard: any) => {\n        if (label.labeltextNode.parentElement) {\n          if (artboard === selectedArtboard) {\n            label.labeltextNode.parentElement.style.color = 'rgb(26, 170, 198)';\n          } else {\n            label.labeltextNode.parentElement.style.color =\n              'rgb(186, 189, 198)';\n          }\n        }\n      });\n    }\n  };\n\n  removeLabel(context: IContext): void {\n    let layerCallback = this.layerLabelMap.get(context.layer).removeCallback;\n    layerCallback();\n  }\n  hideLabel(context: IContext): void {\n    let label = this.layerLabelMap.get(context.layer);\n    if (label && label.labelNode) {\n      label.labelNode.style.display = 'none';\n    }\n  }\n  showLabel(context: IContext): void {\n    let label = this.layerLabelMap.get(context.layer);\n    if (label && label.labelNode) {\n      label.labelNode.style.display = '';\n    }\n  }\n  addLabel(context: IContext, layerLabel: string): void {\n    let layer = context.layer;\n    let label = document.createElement('span');\n    let labeltext = document.createTextNode(layerLabel);\n    label.appendChild(labeltext);\n\n    label.style.position = 'absolute';\n    label.style.top = layer.rootY - 20 / this.canvas.getZoom() + 'px';\n    label.style.left = layer.rootX + 'px';\n    // label.style.width = layer.getBoundingClientRect().width + 'px';\n\n    // label.style.letterSpacing = '1px';\n    label.style.height = `${20 / this.canvas.getZoom()}px`;\n    label.style.fontSize = `${12 / this.canvas.getZoom()}px`;\n\n    //label.style.lineHeight = '0.7px';\n    label.style.fontFamily =\n      'Roboto, -apple-system, BlinkMacSystemFont, sans-serif';\n    label.style.textOverflow = 'ellipsis';\n    label.style.color = 'rgb(186, 189, 198)';\n    label.style.overflow = 'hidden';\n    label.style.fontWeight = '300px';\n    label.style.letterSpacing = '0.6px';\n\n    this.canvas.on('zoom', () => {\n      this.updateLabelLayout(label, context.layer);\n    });\n    if (layer.parent) {\n      layer.parent.addEventListener(\n        'removeChild',\n        (event: RemoveChildEvent) => {\n          if (layer === event.layer) layer.executeFunction('LayerLabel.remove');\n        }\n      );\n    }\n    let dispose = this.canvas.addDomToWorld(label, true, 101);\n    label.setAttribute('class', 'file-header ' + label.className);\n    label.setAttribute('data-cypress-id', 'file-header');\n    this.layerLabelMap.set(layer, {\n      removeCallback: dispose,\n      labelNode: label,\n      labeltextNode: labeltext,\n    });\n    label.style.pointerEvents = 'all';\n    context.layer.on('layout', () => {\n      this.updateLabelLayout(label, context.layer);\n    });\n    context.layer.on('updateDom', () => {\n      this.updateLabelLayout(label, context.layer);\n    });\n\n    this.canvas.executeFunction('handleHtmlDrag', label);\n\n    label.addEventListener('htmlDragStart', (e: Event) => {\n      let dragVal = this.canvas.executeFunction(\n        'HtmlDragToWorld.dragStart',\n        e,\n        {\n          x: 0,\n          y: 0,\n          height: 0,\n          width: 0,\n          rotation: 0,\n        }\n      );\n\n      this.lastPageX = dragVal.event.worldX;\n      this.lastPageY = dragVal.event.worldY;\n\n      let labelDragStartEvent = new LayerLabelEvent(\n        `dragStart`,\n        context.layer,\n        e,\n        { worldX: dragVal.event.worldX, worldY: dragVal.event.worldY },\n        context.layer\n      );\n\n      layer.dispatchEvent(`dragStart`, labelDragStartEvent);\n    });\n\n    label.addEventListener('htmlDrag', (e: any) => {\n      if (e.pageX && e.pageY) {\n        let dragVal = this.canvas.executeFunction('HtmlDragToWorld.drag', e);\n        if (dragVal.session.current.deltaX || dragVal.session.current.deltaY) {\n          let relPos = {\n            x: dragVal.event.worldX - this.lastPageX,\n            y: dragVal.event.worldY - this.lastPageY,\n          };\n\n          let labelDragEvent = new LayerLabelEvent(`drag`, context.layer, e, {\n            worldDx: relPos.x,\n            worldDy: relPos.y,\n          });\n\n          layer.dispatchEvent(`drag`, labelDragEvent);\n          this.lastPageX = dragVal.event.worldX;\n          this.lastPageY = dragVal.event.worldY;\n        }\n      }\n    });\n    label.addEventListener('contextmenu', (e: any) => {\n      this.canvas.dispatchEventOnHitLayer(\n        e.type,\n        new DesignerMouseEvent(e.type, this.canvas, e, this.canvas),\n        e\n      );\n    });\n\n    label.addEventListener('htmlDragEnd', (e: any) => {\n      let dragVal = layer.executeFunction('HtmlDragToWorld.dragEnd', e);\n\n      // let relPos = {\n      //   x: dragVal.event.worldX - this.lastPageX,\n      //   y: dragVal.event.worldY - this.lastPageY,\n      // };\n\n      let labelDragEndEvent = new LayerLabelEvent(\n        `dragEnd`,\n        context.layer,\n        e,\n        { worldX: dragVal.event.worldX, worldY: dragVal.event.worldY },\n        context.layer\n      );\n\n      layer.dispatchEvent(`dragEnd`, labelDragEndEvent);\n\n      this.lastPageX = 0;\n      this.lastPageY = 0;\n    });\n\n    label.addEventListener('click', (e: any) => {\n      let labelClickEvent = new LayerLabelEvent(\n        `${this.name}.click`,\n        layer,\n        e,\n        {}\n      );\n      layer.dispatchEvent(`${this.name}.click`, labelClickEvent);\n    });\n\n    label.addEventListener('dblclick', (e: any) => {\n      let layerDoubleClickEvent = new LayerLabelEvent(\n        `${this.name}.doubleClick`,\n        layer,\n        e,\n        {}\n      );\n      layer.dispatchEvent(`${this.name}.doubleClick`, layerDoubleClickEvent);\n    });\n  }\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n  activate() {\n    this.canvas.addFunction(`${this.name}.add`, this.addLabel.bind(this));\n    this.canvas.addFunction(`${this.name}.set`, this.setLabel.bind(this));\n    this.canvas.addFunction(`${this.name}.remove`, this.removeLabel.bind(this));\n    this.canvas.addFunction(`${this.name}.show`, this.showLabel.bind(this));\n    this.canvas.addFunction(`${this.name}.hide`, this.hideLabel.bind(this));\n    this.canvas.addEventListener(\n      'artboardSelected',\n      this.selectedArtboardChanged\n    );\n  }\n  deactivate() {}\n}\n","import * as React from 'react';\n\nexport default class IPhoneXFrame extends React.Component<\n  { deviceOrientation: string; top: number; left: number },\n  any\n> {\n  render() {\n    const { deviceOrientation, left, top } = this.props;\n    const computedLeft =\n      deviceOrientation === 'landscape' ? left + 211 : left - 8;\n    const computedTop = deviceOrientation === 'landscape' ? top - 225 : top - 8;\n    const computedTransform =\n      deviceOrientation === 'landscape' ? `rotate(270deg)` : 'none';\n\n    const styleObject = {\n      position: 'absolute',\n      pointerEvents: 'none',\n      // zIndex: 1,\n      left: computedLeft,\n      top: computedTop,\n      transform: computedTransform,\n    };\n    return (\n      <div style={styleObject as any}>\n        <svg\n          width=\"388px\"\n          height=\"824px\"\n          viewBox=\"-2 -2 388 824\"\n          version=\"1.1\"\n          xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        >\n          <path\n            d={`M46,6 C23.909,6 6,23.909 6,46 L6,778 C6,800.091 23.909,818 46,818 L341,818 C363.091,818 381,800.091 381,\n            778 L381,46 C381,23.909 363.091,6 341,6 L46,6 Z M112.04,37 C99.337,37 89.04,26.703 89.04,13.961\n            L89.046,10.037 C89.0345531,9.99058934 89.0205314,9.94485191 89.004,9.9 C88.334,8.086 86.78,6.674\n            84.892,6.216 L84,6 L303,6 L302.108,6.216 C300.210771,6.68271966 298.67094,8.06429185 298.002,9.9\n            C297.970221,9.98647005 297.953971,10.0778752 297.954,10.17 L297.961,14 C297.961,26.703 287.663,37\n            274.961,37 L112.039,37 L112.04,37 Z M0,0 L388,0 L388,824 L0,824 L0,0 Z M128.5,800 C127.119288,800\n            126,801.119288 126,802.5 C126,803.880712 127.119288,805 128.5,805 L258.5,805 C259.880712,805 261,803.880712\n            261,802.5 C261,801.119288 259.880712,800 258.5,800 L128.5,800 Z`}\n            fill=\"#171A21\"\n            fillRule=\"evenodd\"\n            id=\"Shape\"\n          />\n        </svg>\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\nexport default class IPhoneXsMaxFrame extends React.Component<\n  { deviceOrientation: string; top: number; left: number },\n  any\n> {\n  render() {\n    const { deviceOrientation, left, top } = this.props;\n    const computedLeft =\n      deviceOrientation === 'landscape' ? left + 235 : left - 8;\n    const computedTop = deviceOrientation === 'landscape' ? top - 248 : top - 8;\n    const computedTransform =\n      deviceOrientation === 'landscape' ? `rotate(270deg)` : 'none';\n\n    const styleObject = {\n      position: 'absolute',\n      pointerEvents: 'none',\n      zIndex: 1,\n      left: computedLeft,\n      top: computedTop,\n      transform: computedTransform,\n    };\n    return (\n      <div style={styleObject as any}>\n        <svg\n          // this width, height too\n          width=\"427px\"\n          height=\"908px\"\n          // after 15 years of efforts, I have written this specific viewBox, dare not touch it ever\n          viewBox=\"0 -2 384 825\"\n          version=\"1.1\"\n          xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        >\n          <path\n            d={`M46,6 C23.909,6 6,23.909 6,46 L6,778 C6,800.091 23.909,818 46,818 L341,818 C363.091,818 381,800.091 381,\n            778 L381,46 C381,23.909 363.091,6 341,6 L46,6 Z M112.04,37 C99.337,37 89.04,26.703 89.04,13.961\n            L89.046,10.037 C89.0345531,9.99058934 89.0205314,9.94485191 89.004,9.9 C88.334,8.086 86.78,6.674\n            84.892,6.216 L84,6 L303,6 L302.108,6.216 C300.210771,6.68271966 298.67094,8.06429185 298.002,9.9\n            C297.970221,9.98647005 297.953971,10.0778752 297.954,10.17 L297.961,14 C297.961,26.703 287.663,37\n            274.961,37 L112.039,37 L112.04,37 Z M0,0 L388,0 L388,824 L0,824 L0,0 Z M128.5,800 C127.119288,800\n            126,801.119288 126,802.5 C126,803.880712 127.119288,805 128.5,805 L258.5,805 C259.880712,805 261,803.880712\n            261,802.5 C261,801.119288 259.880712,800 258.5,800 L128.5,800 Z`}\n            fill=\"#171A21\"\n            fillRule=\"evenodd\"\n            id=\"Shape\"\n          />\n        </svg>\n      </div>\n    );\n  }\n}\n","// import { IPlugin } from '../../interfaces/IPlugin';\n// import { Canvas } from '../../models/Canvas';\nimport { IContext, IDimension } from 'interfaces';\nimport DeviceFrameEvent from './events/DeviceFrameEvent';\nimport RemoveChildEvent from 'events/RemoveChildEvent';\nimport ArtboardEvent from 'events/ArtboardEvent';\nimport {\n  Canvas,\n  IPlugin,\n  MouseEvent as DesignerMouseEvent,\n  Layer,\n} from '../..';\nimport IPhoneXFrame from './Frames/iPhoneX';\nimport * as React from 'react';\nimport IPhoneXsMaxFrame from './Frames/iPhoneXsMax';\nimport ReactDOM from 'react-dom';\n\nexport default class DeviceFrame implements IPlugin {\n  name = 'DeviceFrame';\n  canvas!: Canvas;\n  labeltext: any;\n  wrapperDiv: any;\n  deviceName: any;\n  deviceOrientation: any;\n  dispose: any;\n  removeDom: any;\n  deviceFrameMap: Map<any, any> = new Map([]);\n  lastPageX = 0;\n  lastPageY = 0;\n  dragStart: any = {\n    x: 0,\n    y: 0,\n  };\n  dims: IDimension = { x: 0, y: 0, height: 0, width: 0 };\n  DeviceFrameMap: Map<any, any> = new Map([]);\n  ghostImageDOM: any;\n\n  // updateFrameLayout(layer: any) {\n  //   this.render();\n  // }\n\n  selectedArtboardChanged = (event: ArtboardEvent) => {\n    const selectedArtboard = event.artboard;\n    if (selectedArtboard) {\n      this.DeviceFrameMap.forEach((label: any, artboard: any) => {\n        if (artboard === selectedArtboard) {\n          let layerTextNode = label.labeltextNode;\n          layerTextNode.parentElement.style.color = 'rgb(26, 170, 198)';\n        } else {\n          label.labeltextNode.parentElement.style.color = 'rgb(186, 189, 198)';\n        }\n      });\n    }\n  };\n\n  removeFrame(context: IContext): void {\n    const deviceFrame = this.deviceFrameMap.get(context.layer);\n\n    if (deviceFrame) {\n      deviceFrame.removeCallback();\n    }\n  }\n\n  render = (layer: Layer) => {\n    let FrameComponent;\n\n    const deviceFrame = this.deviceFrameMap.get(layer);\n\n    if (!deviceFrame) {\n      return;\n    }\n\n    deviceFrame.frameNode.style.top =\n      layer.getBoundingClientRect().rootY + 'px';\n    deviceFrame.frameNode.style.left =\n      layer.getBoundingClientRect().rootX + 'px';\n\n    if (deviceFrame.deviceName) {\n      switch (deviceFrame.deviceName.toLowerCase()) {\n        case 'iphone x':\n        case 'iphone xs':\n        case 'iphone 11 pro':\n          FrameComponent = (\n            <IPhoneXFrame\n              deviceOrientation={deviceFrame.deviceOrientation}\n              left={0}\n              top={0}\n            />\n          );\n          break;\n        case 'iphone xs max':\n        case 'iphone xr':\n        case 'iphone 11 pro max':\n        case 'iphone 11':\n          FrameComponent = (\n            <IPhoneXsMaxFrame\n              deviceOrientation={deviceFrame.deviceOrientation}\n              left={0}\n              top={0}\n            />\n          );\n          break;\n        default:\n      }\n    }\n\n    if (!FrameComponent) {\n      return;\n    }\n\n    ReactDOM.render(FrameComponent, deviceFrame.frameNode);\n  };\n\n  addFrame(\n    context: IContext,\n    deviceName: string,\n    deviceOrientation: string\n  ): void {\n    let layer = context.layer;\n\n    const deviceFrame = this.deviceFrameMap.get(layer);\n\n    if (deviceFrame) {\n      deviceFrame.removeCallback();\n    }\n    const wrapperDiv = document.createElement('div');\n    wrapperDiv.className = 'frame-wrappers';\n    wrapperDiv.style.pointerEvents = 'none';\n    wrapperDiv.style.position = 'absolute';\n\n    let dispose = this.canvas.addDomToWorld(wrapperDiv, true, 100);\n\n    this.deviceFrameMap.set(layer, {\n      removeCallback: dispose,\n      frameNode: wrapperDiv,\n      deviceName: deviceName,\n      deviceOrientation: deviceOrientation,\n    });\n\n    this.render(layer);\n\n    if (layer.parent) {\n      layer.parent.addEventListener(\n        'removeChild',\n        (event: RemoveChildEvent) => {\n          if (layer === event.layer)\n            layer.executeFunction('DeviceFrame.remove');\n        }\n      );\n    }\n\n    context.layer.on('layout', () => {\n      this.render(context.layer);\n    });\n    context.layer.on('updateDom', () => {\n      this.render(context.layer);\n    });\n  }\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n  activate() {\n    this.canvas.addFunction(`${this.name}.add`, this.addFrame.bind(this));\n    this.canvas.addFunction(`${this.name}.remove`, this.removeFrame.bind(this));\n    this.canvas.addEventListener(\n      'artboardSelected',\n      this.selectedArtboardChanged\n    );\n  }\n  deactivate() {}\n}\n","import * as React from 'react';\n\nexport class BatterySection extends React.Component<any, any> {\n  render() {\n    return (\n      <div\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: this.props.left,\n        }}\n      >\n        <svg\n          width={`150px`}\n          height=\"24px\"\n          viewBox={`0 0 150 24`}\n          version=\"1.1\"\n          xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        >\n          <g stroke=\"none\" strokeWidth={1} fill=\"none\" fillRule=\"evenodd\">\n            <rect\n              // fill={this.props.backgroundColor}\n              x={0}\n              y={0}\n              width={150}\n              height={24}\n            />\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\nexport class NetworkSection extends React.Component<any, any> {\n  render() {\n    // //console.log(\"NetworkSection\", this.props.left, this.props.width);\n    return (\n      <div\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: this.props.left,\n        }}\n      >\n        <svg\n          width={`116px`}\n          height=\"24px\"\n          viewBox={`0 0 116 24`}\n          version=\"1.1\"\n          xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        >\n          <g\n            // transform=\"translate(242.000000, 0.000000)\"\n            strokeWidth={1}\n          >\n            <text\n              opacity=\"0.9\"\n              transform=\"translate(74.000000, 4.000000)\"\n              fill={this.props.color}\n              fontFamily=\"Roboto-Medium, Roboto\"\n              fontSize={14}\n              fontWeight={400}\n            >\n              <tspan x=\"0.459960938\" y={13}>\n                12:30\n              </tspan>\n            </text>\n            <g transform=\"translate(55.000000, 4.000000)\" fill=\"transparent\">\n              <polygon points=\"0 0 16 0 16 16 0 16\" />\n              <polygon\n                fill={this.props.color}\n                points=\"9 1.875 9 1 6 1 6 1.875 3 1.875 3 15 12 15 12 1.875\"\n              />\n            </g>\n            <g transform=\"translate(35.000000, 4.000000)\" fill=\"transparent\">\n              <polygon points=\"0 0 16 0 16 16 0 16\" />\n              <polygon fill={this.props.color} points=\"0 15 14 15 14 1\" />\n            </g>\n            <g transform=\"translate(14.000000, 4.000000)\" fill=\"transparent\">\n              <polygon points=\"2 0 18 0 18 16 2 16\" />\n              <path\n                d=\"M.977 4.016A14.934 14.934 0 0 1 10 1c3.387 0 6.512 1.123 9.023 3.016L10 15 .977 4.016z\"\n                fill={this.props.color}\n              />\n            </g>\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nexport default (props: any) => {\n  const backgroundColor: string = props.backgroundColor\n    ? props.backgroundColor\n    : '#000';\n  const color: string = props.color ? props.color : '#FFF';\n  return (\n    <div\n      style={{\n        position: 'relative',\n        width: props.width,\n        height: 24,\n        zIndex: 1,\n        backgroundColor: backgroundColor,\n      }}\n    >\n      <BatterySection\n        width={props.width}\n        // backgroundColor={backgroundColor}\n        left={0}\n      />\n      <NetworkSection\n        width={props.width}\n        color={color}\n        left={props.width - 115}\n      />\n    </div>\n  );\n};\n","import * as React from 'react';\nexport class RightSection extends React.Component<any, any> {\n  render() {\n    return (\n      <div\n        style={{\n          position: 'absolute',\n          top: 13,\n          left: this.props.left,\n        }}\n      >\n        <svg\n          width=\"97px\"\n          height=\"18px\"\n          viewBox=\"0 0 145 27\"\n          version=\"1.1\"\n          xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        >\n          <g\n            transform={`translate(-461.000000, -204.000000) translate(88.000000, 201.000000)\n            translate(373.000000, 3.000000)`}\n            stroke=\"none\"\n            strokeWidth={1}\n            fill=\"none\"\n            fillRule=\"evenodd\"\n          >\n            <path\n              d={`M0 11.99c0-.546.444-.99 1-.99h3a1 1 0 0 1 1 .99v4.02c0 .546-.444.99-1 .99H1a1\n              1 0 0 1-1-.99v-4.02zm7-2.992C7 8.447 7.444 8 8 8h3c.552 0 1 .446 1 .998v7.004c0\n              .551-.444.998-1 .998H8c-.552 0-1-.446-1-.998V8.998zm7-4A.997.997 0 0 1 15 4h3a1 1 0 0\n              1 1 .999V16A.997.997 0 0 1 18 17h-3a1 1 0 0 1-1-.999V5zm7-2.997C21 1.448 21.444 1 22\n              1h3c.552 0 1 .445 1 1v14c0 .552-.444 1-1 1h-3c-.552 0-1-.445-1-1V2z`}\n              fill={this.props.color}\n            />\n            <path\n              d={`M32.348 5.634C38.603-.621 48.745-.621 55 5.634l-2.35\n              2.35c-4.957-4.957-12.994-4.957-17.951 0l-2.35-2.35zm3.858 3.857c4.125-4.124 10.812-4.124\n              14.936 0l-2.028 2.03a7.692 7.692 0 0 0-10.88 0l-2.028-2.03zm3.33 3.33a5.853 5.853 0 0\n              1 8.277 0l-4.139 4.139-4.138-4.139z`}\n              fill={this.props.color}\n            />\n            <g transform=\"translate(61.000000, 0.000000)\">\n              <rect\n                stroke={this.props.color}\n                // stroke=\"none\"\n                opacity=\"0.300000012\"\n                x=\"0.5\"\n                y=\"0.5\"\n                width={31}\n                height={17}\n                rx={6}\n              />\n              <rect\n                fill={this.props.color}\n                x={3}\n                y={3}\n                width={26}\n                height={12}\n                rx={3}\n              />\n              <path d=\"M34 7a2 2 0 1 1 0 4V7z\" fill={this.props.color} />\n            </g>\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nexport class LeftSection extends React.Component<any, any> {\n  render() {\n    return (\n      <div\n        style={{\n          position: 'absolute',\n          top: 13,\n          left: this.props.left,\n        }}\n      >\n        <svg version=\"1.1\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\n          <g\n            fill={this.props.color}\n            stroke=\"none\"\n            strokeWidth={1}\n            fillRule=\"evenodd\"\n          >\n            <g fill={this.props.color}>\n              <text\n                fontFamily=\".AppleSystemUIFont\"\n                fontSize=\"11.9931181\"\n                fontWeight=\"normal\"\n              >\n                <tspan x={0} y={13}>\n                  9:41 AM\n                </tspan>\n              </text>\n              <path\n                d={`M61.797 2.5a2.163 2.163 0 0 0-.763.134l-.339.133 2.764 2.763.242.221.12-.312a2.186 2.186 0 0\n                0-.495-2.304 2.18 2.18 0 0 0-1.529-.636zm-5.535.002a2.185 2.185 0 0 0-1.656.633 2.18 2.18 0 0 0-.502\n                2.292l.133.34L57 3.002l.22-.241-.31-.122-.046-.019a2.153 2.153 0 0 0-.602-.119zm2.704.866a4.568 4.568\n                0 0 0-4.562 4.562 4.568 4.568 0 0 0 4.562 4.563A4.568 4.568 0 0 0 63.53 7.93a4.568 4.568 0 0\n                0-4.563-4.562zm0 1.303c.12 0 .217.098.217.217V7.93c0 .12-.097.217-.217.217h-1.738a.217.217 0\n                0 1 0-.434h1.52V4.888c0-.12.098-.217.218-.217z`}\n                fillRule=\"nonzero\"\n              />\n            </g>\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nexport default (props: any) => (\n  <div style={{ position: 'relative', width: '100%', height: 44, zIndex: 1 }}>\n    <LeftSection left={14} width={83} color={props.color} />\n    <RightSection left={props.width - 80} width={83} color={props.color} />\n  </div>\n);\n","import * as React from 'react';\nexport class BatterySection extends React.Component<any, any> {\n  render() {\n    return (\n      <div\n        style={{\n          position: 'absolute',\n          top: 2.5,\n          left: this.props.left,\n        }}\n      >\n        <svg version=\"1.1\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\n          <g\n            fill={this.props.color}\n            stroke=\"none\"\n            strokeWidth={1}\n            fillRule=\"evenodd\"\n          >\n            <g strokeWidth={1} fillRule=\"evenodd\">\n              <path\n                d={`M37.494 2.5h19.512c.82 0 1.494.674 1.494 1.505v6.49c0 .837-.669\n              1.505-1.494 1.505H37.494c-.82 0-1.494-.674-1.494-1.505v-6.49c0-.837.669-1.505\n              1.494-1.505zM59 5.5h.75c.417 0 .75.332.75.742v2.016a.748.748 0 0 1-.75.742H59V5.5zM37.508\n              3c-.557 0-1.008.457-1.008 1.008v6.484c0 .557.45 1.008 1.008 1.008h19.484c.557 0 1.008-.457\n              1.008-1.008V4.008C58 3.451 57.55 3 56.992 3H37.508zm-.001.5h19.486c.277\n              0 .507.22.507.492v6.516a.497.497 0 0 1-.507.492H37.507a.502.502 0 0\n              1-.507-.492V3.992c0-.276.227-.492.507-.492z`}\n              />\n              <text\n                fontFamily=\".AppleSystemUIFont\"\n                fontSize={12}\n                fontWeight=\"normal\"\n              >\n                <tspan x=\"2.85351562\" y=\"11.5\">\n                  100%\n                </tspan>\n              </text>\n            </g>\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\nexport class NetworkSection extends React.Component<any, any> {\n  render() {\n    return (\n      <div\n        style={{\n          position: 'absolute',\n          top: 2.5,\n          left: this.props.left,\n        }}\n      >\n        <svg version=\"1.1\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" fill=\"red\">\n          <g\n            fill={this.props.color}\n            stroke=\"none\"\n            strokeWidth={1}\n            fillRule=\"evenodd\"\n          >\n            <g strokeWidth={1} fillRule=\"evenodd\">\n              <path\n                d={`M90.144 9.439L88.023 11.5 85.86 9.405a2.857 2.857 0 0 1 2.128-.936c.864 0\n              1.638.376 2.156.97zm2.18-2.118l-1.09 1.058a4.417 4.417 0 0 0-3.246-1.402c-1.274 0-2.42.528-3.219\n              1.372l-1.09-1.056a5.979 5.979 0 0 1 4.309-1.809c1.713 0 3.257.708 4.335 1.837zM94.5 5.207l-1.088\n              1.057a7.539 7.539 0 0 0-5.424-2.272 7.54 7.54 0 0 0-5.398 2.245L81.5 5.182A9.1 9.1 0 0 1 87.988 2.5\n              9.1 9.1 0 0 1 94.5 5.207z`}\n              />\n              <text\n                fontFamily=\".AppleSystemUIFont\"\n                fontSize={12}\n                fontWeight=\"normal\"\n              >\n                <tspan x={38} y=\"11.5\">\n                  Carrier\n                </tspan>\n              </text>\n              <path\n                d={`M3.25 10a2.75 2.75 0 1 1 0-5.5 2.75 2.75 0 0 1 0 5.5zm7 0a2.75 2.75 0 1\n              1 0-5.5 2.75 2.75 0 0 1 0 5.5zm7 0a2.75 2.75 0 1 1 0-5.5 2.75 2.75 0 0 1 0 5.5zm7 0a2.75 2.75\n              0 1 1 0-5.5 2.75 2.75 0 0 1 0 5.5zm7 0a2.75 2.75 0 1 1 0-5.5 2.75 2.75 0 0 1 0 5.5z`}\n              />\n            </g>\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nexport class TimeSection extends React.Component<any, any> {\n  render() {\n    return (\n      <div\n        style={{\n          position: 'absolute',\n          top: 2.5,\n          left: this.props.left,\n        }}\n      >\n        <svg version=\"1.1\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\n          <g\n            fill={this.props.color}\n            stroke=\"none\"\n            strokeWidth={1}\n            fillRule=\"evenodd\"\n          >\n            <text\n              fontFamily=\".AppleSystemUIFont\"\n              fontSize={12}\n              fontWeight=\"normal\"\n            >\n              <tspan x=\"0\" y=\"11.5\">\n                9:41 AM\n              </tspan>\n            </text>\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nexport class BackgroundRect extends React.Component<any, any> {\n  render() {\n    return (\n      <div\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: this.props.width,\n        }}\n      >\n        <svg\n          width={`${this.props.width}px`}\n          height=\"20px\"\n          viewBox={`0 0 ${this.props.width} 20`}\n          version=\"1.1\"\n          xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        >\n          <g stroke=\"none\" strokeWidth={1} fill=\"none\" fillRule=\"evenodd\">\n            <rect\n              fill={this.props.backgroundColor}\n              x={0}\n              y={0}\n              width={this.props.width}\n              height={20}\n            />\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nexport default (props: any) => (\n  <div\n    style={{ position: 'relative', width: props.width, height: 20, zIndex: 1 }}\n  >\n    <BackgroundRect\n      backgroundColor={props.backgroundColor}\n      width={props.width}\n    />\n    <NetworkSection left={3} color={props.color} />\n    <TimeSection color={props.color} left={props.width / 2 - 20} />\n    <BatterySection color={props.color} left={props.width - 65} />\n  </div>\n);\n","import { get } from 'lodash';\nimport * as React from 'react';\nimport AndroidStatusBar from './StatusBars/AndroidStatusBar';\nimport IPhoneXStatusBar from './StatusBars/IPhoneXStatusBar';\nimport IOSStatusBar from './StatusBars/IOSStatusBar';\nimport { Layer } from '../../..';\n\nexport default class StatusBarComponent extends React.Component<\n  {\n    layer: Layer;\n    width: number;\n    height: number;\n    deviceName: string;\n    deviceOS: string;\n    deviceOrientation: string;\n    backgroundColor: string;\n    barStyle: string;\n  },\n  any\n> {\n  constructor(props: any) {\n    super(props);\n  }\n  onUpdate = () => {\n    // this.forceUpdate();\n  };\n  attachStatusBarListeners = () => {\n    // const statusBarRenderLayer = this.props.layer;\n    // const statusBarLayer = statusBarRenderLayer.domainCompiledRef.domainRef;\n    // if (statusBarLayer) {\n    //   statusBarLayer.props.on('hidden', this.onUpdate);\n    //   statusBarLayer.props.on('backgroundColor', this.onUpdate);\n    //   statusBarLayer.props.on('barStyle', this.onUpdate);\n    //   statusBarLayer.props.on('animated', this.onUpdate);\n    // }\n    // if (this.props.layer.getFile()) {\n    //   this.props.layer.getFile().on('height', this.onUpdate);\n    //   this.props.layer.getFile().on('width', this.onUpdate);\n    // }\n  };\n  removeStatusBarListeners = () => {\n    // const statusBarRenderLayer = this.props.layer;\n    // const statusBarLayer = statusBarRenderLayer.domainCompiledRef.domainRef;\n    // if (statusBarLayer) {\n    //   statusBarLayer.props.off('hidden', this.onUpdate);\n    //   statusBarLayer.props.off('backgroundColor', this.onUpdate);\n    //   statusBarLayer.props.off('barStyle', this.onUpdate);\n    //   statusBarLayer.props.off('animated', this.onUpdate);\n    // }\n    // if (this.props.layer.getFile()) {\n    //   this.props.layer.getFile().off('height', this.onUpdate);\n    //   this.props.layer.getFile().off('width', this.onUpdate);\n    // }\n    // // if (this.props.layer.parent) {\n    // //   this.props.layer.parent.off(\"height\", this.onUpdate);\n    // //   this.props.layer.parent.off(\"width\", this.onUpdate);\n    // // }\n  };\n  componentDidMount() {\n    this.props.layer.on(['layout', 'updateDom'], this.onUpdate);\n  }\n  componentDidUpdate(prevProps: any) {\n    prevProps.layer.off(['layout', 'updateDom'], this.onUpdate);\n    this.props.layer.on(['layout', 'updateDom'], () => {\n      this.onUpdate();\n    });\n  }\n  componentWillUnmount() {\n    this.props.layer.off(['layout', 'updateDom'], this.onUpdate);\n  }\n  getElement() {\n    if (!this.props.layer) {\n      return null;\n    }\n\n    const deviceName = this.props.deviceName;\n    const deviceOS = this.props.deviceOS;\n    const deviceOrientation = this.props.deviceOrientation;\n\n    let barColor: string = '#000';\n\n    let deviceWidth = this.props.width;\n    let deviceHeight = this.props.height;\n    // if (deviceOrientation === 'portrait') {\n    //   deviceWidth = device.resolution.width / device.pixelRatio;\n    //   deviceHeight = device.resolution.height / device.pixelRatio;\n    // } else {\n    //   deviceWidth = device.resolution.height / device.pixelRatio;\n    //   deviceHeight = device.resolution.width / device.pixelRatio;\n    // }\n\n    const style = {\n      // display: statusBarRenderLayer.props.style.display,\n    };\n    // if (statusBarRenderLayer.props.hidden) {\n    //   return null;\n    // }\n    // const height = renderFile ? renderFile.height : 0;\n    // const width = renderFile ? renderFile.width : 0;\n    let IPHONEX_OR_IPHONEXS: boolean = false;\n    let IPHONEXR_OR_IPHONEXSMAX: boolean = false;\n\n    if (deviceOS && deviceName) {\n      IPHONEX_OR_IPHONEXS =\n        deviceOS.toLowerCase() === 'ios' &&\n        (deviceName.toLowerCase() === 'iphone x' ||\n          deviceName.toLowerCase() === 'iphone xs' ||\n          deviceName.toLowerCase() === 'iphone 11 pro');\n\n      IPHONEXR_OR_IPHONEXSMAX =\n        deviceOS.toLowerCase() === 'ios' &&\n        (deviceName.toLowerCase() === 'iphone xr' ||\n          deviceName.toLowerCase() === 'iphone xs max' ||\n          deviceName.toLowerCase() === 'iphone 11' ||\n          deviceName.toLowerCase() === 'iphone 11 pro max');\n    }\n\n    //    &&\n    // ((deviceWidth === height && deviceHeight === width) ||\n    //   (deviceWidth === width && deviceHeight === height));\n\n    const IOS: boolean = deviceOS === 'iOS';\n    const WEB: boolean = deviceOS === 'Web';\n    if (WEB) {\n      return null;\n    }\n\n    if (IOS && !IPHONEX_OR_IPHONEXS && !IPHONEXR_OR_IPHONEXSMAX) {\n      if (this.props.barStyle === 'light-content') {\n        barColor = '#ffffff';\n      } else if (this.props.barStyle === 'dark-content') {\n        barColor = '#000000';\n      }\n      return (\n        <div style={{ position: 'absolute', top: 0, left: 0 }}>\n          <IOSStatusBar width={deviceWidth} color={barColor} style={style} />\n        </div>\n      );\n    } else if (IPHONEX_OR_IPHONEXS || IPHONEXR_OR_IPHONEXSMAX) {\n      if (this.props.barStyle === 'light-content') {\n        barColor = '#ffffff';\n      } else if (this.props.barStyle === 'dark-content') {\n        barColor = '#000000';\n      }\n      return (\n        <div style={{ position: 'absolute', top: 0, left: 0 }}>\n          <IPhoneXStatusBar\n            width={deviceWidth}\n            deviceOrientation={deviceOrientation}\n            backgroundColor=\"rgba(255,255,255,0.2)\"\n            color={barColor}\n            style={style}\n          />\n        </div>\n      );\n    } else {\n      if (this.props.barStyle === 'light-content') {\n        barColor = '#ffffff';\n      } else if (this.props.barStyle === 'dark-content') {\n        barColor = '#404040';\n      }\n      return (\n        <div style={{ position: 'absolute', top: 0, left: 0 }}>\n          <AndroidStatusBar\n            width={deviceWidth}\n            height={deviceHeight}\n            backgroundColor={this.props.backgroundColor || '#999999'}\n            color={barColor}\n            style={style}\n          />\n        </div>\n      );\n    }\n  }\n  render() {\n    return this.getElement();\n  }\n}\n","// import { IPlugin } from '../../interfaces/IPlugin';\n// import { Canvas } from '../../models/Canvas';\nimport { IContext, IDimension } from 'interfaces';\nimport DeviceFrameEvent from './events/DeviceFrameEvent';\nimport RemoveChildEvent from 'events/RemoveChildEvent';\nimport ArtboardEvent from 'events/ArtboardEvent';\nimport {\n  Canvas,\n  IPlugin,\n  MouseEvent as DesignerMouseEvent,\n  Layer,\n} from '../..';\nimport * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport StatusBarComponent from './StatusBarComponent';\n\nexport default class StatusBar implements IPlugin {\n  name = 'StatusBar';\n  canvas!: Canvas;\n  labeltext: any;\n  wrapperDiv: any;\n  deviceName: any;\n  deviceOrientation: any;\n  dispose: any;\n  removeDom: any;\n  statusBarMap: Map<any, any> = new Map([]);\n  lastPageX = 0;\n  lastPageY = 0;\n  dragStart: any = {\n    x: 0,\n    y: 0,\n  };\n  dims: IDimension = { x: 0, y: 0, height: 0, width: 0 };\n  ghostImageDOM: any;\n\n  // updateFrameLayout(layer: any) {\n  //   this.render();\n  // }\n\n  selectedArtboardChanged = (event: ArtboardEvent) => {\n    // const selectedArtboard = event.artboard;\n    // if (selectedArtboard) {\n    //   this.statusBarMap.forEach((label: any, artboard: any) => {\n    //     if (artboard === selectedArtboard) {\n    //       let layerTextNode = label.labeltextNode;\n    //       layerTextNode.parentElement.style.color = 'rgb(26, 170, 198)';\n    //     } else {\n    //       label.labeltextNode.parentElement.style.color = 'rgb(186, 189, 198)';\n    //     }\n    //   });\n    // }\n  };\n\n  removeStatusBar(context: IContext): void {\n    const deviceFrame = this.statusBarMap.get(context.layer);\n\n    if (deviceFrame) {\n      deviceFrame.removeCallback();\n    }\n  }\n\n  render = (layer: Layer) => {\n    const deviceFrame = this.statusBarMap.get(layer);\n    if (!deviceFrame) {\n      return;\n    }\n    deviceFrame.frameNode.style.top =\n      layer.getBoundingClientRect().rootY + 'px';\n    deviceFrame.frameNode.style.left =\n      layer.getBoundingClientRect().rootX + 'px';\n\n    // const statusBarConfig = layer.executeFunction('getData', 'statusBarConfig');\n\n    ReactDOM.render(\n      <StatusBarComponent\n        layer={layer}\n        width={layer.getBoundingClientRect().width}\n        height={layer.getBoundingClientRect().height}\n        deviceName={deviceFrame.deviceName}\n        deviceOS={deviceFrame.deviceOS}\n        deviceOrientation={deviceFrame.deviceOrientation}\n        barStyle={deviceFrame.barStyle}\n        backgroundColor={deviceFrame.backgroundColor}\n      />,\n      deviceFrame.frameNode\n    );\n  };\n\n  addStatusBar(context: IContext, config: any): void {\n    let layer = context.layer;\n\n    const deviceFrame = this.statusBarMap.get(layer);\n\n    if (deviceFrame) {\n      deviceFrame.removeCallback();\n    }\n    const wrapperDiv = document.createElement('div');\n    wrapperDiv.className = 'status-bar-wrappers';\n    wrapperDiv.style.position = 'absolute';\n\n    let dispose = this.canvas.addDomToWorld(wrapperDiv, true, 100);\n    wrapperDiv.style.pointerEvents = 'none';\n\n    this.statusBarMap.set(layer, {\n      removeCallback: dispose,\n      frameNode: wrapperDiv,\n      deviceName: config.deviceName,\n      deviceOS: config.deviceOS,\n      deviceOrientation: config.deviceOrientation,\n      barStyle: config.barStyle,\n      backgroundColor: config.backgroundColor,\n    });\n\n    this.render(layer);\n\n    if (layer.parent) {\n      layer.parent.addEventListener(\n        'removeChild',\n        (event: RemoveChildEvent) => {\n          if (layer === event.layer) layer.executeFunction('StatusBar.remove');\n        }\n      );\n    }\n\n    context.layer.on('layout', () => {\n      this.render(context.layer);\n    });\n    context.layer.on('updateDom', () => {\n      this.render(context.layer);\n    });\n  }\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n  activate() {\n    this.canvas.addFunction(`${this.name}.add`, this.addStatusBar.bind(this));\n    this.canvas.addFunction(\n      `${this.name}.remove`,\n      this.removeStatusBar.bind(this)\n    );\n    // this.canvas.addEventListener(\n    //   'artboardSelected',\n    //   this.selectedArtboardChanged\n    // );\n  }\n  deactivate() {}\n}\n","import { Layer, MouseEvent } from '../../..';\nimport { IPosition, IDimensionWithRotation } from 'interfaces';\n\nexport class ResizerRendererDragEvent extends MouseEvent {\n  targetHandle: string;\n  startValues: IDimensionWithRotation;\n  session: {\n    start: IPosition;\n    current: any;\n    end: IPosition;\n  };\n  constructor(\n    name: string,\n    targetHandle: string,\n    startValues: IDimensionWithRotation,\n    session: { start: IPosition; current: IPosition; end: IPosition },\n    originalEvent: any,\n    target: Layer,\n    currentTarget?: Layer\n  ) {\n    super(name, target, originalEvent, currentTarget);\n    this.targetHandle = targetHandle;\n    this.session = session;\n    this.startValues = startValues;\n  }\n}\n","export function getResizerQuad(rotation: number): string {\n  rotation = rotation % 360;\n  if (rotation < 0) {\n    rotation += 360;\n  }\n  if (!rotation) {\n    return '4';\n  }\n  if (\n    (rotation >= 22.5 && rotation < 67.5) ||\n    (rotation >= 202.5 && rotation < 247.5)\n  ) {\n    return '1';\n  }\n\n  if (\n    (rotation >= 67.5 && rotation < 112.5) ||\n    (rotation >= 247.5 && rotation < 292.5)\n  ) {\n    return '2';\n  }\n  if (\n    (rotation >= 112.5 && rotation < 157.5) ||\n    (rotation >= 292.5 && rotation < 337.5)\n  ) {\n    return '3';\n  }\n\n  if (\n    (rotation >= 157.5 && rotation < 202.5) ||\n    (rotation >= 337.5 && rotation < 22.5)\n  ) {\n    return '4';\n  }\n  return '4';\n}\n\nexport function getCursor(handleName: string, rotation: any) {\n  let resizerQuad = getResizerQuad(rotation);\n  let cursor = 'default';\n  if (handleName === 'T' || handleName === 'B') {\n    if (resizerQuad === '1') {\n      cursor = 'nesw-resize';\n    } else if (resizerQuad === '2') {\n      cursor = 'ew-resize';\n    } else if (resizerQuad === '3') {\n      cursor = 'nwse-resize';\n    } else if (resizerQuad === '4') {\n      cursor = 'ns-resize';\n    } else {\n      cursor = 'ns-resize';\n    }\n  } else if (handleName === 'L' || handleName === 'R') {\n    if (resizerQuad === '1') {\n      cursor = 'nwse-resize';\n    } else if (resizerQuad === '2') {\n      cursor = 'ns-resize';\n    } else if (resizerQuad === '3') {\n      cursor = 'nesw-resize';\n    } else if (resizerQuad === '4') {\n      cursor = 'ew-resize';\n    } else {\n      cursor = 'ew-resize';\n    }\n  } else if (handleName === 'TL' || handleName === 'BR') {\n    if (resizerQuad === '1') {\n      cursor = 'ns-resize';\n    } else if (resizerQuad === '2') {\n      cursor = 'nesw-resize';\n    } else if (resizerQuad === '3') {\n      cursor = 'ew-resize';\n    } else if (resizerQuad === '4') {\n      cursor = 'nwse-resize';\n    } else {\n      cursor = 'nwse-resize';\n    }\n  } else if (handleName === 'TR' || handleName === 'BL') {\n    if (resizerQuad === '1') {\n      cursor = 'ew-resize';\n    } else if (resizerQuad === '2') {\n      cursor = 'nwse-resize';\n    } else if (resizerQuad === '3') {\n      cursor = 'ns-resize';\n    } else if (resizerQuad === '4') {\n      cursor = 'nesw-resize';\n    } else {\n      cursor = 'nesw-resize';\n    }\n  }\n  return cursor;\n}\n\nexport function getRotationQuad(rotation: number) {\n  rotation = rotation % 360;\n  if (rotation < 0) {\n    rotation = -rotation;\n  }\n  if (rotation >= 0 && rotation < 45) {\n    return 1;\n  }\n  if (rotation >= 45 && rotation < 90) {\n    return 2;\n  }\n  if (rotation >= 90 && rotation < 135) {\n    return 3;\n  }\n  if (rotation >= 135 && rotation < 180) {\n    return 4;\n  }\n  if (rotation >= 180 && rotation < 225) {\n    return 5;\n  }\n  if (rotation >= 225 && rotation < 270) {\n    return 6;\n  }\n  if (rotation >= 270 && rotation < 315) {\n    return 7;\n  }\n  if (rotation >= 315 && rotation < 360) {\n    return 8;\n  }\n  return 1;\n}\n\nexport function getInitialRotation(handleName: string) {\n  switch (handleName) {\n    case 'TL':\n      return 0;\n    case 'T':\n      return 45;\n    case 'TR':\n      return 90;\n    case 'R':\n      return 135;\n    case 'BR':\n      return 180;\n    case 'B':\n      return 225;\n    case 'BL':\n      return 270;\n    case 'L':\n      return 315;\n    default:\n      return 0;\n  }\n}\n\nexport function getRotationResizerIcon(rotation: any) {\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n  <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 564 581\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n      <defs>\n          <path d=\"M477.685,171.292105 L371.8863,39.25 L263.608591,171.292105 L335.318307,171.23947 C335.404758,201.878069 335.447983,217.197368 335.447983,217.197368 C335.447983,240.945561 331.697189,285.753289 307.961066,309.007895 C286.086784,330.438429 244.930829,340.175619 223.588558,340.175619 L167.014783,340.175619 L166.896133,269.807895 L35.685,375.028947 L166.896133,480.25 L166.896133,410.453368 L223.42583,410.453368 C276.561146,410.453368 325.08715,391.950329 360.415853,357.229972 C395.744556,322.509615 406.110126,270.927723 406.110126,217.334067 C406.110126,217.334067 406.066901,201.986747 405.98045,171.292105 L477.685,171.292105 Z\" id=\"path-1\"></path>\n          <filter x=\"-22.4%\" y=\"-22.4%\" width=\"147.3%\" height=\"147.4%\" filterUnits=\"objectBoundingBox\" id=\"filter-2\">\n              <feMorphology radius=\"14\" operator=\"dilate\" in=\"SourceAlpha\" result=\"shadowSpreadOuter1\"></feMorphology>\n              <feOffset dx=\"2\" dy=\"2\" in=\"shadowSpreadOuter1\" result=\"shadowOffsetOuter1\"></feOffset>\n              <feGaussianBlur stdDeviation=\"25\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"></feGaussianBlur>\n              <feComposite in=\"shadowBlurOuter1\" in2=\"SourceAlpha\" operator=\"out\" result=\"shadowBlurOuter1\"></feComposite>\n              <feColorMatrix values=\"0 0 0 0 0.0487149004   0 0 0 0 0.0471071601   0 0 0 0 0.0471071601  0 0 0 1 0\" type=\"matrix\" in=\"shadowBlurOuter1\"></feColorMatrix>\n          </filter>\n      </defs>\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <g id=\"iPhone-8\" transform=\"translate(0.000000, -95.000000)\">\n              <g id=\"curve-arrow\" transform=\"translate(21.000000, 131.000000)\">\n                  <g id=\"Path\" fill-rule=\"nonzero\" transform=\"translate(256.685000, 259.750000) rotate(${180 +\n                    rotation}) translate(-256.685000, -259.750000) \">\n                      <use fill=\"black\" fill-opacity=\"1\" filter=\"url(#filter-2)\" xlink:href=\"#path-1\"></use>\n                      <use stroke=\"#FCF7F7\" stroke-width=\"26\" fill=\"#000000\" xlink:href=\"#path-1\"></use>\n                  </g>\n              </g>\n          </g>\n      </g>\n  </svg>`;\n}\n\nexport function getHorizontalResizerIcon(rotation: any) {\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n  <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 512 512\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n      <defs>\n          <path d=\"M30,256.450973 L156.560656,361 L156.597461,295.437849 C156.852233,295.437849 157.086901,295.480695 157.343864,295.480695 L343.414557,295.480695 C343.671649,295.480695 343.955674,295.444441 344.210833,295.437849 L344.053652,361 L482,256.343185 L344.053652,151 L344.210833,217.464668 C343.955932,217.464668 343.67152,217.421822 343.414557,217.421822 L157.343864,217.421822 C157.086772,217.421822 156.85249,217.458076 156.597461,217.464668 L156.560656,151 L30,256.450973 Z\" id=\"path-1\"></path>\n          <filter x=\"-21.8%\" y=\"-51.0%\" width=\"144.7%\" height=\"203.6%\" filterUnits=\"objectBoundingBox\" id=\"filter-2\">\n              <feMorphology radius=\"14\" operator=\"dilate\" in=\"SourceAlpha\" result=\"shadowSpreadOuter1\"></feMorphology>\n              <feOffset dx=\"2\" dy=\"2\" in=\"shadowSpreadOuter1\" result=\"shadowOffsetOuter1\"></feOffset>\n              <feGaussianBlur stdDeviation=\"25\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"></feGaussianBlur>\n              <feComposite in=\"shadowBlurOuter1\" in2=\"SourceAlpha\" operator=\"out\" result=\"shadowBlurOuter1\"></feComposite>\n              <feColorMatrix values=\"0 0 0 0 0.0448086504   0 0 0 0 0.0442135355   0 0 0 0 0.0442135355  0 0 0 1 0\" type=\"matrix\" in=\"shadowBlurOuter1\"></feColorMatrix>\n          </filter>\n      </defs>\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <g id=\"iPhone-8-Copy\">\n              <g id=\"rect3044-174-4-7-5-8-7-1-1-3-2\">\n                  <g id=\"rect3044-174-4-7-5-8-7-1-1-3\" fill-rule=\"nonzero\" transform=\"translate(256.000000, 256.000000) rotate(${45 +\n                    rotation}) translate(-256.000000, -256.000000) \">\n                      <use fill=\"black\" fill-opacity=\"1\" filter=\"url(#filter-2)\" xlink:href=\"#path-1\"></use>\n                      <use stroke=\"#FCF9F9\" stroke-width=\"26\" fill=\"#000000\" xlink:href=\"#path-1\"></use>\n                  </g>\n              </g>\n          </g>\n      </g>\n  </svg>`;\n}\n","import { forEach } from 'lodash';\nimport { ResizerRendererDragEvent } from './ResizerRendererDragEvent';\nimport { Canvas, IPlugin, MouseEvent as DesignerMouseEvent } from '../../';\nimport { IContext, IDimensionWithRotation } from '../../interfaces';\nimport ResetResizerEvent from 'events/ResetResizerEvent';\nimport {\n  getInitialRotation,\n  getHorizontalResizerIcon,\n  getRotationResizerIcon,\n} from './utils';\nexport default class ResizerRendererPlugin implements IPlugin {\n  name = 'ResizerRenderer';\n  namespace = 'ResizerRenderer';\n  canvas!: Canvas;\n  dispose: any;\n  allowClickEvents: boolean = false;\n  wrapperLayer: any;\n  resizerHandleLayersRef!: Map<string, any>;\n  resizerData!: { dims: IDimensionWithRotation; handles: Array<string> };\n  passedEvent = [\n    'mousedown',\n    'mouseup',\n    'mousemove',\n    'dblclick',\n    'contextmenu',\n    'click',\n    'drop',\n  ];\n  show: boolean = true;\n  mouseDown: boolean = false;\n  dragStarted: boolean = false;\n  handleDragStarted: boolean = false;\n  cursor: any;\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n    this.resizerData = {\n      dims: { x: 0, y: 0, height: 0, width: 0, rotation: 0 },\n      handles: [],\n    };\n    this.resizerHandleLayersRef = new Map<string, any>();\n  }\n\n  setHandleStyle(handleInstance: any, handleName: string) {\n    let zoom = this.canvas.getZoom();\n    const rotationHandleSize = 20;\n    const handleSize = 10;\n    if (handleName === 'ROTATE') {\n      return;\n    }\n    let propsWithoutPx: any = {\n      position: 'absolute',\n      display: '',\n      'background-color': 'rgba(255, 255, 255, 1)',\n      border: `${1 / zoom}px solid #1FB2CC`,\n      'pointer-events': 'auto',\n      'z-index': '1',\n    };\n    let fixedLayoutProps: any = {\n      height: handleSize / zoom,\n      width: handleSize / zoom,\n      'margin-left': -1 / zoom - handleSize / (2 * zoom),\n      'margin-top': -1 / zoom - handleSize / (2 * zoom),\n      'margin-right': -1 / zoom - handleSize / (2 * zoom),\n      'margin-bottom': -1 / zoom - handleSize / (2 * zoom),\n      'border-radius': 20 / zoom,\n    };\n    let pos: any = {};\n    let rotatorPos = {};\n    let dims: any = this.resizerData.dims;\n    switch (handleName) {\n      case 'T':\n        // pos = {\n        //   left: handleSize + 2,\n        //   top: 0,\n        //   width: dims.width - handleSize - 2,\n        // };\n        pos = { left: dims.width / 2, top: 0 };\n        rotatorPos = {\n          left: dims.width / 2 - rotationHandleSize / (2 * zoom),\n          top: -rotationHandleSize / zoom,\n        };\n        break;\n      case 'L':\n        // pos = {\n        //   left: 0,\n        //   top: handleSize + 2,\n        //   height: dims.height - handleSize - 2,\n        // };\n        pos = { left: 0, top: dims.height / 2 };\n        rotatorPos = {\n          left: -rotationHandleSize / zoom,\n          top: dims.height / 2 - rotationHandleSize / (2 * zoom),\n        };\n        break;\n      case 'R':\n        // pos = {\n        //   left: dims.width,\n        //   top: handleSize + 2,\n        //   height: dims.height - handleSize - 2,\n        // };\n        pos = { left: dims.width, top: dims.height / 2 };\n        rotatorPos = {\n          left: dims.width,\n          top: dims.height / 2 - rotationHandleSize / (2 * zoom),\n        };\n        break;\n      case 'B':\n        // pos = {\n        //   left: handleSize + 2,\n        //   top: dims.height,\n        //   width: dims.width - handleSize - 2,\n        // };\n        pos = { left: dims.width / 2, top: dims.height };\n        rotatorPos = {\n          left: dims.width / 2 - rotationHandleSize / (2 * zoom),\n          top: dims.height,\n        };\n        break;\n      case 'TR':\n        rotatorPos = {\n          left: dims.width,\n          top: -rotationHandleSize / zoom,\n        };\n        pos = { left: dims.width, top: 0 };\n        break;\n      case 'BL':\n        rotatorPos = {\n          left: -rotationHandleSize / zoom,\n          top: dims.height,\n        };\n        pos = { left: 0, top: dims.height };\n        break;\n      case 'BR':\n        rotatorPos = {\n          left: dims.width,\n          top: dims.height,\n        };\n        pos = { left: dims.width, top: dims.height };\n        break;\n      default:\n        rotatorPos = {\n          left: -rotationHandleSize / zoom,\n          top: -rotationHandleSize / zoom,\n        };\n        pos = { left: 0, top: 0 };\n        break;\n    }\n    forEach(propsWithoutPx, (val: string, key: string) => {\n      handleInstance.handleLayer.style[key] = val;\n    });\n    forEach({ ...fixedLayoutProps, ...pos }, (val: string, key: string) => {\n      handleInstance.handleLayer.style[key] = val.toString() + 'px';\n    });\n    if (handleName !== 'ROTATE') {\n      let rotatorPropsWithoutPx = {\n        position: 'absolute',\n        display: '',\n        'pointer-events': 'auto',\n      };\n      fixedLayoutProps = {\n        height: rotationHandleSize / zoom,\n        width: rotationHandleSize / zoom,\n      };\n      pos = rotatorPos;\n      forEach(rotatorPropsWithoutPx, (val: string, key: string) => {\n        handleInstance.handleRotator.style[key] = val;\n      });\n      forEach({ ...fixedLayoutProps, ...pos }, (val: string, key: string) => {\n        handleInstance.handleRotator.style[key] = val.toString() + 'px';\n      });\n    }\n  }\n  addEventListeners(\n    handleLayer: any,\n    handleName: string,\n    rotationType?: string\n  ) {\n    let dragData: any;\n    if (rotationType) {\n      this.resizerData.dims = {\n        ...this.resizerData.dims,\n        rotation:\n          this.resizerData.dims.rotation + getInitialRotation(rotationType),\n      };\n    }\n    this.canvas.executeFunction('handleHtmlDrag', handleLayer);\n    handleLayer.addEventListener('htmlDragStart', (e: any) => {\n      if (\n        (rotationType && !this.resizerData.handles.includes('ROTATE')) ||\n        this.canvas.moveWithGrabHandle\n      ) {\n        return;\n      }\n      this.canvas.blockMouseEvents();\n      let dragVal = this.canvas.executeFunction(\n        'HtmlDragToWorld.dragStart',\n        e,\n        this.resizerData.dims\n      );\n      this.handleDragStarted = true;\n      if (rotationType) {\n        this.canvas.setMouseCursor(\n          `url(\"data:image/svg+xml,${escape(\n            getRotationResizerIcon(\n              getInitialRotation(rotationType) + this.resizerData.dims.rotation\n            )\n          )}\") 10 10, auto`\n        );\n      }\n      dragData = dragVal;\n      this.canvas.dispatchEvent(\n        `${this.namespace}.handleDragStart`,\n        new ResizerRendererDragEvent(\n          `${this.namespace}.handleDragStart`,\n          handleName + (rotationType ? rotationType : ''),\n          dragVal.startValues,\n          dragVal.session,\n          dragVal.event,\n          this.canvas\n        )\n      );\n    });\n    handleLayer.addEventListener('htmlDrag', (e: any) => {\n      if (\n        (rotationType && !this.resizerData.handles.includes('ROTATE')) ||\n        this.canvas.moveWithGrabHandle\n      ) {\n        return;\n      }\n      if (e.pageX && e.pageY) {\n        let dragVal = this.canvas.executeFunction('HtmlDragToWorld.drag', e);\n        if (\n          dragVal.session.current.deltaX !== 0 ||\n          dragVal.session.current.deltaY !== 0\n        ) {\n          dragData = dragVal;\n          if (rotationType) {\n            this.canvas.setMouseCursor(\n              `url(\"data:image/svg+xml,${escape(\n                getRotationResizerIcon(\n                  getInitialRotation(rotationType) +\n                    this.resizerData.dims.rotation\n                )\n              )}\") 10 10, auto`\n            );\n          }\n          this.canvas.dispatchEvent(\n            `${this.namespace}.handleDrag`,\n            new ResizerRendererDragEvent(\n              `${this.namespace}.handleDrag`,\n              handleName + (rotationType ? rotationType : ''),\n              dragVal.startValues,\n              dragVal.session,\n              dragVal.event,\n              this.canvas\n            )\n          );\n        }\n      }\n    });\n    handleLayer.addEventListener('htmlDragEnd', (e: any) => {\n      e.preventDefault();\n      this.canvas.setMouseCursor('default');\n      this.canvas.unblockMouseEvents();\n      if (\n        (rotationType && !this.resizerData.handles.includes('ROTATE')) ||\n        this.canvas.moveWithGrabHandle\n      ) {\n        return;\n      }\n      this.handleDragStarted = false;\n      this.canvas.dispatchEvent(\n        `${this.namespace}.handleDragEnd`,\n        new ResizerRendererDragEvent(\n          `${this.namespace}.handleDragEnd`,\n          handleName + (rotationType ? rotationType : ''),\n          dragData.startValues,\n          dragData.session,\n          dragData.event,\n          this.canvas\n        )\n      );\n    });\n  }\n  renderCursor(handleInstance: any, handleName: string) {\n    handleInstance.handleLayer.addEventListener('mousemove', (event: any) => {\n      if (!this.handleDragStarted && !this.canvas.mouseEventsBlocked) {\n        this.canvas.setMouseCursor(\n          `url(\"data:image/svg+xml,${escape(\n            getHorizontalResizerIcon(\n              getInitialRotation(handleName) + this.resizerData.dims.rotation\n            )\n          )}\") 10 10, auto`\n        );\n      }\n    });\n    handleInstance.handleLayer.addEventListener('mouseenter', (event: any) => {\n      if (!this.handleDragStarted && !this.canvas.mouseEventsBlocked) {\n        this.canvas.setMouseCursor(\n          `url(\"data:image/svg+xml,${escape(\n            getHorizontalResizerIcon(\n              getInitialRotation(handleName) + this.resizerData.dims.rotation\n            )\n          )}\") 10 10, auto`\n        );\n      }\n    });\n    handleInstance.handleLayer.addEventListener('mouseleave', () => {\n      if (\n        !this.handleDragStarted &&\n        !this.canvas.mouseEventsBlocked &&\n        this.canvas.mouseCursorType &&\n        this.canvas.mouseCursorType.includes('url')\n      ) {\n        this.canvas.setMouseCursor('default');\n      }\n    });\n    handleInstance.handleLayer.addEventListener('contextmenu', (e: any) => {\n      e.preventDefault();\n    });\n    handleInstance.handleRotator.addEventListener('contextmenu', (e: any) => {\n      e.preventDefault();\n    });\n    handleInstance.handleRotator.addEventListener(\n      'mouseenter',\n      (event: any) => {\n        if (\n          this.resizerData.handles.includes('ROTATE') &&\n          !this.handleDragStarted &&\n          !this.canvas.mouseEventsBlocked\n        ) {\n          this.canvas.setMouseCursor(\n            `url(\"data:image/svg+xml,${escape(\n              getRotationResizerIcon(\n                getInitialRotation(handleName) + this.resizerData.dims.rotation\n              )\n            )}\") 10 10, auto`\n          );\n        }\n      }\n    );\n    handleInstance.handleRotator.addEventListener('mouseleave', () => {\n      if (\n        !this.handleDragStarted &&\n        this.canvas.mouseCursorType &&\n        this.canvas.mouseCursorType.includes('url') &&\n        !this.canvas.mouseEventsBlocked\n      ) {\n        this.canvas.setMouseCursor('default');\n      }\n    });\n  }\n  renderHandles() {\n    let handles = this.resizerData.handles;\n    return handles.map((handleName: any, i: number) => {\n      let handle = this.resizerHandleLayersRef.get(handleName);\n      if (!handle) {\n        const handleLayer = document.createElement('div');\n        const handleRotator = document.createElement('div');\n        this.wrapperLayer.appendChild(handleLayer);\n        this.wrapperLayer.appendChild(handleRotator);\n        this.resizerHandleLayersRef.set(handleName, {\n          handleLayer,\n          handleRotator,\n        });\n        handle = { handleLayer, handleRotator };\n        this.addEventListeners(handle.handleLayer, handleName);\n        this.addEventListeners(handle.handleRotator, 'ROTATE', handleName);\n        this.renderCursor(handle, handleName);\n      }\n      this.setHandleStyle(handle, handleName);\n    });\n  }\n  isVisible() {\n    return (\n      this.show &&\n      this.resizerData.dims.x &&\n      this.resizerData.dims.y &&\n      this.resizerData.dims.width &&\n      this.resizerData.dims.height\n    );\n  }\n  renderResizer() {\n    if (this.isVisible()) {\n      let zoom = this.canvas.getZoom();\n      this.wrapperLayer.style.border = `${1 / zoom}px solid #1FB2CC`;\n      this.wrapperLayer.style.top = this.resizerData.dims.y + 'px';\n      this.wrapperLayer.style.left = this.resizerData.dims.x + 'px';\n      this.wrapperLayer.style.height = this.resizerData.dims.height + 'px';\n      this.wrapperLayer.style.width = this.resizerData.dims.width + 'px';\n      if (this.resizerData.dims.rotation) {\n        this.wrapperLayer.style.transform = `rotate(${this.resizerData.dims.rotation}deg`;\n      } else {\n        this.wrapperLayer.style.transform = ``;\n      }\n      this.wrapperLayer.style.display = '';\n      this.renderHandles();\n    } else {\n      this.wrapperLayer.style.display = 'none';\n    }\n  }\n  toggleResizer(show: boolean) {\n    this.show = show;\n    this.renderResizer();\n  }\n  showHandle(context: IContext, name: string) {\n    if (!this.resizerData.handles.includes(name.toUpperCase())) {\n      this.resizerData.handles.push(name.toUpperCase());\n      this.renderHandles();\n    }\n  }\n  hideHandle(context: IContext, name: string) {\n    if (this.resizerData.handles.includes(name.toUpperCase())) {\n      this.resizerData.handles.splice(\n        this.resizerData.handles.indexOf(name.toUpperCase()),\n        1\n      );\n      let handle = this.resizerHandleLayersRef.get(name);\n      if (handle) {\n        const { handleLayer, handleRotator } = handle;\n        handleLayer.style.display = 'none';\n        handleRotator.style.display = 'none';\n      }\n    }\n  }\n  isValidKey(key: string) {\n    return (\n      key === 'x' ||\n      key === 'y' ||\n      key === 'height' ||\n      key === 'width' ||\n      key === 'rotation'\n    );\n  }\n  setResizerOrientation(\n    context: any,\n    key: 'x' | 'y' | 'height' | 'width' | 'rotation' | object,\n    value?: any\n  ) {\n    if (typeof key == 'object') {\n      for (var prop in key) {\n        if (this.isValidKey(prop)) {\n          // @ts-ignore\n          this.resizerData.dims[prop] = (key as any)[prop];\n        } else {\n          throw new Error(`Resizer Orientation Error: Invalid key '${prop}'`);\n        }\n      }\n    } else {\n      if (this.isValidKey(key)) {\n        this.resizerData.dims[key] = value;\n      } else {\n        throw new Error(`Resizer Orientation Error: Invalid key '${key}'`);\n      }\n    }\n    this.renderResizer();\n  }\n\n  passEvent = (e: MouseEvent) => {\n    // FIXME: If we include this, drag events get fired and mouse rect starts showing but we need this in case sibling overlaps and the bottom one is already selected and we are trying to drag the top one.\n    if (e.type !== 'mousedown') {\n      if (e.type === 'mousemove') {\n        if (this.mouseDown) {\n          this.dragStarted = true;\n        }\n      }\n\n      if (this.dragStarted && this.mouseDown) {\n      } else {\n        this.canvas.dispatchEventOnHitLayer(\n          e.type,\n          new DesignerMouseEvent(e.type, this.canvas, e, this.canvas),\n          e\n        );\n      }\n\n      if (e.type === 'mouseup') {\n        this.dragStarted = false;\n        this.mouseDown = false;\n\n        this.canvas.dispatchEventOnHitLayer(\n          e.type,\n          new DesignerMouseEvent(e.type, this.canvas, e, this.canvas),\n          e\n        );\n      }\n    } else {\n      if (e.button !== 2 && e.which !== 3) {\n        this.mouseDown = true;\n      }\n    }\n  };\n  handleLayerListeners(handle: any) {\n    this.passedEvent.map(event => {\n      handle.addEventListener(event, (e1: any) => {\n        this.passEvent(e1);\n      });\n    });\n  }\n  hideAllHandles(context: IContext) {\n    this.resizerData.handles.forEach((handleName: string) => {\n      let handle = this.resizerHandleLayersRef.get(handleName);\n      if (handle) {\n        const { handleLayer, handleRotator } = handle;\n        handleLayer.style.display = 'none';\n        handleRotator.style.display = 'none';\n      }\n    });\n    this.resizerData.handles = [];\n  }\n  activate() {\n    this.canvas.addFunction(\n      `${this.namespace}.show`,\n      this.toggleResizer.bind(this, true)\n    );\n    this.canvas.addFunction(\n      `${this.namespace}.hide`,\n      this.toggleResizer.bind(this, false)\n    );\n    this.canvas.addFunction(\n      `${this.namespace}.showHandle`,\n      this.showHandle.bind(this)\n    );\n    this.canvas.addFunction(\n      `${this.namespace}.hideHandle`,\n      this.hideHandle.bind(this)\n    );\n    this.canvas.addFunction(\n      `${this.namespace}.setOrientation`,\n      this.setResizerOrientation.bind(this)\n    );\n    this.canvas.addFunction(\n      `${this.namespace}.hideAllHandles`,\n      this.hideAllHandles.bind(this)\n    );\n    this.canvas.addEventListener('resetResizer', (e: ResetResizerEvent) => {\n      this.canvas.executeFunction('HtmlDragToWorld.dragEnd', e.originalEvent);\n      this.canvas.executeFunction(\n        'HtmlDragToWorld.dragStart',\n        e.originalEvent,\n        this.resizerData.dims\n      );\n    });\n\n    this.wrapperLayer = document.createElement('div');\n    this.wrapperLayer.style.pointerEvents = 'none';\n    this.wrapperLayer.style.position = 'absolute';\n    this.wrapperLayer.style.zIndex = 200;\n    this.renderDragLayer();\n    this.dispose = this.canvas.addDomToWorld(this.wrapperLayer, true, 101);\n    this.renderResizer();\n    ['zoom', 'scroll'].map((event: string) => {\n      this.canvas.on(event, (e: any) => {\n        this.renderResizer();\n      });\n    });\n  }\n\n  renderDragLayer = () => {\n    let dragLayer = document.createElement('div');\n    dragLayer.style.pointerEvents = 'auto';\n    dragLayer.style.position = 'absolute';\n    dragLayer.style.top = '0';\n    dragLayer.style.left = '0';\n    dragLayer.style.right = '0';\n    dragLayer.style.bottom = '0';\n    dragLayer.setAttribute('class', 'resizer move ' + dragLayer.className);\n    this.wrapperLayer.appendChild(dragLayer);\n    this.handleLayerListeners(dragLayer);\n    this.canvas.executeFunction('handleHtmlDrag', dragLayer);\n    dragLayer.addEventListener('htmlDragStart', e => {\n      let dragVal = this.canvas.executeFunction(\n        'HtmlDragToWorld.dragStart',\n        e,\n        this.resizerData.dims\n      );\n      this.canvas.blockMouseEvents();\n      this.canvas.dispatchEvent(\n        `${this.namespace}.dragStart`,\n        new ResizerRendererDragEvent(\n          `${this.namespace}.handleDragStart`,\n          'C',\n          dragVal.startValues,\n          dragVal.session,\n          dragVal.event,\n          this.canvas\n        )\n      );\n      return false;\n    });\n\n    dragLayer.addEventListener('htmlDrag', (e: any) => {\n      if (e.pageX && e.pageY) {\n        let dragVal = this.canvas.executeFunction('HtmlDragToWorld.drag', e);\n        if (\n          dragVal.session.current.deltaX !== 0 ||\n          dragVal.session.current.deltaY !== 0\n        ) {\n          this.canvas.dispatchEvent(\n            `${this.namespace}.drag`,\n            new ResizerRendererDragEvent(\n              `${this.namespace}.drag`,\n              'C',\n              dragVal.startValues,\n              dragVal.session,\n              dragVal.event,\n              this.canvas\n            )\n          );\n        }\n      }\n    });\n    dragLayer.addEventListener('htmlDragEnd', (e: any) => {\n      let dragVal = this.canvas.executeFunction('HtmlDragToWorld.drag', e);\n      this.canvas.unblockMouseEvents();\n      this.canvas.dispatchEvent(\n        `${this.namespace}.dragEnd`,\n        new ResizerRendererDragEvent(\n          `${this.namespace}.dragEnd`,\n          'C',\n          dragVal.startValues,\n          dragVal.session,\n          dragVal.event,\n          this.canvas\n        )\n      );\n    });\n  };\n  deactivate() {\n    this.canvas.removeFunction(`${this.namespace}.show`);\n    this.canvas.removeFunction(`${this.namespace}.hide`);\n    this.canvas.removeFunction(`${this.namespace}.showHandle`);\n    this.canvas.removeFunction(`${this.namespace}.hideHandle`);\n    this.canvas.removeFunction(`${this.namespace}.setOrientation`);\n    this.canvas.removeFunction(`${this.namespace}.hideAllHandles`);\n    this.dispose();\n  }\n}\n","import { Canvas, IPlugin } from '../..';\n\nexport default class UndoRedoPlugin implements IPlugin {\n  name = 'UndoRedoPlugin';\n  canvas!: Canvas;\n\n  store: Array<any> = [];\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    // //@ts-ignore\n    // window['undoRedoStore'] = this.store;\n  }\n\n  activate() {\n    this.canvas.addMiddleware('Layer.setStyle', (next: any, data: any) => {\n      next(data);\n\n      this.store.push({\n        type: 'Layer.setStyle',\n        payload: data,\n      });\n    });\n  }\n\n  deactivate() {}\n}\n","import { Event, Layer } from '../../..';\nimport { IDimensionWithRotation } from 'interfaces';\n\nexport class LayerResizerEvent extends Event {\n  payload: any;\n  meta?: any;\n  originalEvent: any;\n  snapPoints?: any;\n  constructor(\n    name: string,\n    target: Layer,\n    payload: any,\n    originalEvent: any,\n    currentTarget?: Layer,\n    meta?: any,\n    snapPoints?: any\n  ) {\n    super(name, target, currentTarget);\n    this.payload = payload;\n    this.meta = meta;\n    this.originalEvent = originalEvent;\n    this.snapPoints = snapPoints;\n  }\n}\n","import { Canvas, Layer } from '../../';\nimport { isEmpty, intersection, isNil, forEach, round } from 'lodash';\nimport { ResizerRendererDragEvent } from '../ResizerRenderer/ResizerRendererDragEvent';\nimport ModelUtils, {\n  computeOrientation,\n  calculateRotation,\n  computeOrientationMultiple,\n} from './../../models/utils';\nimport { IDimensionWithRotation, IPlugin, IPosition } from 'interfaces';\nimport { LayerResizerEvent } from './LayerResizerEvent';\nimport ResetResizerEvent from '../../events/ResetResizerEvent';\n\nexport default class LayerResizerPlugin implements IPlugin {\n  name = 'LayerResizerPlugin';\n  namespace = 'LayerResizer';\n  forbiddenLayers: Array<Layer> = [];\n  canvas!: Canvas;\n  dispose: any;\n  draggingHandles: boolean = false;\n  targetLayer: Layer | undefined;\n  selectedLayers: Array<Layer> = [];\n  boundingBox: any;\n  boundingBoxWRTWorld: any;\n  selectedLayerDims: Map<Layer, any> = new Map<Layer, any>();\n  startValues: any;\n  updatedStartValues: any;\n  snapPoints: any;\n  boundQueueUpdates: Map<Layer, any> = new Map();\n  rerenderHandles: boolean = true;\n\n  isAltPressed: boolean = false;\n  isShiftPressed: boolean = false;\n  layoutElementArray: Array<any> = [];\n  shiftDirection: string = '';\n\n  startX = 0;\n  startY = 0;\n  startAbsoluteX = 0;\n  startAbsoluteY = 0;\n\n  totalDx = 0;\n  totalDy = 0;\n\n  dragEventData: any;\n\n  getHandlesForFill = (layer: Layer) => {\n    let handlesForFill: Array<string> = [];\n    const isFillWidth = layer.isFillWidth();\n    const isFillHeight = layer.isFillHeight();\n    let flexSiblings: Array<Layer> = [];\n    if (layer.type !== 'root') {\n      flexSiblings = layer.getSiblingsWithFlex();\n    }\n    if (flexSiblings.length === 0) {\n      handlesForFill = this.getHandlesForFlexLayer(isFillHeight, isFillWidth);\n    } else if (layer.parent) {\n      const layerParent = layer.parent as Layer;\n\n      const parentFlexDirection = layerParent.layout.get('flexDirection');\n      handlesForFill = this.getHandlesForFlexLayerWithSiblings(\n        layer,\n        parentFlexDirection,\n        isFillHeight,\n        isFillWidth\n      );\n    }\n    return handlesForFill;\n  };\n  getHandlesForAutoOrAbsoluteLayer = (\n    isAutoHeight: boolean,\n    isAutoWidth: boolean\n  ) => {\n    if (isAutoHeight && isAutoWidth) {\n      return ['ROTATE'];\n    } else if (isAutoHeight) {\n      return ['ROTATE', 'L', 'R'];\n    } else if (isAutoWidth) {\n      return ['ROTATE', 'T', 'B'];\n    } else {\n      return ['ROTATE', 'T', 'B', 'R', 'L', 'BL', 'BR', 'TR', 'TL'];\n    }\n  };\n  getHandlesForFlexLayer = (isFillHeight: boolean, isFillWidth: boolean) => {\n    if (isFillHeight && isFillWidth) {\n      return [];\n    } else if (isFillHeight) {\n      return ['L', 'R'];\n    } else if (isFillWidth) {\n      return ['T', 'B'];\n    } else {\n      return ['T', 'B', 'R', 'L', 'BL', 'BR', 'TR', 'TL', 'ROTATE'];\n    }\n  };\n  getHandlesForFlexLayerWithSiblings = (\n    layer: Layer,\n    parentFlexDirection: string,\n    isFillHeight: boolean,\n    isFillWidth: boolean\n  ) => {\n    if (parentFlexDirection === 'row') {\n      if (isFillHeight) {\n        // if fill Width and fill Height or only fill Height\n        return this.getResizerHandlesLayout(layer, parentFlexDirection);\n      } else if (isFillWidth) {\n        let resizer = this.getResizerHandlesLayout(layer, parentFlexDirection);\n        return resizer.concat(['T', 'B']);\n      } else {\n        return ['T', 'B', 'R', 'L', 'BL', 'BR', 'TR', 'TL', 'ROTATE'];\n      }\n    } else {\n      // column\n      if (isFillWidth) {\n        // if fill Width and fill Height or only fill Height\n        return this.getResizerHandlesLayout(layer, parentFlexDirection);\n      } else if (isFillHeight) {\n        let resizer = this.getResizerHandlesLayout(layer, parentFlexDirection);\n        return resizer.concat(['L', 'R']);\n      } else {\n        return ['T', 'B', 'R', 'L', 'BL', 'BR', 'TR', 'TL', 'ROTATE'];\n      }\n    }\n  };\n  getResizerHandlesLayout = (layer: Layer, parentFlexDirection: string) => {\n    let parentLayer = layer.parent as Layer;\n    let handles: any = [];\n    const childrenLength = parentLayer.children.length;\n    parentLayer.children.forEach((childLayer: Layer, index: number) => {\n      if (childLayer === layer) {\n        // first\n        if (index === 0) {\n          if (parentFlexDirection === 'row') {\n            handles.push('R');\n          } else {\n            handles.push('B');\n          }\n        } else if (index === childrenLength - 1) {\n          // last\n          if (parentFlexDirection === 'row') {\n            handles.push('L');\n          } else {\n            handles.push('T');\n          }\n        } else {\n          // middle\n          if (parentFlexDirection === 'row') {\n            handles.push('R');\n            handles.push('L');\n          } else {\n            handles.push('B');\n            handles.push('T');\n          }\n        }\n      }\n    });\n    return handles;\n  };\n  // getResizerHandlesForLayers = (layers: any) => {\n  //   // add all handles except ROTATE handle when icon is selected\n\n  //   let handles: any = ['T', 'B', 'R', 'L', 'BL', 'BR', 'TR', 'TL', 'ROTATE'];\n  //   if (layers.length === 0) {\n  //     return [];\n  //   }\n  //   layers.forEach((layer: Layer) => {\n  //     if (layer.type === 'icon' || layer.type === 'switch') {\n  //       handles = intersection(handles, ['ROTATE']);\n  //     }\n  //     const isLayerAbsolute = !isNil(layer.layout.get('position'));\n  //     const isAutoHeight = layer.isAutoHeight();\n  //     const isAutoWidth = layer.isAutoWidth();\n  //     let handlesForAutoOrAbs = this.getHandlesForAutoOrAbsoluteLayer(\n  //       isAutoHeight,\n  //       isAutoWidth\n  //     );\n\n  //     if (isLayerAbsolute) {\n  //       handles = intersection(handles, handlesForAutoOrAbs);\n  //     } else {\n  //       const handlesForFill = this.getHandlesForFill(layer);\n  //       let handlesHere = intersection(handlesForAutoOrAbs, handlesForFill);\n  //       handles = intersection(handles, handlesHere);\n  //     }\n  //   });\n\n  //   return handles;\n  // };\n\n  getHandles = (layers: Array<Layer>) => {\n    return this.canvas.executeMiddleware(\n      'LayerResizer.getHandles',\n      layers,\n      (layers: Array<Layer>) => {\n        let handles = ['T', 'B', 'R', 'L', 'BL', 'BR', 'TR', 'TL', 'ROTATE'];\n        if (\n          layers.length === 0 ||\n          (layers.length === 1 && layers[0].type === 'canvas')\n        ) {\n          return [];\n        }\n\n        layers.forEach((layer: Layer) => {\n          const isLayerAbsolute = !isNil(layer.layout.get('position'));\n          const isAutoHeight = layer.isAutoHeight();\n          const isAutoWidth = layer.isAutoWidth();\n          if (\n            layer.type === 'icon' ||\n            layer.type === 'switch' ||\n            layer.type === 'activityIndicator' ||\n            (isAutoHeight && isAutoWidth)\n          ) {\n            handles = intersection(handles, ['ROTATE']);\n          }\n          let handlesForAutoOrAbs = this.getHandlesForAutoOrAbsoluteLayer(\n            isAutoHeight,\n            isAutoWidth\n          );\n\n          if (isLayerAbsolute) {\n            handles = intersection(handles, handlesForAutoOrAbs);\n          } else {\n            const handlesForFill = this.getHandlesForFill(layer);\n            let handlesHere = intersection(handlesForAutoOrAbs, handlesForFill);\n            handles = intersection(handles, handlesHere);\n          }\n        });\n\n        return handles;\n      }\n    );\n  };\n  layersQueuedForUpdate: any = [];\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n    this.selectedLayers = [];\n  }\n  hideLayerResizer(context: any) {\n    if (!this.forbiddenLayers.includes(context.layer)) {\n      this.forbiddenLayers.push(context.layer);\n      this.setSelectedLayers();\n      this.rerender();\n    }\n  }\n  showLayerResizer(context: any) {\n    if (this.forbiddenLayers.includes(context.layer)) {\n      this.forbiddenLayers.splice(\n        this.forbiddenLayers.indexOf(context.layer),\n        1\n      );\n      this.setSelectedLayers();\n      this.rerender();\n    }\n  }\n  rerender() {\n    let dims = this.canvas.getBoundingBox(this.selectedLayers);\n    if (this.rerenderHandles) {\n      this.canvas.executeFunction('ResizerRenderer.hideAllHandles');\n      this.getHandles(this.canvas.selectedLayers).map((handle: string) => {\n        this.canvas.executeFunction('ResizerRenderer.showHandle', handle);\n      });\n    }\n    this.canvas.executeFunction('ResizerRenderer.setOrientation', dims);\n  }\n  onUpdate = () => {\n    this.rerender();\n  };\n\n  queueUpdate = (layer: Layer) => {\n    this.layersQueuedForUpdate.push(layer);\n\n    // render when all the layers have finised emiiting layout updates\n    if (this.layersQueuedForUpdate.length === this.selectedLayers.length) {\n      this.rerender();\n      this.layersQueuedForUpdate = [];\n    }\n  };\n  setSelectedLayers() {\n    this.layersQueuedForUpdate = [];\n    this.boundQueueUpdates.forEach((cb: any, layer: Layer) => {\n      layer.off('yoga', cb);\n    });\n    this.boundQueueUpdates.clear();\n    this.selectedLayers = this.canvas.selectedLayers.filter(\n      (layer: Layer) => !this.forbiddenLayers.includes(layer)\n    );\n\n    this.selectedLayers.forEach((layer: Layer) => {\n      const cb = this.queueUpdate.bind(this, layer);\n      layer.on('yoga', cb);\n      this.boundQueueUpdates.set(layer, cb);\n    });\n  }\n  getParentRelativeDims(dims: IDimensionWithRotation, layer: Layer) {\n    let parentDims = layer.parent\n      ? layer.parent.getBoundingClientRect()\n      : { rootX: 0, rootY: 0 };\n    return {\n      ...dims,\n      x: dims.x - parentDims.rootX,\n      y: dims.y - parentDims.rootY,\n    };\n  }\n  applyDimensions(eventType: string) {\n    const data: ResizerRendererDragEvent = this.dragEventData;\n    const deltaX = data.session.current.x - data.session.start.x;\n    const deltaY = data.session.current.y - data.session.start.y;\n\n    if (!this.isShiftPressed) {\n      this.shiftDirection = '';\n    }\n    if (data.targetHandle.indexOf('C') > -1 && this.isShiftPressed) {\n      if (!this.shiftDirection) {\n        if (\n          Math.abs(data.session.current.deltaX) >\n          Math.abs(data.session.current.deltaY)\n        ) {\n          this.shiftDirection = 'horizontal';\n        } else {\n          this.shiftDirection = 'vertical';\n        }\n      }\n\n      if (this.shiftDirection === 'horizontal') {\n        this.totalDx = deltaX;\n        // this.totalDy = 0;\n      } else {\n        this.totalDy = deltaY;\n        // this.totalDx = 0;\n      }\n      // if (this.shiftDirection === \"horizontal\") {}\n    } else {\n      this.totalDy = deltaY;\n      this.totalDx = deltaX;\n    }\n\n    // console.log(this.totalDx, this.totalDy, 'drag data here');\n\n    if (\n      !this.selectedLayers.length ||\n      (this.selectedLayers.length && !this.selectedLayers[0].parent)\n    ) {\n      return;\n    }\n    const parentAbsoluteRotation =\n      this.selectedLayers.length && this.selectedLayers[0].parent\n        ? this.selectedLayers[0].parent.getAbsoluteRotation()\n        : 0;\n    let rotateDelta = ModelUtils.rotatePoint(\n      [this.totalDx, this.totalDy],\n      360 - parentAbsoluteRotation,\n      [0, 0]\n    );\n\n    const snappedData = this.canvas.executeFunction(\n      'snapToPoints',\n      this.snapPoints,\n      [this.startX, this.startY],\n      [rotateDelta[0], rotateDelta[1]],\n      {\n        ...this.boundingBox,\n      },\n      [this.totalDx, this.totalDy],\n      [this.startAbsoluteX, this.startAbsoluteY],\n      parentAbsoluteRotation,\n      this.boundingBoxWRTWorld\n    );\n    this.boundingBox = {\n      ...this.boundingBox,\n      x: this.boundingBox?.x + snappedData.delta.x,\n      y: this.boundingBox?.y + snappedData.delta.y,\n    };\n\n    let delta = snappedData.delta;\n\n    this.setNewLayout(\n      this.selectedLayers,\n      this.boundingBox,\n      data.session,\n      data.targetHandle,\n      eventType,\n      data,\n      delta,\n      snappedData.meta\n      // { x: rotateDelta[0], y: rotateDelta[1] }\n    );\n  }\n\n  normalizeChildrenFlex() {\n    const parent = this.selectedLayers.length\n      ? this.selectedLayers[0].parent\n      : undefined;\n\n    if (parent) {\n      const totalChildrenFlex = parent.getTotalFlexOfFlexChildren();\n      parent.children.forEach((child: Layer, index: number) => {\n        const layerFlex = child.getFlexValue();\n        if (!isNil(layerFlex) && !isNil(totalChildrenFlex)) {\n          // this.commandManager.execute(\n          //   new RemoveStyleAttribute(this.session, child, 'flexGrow')\n          // );\n\n          child.removeLayout('flexGrow');\n          const newFlex = layerFlex * (1 / totalChildrenFlex);\n          // this.commandManager.execute(\n          //   new SetStyleAttribute(this.session, child, 'flex', newFlex)\n          // );\n          child.setLayout('flex', newFlex);\n        }\n      });\n    }\n  }\n  setLayoutChildren() {\n    let normalizeForFlex = false;\n\n    normalizeForFlex = this.selectedLayers.some((layer: Layer) => {\n      return (\n        (layer.isFillHeight() || layer.isFillWidth()) && layer.type !== 'root'\n      );\n    });\n\n    if (normalizeForFlex) {\n      this.normalizeChildrenFlex();\n    }\n\n    this.layoutElementArray.length = 0;\n\n    const selectedLayers = this.selectedLayers;\n    if (selectedLayers.length === 0) {\n      return;\n    }\n    const parentLayer = this.selectedLayers[0].parent;\n    if (parentLayer) {\n      parentLayer.children.forEach((child: any, index: number) => {\n        const layoutChild = {\n          layer: child,\n          startFlex: child.layout.get('flex') ? child.layout.get('flex') : 0,\n        };\n        this.layoutElementArray.push(layoutChild);\n      });\n    }\n  }\n\n  // flex drag here\n  private setLayoutChildSize(layer: Layer, deltaFactor: any) {\n    const parentFlexDirection = layer.getParentLayerFlexDirection();\n    const startDims = layer.executeFunction('getData', 'initialDims');\n    let width = startDims.width;\n    let height = startDims.height;\n    if (startDims) {\n      width = startDims.width + startDims.width * deltaFactor;\n      height = startDims.height + startDims.height * deltaFactor;\n    }\n    if (parentFlexDirection === 'row') {\n      layer.setLayout('width', width);\n      // this.commandManager.execute(\n      //   new SetStyleAttribute(this.session, layer, 'width', width)\n      // );\n    } else {\n      layer.setLayout('height', height);\n\n      // this.commandManager.execute(\n      //   new SetStyleAttribute(this.session, layer, 'height', height)\n      // );\n    }\n  }\n  private getDeltaFactor(layer: Layer, delta: any, handle: any): any {\n    const parent = layer.parent;\n\n    if (!parent) {\n      return 0;\n    }\n    const flexDirection = layer.getParentLayerFlexDirection();\n\n    const width = parent.getBoundingClientRect().width;\n    const height = parent.getBoundingClientRect().height;\n    let deltaX = delta.x / width;\n    let deltaY = delta.y / height;\n    let deltaFactor = 0;\n    if (handle.indexOf('C') === -1) {\n      if (flexDirection === 'row') {\n        if (handle.indexOf('L') > -1) {\n          deltaX = -deltaX;\n        }\n        deltaFactor = deltaX;\n      } else {\n        if (handle.indexOf('T') > -1) {\n          deltaY = -deltaY;\n        }\n        deltaFactor = deltaY;\n      }\n    }\n    return +deltaFactor.toFixed(2);\n  }\n\n  dragLayout(layer: Layer, delta: IPosition, handle: any, eventName: string) {\n    let deltaX: number = delta.x;\n    let deltaY: number = delta.y;\n\n    const startDims = layer.executeFunction('getData', 'initialDims');\n    const originalDelta: IPosition = { x: deltaX, y: deltaY };\n\n    let totalFlex = 0;\n\n    let deltaFactor = this.getDeltaFactor(layer, originalDelta, handle);\n\n    const selectedLayerFlex = startDims.flex;\n\n    if (!selectedLayerFlex) {\n      this.setLayoutChildSize(layer, deltaFactor);\n    } else {\n      const childrenLength = this.layoutElementArray.length;\n      this.layoutElementArray.forEach((child: any, index: number) => {\n        let expectedFlex;\n        if (child.layer === layer) {\n          expectedFlex = selectedLayerFlex + deltaFactor;\n        } else {\n          expectedFlex = child.startFlex - deltaFactor / (childrenLength - 1);\n        }\n        expectedFlex = +expectedFlex;\n\n        if (!isNil(expectedFlex)) {\n          child.layer.dispatchEvent(\n            `${this.namespace}.${eventName}`,\n            new LayerResizerEvent(\n              `${this.namespace}.${eventName}`,\n              child.layer,\n              { flex: expectedFlex },\n              null\n            )\n          );\n\n          totalFlex = expectedFlex + totalFlex;\n        }\n      });\n    }\n  }\n\n  private dragLayoutIsDoable(handle: string, layer: Layer) {\n    const position = layer.layout.get('position');\n    // TODO: implement this condition after symbols are done\n    // workspace.persist.domain.isSymbolRootLayer(this.selectedLayers[0]\n    return (\n      ((handle.indexOf('B') > -1 || handle.indexOf('T') > -1) &&\n        position !== 'absolute' &&\n        layer.isFillHeight()) ||\n      ((handle.indexOf('L') > -1 || handle.indexOf('R') > -1) &&\n        position !== 'absolute' &&\n        layer.isFillWidth())\n    );\n  }\n\n  applyDimensionsForHandle(eventType: string) {\n    const data = this.dragEventData;\n    this.totalDx = data.session.current.x - data.session.start.x;\n    this.totalDy = data.session.current.y - data.session.start.y;\n\n    if (\n      !this.selectedLayers.length ||\n      (this.selectedLayers.length && !this.selectedLayers[0].parent)\n    ) {\n      return;\n    }\n    const parentAbsoluteRotation =\n      this.selectedLayers.length && this.selectedLayers[0].parent\n        ? this.selectedLayers[0].parent.getAbsoluteRotation()\n        : 0;\n    let rotateDelta = ModelUtils.rotatePoint(\n      [this.totalDx, this.totalDy],\n      360 - parentAbsoluteRotation,\n      [0, 0]\n    );\n\n    if (this.dragLayoutIsDoable(data.targetHandle, this.selectedLayers[0])) {\n      this.dragLayout(\n        this.selectedLayers[0],\n        { x: rotateDelta[0], y: rotateDelta[1] },\n        data.targetHandle,\n        eventType + 'Layout'\n      );\n      return;\n    }\n\n    const snappedData = this.canvas.executeFunction(\n      'snapToPoints',\n      this.snapPoints,\n      [this.startX, this.startY],\n      [rotateDelta[0], rotateDelta[1]],\n      {\n        ...this.boundingBox,\n      },\n      [this.totalDx, this.totalDy],\n      [this.startAbsoluteX, this.startAbsoluteY],\n      parentAbsoluteRotation,\n      this.boundingBoxWRTWorld,\n      data.targetHandle\n    );\n\n    let delta = snappedData.delta;\n\n    let boundingBox = this.boundingBox;\n    if (this.selectedLayers.length === 1) {\n      let rotateDelta1 = ModelUtils.rotatePoint(\n        [snappedData.delta.x, snappedData.delta.y],\n        360 - this.selectedLayers[0].getBoundingClientRect().rotation,\n        [0, 0]\n      );\n      delta = {\n        x: rotateDelta1[0],\n        y: rotateDelta1[1],\n      };\n    } else {\n      boundingBox = this.boundingBoxWRTWorld;\n      boundingBox = {\n        ...this.boundingBoxWRTWorld,\n        x: this.boundingBoxWRTWorld.x,\n        y: this.boundingBoxWRTWorld.y,\n      };\n    }\n\n    this.setNewLayout(\n      this.selectedLayers,\n      boundingBox,\n      data.session,\n      data.targetHandle,\n      eventType,\n      data,\n      delta,\n      snappedData.meta\n    );\n  }\n\n  activate() {\n    this.setSelectedLayers();\n\n    this.startX = 0;\n    this.startY = 0;\n    this.startAbsoluteX = 0;\n    this.startAbsoluteY = 0;\n\n    this.totalDx = 0;\n    this.totalDy = 0;\n\n    this.canvas.on('selectedLayers', (event: any) => {\n      this.setSelectedLayers();\n      if (isEmpty(this.canvas.selectedLayers)) {\n        this.canvas.executeFunction('ResizerRenderer.hide');\n      } else {\n        this.canvas.executeFunction('ResizerRenderer.show');\n        this.rerender();\n      }\n    });\n    this.canvas.addFunction(`${this.namespace}.stopHandleRerender`, () => {\n      this.rerenderHandles = false;\n    });\n    this.canvas.addFunction(`${this.namespace}.startHandleRerender`, () => {\n      this.rerenderHandles = true;\n      this.rerender();\n    });\n    this.canvas.addEventListener(\n      'ResizerRenderer.dragStart',\n      (data: ResizerRendererDragEvent) => {\n        this.canvas.executeMiddleware(\n          'LayerResizer.dragStart',\n          { data, selectedLayers: this.selectedLayers },\n          (event: any) => {\n            const data: ResizerRendererDragEvent = event.data;\n            this.boundingBox = this.canvas.getContainerBoundingBoxWRTParent(\n              this.selectedLayers\n            );\n            this.boundingBoxWRTWorld = this.canvas.getContainerBoundingBox(\n              this.selectedLayers\n            );\n\n            forEach(this.selectedLayers, selectedLayer => {\n              selectedLayer.setDragging(true);\n            });\n\n            const parentLayer = this.selectedLayers.length\n              ? this.selectedLayers[0].parent\n              : undefined;\n\n            if (!parentLayer) {\n              return;\n            }\n            this.startValues = this.getParentRelativeDims(\n              data.startValues,\n              this.selectedLayers[0]\n            );\n\n            this.startX = this.boundingBox.x;\n            this.startY = this.boundingBox.y;\n\n            this.startAbsoluteX =\n              this.boundingBoxWRTWorld.x -\n              this.canvas.getContainerBoundingBox([parentLayer]).x;\n\n            this.startAbsoluteY =\n              this.boundingBoxWRTWorld.y -\n              this.canvas.getContainerBoundingBox([parentLayer]).y;\n\n            this.snapPoints = this.canvas.executeFunction(\n              'getSnapPoints',\n              this.selectedLayers,\n              parentLayer\n            );\n\n            this.selectedLayers.forEach((selectedLayer: any) => {\n              let initialDims = selectedLayer.getBoundingClientRect();\n\n              // initialDims.x = initialDims.x - parentLayer.getBorderLeft();\n              // initialDims.y = initialDims.y - parentLayer.getBorderTop();\n              initialDims.rootX =\n                initialDims.rootX - parentLayer.getBorderLeft();\n              initialDims.rootY =\n                initialDims.rootY - parentLayer.getBorderTop();\n\n              selectedLayer.executeFunction('setData', 'initialDims', {\n                ...initialDims,\n                absoluteRotation: selectedLayer.getAbsoluteRotation(),\n                flex: selectedLayer.layout.get('flex'),\n              });\n              selectedLayer.dispatchEvent(\n                `${this.namespace}.dragStart`,\n                new LayerResizerEvent(\n                  `${this.namespace}.dragStart`,\n                  selectedLayer,\n                  initialDims,\n                  data,\n                  undefined,\n                  undefined,\n                  this.snapPoints\n                )\n              );\n              this.selectedLayerDims.set(selectedLayer, initialDims);\n            });\n\n            // this.snapPoints.gridSnap = this.config.gridSnap;\n          }\n        );\n      }\n    );\n    this.canvas.addEventListener(\n      'ResizerRenderer.drag',\n      (data: ResizerRendererDragEvent) => {\n        this.canvas.executeMiddleware(\n          'LayerResizer.drag',\n          { data, selectedLayers: this.selectedLayers },\n          (event: any) => {\n            this.dragEventData = event.data;\n            this.applyDimensions('drag');\n          }\n        );\n      }\n    );\n    this.canvas.addEventListener(\n      'ResizerRenderer.dragEnd',\n      (data: ResizerRendererDragEvent) => {\n        this.canvas.executeMiddleware(\n          'LayerResizer.dragEnd',\n          { data, selectedLayers: this.selectedLayers },\n          (event: any) => {\n            forEach(this.selectedLayers, selectedLayer => {\n              selectedLayer.setDragging(false);\n            });\n            this.dragEventData = event.data;\n            this.applyDimensions('dragEnd');\n\n            this.startValues = undefined;\n            this.selectedLayerDims = new Map();\n            this.shiftDirection = '';\n            this.dragEventData = undefined;\n            this.totalDx = 0;\n            this.totalDy = 0;\n          }\n        );\n      }\n    );\n    this.canvas.addEventListener(\n      'ResizerRenderer.handleDragStart',\n      (data: ResizerRendererDragEvent) =>\n        this.canvas.executeMiddleware(\n          'LayerResizer.handleDragStart',\n          { data, selectedLayer: this.selectedLayers[0] },\n          (event: any) => {\n            const data: ResizerRendererDragEvent = event.data;\n            this.boundingBox = this.canvas.getContainerBoundingBoxWRTParent(\n              this.selectedLayers\n            );\n            this.boundingBoxWRTWorld = this.canvas.getContainerBoundingBox(\n              this.selectedLayers\n            );\n\n            forEach(this.selectedLayers, selectedLayer => {\n              selectedLayer.setDragging(true);\n            });\n\n            this.startValues = this.getParentRelativeDims(\n              data.startValues,\n              this.selectedLayers[0]\n            );\n\n            const parentLayer = this.selectedLayers.length\n              ? this.selectedLayers[0].parent\n              : undefined;\n\n            if (!parentLayer) {\n              return;\n            }\n            this.snapPoints = this.canvas.executeFunction(\n              'getSnapPoints',\n              this.selectedLayers,\n              parentLayer,\n              data.targetHandle\n            );\n\n            // console.log(this.snapPoints, 'snap points here');\n            this.setLayoutChildren();\n\n            this.selectedLayers.forEach((selectedLayer: any) => {\n              const initialDims = selectedLayer.getBoundingClientRect();\n              initialDims.rootX =\n                initialDims.rootX - parentLayer.getBorderLeft();\n              initialDims.rootY =\n                initialDims.rootY - parentLayer.getBorderTop();\n              selectedLayer.executeFunction('setData', 'initialDims', {\n                ...initialDims,\n                absoluteRotation: selectedLayer.getAbsoluteRotation(),\n                flex: selectedLayer.layout.get('flex'),\n              });\n              selectedLayer.dispatchEvent(\n                `${this.namespace}.handleDragStart`,\n                new LayerResizerEvent(\n                  `${this.namespace}.handleDragStart`,\n                  selectedLayer,\n                  initialDims,\n                  data,\n                  undefined,\n                  undefined,\n                  this.snapPoints\n                )\n              );\n              this.selectedLayerDims.set(selectedLayer, initialDims);\n            });\n\n            this.startX = this.boundingBox.x;\n            this.startY = this.boundingBox.y;\n\n            this.startAbsoluteX =\n              this.boundingBoxWRTWorld.x -\n              this.canvas.getContainerBoundingBox([parentLayer]).x;\n\n            this.startAbsoluteY =\n              this.boundingBoxWRTWorld.y -\n              this.canvas.getContainerBoundingBox([parentLayer]).y;\n          }\n        )\n    );\n\n    this.canvas.addEventListener(\n      'ResizerRenderer.handleDrag',\n      (data: ResizerRendererDragEvent) =>\n        this.canvas.executeMiddleware(\n          'LayerResizer.handleDrag',\n          { data, selectedLayer: this.selectedLayers[0] },\n          (event: any) => {\n            this.dragEventData = event.data;\n            this.applyDimensionsForHandle('handleDrag');\n          }\n        )\n    );\n    this.canvas.addEventListener(\n      'ResizerRenderer.handleDragEnd',\n      (data: ResizerRendererDragEvent) =>\n        this.canvas.executeMiddleware(\n          'LayerResizer.handleDragEnd',\n          { data, selectedLayer: this.selectedLayers[0] },\n          (event: any) => {\n            forEach(this.selectedLayers, selectedLayer => {\n              selectedLayer.setDragging(false);\n            });\n            this.dragEventData = event.data;\n            this.applyDimensionsForHandle('handleDragEnd');\n            this.startValues = undefined;\n            this.dragEventData = undefined;\n            this.totalDx = 0;\n            this.totalDy = 0;\n            this.selectedLayerDims = new Map();\n          }\n        )\n    );\n    this.canvas.addFunction(\n      'LayerResizer.hideLayer',\n      this.hideLayerResizer.bind(this)\n    );\n    this.canvas.addFunction(\n      'LayerResizer.showLayer',\n      this.showLayerResizer.bind(this)\n    );\n\n    this.canvas.addEventListener('blur', () => {\n      if (this.isAltPressed) this.isAltPressed = false;\n      if (this.isShiftPressed) this.isShiftPressed = false;\n    });\n    this.canvas.addEventListener('keyUp', (data: any) => {\n      let event = data.originalEvent ? data.originalEvent : data;\n      if (event.keyCode === 16) {\n        this.isShiftPressed = false;\n      }\n      if (event.keyCode === 18) {\n        this.isAltPressed = false;\n      }\n\n      if (this.dragEventData) {\n        if (this.dragEventData.targetHandle.indexOf('C') === -1) {\n          this.applyDimensionsForHandle('handleDrag');\n        } else {\n          this.applyDimensions('drag');\n        }\n      }\n    });\n    this.canvas.addEventListener('keyDown', (data: any) => {\n      let event = data.originalEvent ? data.originalEvent : data;\n      if (event.keyCode === 16) {\n        this.isShiftPressed = true;\n      }\n      if (event.keyCode === 18) {\n        this.isAltPressed = true;\n      }\n      if (this.dragEventData) {\n        if (this.dragEventData.targetHandle.indexOf('C') === -1) {\n          this.applyDimensionsForHandle('handleDrag');\n        } else {\n          this.applyDimensions('drag');\n        }\n      }\n    });\n\n    this.canvas.addEventListener('resetResizer', (e: ResetResizerEvent) => {\n      const event = e.originalEvent;\n      // const newLayer = e.newTarget;\n\n      this.startValues = undefined;\n      this.selectedLayerDims = new Map();\n\n      this.boundingBox = this.canvas.getContainerBoundingBox(\n        this.selectedLayers\n      );\n      this.startValues = this.getParentRelativeDims(\n        event.startValues,\n        this.selectedLayers[0]\n      );\n      const parentLayer = this.selectedLayers.length\n        ? this.selectedLayers[0].parent\n        : undefined;\n      this.startX = this.boundingBox.x - (parentLayer ? parentLayer.rootX : 0);\n      this.startY = this.boundingBox.y - (parentLayer ? parentLayer.rootY : 0);\n      this.selectedLayers.forEach((selectedLayer: Layer) => {\n        const initialDims = selectedLayer.getBoundingClientRect();\n        selectedLayer.executeFunction('setData', 'initialDims', initialDims);\n        this.selectedLayerDims.set(selectedLayer, initialDims);\n      });\n\n      this.snapPoints = this.canvas.executeFunction(\n        'getSnapPoints',\n        this.selectedLayers,\n        parentLayer\n      );\n    });\n  }\n  setNewLayout(\n    layers: Array<Layer>,\n    boundingBox: IDimensionWithRotation,\n    session: any,\n    handle: string,\n    eventName: string,\n    originalEvent: any,\n    delta?: any,\n    meta?: any\n  ) {\n    let deltaInput = {\n      x: session.current.x - session.start.x,\n      y: session.current.y - session.start.y,\n    };\n\n    if (delta) {\n      deltaInput = delta;\n    }\n\n    layers.forEach((selectedLayer: Layer, index: number) => {\n      const initialDims = selectedLayer.executeFunction(\n        'getData',\n        'initialDims'\n      );\n      if (!initialDims) {\n        return;\n      }\n      let initialDimensions = {\n        x: initialDims.rootX,\n        y: initialDims.rootY,\n        height: initialDims.height,\n        width: initialDims.width,\n        rotation: initialDims.rotation,\n      };\n      let dimensions;\n      if (handle.indexOf('ROTATE') !== -1) {\n        let rotationDelta = {\n          x: session.current.x - session.start.x,\n          y: session.current.y - session.start.y,\n        };\n\n        if (layers.length === 1) {\n          boundingBox = {\n            ...boundingBox,\n            x: selectedLayer.getBoundingClientRect().x,\n            y: selectedLayer.getBoundingClientRect().y,\n          };\n          const rotateDelta = ModelUtils.rotatePoint(\n            [rotationDelta.x, rotationDelta.y],\n            360 - initialDims.absoluteRotation,\n            [0, 0]\n          );\n\n          rotationDelta = {\n            x: rotateDelta[0],\n            y: rotateDelta[1],\n          };\n        }\n\n        let rotation = calculateRotation(\n          { ...boundingBox },\n          session,\n          initialDims.rotation,\n          rotationDelta,\n          handle\n        );\n\n        if (this.isShiftPressed) {\n          const ROTATION_FACTOR = 15;\n          const multiplicationFactor = Math.round(rotation / ROTATION_FACTOR);\n          rotation = ROTATION_FACTOR * multiplicationFactor;\n        }\n\n        dimensions = { ...initialDimensions, rotation };\n      } else {\n        let isFlexChildren = false;\n        let maintainAspectRatio = false;\n        layers.forEach((layer: Layer) => {\n          if (layer.isFlexChild()) isFlexChildren = true;\n          if (layer.aspectRatio) maintainAspectRatio = true;\n        });\n        if (layers.length === 1) {\n          dimensions = computeOrientation(\n            initialDimensions,\n            deltaInput,\n            handle,\n            this.isShiftPressed || maintainAspectRatio,\n            this.isAltPressed && !isFlexChildren\n          );\n        } else {\n          dimensions = computeOrientationMultiple(\n            initialDimensions,\n            deltaInput,\n            handle,\n            boundingBox,\n            ModelUtils.getPointsFromBoundingBox(\n              initialDimensions,\n              initialDims.rotation\n            ),\n            this.isShiftPressed || maintainAspectRatio,\n            this.isAltPressed && !isFlexChildren\n          );\n        }\n      }\n      let parentRootDims = { rootX: 0, rootY: 0 };\n      if (selectedLayer.parent) {\n        parentRootDims = selectedLayer.parent.getBoundingClientRect();\n      }\n      let newDimension = {\n        ...dimensions,\n      };\n      // if (handle.indexOf('C') !== -1 || handle.indexOf('ROTATE') !== -1) {\n      newDimension = {\n        ...dimensions,\n        x: dimensions.x - parentRootDims.rootX,\n        y: dimensions.y - parentRootDims.rootY,\n      };\n      // }\n\n      selectedLayer.dispatchEvent(\n        `${this.namespace}.${eventName}`,\n        new LayerResizerEvent(\n          `${this.namespace}.${eventName}`,\n          selectedLayer,\n          newDimension,\n          originalEvent,\n          undefined,\n          meta\n        )\n      );\n      this.selectedLayerDims.set(selectedLayer, newDimension);\n    });\n  }\n  deactivate() {\n    this.dispose();\n  }\n}\n","import { Canvas, IPlugin, Layer, IContext } from '../..';\nexport default class FloatingButton implements IPlugin {\n  name = 'FloatingButton';\n  canvas!: Canvas;\n\n  dom: any;\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n  activate() {\n    this.canvas.addFunction(\n      'addFloatingButton',\n      this.addFloatingButton.bind(this)\n    );\n    this.canvas.addFunction(\n      'removeFloatingButton',\n      this.removeFloatingButton.bind(this)\n    );\n  }\n\n  removeFloatingButton() {\n    if (this.dom) this.canvas.removeDomFromViewport(this.dom);\n  }\n\n  addFloatingButton(context: any, caption: any, callback: any) {\n    var button = document.createElement('button');\n\n    this.dom = button;\n\n    button.innerHTML = caption;\n    button.addEventListener('click', callback);\n\n    let styles = `text-size-adjust: 100%;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n    box-sizing: border-box;\n    user-select: none;\n    -webkit-font-smoothing: antialiased;\n    outline: none;\n    font-size: 11px;\n    align-items: center;\n    display: inline-flex;\n    position: relative;\n    border: none;\n    transition: all 0.3s ease 0s;\n    cursor: pointer;\n    border-right: none;\n    border-left: none;\n    padding: 3px 6px;\n    justify-content: center;\n    margin-right: 0px;\n    margin-left: 0px;\n    min-width: 0px;\n    -webkit-app-region: no-drag;\n    border-radius: 2px;\n    background: rgb(37, 41, 49);\n    width: auto;\n    color: rgb(251, 251, 251);\n    height: 30px;\n    padding-left: 6px;\n    padding-right: 6px;\n    margin-top: 30px;\n    margin-left: 30px;\n\n    text-size-adjust: 100%;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n    cursor: pointer;\n    vertical-align: baseline;\n    border-width: 0px;\n    border-style: initial;\n    border-color: initial;\n    border-image: initial;\n    font: inherit;\n    box-sizing: border-box;\n    user-select: none;\n    -webkit-font-smoothing: antialiased;\n    font-family: Roboto, -apple-system, BlinkMacSystemFont, sans-serif;\n    font-weight: 400;\n    align-self: center;\n    text-overflow: ellipsis;\n    letter-spacing: -0.27px;\n    font-size: 14px;\n    color: rgb(241, 242, 244, 0.6);\n\n    `;\n\n    button.setAttribute('style', styles);\n\n    this.canvas.addDomToViewport(button);\n  }\n\n  deactivate() {\n    this.canvas.removeFunction('addFloatingButton');\n    this.canvas.removeFunction('removeFloatingButton');\n  }\n}\n","import { Layer, Event } from '../../..';\n\nexport default class GradientEditorEvent extends Event {\n  task?: 'open' | 'close';\n  constructor(\n    name: string,\n    target: Layer,\n    task?: 'open' | 'close',\n    currentTarget?: Layer\n  ) {\n    super(name, target, currentTarget);\n    this.task = task;\n  }\n}\n","import { Canvas, IPlugin, Layer, IContext } from '../..';\nimport DesignerMouseEvent from '../../events/MouseEvent';\nexport default class PlusButton implements IPlugin {\n  name = 'PlusButton';\n  canvas!: Canvas;\n  dispose: any;\n  dom: any;\n  passedEvent = ['mouseup', 'mousemove', 'drop'];\n\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n    this.dispose = null;\n  }\n  activate() {\n    this.canvas.addFunction('addPlusButton', this.addPlusButton.bind(this));\n    this.canvas.addFunction('showPlusButton', this.showPlusButton.bind(this));\n    this.canvas.addFunction('hidePlusButton', this.hidePlusButton.bind(this));\n    this.canvas.addFunction(\n      'removePlusButton',\n      this.removePlusButton.bind(this)\n    );\n\n    this.canvas.on('zoom', this.handleZoom.bind(this));\n    this.canvas.addEventListener(\n      'artboardLayoutChanges',\n      this.positionPlusButton.bind(this)\n    );\n  }\n\n  passEvent(e: Event) {\n    e.preventDefault();\n    this.canvas.dispatchEventOnHitLayer(\n      e.type,\n      new DesignerMouseEvent(e.type, this.canvas, e, this.canvas),\n      e\n    );\n  }\n\n  handleLayerListeners(handle: any) {\n    this.passedEvent.map(event => {\n      handle.addEventListener(event, (e1: any) => {\n        this.passEvent(e1);\n      });\n    });\n  }\n\n  positionPlusButton() {\n    if (!this.dom) return;\n    var zoom = 1;\n    var artboards = this.canvas.executeFunction('getAllArtboards');\n\n    let left = Number.MIN_VALUE;\n    let artLeft = Number.MIN_VALUE;\n    let artTop = Number.MIN_VALUE;\n    let top = Number.MIN_VALUE;\n\n    if (artboards.size === 0) {\n      this.dom.style.display = 'none';\n    }\n    // else {\n    //   this.dom.style.display = 'inline-block';\n    // }\n\n    if (artboards.size === 0) {\n      position = { left: 300, top: 50, artTop: 50, artLeft: 300 };\n    }\n    artboards.forEach((artboard: Layer) => {\n      const artboardClientRect = artboard.getBoundingClientRect();\n      const artMaxX = artboardClientRect.x + artboardClientRect.width;\n      const artMidY = artboardClientRect.y + artboardClientRect.height / 2;\n      if (left < artMaxX) {\n        left = artMaxX;\n        top = artMidY;\n        artTop = artboardClientRect.y;\n      }\n    });\n    artLeft = left + 50;\n    left = left * zoom + 50;\n    top = top * zoom - 40;\n    var position = { left, top, artTop, artLeft };\n\n    this.dom.style.top = position.top + 'px';\n    this.dom.style.left = position.left + 'px';\n  }\n\n  handleZoom() {\n    if (this.dom) {\n      let zoom = this.canvas.getZoom();\n      if (zoom > 0.5) {\n        this.dom.style.transform = 'scale(' + 1 / zoom + ')';\n      }\n    }\n  }\n\n  removePlusButton() {\n    if (this.dom) this.canvas.removeDomFromWorld(this.dom);\n  }\n\n  hidePlusButton() {\n    if (this.dom) this.dom.style.display = 'none';\n  }\n  showPlusButton() {\n    if (this.dom) {\n      this.dom.style.display = '';\n    }\n  }\n  addPlusButton(context: any, caption: any, callback: any) {\n    let button = document.createElement('button');\n    this.dom = button;\n    button.innerHTML = '<span style=\"font-size: 36px\">+</span>';\n    button.addEventListener('click', (event: any) => {\n      if (!this.canvas.mouseEventsBlocked && event.sourceCapabilities) {\n        callback();\n      }\n    });\n\n    this.handleLayerListeners(button);\n\n    let styles = `text-size-adjust: 100%;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n    box-sizing: border-box;\n    user-select: none;\n    -webkit-font-smoothing: antialiased;\n    outline: none;\n    font-size: 11px;\n    align-items: center;\n    display: inline-flex;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100px;\n    height: 80px;\n    border: none;\n    cursor: inherit;\n    border-right: none;\n    border-left: none;\n    padding: 3px 6px;\n    justify-content: center;\n    margin-right: 0px;\n    margin-left: 0px;\n    min-width: 0px;\n    -webkit-app-region: no-drag;\n    border-radius: 2px;\n    background: rgb(37, 41, 49);\n    color: rgb(251, 251, 251);\n    padding-left: 6px;\n    padding-right: 6px;\n    margin-top: 2px;\n    margin-left: 2px;\n\n    text-size-adjust: 100%;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n    vertical-align: baseline;\n    border-width: 0px;\n    border-style: initial;\n    border-color: initial;\n    border-image: initial;\n    font: inherit;\n    box-sizing: border-box;\n    user-select: none;\n    -webkit-font-smoothing: antialiased;\n    font-family: Roboto, -apple-system, BlinkMacSystemFont, sans-serif;\n    font-weight: 400;\n    align-self: center;\n    text-overflow: ellipsis;\n    letter-spacing: -0.27px;\n    font-size: 14px;\n    color: rgb(241, 242, 244, 0.6);\n    transform-origin: 0 0;\n    `;\n\n    button.setAttribute('style', styles);\n    button.setAttribute('name', 'add-artboard');\n    button.addEventListener('mouseenter', (event: any) => {\n      if (!this.canvas.mouseEventsBlocked) {\n        this.canvas.setMouseCursor('pointer');\n      }\n    });\n    button.addEventListener('mouseleave', (event: any) => {\n      if (!this.canvas.mouseEventsBlocked) {\n        this.canvas.setMouseCursor('default');\n      }\n    });\n    this.dispose = this.canvas.addDomToWorld(button);\n    this.positionPlusButton();\n  }\n\n  deactivate() {\n    this.canvas.removeFunction('addPlusButton');\n    this.canvas.removeFunction('removePlusButton');\n    this.dispose();\n  }\n}\n","import { Canvas, IPlugin, MouseEvent } from '../../';\nimport { IDimensionWithRotation, IPosition } from 'interfaces';\nimport ModelUtils from './../../models/utils';\nexport default class HtmlDragToWorldPlugin implements IPlugin {\n  name = 'HtmlDragToWorldPlugin';\n  namespace = 'HtmlDragToWorld';\n  canvas!: Canvas;\n  resizerHandleLayersRef!: Map<string, any>;\n  initPos: IPosition = { x: 0, y: 0 };\n  relPos: IPosition = { x: 0, y: 0 };\n  lastPos: IPosition = { x: 0, y: 0 };\n  startValues = { x: 0, y: 0, height: 0, width: 0, rotation: 0 };\n  dragSession = {\n    start: { x: 0, y: 0, deltaX: 0, deltaY: 0 },\n    current: { x: 0, y: 0, deltaX: 0, deltaY: 0 },\n    end: { x: 0, y: 0, deltaX: 0, deltaY: 0 },\n  };\n  init(canvas: Canvas) {\n    this.canvas = canvas;\n  }\n  setStartValues = (dims: IDimensionWithRotation) => {\n    this.startValues = dims;\n  };\n  startDragSession = (x: number, y: number) => {\n    this.dragSession.start = { x, y, deltaX: 0, deltaY: 0 };\n    this.dragSession.current = { x, y, deltaX: 0, deltaY: 0 };\n    this.dragSession.end = { x, y, deltaX: 0, deltaY: 0 };\n  };\n  endDragSession = () => {\n    this.dragSession.end = {\n      x: this.dragSession.current.x,\n      y: this.dragSession.current.y,\n      deltaX: this.dragSession.current.x - this.dragSession.start.x,\n      deltaY: this.dragSession.current.y - this.dragSession.start.y,\n    };\n  };\n  updateDragSession = (dx: number, dy: number) => {\n    this.dragSession.current = {\n      x: this.dragSession.current.x + dx,\n      y: this.dragSession.current.y + dy,\n      deltaX: dx,\n      deltaY: dy,\n    };\n  };\n  dragStart(context: any, e: any, initialDims: IDimensionWithRotation) {\n    let event = new MouseEvent(`${this.namespace}.dragStart`, this.canvas, e);\n    this.initPos = { x: event.worldX, y: event.worldY };\n    this.setStartValues(initialDims);\n    this.startDragSession(event.worldX, event.worldY);\n    this.lastPos = { x: 0, y: 0 };\n    return {\n      event,\n      startValues: { ...this.startValues },\n      session: { ...this.dragSession },\n    };\n  }\n  drag(context: any, e: any) {\n    e.preventDefault();\n    let event = new MouseEvent(`${this.namespace}.drag`, this.canvas, e);\n    this.relPos = {\n      x: event.worldX - this.initPos.x,\n      y: event.worldY - this.initPos.y,\n    };\n    let deltaX = this.relPos.x - this.lastPos.x;\n    let deltaY = this.relPos.y - this.lastPos.y;\n    // let rotatedDelta = ModelUtils.rotatePoint(\n    //   [deltaX, deltaY],\n    //   360 - this.startValues.rotation,\n    //   [0, 0]\n    // );\n    this.updateDragSession(deltaX, deltaY);\n    this.lastPos = { ...this.relPos };\n    return {\n      event,\n      startValues: { ...this.startValues },\n      session: { ...this.dragSession },\n    };\n  }\n  dragEnd(context: any, e: any) {\n    e.preventDefault();\n    let event = new MouseEvent(`${this.namespace}.dragEnd`, this.canvas, e);\n    this.setStartValues({ x: 0, y: 0, height: 0, width: 0, rotation: 0 });\n    this.endDragSession();\n    this.initPos = { x: 0, y: 0 };\n    return {\n      event,\n      startValues: { ...this.startValues },\n      session: { ...this.dragSession },\n    };\n  }\n  activate() {\n    this.canvas.addFunction(\n      `${this.namespace}.dragStart`,\n      this.dragStart.bind(this)\n    );\n    this.canvas.addFunction(`${this.namespace}.drag`, this.drag.bind(this));\n    this.canvas.addFunction(\n      `${this.namespace}.dragEnd`,\n      this.dragEnd.bind(this)\n    );\n  }\n\n  deactivate() {\n    //\n  }\n}\n","import { Layer } from '../models/Layer';\nimport { Event as DesignerEvent } from './index';\n\nexport default class DesignerKeyboardEvent extends DesignerEvent {\n  originalEvent: KeyboardEvent;\n  name!: string;\n  target!: Layer;\n  constructor(name: string, target: Layer, originalEvent: any) {\n    super(name, target);\n    this.originalEvent = originalEvent;\n  }\n}\n"],"names":["RootRenderer","forceUpdate","componentDidMount","props","layer","on","this","onUpdate","componentWillUnmount","off","render","TheChosenOne","canvas","getRenderer","type","React","ScrollContainer","viewport","_this","getViewport","viewportState","height","width","baseState","layout","get","centerScrollTo","scroll","state","x","scrollX","y","scrollY","center","zoom","emit","scrollContainerRef","scrollLeft","scrollTop","values","isNaN","setScroll","event","isMouseDown","moveWithGrabHandle","deltaX","nativeEvent","movementX","deltaY","movementY","currentScrollX","getScrollLeft","currentScrollY","getScrollTop","stopPropagation","getZoom","getScroll","scrollDom","ReactDOM","document","addEventListener","e","keyCode","target","body","preventDefault","setCenterPosition","getCenterPointInCurrentViewport","_this2","removeEventListener","getScrollPositon","inputScroll","scrollPostion","spaceKey","Scrollbars","ref","c","_this3","autoHide","onScrollFrame","style","cursor","mouseCursorType","overflow","onMouseDown","button","which","setMouseDown","onMouseUp","onMouseLeave","onMouseMove","className","map","children","child","pointerEvents","ZoomContainer","scrollFactor","undefined","initialScroll","defaultProps","onUpdateZoom","shouldComponentUpdate","componentDidUpdate","setZoom","componentWillMount","getSceneStyle","position","transform","transformOrigin","containerRef","onClick","CanvasRenderer","keys","baseHeight","baseWidth","backgroundColor","index","key","DesignerReact","canvasDOMElement","createElement","setAttribute","top","left","opacity","renderCompiledDom","pane","context","getContext","collisionScope","strokeStyle","beginPath","drawBVH","stroke","appendChild","worldStackRef","firstChild","removeChild","stackWorldDOM","forEach","element","viewportStackRef","stackViewportDOM","thisNode","ownerDocument","handleNativeEvent","renderDOMStack","viewportHeight","viewportWidth","r","_this4","setViewportRef","right","bottom","onMouseEnter","onContextMenu","onDoubleClick","onMouseOut","onDrop","onDragOver","Serializable","fromJS","snapshot","classObject","classInstance","fields","getAllFields","_","Object","field","console","log","objectClassInstance","getClassInstanceFromPlainObject","push","Map","value","mapKey","valueType","set","valueArray","valueClassInstance","warn","constructor","name","Error","toJS","shallow","ret","object","getPlainObjectFromClassInstance","MapToPOJO","mapInstance","result","valuePlainArray","instance","getFields","newFields","superInstance","getPrototypeOf","types","literal","array","keyType","ignore","actionCounter","pendingUpdates","action","callback","updateObject","listener","model","disposed","properties","window","clear","Model","eventListenersMap","reverseMap","property","existingArrOfListeners","arrayOfProperties","concat","uniq","reduce","combined","union","existingUpdateObject","remove","n","length","ModelUtils","pointsOverlap","point1","point2","Math","abs","getDimensionFromPolygon","points","rotatePolygon","poly","angle","centroid","getCentroid","point","rotatePoint","findAngle","A","B","C","range","AB","sqrt","pow","BC","AC","acos","PI","getAbsoluteRotation","point3","middlePoint","coord","distance","a","b","cos","sin","getPointsFromBoundingBox","box","rotation","getPointsFromDims","dims","newX","newY","reverse","obj","rotate","depthComparator","activeA","getActiveDigit","activeB","nextA","getNextCharacter","nextB","aIndex","indexOf","substring","includes","parseInt","getCorrection","orientation","finalOrientation","handle","x1","y1","diff1","y2","x2","new_x2","new_y2","diff2","offsetWidth","offsetHeight","computeOrientation","delta","shift","alt","computeOrientationWithDeltaAR","computeOrientationWithDeltaAlt","computeOrientationWithDeltaShiftAlt","computeOrientationWithDelta","max","isNil","computeOrientationWithDeltaMultiple","boundaryBox","newPoints","pointXDiff","pointYDiff","computeOrientationWithDeltaARMultiple","deltaInp","aspectRatio","pointX","pointY","pointYDiffDirect","pointXDiffDirect","pointYDiffOpposite","pointXDiffOpposite","computeOrientationWithDeltaAltMultiple","computeOrientationWithDeltaShiftAltMultiple","getBoundingBoxFromOrientation","minX","minY","maxX","maxY","calculateRotation","startValues","session","oldRotation","deltaInput","current","start","getHandlePoint","polygon","generateRandomString","characters","i","charAt","floor","random","EventCallableRegsitry","registry","callbacks","splice","dispatchEvent","propagate","KeyValueContainer","data","isValidKey","prop","getAll","Array","isArray","Style","Props","Layout","validKeys","Event","currentTarget","_propagate","_defaults","SetLayoutEvent","_Event","RemoveChildEvent","payload","globalLayerUpdateController","last","shouldBatch","updateChildrenLayoutCount","rerenderCount","shouldAddToBatch","updateLayoutCount","layerMap","setYogaAfterBatch","onUpdateDom","stopChildrenLayoutUpdates","startChildrenLayoutUpdates","stopRerender","startRerender","stopAndBatchLayoutUpdates","stopAndForgetLayoutUpdates","resumeLayoutUpdates","Layer","uuid","val","_aspectRatio","_dom","dragging","_dragging","scope","_collisionScope","setLayoutEvent","updateChildrenLayout","isFlexChild","parent","setChildrenLayout","rerender","updateLayout","setNativeProps","updatedStyle","textDecoration","dom","findDOMNode","attributes","container","containerWidth","containerHeight","dimensions","percent","number","round","_name","_type","_parent","_props","_children","_style","_layout","config","yoga","Config","create","setPointScaleFactor","_yogaNode","Node","setType","_locked","_visible","_preservedProperties","locked","hidden","_dims","_mouseProps","_canvas","_thirdParty","setYoga","getDomBoundingBox","offsetTop","offsetLeft","clientRect","getBoundingClientRect","parentDom","parentElement","getAttribute","parentClientRect","updateDomainCompileDimensions","isAutoHeight","isAutoWidth","_domDims","getCanvas","setSelectable","unlock","lock","getBorderLeft","getBorderTop","rootX","rootY","getBounds","getMarginLeft","margin","getMarginTop","getPaddingLeft","padding","getPaddingTop","yogaNode","getComputedBorder","EDGE_LEFT","EDGE_TOP","removeProp","yogaProps","setProps","setProp","_this5","_this6","show","setStyle","hide","noShow","setName","gradient","palette","vector","colors","stops","stopColor","to","from","angleDeg","atan2","realLocations","offset","colorStrings","color","join","gradientType","dist","maxDist","radialColorStrings","getGradientString","_this7","setParent","executeFunction","args","functionRegistry","Promise","resolve","reject","addChild","setCollisionScope","addYogaNode","setCollisionNode","calculateLayout","_this8","removeCollisionNode","removeChildEvent","setDims","_this9","move","newParent","newIndex","getRootLayer","node","parentLayer","getChildCount","insertChild","getComputedLayout","rootLayer","UNDEFINED","DIRECTION_LTR","elementType","getTotalFlexOfFlexChildren","sumOfFlex","layerFlex","getFlexValue","getParentLayerFlexDirection","err","flexDirection","flex","alignSelf","isFillWidth","isFillHeight","flexGrow","getSiblingsWithFlex","siblingsWithFlex","childLayer","_this10","updateNode","setHeight","setWidth","_this11","_this12","setLayout","emitLayoutChanges","recalculateLayout","removeLayout","removeStyle","_this13","isValidLayoutKey","setViewport","_this14","getTransform","transformObj","transformArray","getRotatedDims","firstPoint","getRotatedPolygon","_collisionNode","updatedPoly","createPolygon","update","getPartialPath","childIndex","findIndex","parentPath","getDepth","depth","getIndexInParent","getHitLayer","hitLayers","getHitResult","hitResult","createResult","player","createPoint","layersHit","potentials","shape","collides","sort","layer1","layer2","newHitLayers","executeMiddleware","getHitRectResult","orderBy","_eventCallableRegistry","dispatchedData","setInnerText","text","_innerText","_this15","convertLayerDimensions","newLeft","newRight","newTop","newBottom","newWidth","newHeight","layoutData","originalLeft","originalTop","originalRight","originalBottom","originalHeight","originalWidth","getDimensions","endsWith","transformValue","rerenderDescendants","_this16","_id","parentX","parentY","styleObj","item","parseFloat","slice","LayerInstantiable","MiddlewareRegistry","middlewares","_middlewares","execute","middlewareCallbacks","cb","self","mw","remainingCbs","_data","FunctionRegistry","_functions","fn","DesignerMouseEvent","originalEvent","pageX","pageY","worldPoints","convertPoint","worldX","worldY","viewportPoints","viewportX","viewportY","DesignerDropEvent","HoverEvent","SetScrollEvent","SetZoomEvent","Canvas","resultPoint","convertPointFromViewportToPage","convertPointFromViewportToWorld","convertPointFromPageToViewport","convertPointFromWorldToViewport","world","Collisions","_hoveredLayers","_selectedLayers","_stackWorldDOM","_stackViewportDOM","addFunction","setScrollCallback","bind","setZoomCallback","setMouseCursor","_mouseCursorType","scrollDims","blockMouseEvents","_mouseEventsBlocked","unblockMouseEvents","createLayer","addMiddleware","_middlewareRegistry","_functionRegistry","removeFunction","setAssetUrl","url","_assetURL","_viewportRef","_isMouseDown","setHoverLayers","layers","selectLayers","viewPortLeftPos","viewPortTopPos","pageScrollY","documentElement","pageScrollX","viewportDom","installPlugin","plugin","plugins","init","activate","dispatchEventOnHitLayer","addComponent","ReactComponent","componentDefinition","componentMap","renderer","definition","getComponentDefinition","addDomToWorld","domElement","maintainScale","zIndex","wrapperLayer","canvasDims","removeDomFromWorld","ele","addDomToViewport","removeDomFromViewport","dispatchHandledEvent","setDragging","MouseEvent","getContainerBoundingBox","getBoundingBox","getContainerBoundingBoxWRTParent","getBoundingBoxWRTParent","withoutRotation","wrtParent","isEmpty","layerPoints","localBox","minXLayer","minBy","minYLayer","maxXLayer","maxBy","maxYLayer","parentDims","enableMoveWithGrabHandle","mouseEventsBlocked","disableMoveWithGrabHandle","_this17","_componentMap","Gradient","activeIndex","elipseLength","pos","gradientJSON","isFunction","cx","cy","radians","ny","rotateGradient","nFrom","nTo","rotatedTo","HoverPlugin","dispose","hideLayerHover","forbiddenLayers","showLayerHover","hideAllHoverBoxes","hoverWrapperLayer","display","showAllHoverBoxes","showHover","selectedLayers","renderBoxes","hoveredLayers","hoverBox","hoverLayers","id","border","breakIndex","deactivate","DragEvent","worldDx","worldDy","pagePoints","pageDx","pageDy","viewportDx","viewportDy","Drag","offsetPageX","offsetPageY","relPos","mouseDown","dragStarted","lastPageX","lastPageY","dragStartEvent","dragEvent","dragEndEvent","rerenderProps","ViewRenderer","styles","returnStyles","setDomRef","_ref","domNode","findNodeHandle","prevProps","layerProps","layerId","View","component","getStyles","nativeID","ViewComponentDefinition","version","template","layerName","packageName","isDefaultImport","asName","centerVertical","centerHorizontal","thumbnail","controlsProperty","title","showForMultiple","propertyName","defaultValue","min","category","options","ViewRendererPlugin","TouchableOpacityRenderer","additionalOptions","showGradient","TouchableOpacityRendererPlugin","TouchableOpacityComponentDefinition","ScrollViewRenderer","contentContainerStyle","ScrollViewRendererPlugin","ScrollViewComponentDefinition","RenderEvent","TextRenderer","WebkitFontSmoothing","wordBreak","textDecorationLine","textRef","whiteSpaceTo","whiteSpace","innerText","replace","RegExp","Text","webkit","fontSize","fontFamily","fontPostscriptName","fontStyle","fontWeight","TextRendererPlugin","TextComponentDefinition","TextInputRenderer","appliedStyles","filteredProps","pick","TextInput","placeholder","uiOptions","size","TextInputRendererPlugin","TextInputComponentDefinition","ImageRenderer","imageStyle","sourceUri","imageURI","maskPath","imageMaskId","Svg","viewBox","preserveAspectRatio","Defs","Mask","Path","fill","d","SVGImage","svgDims","href","mask","resizeMode","src","objectFit","Image","source","uri","imageMask","generateSVGPath","ImageRendererPlugin","ImageComponentDefinition","PathRenderer","pathStyle","maskId","gradientId","LinearGradient","stop","Stop","strokeWidth","fillOpacity","strokeOpacity","clipPath","svgPath","pathProps","isClosed","PathRendererPlugin","PathComponentDefinition","Icons","EntypoIcon","AntDesignIcon","EvilIconsIcon","FeatherIcon","FontAwesomeIcon","FoundationIcon","IoniconsIcon","MaterialCommunityIconsIcon","MaterialIconsIcon","OcticonsIcon","SimpleLineIconsIcon","ZocialIcon","Fonts","EntypoFont","AntDesignFont","EvilIconsFont","FeatherFont","FontAwesomeFont","FoundationFont","IoniconsFont","MaterialCommunityIconsFont","MaterialIconsFont","OcticonsFont","SimpleLineIconsFont","ZocialFont","IconRenderer","componentWillUpdate","iconStyle","IconComponentDefinition","hideSize","IconRendererPlugin","AndroidSwitchRenderer","switchStyle","Switch","activeThumbColor","thumbTintColor","trackColor","onTintColor","tintColor","styled","input","disabled","IOSSwitchRenderer","IOSSwitch","checked","onChange","SwitchRenderer","platform","deviceData","AndroidRenderer","IOSRenderer","AndroidSwitchComponentDefinition","IOSSwitchRendererPlugin","SwitchComponentDefinition","AndroidActivityIndicatorRenderer","activityIndicatorStyle","ActivityIndicator","keyFrameFade","keyframes","Bar","div","SpinnerWrapper","IOSSpinner","remainingProps","animationDelay","IOSActivityIndicatorRenderer","layerStyle","ActivityIndicatorRenderer","ActivityIndicatorComponentDefinition","ActivityIndicatorRendererPlugin","EllipseRenderer","ellipseProps","ellipseStyle","Number","appliedProps","rx","ry","getRef","Ellipse","EllipseRendererPlugin","EllipseComponentDefinition","SliderWrapper","AndroidSliderButton","AndroidSliderProgressBar","minimumTrackTintColor","maximumTrackTintColor","IOSSliderButton","IOSSliderProgressBar","Slider","isAndroid","SliderProgressBar","SliderButton","maximumValue","minimumValue","sliderRange","sliderValue","sliderButtonPosition","paddingTop","SliderRenderer","sliderProps","sliderStyle","SliderComponentDefinition","SliderRendererPlugin","MapViewRenderer","mapViewStyles","mapStyle","customMapStyle","assetURL","MapViewComponentDefinition","provider","initialRegion","latitude","longitude","latitudeDelta","longitudeDelta","MapViewRendererPlugin","PopoverMenuPlugin","showMenu","json","containerElement","randomId","menuReactElement","MainMenu","menuId","contextMenu","getAllSiblingLayerPoints","snapPoints","snap","siblingSnap","layerBox","xSnapPoint2","rootValue","snapTo","end","xSnapPoint3","ySnapPoint1","ySnapPoint2","ySnapPoint3","getLayerPoints","getParentSnapPoints","parentSnap","layerDimensions","getDistance","axis","box1","box2","getDistanceBetweenLayers","isAlignedOnAxis","layerDims","otherLayerDims","getOverlapBetweenLayers","extremities","addToSnapXPoint","snapXPoints","snapLines","addToSnapYPoint","snapYPoints","getGutterSnapPoints","gutterSnap","allGutterPoints","restrictedLayers","originalAllLayers","dims1","dims2","filter","leftMostPoint","leftMostRootPoint","getDisconnectedGutterPointsForX","overlapX","rightMostPoint","rightMostRootPoint","topMostPoint","topMostRootPoint","getDisconnectedGutterPointsForY","overlapY","bottomMostPoint","bottomMostRootPoint","gridSnapPoint","startPoint","gridSpace","stretch","snappedSide","coordinate","NaN","delta1","delta2","outputDelta","snapType","snapToGrid","startX","totalDeltaX","startY","totalDeltaY","stretchX","stretchY","gridSnap","gridOffset","snapBounds","snapToPoints","totalDelta","absoluteDelta","startAbsolutePoint","parentAbsoluteRotation","boundingBoxWRTWorld","meta","snappedData","rulerCoordinatesX","rulerSnapPoints","rulerCoordinatesY","documentCoordinatesX","parentSnapPoints","documentCoordinatesY","layerCoordinatesX","siblingSnapPoints","layerCoordinatesY","coordinateValueX","coordinateValueY","parentSnappedDataX","getPointForParentSnap","parentSnappedDataY","siblingDataX","getPointForSiblingSnap","siblingDataY","rulersDataX","getPointForRulerLines","rulersDataY","rotateDelta","gridDataX","gridDataY","gridSnapPoints","rotateDeltaGrid","minSnappedDataX","MAX_VALUE","minSnappedDataY","snapPoint","documentCoordinates","coordinateValue","snappedPoint","originalCoordinateValue","newData","calculateCoordinate","snapped","layerCoordinates","showLog","rulerCoordinates","value1","value2","snapMagnet","filterSnapPointX","filterSnapPointY","getSnapPoints","gutterSnapPoints","layerParent","rulerSnap","boundingBox","SnapPointsCalculator","bound","snapBound","getConfig","setConfig","getSiblingPoints","setSnapBound","getSnapBound","ConstructionLinesPlugin","clearRect","constructionLinesWrapper","toString","showConstructionLines","hideConstructionLines","setDimensions","attachListeners","updateLines","ScrollMousePositionPlugin","positionElement","mousePosWorldNode","createTextNode","mousePosViewportNode","pagePosPageNode","scrollPosNode","zoomNode","toFixed","nodeValue","isContained","helperBox","leftContained","rightContained","topContained","bottomContained","isAlignedonAxis","getDirection","MeasurementLinesPlugin","hoveredDims","parentHoveredLayer","emptyBox","currentHoveredLayer","xLines","xContained","yContained","xAligned","leftAligned","rightAligned","direction","leftEnd","getLeftEnd","leftWidth","getLeftWidth","getTop","rightEnd","getRightEnd","rightWidth","getRightWidth","leftDistance","rightDistance","rightShow","lines","drawXLines","yLines","yAligned","topAligned","bottomAligned","topEnd","getTopEnd","topHeight","getTopHeight","getLeft","bottomEnd","getBottomEnd","bottomHeight","getBottomHeight","topDistance","bottomDistance","bottomShow","drawYLines","line","parentNode","showLines","temporarilyHidden","hideLines","namespace","MouseRectEvent","MouseRectPlugin","hitRectResult","dragStart","drawEvent","getLayers","drawEndEvent","TextEditor","isBlurred","TextEditorEvent","editorState","getCurrentContent","getPlainText","onEvent","isNumpadEnter","onBlur","newStyle","setState","contentBlock","getType","newContentState","Modifier","replaceText","getSelection","EditorState","getDefaultKeyBinding","isText","moveFocusToEnd","createWithContent","ContentState","createFromText","onFocus","handleNumpadEnter","execCommand","location","removePositionalAttribute","visibility","isAuto","caretColor","lineHeight","getStringStyle","letterSpacing","Editor","editorRef","keyBindingFn","handleKeyBinding","blockStyleFn","myBlockStyleFn","handleReturn","onTab","handleTab","TextEditorPlugin","mountTextEditor","TextEditorRenderer","unmountTextEditor","unmountComponentAtNode","PathEditor","paper","segment","finishEditing","path","closePath","ready","clearHandles","handleIn","isZero","smooth","handleOut","newPath","tempPath","clone","insert","deep","translate","Point","bounds","convertedJSON","convertPaperPointToBxObj","emitEvent","PathEvent","tempPath2","getRotation","oldBounds","canvasEvent","selected","project","hitTest","segments","tolerance","next","emitUpdatedJSON","add","downPoint","subtract","isLastUpdate","isFirstClick","handles","newCurve","curve","divideAt","segment1","contains","pathEditorOnEnd","getElementById","setup","tool","Tool","onMouseDrag","settings","handleSize","pointMode","actions","deleteSelectedPoint","straightenSelectedPoint","disconnectSelectedPoint","selectedColor","strokeColor","paperLayer","addLayer","pathJSON","getPaperPathFromPoints","xFactor","yFactor","applyMatrix","scale","topLeft","fillColor","view","draw","PathEditorPlugin","nameSpace","selectedTool","closed","canvasScroll","getScrollShift","PathEditorRenderer","handlePathEditorEvents","handleEvent","mountEditor","targetLayer","getLineSegmentObject","GradientEditorRenderer","newStops","lineSegmentObj","LineSegmentSliderInput","changeIndex","handleMove","removeHandle","onClickOutside","onWrapperMouseDown","onWrapperContexMenu","onWrapperDoubleClick","onWrapperMouseOut","onWrapperDrop","onWrapperMouseMove","onWrapperMouseUp","onDragStart","handleDragStart","onDragEnd","handleDragEnd","CommandEvent","commandParams","GradientEditorPlugin","stylePropName","isOpened","initialShift","gradientProps","getGradientFromLineSegmentObject","closeEditor","NativeHtmlDrag","dragDom","boundMouseMove","boundMouseUp","disableSelect","handleHtmlDrag","StageDesignerDeviceData","getDeviceDataOnLayer","getDeviceData","ArtboardEvent","artboard","isFinal","LayerDragEvent","newDims","layerWorldX","layerWorldY","LayerDrag","applyDimensions","eventType","dragEventData","totalDx","totalDy","currentDeltaX","currentDeltaY","startAbsoluteX","startAbsoluteY","isShiftPressed","shiftDirection","startLayoutX","startLayoutY","layerDragEvent","isAltPressed","GridRenderer","gridData","gridLayers","createGrid","gridSize","has","gridLayersRef","gridElementMap","wrapperElement","gridWrapper","refreshGrid","setGridSize","pathElement","setAttributeNS","gridDims","svgns","svgElement","createElementNS","defsElement","patternElement","rectElement","showGrid","hideGrid","getGridSize","setGridOffset","getGridOffset","adjustStroke","SelectLayers","ResetResizerEvent","StageDesigner","targetDims","currentArtboard","newRootLayer","currentRootLayer","x_overlap","y_overlap","previousMovedLayers","currentSelectedLayers","hitRectParams","getNewRootLayer","newToSelectLayers","newLayer","moveLayer","mouseUpEvent","mouseDownEvent","fromIndex","_layer$parent","toIndex","fromParent","toParent","newRootLayerDims","newLayerDims","artLeft","MIN_VALUE","artTop","artboards","artboardClientRect","artMaxX","addArtboard","removeArtboard","selectArtboard","getSelectedArtboard","getArtboard","focusArtboard","getAllArtboards","getArtboardById","getSelectedArtboardId","getNewArtboardPosition","getHitArtboard","artboardLayer","selectedArtboard","selectedArtboardLayers","lowestIndexArtboardLayers","allArtboards","lowestIndex","ignoredHitRectLayers","modLayers","currentLayerArtboard","intersection","modifyEventForSelectableLayers","currentLayer","filteredLayer","filterIgnoredLayers","hitLayer","allRootLayers","setTopLayerSelectionMode","h","filePath","DesignerEvent","artboardDims","artboardArray","forLayerDrag","allRootLayerChildren","topLayerSelectionMode","ancestorsList","ancestorSiblingsList","ancestor","topChildInHitLayers","findLast","LayerMouseCursorPlugin","DataStore","setData","getData","removeData","layerData","dataMap","TooltipPlugin","containerDiv","textAlign","alignItems","justifyContent","verticalAlign","borderRadius","background","coords","childNodes","OpacityShortcutPlugin","keycode","newOpacity","altKey","ctrlKey","metaKey","shiftKey","previousEvent","timeStamp","opacityInString","selectedLayer","handleKeyPress","FontResizerEvent","FontResizerPlugin","textLayer","_textLayer$parent","textLayerDims","newHandle","parentCenterY","parentCenterX","textLayerCenterY","textLayerCenterX","isInsideCenterBox","targetHandle","currentFontSize","initialDims","ratioX","ratioY","newFontSize","currentDims","widthChanged","heightChanged","handleDrag","getHandles","disableDrag","layerCenterY","layerCenterX","transitionStyle","innerHTML","FlexDragPlugin","layersHeightWidth","layerOpacities","isFlex","revertParentDims","initialParentData","hasOwnProperty","getMarginAdjustedBounds","flexLayers","saveLayersHeightWidth","ghostLayer","layerStyles","copyLayer","wrapperLayerDims","ghostMove","ghostMouseUp","initialBounds","currentSnapshotData","cloneDeep","sibling","siblingDims","snapshotData","originalHW","previousLayer","prevLayerIndex","findAbsoluteNextLayer","findAbsolutePreviousLayer","nextLayer","nextLayerIndex","previousTriggerPoint","nextTriggerPoint","targetIndexInParent","findPreviousLayer","findNextLayer","currentTargetDims","previousLayerDims","calculateTriggerPoint","nextLayerDims","sortedSelectedLayers","sortBy","firstSelectedLayerIndex","lastSelectedLayerIndex","boundingBoxDims","boundingBoxDimsWRTParent","oldCenter","newCenter","targetLayerIndex","toMoveLayer","crossedPreviousTriggerPoint","crossedNextTriggerPoint","newTargetIndex","internalMove","revertBackToSnapshot","newPositionData","recordCurrentSnapshot","setFlexLayers","setTriggerPoints","beforeDragSnapshotData","changeToAbsolute","newChildLayout","every","saveSiblingOpacity","targetInitialDims","initialSnapshotData","endFlexLayerDragging","createGhostLayer","startGhostDragging","changeParentDims","targetGhostLayer","targetNewDims","oldCenterTargetLayer","newCenterTargetLayer","handleSwapWRTNewPosition","revertSiblingOpacity","clearFlexLayersHeightWidth","layerDragStart","layerDrag","layerDragEnd","layerResizerDrag","layerResizerDragEnd","Ruler","domWidth","domHeight","ratio","ruler","ctx","font","lineWidth","textBaseline","drawRuler","handleResize","select","HorizontalRuler","fontColor","fontScale","perWidth","fillStyle","bgColor","fillRect","tempX","moveTo","save","fillText","restore","lineTo","VerticalRuler","vertical","perHeight","tempY","RulerScaleWrapper","getPixelRatio","backingStore","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","devicePixelRatio","verLineArr","shadow","fgColor","shadowColor","draggable","onDragStartHorizontal","onDrag","onDragHorizontal","onDragEndHorizontal","initialPoint","horLineArr","marginTop","onDragStartVertical","onDragVertical","onDragEndVertical","RulerScalePlugin","handleGhostImage","selectedLineIndex","disposeGhostImage","dragVal","showRulers","renderScale","hideRulers","setInitialPoint","crt","cloneNode","ghostImageDOM","dataTransfer","setDragImage","calculateScaleFromZoom","thick","lineColor","horLineValue","verLineValue","RulerLinesAddEvent","axisCoordinate","RulerLinesSetPositionEvent","RulerLinesRemoveEvent","RulerLinesPlugin","noEmit","lineWrapper","o","setPosition","dragEnd","indexOfLayer","viewportPoint","removeLine","addLine","coordinates","removeAll","addAll","getLineCoordinates","drawLinesForSnap","snapLinesX","querySelectorAll","snapLinesY","snapLine","drawLine","extraStyle","SnapLines","removeElementsWithClass","dragStartListener","drawAllLinesForSnap","dragListener","dragListenerDraw","dragListenerResizer","drawComponentMouseMoveListener","LineDrawerDragEvent","LineDrawer","startCoordinate","endCoordinate","label","lineWrappedLayer","labelBox","lineWrapperDim","lineLength","onmouseover","onmouseleave","ondragstart","ondrag","ondragend","createLabelBox","boxWidth","boxHeight","setLabelBoxStyle","labelSpacing","pointOnAxis","getButtonCss","getImgCss","containerCss","StageDesignerPreviewModePlugin","disposeNextBtn","disposePreviousBtn","currentMode","previewMode","stageMode","renderNextButton","renderPreviousButton","previousBtnContainerNode","nextBtnContainerNode","prevImgElement","cssText","prevBtnElement","nextBtnElement","nextImgElement","setPreviousButtonContainerLayout","setNextButtonContainerLayout","setDisplayForButtons","handleSelectedArtboardChange","nextArtboard","selectedArtboardIndex","previousArtboard","isEqual","onclick","append","containerLayout","StageDesignerDropEvent","StageDesignerDropPlugin","draggedLayerStyles","JSON","parse","offsetX","offsetY","pop","StageDesignerDrawEvent","StageDesignerDrawComponent","relativeDims","getDimsFromArtboard","stageDesignerDrawEvent","drawShape","oldSelectedArtboard","setSelectedArtboard","stageDesignerDrawStartEvent","stageDesignerDrawEndEvent","stageDesignerClickEvent","relativeX","relativeY","layerX","layerY","addListeners","StageDesignerRulerPlugin","rulerVisibility","artboardLines","artboardLinesMap","rulerLines","artboardSelected","getAllLines","showRuler","hideRuler","DrawEvent","DrawComponent","shapeType","initialDimensions","initialDelta","newDimensions","dragSession","overlayLayer","ellipseRenderer","strokeZoomAdjustment","viewportDims","overlayDispose","clickEvent","abortDraw","dragStartVal","dimension","drawStartEvent","setSnapPoints","LayerLabelEvent","LayerLabel","layerLabelMap","labeltextNode","updateLabelLayout","setLabel","layerLabel","removeLabel","layerCallback","removeCallback","hideLabel","labelNode","showLabel","addLabel","labeltext","textOverflow","labelDragStartEvent","labelDragEvent","labelDragEndEvent","labelClickEvent","layerDoubleClickEvent","selectedArtboardChanged","IPhoneXFrame","deviceOrientation","xmlnsXlink","fillRule","IPhoneXsMaxFrame","DeviceFrame","DeviceFrameMap","FrameComponent","deviceFrame","deviceFrameMap","frameNode","deviceName","toLowerCase","removeFrame","addFrame","wrapperDiv","BatterySection","NetworkSection","RightSection","LeftSection","TimeSection","BackgroundRect","StatusBarComponent","getElement","deviceOS","barColor","deviceWidth","deviceHeight","IPHONEX_OR_IPHONEXS","IPHONEXR_OR_IPHONEXSMAX","barStyle","IPhoneXStatusBar","AndroidStatusBar","IOSStatusBar","StatusBar","statusBarMap","removeStatusBar","addStatusBar","ResizerRendererDragEvent","getInitialRotation","handleName","getRotationResizerIcon","getHorizontalResizerIcon","ResizerRendererPlugin","dragLayer","handleLayerListeners","resizerData","resizerHandleLayersRef","setHandleStyle","handleInstance","propsWithoutPx","fixedLayoutProps","rotatorPos","handleLayer","handleRotator","addEventListeners","rotationType","dragData","handleDragStarted","escape","renderCursor","renderHandles","isVisible","renderResizer","toggleResizer","showHandle","toUpperCase","hideHandle","setResizerOrientation","passedEvent","e1","passEvent","hideAllHandles","renderDragLayer","UndoRedoPlugin","store","LayerResizerEvent","LayerResizerPlugin","handlesForFill","flexSiblings","getHandlesForFlexLayer","parentFlexDirection","getHandlesForFlexLayerWithSiblings","getResizerHandlesLayout","childrenLength","isLayerAbsolute","handlesForAutoOrAbs","getHandlesForAutoOrAbsoluteLayer","getHandlesForFill","handlesHere","layersQueuedForUpdate","hideLayerResizer","setSelectedLayers","showLayerResizer","rerenderHandles","boundQueueUpdates","queueUpdate","getParentRelativeDims","setNewLayout","normalizeChildrenFlex","totalChildrenFlex","setLayoutChildren","some","layoutElementArray","layoutChild","startFlex","setLayoutChildSize","deltaFactor","startDims","getDeltaFactor","dragLayout","eventName","selectedLayerFlex","expectedFlex","dragLayoutIsDoable","applyDimensionsForHandle","rotateDelta1","absoluteRotation","selectedLayerDims","rotationDelta","isFlexChildren","maintainAspectRatio","computeOrientationMultiple","parentRootDims","newDimension","FloatingButton","addFloatingButton","removeFloatingButton","caption","GradientEditorEvent","task","PlusButton","addPlusButton","showPlusButton","hidePlusButton","removePlusButton","handleZoom","positionPlusButton","sourceCapabilities","HtmlDragToWorldPlugin","dx","dy","initPos","setStartValues","startDragSession","lastPos","drag","updateDragSession","endDragSession","DesignerKeyboardEvent","oldOrientation","newOrientation","oldBB","newBB","newLayout"],"mappings":"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"}