"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("react"),n=require("react-dom"),i=e(n),a=require("detect-collisions"),r=e(require("react-custom-scrollbars")),o=require("lodash"),s=require("@builderx-core/yogax"),l=require("uuid"),d=require("react-native-web"),c=e(require("lodash/includes")),u=e(require("lodash/replace")),h=require("svgs"),p=e(h),v=require("@builderx-core/conversions"),g=e(require("react-native-vector-icons/dist/Entypo")),y=e(require("react-native-vector-icons/dist/AntDesign")),f=e(require("react-native-vector-icons/dist/EvilIcons")),m=e(require("react-native-vector-icons/dist/Feather")),x=e(require("react-native-vector-icons/dist/FontAwesome")),w=e(require("react-native-vector-icons/dist/Foundation")),b=e(require("react-native-vector-icons/dist/Ionicons")),L=e(require("react-native-vector-icons/dist/MaterialCommunityIcons")),E=e(require("react-native-vector-icons/dist/MaterialIcons")),D=e(require("react-native-vector-icons/dist/Octicons")),S=e(require("react-native-vector-icons/dist/SimpleLineIcons")),C=e(require("react-native-vector-icons/dist/Zocial")),M=e(require("react-native-vector-icons/Fonts/Entypo.ttf")),P=e(require("react-native-vector-icons/Fonts/AntDesign.ttf")),F=e(require("react-native-vector-icons/Fonts/EvilIcons.ttf")),R=e(require("react-native-vector-icons/Fonts/Feather.ttf")),T=e(require("react-native-vector-icons/Fonts/FontAwesome.ttf")),A=e(require("react-native-vector-icons/Fonts/Foundation.ttf")),N=e(require("react-native-vector-icons/Fonts/Ionicons.ttf")),B=e(require("react-native-vector-icons/Fonts/MaterialCommunityIcons.ttf")),k=e(require("react-native-vector-icons/Fonts/MaterialIcons.ttf")),O=e(require("react-native-vector-icons/Fonts/Octicons.ttf")),z=e(require("react-native-vector-icons/Fonts/SimpleLineIcons.ttf")),I=e(require("react-native-vector-icons/Fonts/Zocial.ttf")),W=require("styled-components"),V=e(W),U=e(require("lodash/get")),H=require("builderx-module-context-menu");require("builderx-module-context-menu/src/lib/components/utils/ContextMenu.css");var Y=require("draft-js"),_=e(require("paper")),X=e(require("line-segment-slider-input"));function G(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function j(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),e}function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function q(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function J(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t.indexOf(n=r[i])>=0||(a[n]=e[n]);return a}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t){return t||(t=e.slice(0)),e.raw=t,e}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ee(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}var te=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(["type"],this.onUpdate)},i.componentWillUnmount=function(){this.props.layer.off(["type"],this.onUpdate)},i.render=function(){var e=this.props.layer,i=this.props.canvas.getRenderer(e.type);return t.createElement(i,{RootRenderer:n,layer:e,canvas:this.props.canvas})},n}(t.PureComponent),ne=function(e){function i(t){var n;return(n=e.call(this,t)||this).onUpdate=function(){var e=n.props.canvas.getViewport();n.viewportState={height:e.height,width:e.width},n.baseState={height:n.props.canvas.layout.get("height"),width:n.props.canvas.layout.get("width")},n.forceUpdate(),n.centerScrollTo()},n.setScroll=function(e){n.state.scroll.x=e.scrollX,n.state.scroll.y=e.scrollY,n.center={x:(n.state.scroll.x*(n.baseState.width*n.zoom-n.viewportState.width)+n.viewportState.width/2)/(n.baseState.width*n.zoom),y:(n.state.scroll.y*(n.baseState.height*n.zoom-n.viewportState.height)+n.viewportState.height/2)/(n.baseState.height*n.zoom)},n.centerScrollTo()},n.centerScrollTo=function(e){var t=n.center.y*(n.baseState.height*n.zoom)-n.viewportState.height/2;n.scrollContainerRef&&(n.scrollContainerRef.scrollLeft(n.center.x*(n.baseState.width*n.zoom)-n.viewportState.width/2),n.scrollContainerRef.scrollTop(t))},n.onScrollFrame=function(e){if(n.scrollContainerRef&&n.viewportState.height>0&&n.viewportState.width>0){var t=e.scrollLeft/(n.baseState.width*n.zoom-n.viewportState.width),i=e.scrollTop/(n.baseState.height*n.zoom-n.viewportState.height);n.center={x:(e.scrollLeft+n.viewportState.width/2)/(n.baseState.width*n.zoom),y:(e.scrollTop+n.viewportState.height/2)/(n.baseState.height*n.zoom)},n.state.scroll.x=isNaN(t)?0:t,n.state.scroll.y=isNaN(i)?0:i,n.centerScrollTo(),n.props.canvas.setScroll(n.state.scroll)}},n.moveWithGrabHandle=function(e){if(n.props.canvas.isMouseDown&&n.props.canvas.moveWithGrabHandle&&n.scrollContainerRef){var t=e.nativeEvent.movementX,i=e.nativeEvent.movementY,a=n.scrollContainerRef.getScrollLeft(),r=n.scrollContainerRef.getScrollTop();n.scrollContainerRef.scrollLeft(a-t),n.scrollContainerRef.scrollTop(r-i),e.stopPropagation()}},n.zoom=t.canvas.getZoom(),n.scroll=t.canvas.getScroll(),n.state={scroll:{x:.5,y:.5}},n}q(i,e);var a=i.prototype;return a.componentDidMount=function(){var e=this;this.scrollContainerRef&&(this.scrollDom=n.findDOMNode(this.scrollContainerRef)),document.addEventListener("keydown",(function(e){32===e.keyCode&&e.target===document.body&&e.preventDefault()})),this.setCenterPosition(),this.getCenterPointInCurrentViewport(),this.centerScrollTo(),this.props.canvas.addEventListener("setScroll",this.setScroll),this.props.canvas.on("zoom",(function(t){e.zoom!==e.props.canvas.getZoom()&&(e.zoom=e.props.canvas.getZoom(),e.centerScrollTo())})),this.props.canvas.on(["viewport","layout","mouseCursorType"],this.onUpdate),this.props.canvas.on(["moveWithGrabHandle"],this.onUpdate)},a.componentWillUnmount=function(){this.props.canvas.off(["viewport","layout","mouseCursorType"],this.onUpdate),this.props.canvas.off(["moveWithGrabHandle"],this.onUpdate),this.props.canvas.removeEventListener("setScroll",this.setScroll)},a.getScrollPositon=function(e){var t=e||this.scroll;return{x:t.x*(this.baseState.width*this.zoom-this.viewportState.width),y:t.y*(this.baseState.height*this.zoom-this.viewportState.height)}},a.getCenterPointInCurrentViewport=function(){var e=this.getScrollPositon();this.center={x:(e.x+this.viewportState.width/2)/(this.baseState.width*this.zoom),y:(e.y+this.viewportState.height/2)/(this.baseState.height*this.zoom)}},a.setCenterPosition=function(){this.center={x:(this.state.scroll.x+this.viewportState.width/(this.baseState.width*this.zoom))/2,y:(this.state.scroll.y+this.viewportState.height/(this.baseState.height*this.zoom))/2}},a.render=function(){var e=this,n=this.props.canvas.moveWithGrabHandle;this.baseState={height:this.props.canvas.layout.get("height"),width:this.props.canvas.layout.get("width")};var i=this.props.canvas.getViewport();return this.viewportState={height:i.height,width:i.width},t.createElement(r,{ref:function(t){e.scrollContainerRef=t},autoHide:!0,onScrollFrame:this.onScrollFrame,style:Z({},this.props.style,{width:this.viewportState.width,height:this.viewportState.height,cursor:this.props.canvas.mouseCursorType?this.props.canvas.mouseCursorType:"initial",overflow:"scroll"}),onMouseDown:function(t){2!==t.button&&3!==t.which&&e.props.canvas.setMouseDown(!0)},onMouseUp:function(){e.props.canvas.setMouseDown(!1)},onMouseLeave:function(){e.props.canvas.setMouseDown(!1)},onMouseMove:this.moveWithGrabHandle,className:"scrollcontainer"},t.Children.map(this.props.children,(function(i){return i?t.cloneElement(i,Z({},i.props,{style:Z({},i.props.style,n&&e.props.canvas.isMouseDown?{pointerEvents:"none"}:{})})):null})))},i}(t.PureComponent),ie=function(){var e=function(e){function n(t){var i;(i=e.call(this,t)||this).onUpdateZoom=function(e){i.zoom=e.zoom,i.forceUpdate()},i.onUpdate=function(){i.forceUpdate()},i.zoom=t.canvas.getZoom();var a=void 0===t.initialScroll?n.defaultProps.initialScroll:t.initialScroll;return i.state={scroll:{x:a.x,y:a.y}},i}q(n,e);var i=n.prototype;return i.componentDidMount=function(){document.addEventListener("keydown",(function(e){32===e.keyCode&&e.target===document.body&&e.preventDefault()})),this.props.canvas.addEventListener("setZoom",this.onUpdateZoom),this.props.canvas.on("children",this.onUpdate)},i.shouldComponentUpdate=function(){return!1},i.componentDidUpdate=function(){this.props.canvas.setZoom(this.zoom)},i.componentWillMount=function(){this.props.canvas.removeEventListener("setZoom",this.onUpdateZoom)},i.getSceneStyle=function(){var e={position:"absolute"};return e.transform="scale("+this.zoom+")",e.transformOrigin="0 0",e},i.render=function(){var e=this;return J(this.props,["initialScroll"]),t.createElement("div",{ref:function(t){e.containerRef=t},onClick:function(e){},style:this.getSceneStyle(),className:"zoomContainer"},t.Children.map(this.props.children,(function(e){return e?t.cloneElement(e,Z({},e.props,{style:Z({},e.props.style)})):null})))},n}(t.Component);return e.defaultProps={initialScroll:{x:0,y:0}},e}(),ae=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(e){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.canvas.on(["zoom","viewport","layout"],this.onUpdate)},i.componentWillUnmount=function(){this.props.canvas.off(["zoom","viewport","layout"],this.onUpdate)},i.render=function(){var e=this,n=this.props.canvas.layout.get("height"),i=this.props.canvas.layout.get("width");return t.createElement("div",{style:{position:"relative",width:i,height:n,backgroundColor:this.props.canvas.style.get("backgroundColor")}},this.props.canvas.children.map((function(n,i){return t.createElement(te,{layer:n,key:i,canvas:e.props.canvas})})))},n}(t.PureComponent),re=function(e){function i(){var t;return(t=e.apply(this,arguments)||this).thisNode=null,t.onUpdate=function(e){t.forceUpdate()},t.showConstructionLines=function(){var e=document.createElement("canvas");if(e.setAttribute("height","2000px"),e.setAttribute("width","2000px"),e.setAttribute("class","canvas-element"),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.opacity="1",e.style.pointerEvents="none",t.renderCompiledDom){var i=n.findDOMNode(t.renderCompiledDom),a=e.getContext("2d"),r=t.props.canvas.collisionScope;i&&a&&r&&(a.strokeStyle="#000",a.beginPath(),r.drawBVH(a),a.stroke(),i.appendChild(e))}},t.renderDOMStack=function(){if(t.worldStackRef){for(;t.worldStackRef.firstChild;)t.worldStackRef.removeChild(t.worldStackRef.firstChild);t.props.canvas.stackWorldDOM.forEach((function(e){t.worldStackRef.appendChild(e)}))}if(t.viewportStackRef){for(;t.viewportStackRef.firstChild;)t.viewportStackRef.removeChild(t.viewportStackRef.firstChild);t.props.canvas.stackViewportDOM.forEach((function(e){t.viewportStackRef.appendChild(e)}))}},t.onMouseDown=function(e){t.thisNode&&t.thisNode.ownerDocument&&(t.thisNode.ownerDocument.addEventListener("mousemove",t.onMouseMove),t.thisNode.ownerDocument.addEventListener("mouseup",t.onMouseUp),t.thisNode.ownerDocument.addEventListener("contextmenu",t.onMouseUp)),t.props.canvas.handleNativeEvent(e)},t.onMouseMove=function(e){t.props.canvas.handleNativeEvent(e)},t.onMouseUp=function(e){t.thisNode&&t.thisNode.ownerDocument&&(t.thisNode.ownerDocument.removeEventListener("mousemove",t.onMouseMove),t.thisNode.ownerDocument.removeEventListener("mouseup",t.onMouseUp),t.thisNode.ownerDocument.removeEventListener("contextmenu",t.onMouseUp)),t.props.canvas.handleNativeEvent(e)},t}q(i,e);var a=i.prototype;return a.componentDidMount=function(){this.renderDOMStack(),this.props.canvas.on(["zoom","viewport","layout"],this.onUpdate),this.props.canvas.on(["stackWorldDOM","stackViewportDOM"],this.renderDOMStack)},a.componentWillUnmount=function(){this.props.canvas.off(["zoom","viewport","layout"],this.onUpdate),this.props.canvas.off(["stackWorldDOM","stackViewportDOM"],this.renderDOMStack)},a.render=function(){var e=this,n=this.props.canvas,i=n.getZoom(),a=n.layout.get("height"),r=n.layout.get("width"),o=n.getViewport(),s=o.height,l=o.width;return t.createElement("div",{style:{position:"absolute"},ref:function(t){return e.thisNode=t}},t.createElement(ne,{canvas:n,ref:function(t){e.props.canvas.setViewportRef(t)}},t.createElement(ie,{canvas:n,style:{height:a*i,width:r*i}},t.createElement(ae,{canvas:this.props.canvas}),t.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0}},t.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0},onMouseDown:this.onMouseDown,onMouseEnter:function(e){return n.handleNativeEvent(e)},onMouseMove:function(e){return n.handleNativeEvent(e)},onClick:function(e){return n.handleNativeEvent(e)},onContextMenu:function(e){return n.handleNativeEvent(e)},onDoubleClick:function(e){return n.handleNativeEvent(e)},onMouseOut:function(e){return n.handleNativeEvent(e)},onDrop:function(e){return n.handleNativeEvent(e)},onDragOver:function(e){return e.preventDefault()}}),t.createElement("div",{ref:function(t){e.worldStackRef&&!t||(e.worldStackRef=t)},style:{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0}})))),t.createElement("div",{style:{position:"absolute",top:0,left:0,height:s,width:l,pointerEvents:"none",overflow:"hidden"},ref:function(t){return e.viewportStackRef=t}}))},i}(t.PureComponent),oe=function(){var e=function(){function e(){}e.fromJS=function(t,n){var i=this;if(void 0===n&&(n=void 0),t){var a=void 0;a=n?new n:new this;var r=e.getAllFields(a);return o.forEach(Object.keys(t),(function(e){var n=r[e];n?"ignore"!==n.type&&(o.isNil(t[e])||"literal"===n.type?a[e]=t[e]:"array"===n.type?o.isArray(t[e])?(a[e]=[],o.forEach(t[e],(function(t){if(o.isArray(t)&&"array"===n.children.type)console.log("case not handled -!-!- toJS Serializable");else if("object"==typeof t){var r=i.getClassInstanceFromPlainObject(n.children,t);r&&a[e].push(r)}else"literal"===n.children.type?a[e].push(t):console.log("case not handled -!-!- toJS Serializable")}))):"object"==typeof t[e]?console.log("case not handled -!-!- Serializable"):a[e]&&(a[e]=t[e]):"map"===n.type?(a[e]=new Map,o.forEach(t[e],(function(t,r){if("literal"===n.valueType)a[e].set(r,t);else if("array"===n.valueType.type){var s=[];o.forEach(t,(function(e){if(o.isArray(e)&&"array"===t.children.type)console.log("case not handled -!-!- toJS Serializable");else if("object"==typeof e){var a=i.getClassInstanceFromPlainObject(n.valueType.children,e);a&&s.push(a)}else"literal"===t.children.type?s.push(e):console.log("case not handled -!-!- toJS Serializable")})),a[e].set(r,s)}else if("object"==typeof t){var l=i.getClassInstanceFromPlainObject(n.valueType,t);a[e].set(r,l)}}))):a[e]=i.getClassInstanceFromPlainObject(n,t[e])):console.warn("property "+e+" is not declared in fields of "+a.constructor.name+" ")})),a}},e.getClassInstanceFromPlainObject=function(e,t){if(e.fromJS)return e.fromJS(t);throw new Error(e.constructor.name+" is not extended from Serializable")};var t=e.prototype;return t.toJS=function(t){var n=this;void 0===t&&(t=!1);var i=e.getAllFields(this);if(!i)throw new Error("fileds are undefiend");var a={};return t&&delete i.children,o.forEach(i,(function(e,t){if("ignore"!==e.type){if(!e)throw new Error("type of "+t+" is not defined");e&&("array"===e.type?o.isArray(n[t])?(a[t]=[],o.forEach(n[t],(function(i){if(o.isArray(i)&&"array"===e.children.type)console.log("case not handled -!-!- toJS Serializable");else if("object"==typeof i){var r=n.getPlainObjectFromClassInstance(i);r&&a[t].push(r)}else"literal"===e.children.type?a[t].push(i):console.log("case not handled -!-!- toJS Serializable")}))):a[t]="object"==typeof n[t]?n.getPlainObjectFromClassInstance(n[t]):n[t]:a[t]="map"===e.type?n.MapToPOJO(n[t]):"literal"===e.type?n[t]:n.getPlainObjectFromClassInstance(n[t]))}})),o.omitBy(a,o.isNil)},t.getPlainObjectFromClassInstance=function(e){if(e){if(e.toJS)return e.toJS();throw new Error(e.constructor.name+" is not extended from Serializable")}},t.MapToPOJO=function(e){var t=this,n={};return e&&e.forEach((function(e,i){var a=[];o.isArray(e)?(o.forEach(e,(function(e){var n=t.getPlainObjectFromClassInstance(e);n&&a.push(n)})),n[i]=a):n[i]=t.getPlainObjectFromClassInstance(e)})),n},e}();return e.getAllFields=function(t,n){if(void 0===n&&(n={}),t&&t.getFields){var i=Z({},t.getFields(),n),a=Object.getPrototypeOf(t);return e.getAllFields(a,i)}return n},e}(),se={literal:{type:"literal",children:null},array:function(e){return{type:"array",children:e}},map:function(e,t){return{type:"map",keyType:e,valueType:t}},ignore:{type:"ignore",children:null}},le=0,de=new Map,ce=function(e){le++,e(),0==--le&&(de.forEach((function(e,t){e.model.disposed||(t(e.properties),window.debug&&console.log("DEBUG::","Emit:",e.properties))})),de.clear())},ue=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).eventListenersMap=new Map,t.reverseMap=new Map,t.disposed=!1,t}q(t,e);var n=t.prototype;return n.getFields=function(){return{eventListenersMap:se.ignore,reverseMap:se.ignore,disposed:se.ignore}},n.on=function(e,t){var n=this;"string"==typeof e&&(e=[e]),e.forEach((function(e){var i=n.eventListenersMap.get(e);i?(i.push(t),n.eventListenersMap.set(e,i)):n.eventListenersMap.set(e,[t])}));var i=this.reverseMap.get(t);i?(i=i.concat(e),this.reverseMap.set(t,o.uniq(i))):this.reverseMap.set(t,e)},n.emit=function(e){var t=this;"string"==typeof e&&(e=[e]),e.push("*"),o.reduce(e,(function(e,n){var i=t.eventListenersMap.get(n);return i&&(e=o.union(e,i)),e}),[]).forEach((function(n){if(n){if(!le)throw new Error("emitting an event outside of an action");var i=de.get(n);i?(i.properties=i.properties.concat(e),de.set(n,{properties:o.uniq(i.properties),model:t})):de.set(n,{properties:e,model:t})}}))},n.off=function(e,t){var n=this;"string"==typeof e&&(e=[e]),e.forEach((function(){var e=n.reverseMap.get(t);e&&(e.forEach((function(e){var i=n.eventListenersMap.get(e);i&&(o.remove(i,(function(e){return e===t})),0===i.length&&n.eventListenersMap.delete(e))})),n.reverseMap.delete(t))}))},t}(oe),he=function(){function e(){}return e.pointsOverlap=function(e,t){return Math.abs(e-t)<=1},e.getDimensionFromPolygon=function(e){return{x:e[0][0],y:e[0][1],width:e[1][0]-e[0][0],height:e[3][1]-e[0][1]}},e.rotatePolygon=function(t,n,i){return i=i||e.getCentroid(t),t.map((function(a,r){a=e.rotatePoint(a,n,i),t[r]=a})),t},e.findAngle=function(e,t,n,i){var a=Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)),r=Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2)),o=Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)),s=(r*r+a*a-o*o)/(2*r*a);s>1&&(s=1),s<-1&&(s=-1);var l=Math.acos(s);return l*=180/Math.PI,360===i&&n[0]<e[0]&&(l=360-l),l},e.getAbsoluteRotation=function(t){var n=e.getCentroid(t),i=[n[0],n[1]-2],a=e.middlePoint(t[0],t[1]);return e.findAngle(i,n,a,360)},e.middlePoint=function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]},e.getCentroid=function(e){return e.reduce((function(t,n){return[t[0]+n[0]/e.length,t[1]+n[1]/e.length]}),[0,0])},e.distance=function(e,t){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)},e.rotatePoint=function(e,t,n){return t=t*Math.PI/180,[(e[0]-n[0])*Math.cos(t)-(e[1]-n[1])*Math.sin(t)+n[0],(e[1]-n[1])*Math.cos(t)+(e[0]-n[0])*Math.sin(t)+n[1]]},e.getPointsFromBoundingBox=function(t,n){return void 0===n&&(n=0),e.rotatePolygon([[t.x,t.y],[t.x+t.width,t.y],[t.x+t.width,t.y+t.height],[t.x,t.y+t.height]],n)},e.getPointsFromDims=function(t){var n=t.x,i=t.y,a=t.width,r=t.height,s=[[n,i],[n+a,i],[n+a,i+r],[n,i+r]];return o.reverse([].concat(t.transform)).map((function(t,n){t.rotate&&t.rotate.rotation&&t.rotate.centroid&&(s=e.rotatePolygon(s,t.rotate.rotation,t.rotate.centroid))})),s},e.depthComparator=function(t,n){var i=e.getActiveDigit(t),a=e.getActiveDigit(n);if(t===n)return 0;if(null!==i&&null!==a&&i!==a)return i<a?-1:1;if(null!==i&&null!==a&&i===a){var r=e.getNextCharacter(t),o=e.getNextCharacter(n);return e.depthComparator(r,o)}return null!==i?1:-1},e.getNextCharacter=function(e){if(null===e)return"";var t=e.indexOf(".");return-1===t?"":e.substring(t+1,e.length)},e.getActiveDigit=function(e){return null===e||0===e.length?null:e.includes(".")?parseInt(e.substring(0,e.indexOf(".")),10):parseInt(e,10)},e}();function pe(e,t,n){var i=e.rotation,a=i*Math.PI/180,r=-e.width/2,o=e.height/2,s=o*Math.sin(a)+r*Math.cos(a)-r,l=o*Math.cos(a)-r*Math.sin(a)-o,d=e.height/2,c=-t.width/2,u=d*Math.sin(a)+c*Math.cos(a),h=d*Math.cos(a)-c*Math.sin(a),p={x:u-c,y:h-d},v=p.x-s,g=p.y-l;c=-e.width/2;var y=(p={x:(u=(d=t.height/2)*Math.sin(a)+c*Math.cos(a))-c,y:(h=d*Math.cos(a)-c*Math.sin(a))-d}).x-s,f=p.y-l,m=t.x,x=t.y;return-1===n.indexOf("T")&&-1===n.indexOf("L")||(m=t.x+(v+y),x=t.y-(g+f)),-1===n.indexOf("B")&&-1===n.indexOf("R")||(m=t.x-(v+y),x=t.y+(g+f)),-1!==n.indexOf("B")&&-1!==n.indexOf("L")&&(m=t.x+v-y,x=t.y-g+f),-1!==n.indexOf("T")&&-1!==n.indexOf("R")&&(m=t.x-v+y,x=t.y+g-f),-1!==n.indexOf("C")&&(m=t.x,x=t.y),{x:m,y:x,height:t.height,width:t.width,rotation:i}}function ve(e,t,n,i,a){return i&&!a?we(e,t,n):!i&&a?be(e,t,n):i&&a?Le(e,t,n):ge(e,t,n)}function ge(e,t,n){var i=e.x,a=e.y,r=Math.max(e.width,0),s=Math.max(e.height,0),l=o.isNil(t.x)?0:t.x,d=o.isNil(t.y)?0:t.y,c=e.rotation;return-1!==n.indexOf("C")&&(i+=l,a+=d),-1!==n.indexOf("B")&&(s+=d),-1!==n.indexOf("R")&&(r+=l),-1!==n.indexOf("T")&&(s-=d,a+=d),-1!==n.indexOf("L")&&(r-=l,i+=l),pe(e,{x:i,y:a,width:r,height:s,rotation:c},n)}function ye(e,t,n,i,a){var r=e.x,s=e.y,l=e.width,d=e.height,c=o.isNil(t.x)?0:t.x,u=o.isNil(t.y)?0:t.y,h=e.rotation;if(-1!==n.indexOf("C"))r+=c,s+=u;else{var p=[].concat(a);o.map(p,(function(e,t){var a=0,r=0;-1!==n.indexOf("B")&&(r=1-(i.height-(e[1]-i.y))/i.height),-1!==n.indexOf("R")&&(a=1-(i.width-(e[0]-i.x))/i.width),-1!==n.indexOf("T")&&(r=(i.height-(e[1]-i.y))/i.height),-1!==n.indexOf("L")&&(a=(i.width-(e[0]-i.x))/i.width),p[t]=[e[0]+a*c,e[1]+r*u]})),p=he.rotatePolygon(p,360-h);var v=he.getDimensionFromPolygon(p);d=v.height,l=v.width,s=v.y,r=v.x}return{width:l,height:d,x:r,y:s,rotation:h}}function fe(e,t,n,i,a){var r=e.x,s=e.y,l=e.width,d=e.height,c=e.rotation,u=o.isNil(t.x)?0:t.x,h=o.isNil(t.y)?0:t.y,p=i.width/i.height;if(-1!==n.indexOf("C"))r+=u,s+=h;else{var v=[].concat(a);he.getDimensionFromPolygon(v),o.map(v,(function(e,t){var a=0,r=0,o=0,s=0,l=0,d=1-(i.height-(e[1]-i.y))/i.height,c=1-(i.width-(e[0]-i.x))/i.width,g=(i.height-(e[1]-i.y))/i.height,y=(i.width-(e[0]-i.x))/i.width;n.length>1?(-1!==n.indexOf("B")&&-1!==n.indexOf("L")&&(l=u>-h?u:h,r=d,a=y,u>-h?(s=e[1]-r*l*(1/p),o=e[0]+l*a):(s=e[1]+r*l,o=e[0]-l*a*p)),-1!==n.indexOf("B")&&-1!==n.indexOf("R")&&(l=u<h?u:h,r=d,a=c,u>h?(s=e[1]+r*l,o=e[0]+l*a*p):(s=e[1]+r*l*(1/p),o=e[0]+l*a)),-1!==n.indexOf("T")&&-1!==n.indexOf("R")&&(l=u<-h?u:h,r=g,a=c,u>-h?(s=e[1]+r*l,o=e[0]-l*a*p):(s=e[1]-r*l*(1/p),o=e[0]+l*a)),-1!==n.indexOf("T")&&-1!==n.indexOf("L")&&(l=u>h?u:h,r=g,a=y,u>h?(s=e[1]+r*l*(1/p),o=e[0]+l*a):(s=e[1]+r*l,o=e[0]+l*a*p))):(-1!==n.indexOf("B")&&(s=e[1]+(r=d)*h,o=e[0]+h*p*(a=c)-h*p/2),-1!==n.indexOf("T")&&(s=e[1]+(r=g)*h,o=e[0]+h*(a=y)*p-h*p/2),-1!==n.indexOf("R")&&(o=e[0]+(a=c)*u,s=e[1]+u*(r=d)*(1/p)-u*(1/p)/2),-1!==n.indexOf("L")&&(o=e[0]+(a=y)*u,s=e[1]+u*(r=g)*(1/p)-u*(1/p)/2)),v[t]=[o,s]})),v=he.rotatePolygon(v,360-c);var g=he.getDimensionFromPolygon(v);d=g.height,l=g.width,s=g.y,r=g.x}return{width:l,height:d,x:r,y:s,rotation:c}}function me(e,t,n,i,a){var r=e.x,s=e.y,l=e.width,d=e.height,c=e.rotation,u=o.isNil(t.x)?0:t.x,h=o.isNil(t.y)?0:t.y;if(-1!==n.indexOf("C"))r+=u,s+=h;else{var p=[].concat(a);he.getDimensionFromPolygon(p),o.map(p,(function(e,t){var a=0,r=0,o=0,s=0,l=1-(i.height-(e[1]-i.y))/i.height,d=1-(i.width-(e[0]-i.x))/i.width,c=(i.height-(e[1]-i.y))/i.height,v=(i.width-(e[0]-i.x))/i.width;-1!==n.indexOf("B")&&(a=d,s=e[1]+(r=l)*h-h/2,o=-1===n.indexOf("L")&&-1===n.indexOf("R")?e[0]+a:e[0]+a*u-u/2),-1!==n.indexOf("T")&&(a=d,s=e[1]-(r=c)*h-h/2,o=-1===n.indexOf("L")&&-1===n.indexOf("R")?e[0]+a:e[0]+a*u-u/2),-1!==n.indexOf("R")&&(r=l,o=e[0]+(a=d)*u-u/2,s=-1===n.indexOf("T")&&-1===n.indexOf("B")?e[1]+r:-1!==n.indexOf("B")?e[1]+r*h-h/2:e[1]-r*h+h/2),-1!==n.indexOf("L")&&(r=l,o=e[0]+(a=v)*u-u/2,s=-1===n.indexOf("T")&&-1===n.indexOf("B")?e[1]+r:-1!==n.indexOf("B")?e[1]+r*h-h/2:e[1]-r*h+h/2),p[t]=[o,s]})),p=he.rotatePolygon(p,360-c);var v=he.getDimensionFromPolygon(p);d=v.height,l=v.width,s=v.y,r=v.x}return{width:l,height:d,x:r,y:s,rotation:c}}function xe(e,t,n,i,a){var r=e.x,s=e.y,l=e.width,d=e.height,c=o.isNil(t.x)?0:t.x,u=o.isNil(t.y)?0:t.y,h=e.rotation,p=i.width/i.height;if(-1!==n.indexOf("C"))r+=c,s+=u;else{var v=[].concat(a);he.getDimensionFromPolygon(v),o.map(v,(function(e,t){var a=0,r=0,o=0,s=0,l=0,d=1-(i.height-(e[1]-i.y))/i.height,h=1-(i.width-(e[0]-i.x))/i.width,g=(i.height-(e[1]-i.y))/i.height,y=(i.width-(e[0]-i.x))/i.width;n.length>1?(-1!==n.indexOf("B")&&-1!==n.indexOf("L")&&(l=c>-u?c:u,r=d,a=y,c>-u?(s=e[1]-r*l*(1/p)+l*(1/p)/2,o=e[0]+l*a-l/2):(s=e[1]+r*l-l/2,o=e[0]-l*a*p+l*p/2)),-1!==n.indexOf("B")&&-1!==n.indexOf("R")&&(l=c<u?c:u,r=d,a=h,c>u?(s=e[1]+r*l-l/2,o=e[0]+l*a*p-l*p/2):(s=e[1]+r*l*(1/p)-l*(1/p)/2,o=e[0]+l*a-l/2)),-1!==n.indexOf("T")&&-1!==n.indexOf("R")&&(l=c<-u?c:u,r=g,a=h,c>-u?(s=e[1]+r*l-l/2,o=e[0]-l*a*p+l*p/2):(s=e[1]-r*l*(1/p)+l*(1/p)/2,o=e[0]+l*a-l/2)),-1!==n.indexOf("T")&&-1!==n.indexOf("L")&&(l=c>u?c:u,r=g,a=y,c>u?(s=e[1]+r*l*(1/p)-l*(1/p)/2,o=e[0]+l*a-l/2):(s=e[1]+r*l-l/2,o=e[0]+l*a*p-l*p/2))):(-1!==n.indexOf("B")&&(s=e[1]+(r=d)*u-u/2,o=e[0]+u*p*(a=h)-u*p/2),-1!==n.indexOf("T")&&(s=e[1]+(r=g)*u-u/2,o=e[0]+u*(a=y)*p-u*p/2),-1!==n.indexOf("R")&&(o=e[0]+(a=h)*c-c/2,s=e[1]+c*(r=d)*(1/p)-c*(1/p)/2),-1!==n.indexOf("L")&&(o=e[0]+(a=y)*c-c/2,s=e[1]+c*(r=g)*(1/p)-c*(1/p)/2)),v[t]=[o,s]})),v=he.rotatePolygon(v,360-h);var g=he.getDimensionFromPolygon(v);d=g.height,l=g.width,s=g.y,r=g.x}return{width:l,height:d,x:r,y:s,rotation:h}}function we(e,t,n){var i=e.x,a=e.y,r=e.rotation,s=e.width,l=e.height,d=o.isNil(t.x)?0:t.x,c=o.isNil(t.y)?0:t.y,u=s/l;s&&l||(u=1),-1!==n.indexOf("C")&&(i+=d,a+=c);var h=i,p=a;return 1===n.length&&-1!==n.indexOf("T")&&(p=a+c,s=(l-=c)*u),1===n.length&&-1!==n.indexOf("B")&&(s=(l+=c)*u),1===n.length&&-1!==n.indexOf("L")&&(h=i+d,l=(s-=d)/u),1===n.length&&-1!==n.indexOf("R")&&(l=(s+=d)/u),2===n.length&&-1!==n.indexOf("T")&&-1!==n.indexOf("R")&&(d>-c?(p=a-d*(1/u),l+=d*(1/u),s+=d):(p=a+c,l-=c,s-=c*u)),2===n.length&&-1!==n.indexOf("T")&&-1!==n.indexOf("L")&&(d>c?(p=a+c,h=i+c*u,l-=c,s-=c*u):(p=a+d*(1/u),h=i+d,s-=d,l-=d*(1/u))),2===n.length&&-1!==n.indexOf("B")&&-1!==n.indexOf("R")&&(d>c?(s+=d,l+=d*(1/u)):(l+=c,s+=c*u)),2===n.length&&-1!==n.indexOf("B")&&-1!==n.indexOf("L")&&(d>-c?(l+=c,h=i-c*u,s+=c*u):(s-=d,h=i+d,l-=d*(1/u))),{width:s,height:l,x:h,y:p,rotation:r}}function be(e,t,n){var i=e.x,a=e.y,r=e.rotation,s=e.width,l=e.height,d=o.isNil(t.x)?0:t.x,c=o.isNil(t.y)?0:t.y;-1!==n.indexOf("C")&&(i+=d,a+=c);var u=i,h=a;return-1!==n.indexOf("T")&&(l-=2*c)>0&&(h=a+c),-1!==n.indexOf("B")&&(l+=2*c)>0&&(h=a-c),-1!==n.indexOf("R")&&(s+=2*d)>0&&(u=i-d),-1!==n.indexOf("L")&&(s-=2*d)>0&&(u=i+d),{width:s,height:l,x:u,y:h,rotation:r}}function Le(e,t,n){var i=e.x,a=e.y,r=e.rotation,s=e.width,l=e.height,d=o.isNil(t.x)?0:t.x,c=o.isNil(t.y)?0:t.y;c*=2,d*=2;var u=s/l;s&&l||(u=1),-1!==n.indexOf("C")&&(i+=d,a+=c);var h=i,p=a;return 1===n.length&&-1!==n.indexOf("T")&&(h=i+c*u/2,p=a+c/2,s=(l-=c)*u),1===n.length&&-1!==n.indexOf("B")&&(h=i-c*u/2,p=a-c/2,s=(l+=c)*u),1===n.length&&-1!==n.indexOf("L")&&(h=i+d/2,p=a+d*(1/u)/2,l=(s-=d)/u),1===n.length&&-1!==n.indexOf("R")&&(p=a-d*(1/u)/2,h=i-d/2,l=(s+=d)/u),2===n.length&&-1!==n.indexOf("T")&&-1!==n.indexOf("R")&&(d>-c?(p=a-d*(1/u)/2,h=i-d/2,l+=d*(1/u),s+=d):(p=a+c/2,h=i+c*u/2,l-=c,s-=c*u)),2===n.length&&-1!==n.indexOf("T")&&-1!==n.indexOf("L")&&(d>c?(p=a+c/2,h=i+c*u/2,s-=c*u,l-=c):(p=a+d*(1/u)/2,h=i+d/2,s-=d,l-=d*(1/u))),2===n.length&&-1!==n.indexOf("B")&&-1!==n.indexOf("R")&&(d>c?(p=a-d*(1/u)/2,h=i-d/2,l+=d*(1/u),s+=d):(p=a-c/2,h=i-c*u/2,l+=c,s+=c*u)),2===n.length&&-1!==n.indexOf("B")&&-1!==n.indexOf("L")&&(d>-c?(s+=c*u,l+=c,h=i-c*u/2,p=a-c/2):(l-=d*(1/u),s-=d,h=i+d/2,p=a+d*(1/u)/2)),{width:s,height:l,x:h,y:p,rotation:r}}function Ee(e){var t=e.x,n=e.y;return{minX:t,minY:n,maxX:t+e.width,maxY:n+e.height}}function De(e,t,n,i,a){var r={x:t.current.x-t.start.x,y:t.current.y-t.start.y};i&&(r=i);var o,s,l,d=n||e.rotation,c=function(e,t){if(t){var n=[e.x+e.width/2,e.y];switch(t){case"ROTATETL":n=[e.x,e.y];break;case"ROTATETR":n=[e.x+e.width,e.y];break;case"ROTATEL":n=[e.x,e.y+e.height/2];break;case"ROTATER":n=[e.x+e.width,e.y+e.height/2];break;case"ROTATEBL":n=[e.x,e.y+e.height];break;case"ROTATEB":n=[e.x+e.width/2,e.y+e.height];break;case"ROTATEBR":n=[e.x+e.width,e.y+e.height]}return n}return[e.x+e.width/2,e.y-28]}(e,a),u=he.getPointsFromBoundingBox(e),h=he.getCentroid(u),p=[c[0]+r.x,c[1]+r.y];return d+he.findAngle(c,h,p,180)*(((s=h)[0]-(o=c)[0])*((l=p)[1]-o[1])-(s[1]-o[1])*(l[0]-o[0])>0?-1:1)}function Se(e){for(var t="",n="ABCDEFGHIJKLMNPQRSTUVWXYZabcdefghijklmnpqrstuvwxyz",i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}var Ce=function(){function e(){this.registry=new Map}var t=e.prototype;return t.addEventListener=function(e,t){var n=this.registry.get(e);n?n.push(t):this.registry.set(e,[t])},t.removeEventListener=function(e,t){var n=this.registry.get(e);if(n){var i=n.indexOf(t);i>-1&&n.splice(i,1)}},t.dispatchEvent=function(e,t){window.debug&&console.log("DEBUG::","Event:",e);var n=this.registry.get(e);for(var i in n)if(n[i](t),!t.propagate)break},e}(),Me=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).data={},t}q(t,e);var n=t.prototype;return n.getFields=function(){return{data:se.literal}},n.isValidKey=function(e){return!0},n.set=function(e,t){if("object"==typeof e)for(var n in e){if(!this.isValidKey(n))throw new Error("Model KeyValueContainer Error: Invalid key '"+n+"'");o.set(this.data,n,e[n])}else{if(!this.isValidKey(e))throw new Error("Model KeyValueContainer Error: Invalid key '"+e+"'");o.set(this.data,e,t)}},n.get=function(e){return o.get(this.data,e)},n.getAll=function(){return this.data},n.remove=function(e){if("string"!=typeof e||o.isNil(this.data[e])){if("object"==typeof e&&Array.isArray(e))for(var t=0;t<e.length;t++){if(!e[t]||!this.isValidKey(e[t]))throw new Error("Model KeyValueContainer Error: Invalid key '"+e[t]+"'");delete this.data[e[t]]}}else delete this.data[e]},t}(ue),Pe=function(e){function t(){return e.apply(this,arguments)||this}return q(t,e),t}(Me),Fe=function(e){function t(){return e.apply(this,arguments)||this}return q(t,e),t}(Me),Re=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).validKeys=["left","right","width","top","bottom","height","position","flex","flexDirection","marginLeft","marginRight","marginBottom","marginTop","margin","border","justifyContent","alignItems","flexWrap","borderColor","borderStyle","borderLeftWidth","borderRightWidth","borderBottomWidth","borderTopWidth","borderWidth","alignSelf","alignContent","paddingLeft","paddingRight","paddingBottom","paddingTop","padding","lineHeight","transform","fontSize","fontFamily","fontWeight","fontStyle","fontPostscriptName","letterSpacing"],t}return q(t,e),t.prototype.isValidKey=function(e){return-1!==this.validKeys.indexOf(e)},t}(Me),Te=function(){function e(e,t,n){this.name=e,this.target=t,this.currentTarget=n,this._propagate=!0,this._defaults=!0}var t=e.prototype;return t.stopPropagation=function(){this._propagate=!1},t.preventDefault=function(){this._defaults=!1},j(e,[{key:"propagate",get:function(){return this._propagate}},{key:"defaults",get:function(){return this._defaults}}]),e}(),Ae=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return q(t,e),t}(Te),Ne=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,i,a)||this).payload=i,r.layer=n,r}return q(t,e),t}(Te),Be=new(function(){function e(){var e=this;this.layerMap=new Map,this.shouldBatch=[],this.updateLayoutCount=0,this.updateChildrenLayoutCount=0,this.rerenderCount=0,this.shouldAddToBatch=function(){return o.last(e.shouldBatch)},this.stopChildrenLayoutUpdates=function(){e.updateChildrenLayoutCount++},this.startChildrenLayoutUpdates=function(){e.updateChildrenLayoutCount--},this.stopRerender=function(){e.rerenderCount++},this.startRerender=function(){e.rerenderCount--},this.stopAndBatchLayoutUpdates=function(){!1===e.shouldAddToBatch()?e.shouldBatch.push(!1):e.shouldBatch.push(!0),e.updateLayoutCount++},this.stopAndForgetLayoutUpdates=function(){e.shouldBatch.push(!1),e.updateLayoutCount++},this.resumeLayoutUpdates=function(){e.updateLayoutCount--,0===e.updateLayoutCount&&(e.layerMap.forEach((function(e,t){t.setYogaAfterBatch(),t.onUpdateDom()})),e.shouldBatch=[],e.layerMap.clear())}}return j(e,[{key:"updateLayout",get:function(){return 0===this.updateLayoutCount}},{key:"updateChildrenLayout",get:function(){return 0===this.updateChildrenLayoutCount}},{key:"rerender",get:function(){return 0===this.rerenderCount}}]),e}()),ke=Be.stopChildrenLayoutUpdates,Oe=Be.startChildrenLayoutUpdates,ze=Be.stopRerender,Ie=Be.startRerender,We=Be.stopAndBatchLayoutUpdates,Ve=Be.stopAndForgetLayoutUpdates,Ue=Be.resumeLayoutUpdates;window.ReactDOM=i;var He=function(e){function t(t){var n;(n=e.call(this)||this)._thirdParty=!1,n._dragging=!1,n._eventCallableRegistry=new Ce,n._id=l.v4(),n.setAspectRatio=function(e){n._aspectRatio=e},n.setDomRef=function(e){n._dom=e},n.setDragging=function(e){n._dragging=e},n.setCollisionScope=function(e){n._collisionScope=e},n.emitLayoutChanges=function(){var e=new Ae("setLayoutEvent",K(n));Be.updateChildrenLayout&&(n.isFlexChild()?n.parent&&n.setChildrenLayout(n.parent):n.setChildrenLayout(K(n))),Be.rerender&&(n._dragging?Be.updateLayout&&n.onUpdateDom():ce((function(){n.emit("layout")}))),n.dispatchEvent("setLayout",e)},n.onUpdateDom=function(){var e=n.layout.getAll();if(n._dom){if(n._dom.setNativeProps){var t=Z({},e);t.textDecorationLine&&(t=Z({},t,{textDecoration:t.textDecorationLine})),n._dom.setNativeProps({style:t})}else try{var a=i.findDOMNode(n._dom);if(a){var r=["top","left","width","height","right","bottom"];o.forEach(e,(function(e,t){if(-1!==r.indexOf(t))a.style[t]="string"==typeof e?e:e+"px";else if("transform"===t){var n=o.get(e,"0.rotate");o.isNil(n)||(a.style[t]="rotate("+n+")")}}))}}catch(e){}ce((function(){n.emit("updateDom")}))}},n.getDimensions=function(e,t){var n=e.x?e.x:0,i=e.y?e.y:0,a=e.width?e.width:0,r=e.height?e.height:0,o=t.width,s=t.height,l={left:{percent:void 0,number:void 0},right:{percent:void 0,number:void 0},top:{percent:void 0,number:void 0},bottom:{percent:void 0,number:void 0},width:{percent:void 0,number:void 0},height:{percent:void 0,number:void 0}};return l.left.number=n,l.left.percent=Math.round(l.left.number/o*100*100)/100+"%",l.right.number=o-(n+a),l.right.percent=Math.round(l.right.number/o*100*100)/100+"%",l.width.number=a,l.width.percent=Math.round(l.width.number/o*100*100)/100+"%",l.top.number=i,l.top.percent=Math.round(l.top.number/s*100*100)/100+"%",l.bottom.number=s-(i+r),l.bottom.percent=Math.round(l.bottom.number/s*100*100)/100+"%",l.height.number=r,l.height.percent=Math.round(l.height.number/s*100*100)/100+"%",l},n._name="layer",n._type="view",n._parent=null,n._props=new Fe,n._children=[],n._style=new Pe,n._layout=new Re,n._collisionScope=null;var a=s.yoga.Config.create();return a.setPointScaleFactor(0),n._yogaNode=s.yoga.Node.create(a),n._yogaNode.setType(n._type),n._layout.toJS(),n._locked=!1,n._visible=!0,n._aspectRatio=void 0,n._preservedProperties={locked:!1,opacity:1,hidden:!1},n._dims={x:0,y:0,height:0,width:0,rotation:0},n._mouseProps={},n._canvas=t||K(n),n.addEventListener("domDidMount",(function(e){e.stopPropagation(),n._thirdParty=!0,n.setYoga()})),n.addEventListener("domDidUpdate",(function(e){e.stopPropagation(),n._thirdParty=!0,n.setYoga()})),n}q(t,e);var n=t.prototype;return n.getDomBoundingBox=function(e,t){var n=0,i=0,a=0,r=0;if(e&&(i=e.offsetTop,a=e.offsetWidth,r=e.offsetHeight,o.isNil(n=e.offsetLeft)||o.isNil(i)||o.isNil(a)||o.isNil(r))){var s=e.getBoundingClientRect();n=s.left,i=s.top,a=s.width,r=s.height;for(var l=e.parentElement;l&&"true"===l.getAttribute("data-virtual");)l=l.parentElement;if(l){var d=e.getBoundingClientRect();n-=d.left,i-=d.top}}return{top:i,left:n,width:a,height:r}},n.updateDomainCompileDimensions=function(e){if(this.isAutoHeight()||this.isAutoWidth())try{var t=i.findDOMNode(e),n=Z({},this.getDomBoundingBox(t,0)),a=this.style.get("width")?this.style.get("width"):n.width,r=this.style.get("height")?this.style.get("height"):n.height;this._domDims={width:a,height:r,x:n.left,y:n.top,rotation:0}}catch(e){this._domDims=void 0}else this._domDims=void 0},n.getCanvas=function(){return this._canvas},n.getFields=function(){return{type:se.literal,props:Fe,style:Pe,layout:Re}},n.setSelectable=function(e){e?this.unlock():this.lock()},n.getBoundingClientRect=function(){var e=Z({},this._dims);return this.parent&&(e.x=e.x-this.parent.getBorderLeft(),e.y=e.y-this.parent.getBorderTop()),Z({},e,{rootX:this.rootX,rootY:this.rootY})},n.getBounds=function(){return this._dims},n.getMarginLeft=function(){var e=this.layout.get("marginLeft");return e||(e=this.layout.get("margin")),o.isNil(e)&&(e=0),e},n.getMarginTop=function(){var e=this.layout.get("marginTop");return e||(e=this.layout.get("margin")),o.isNil(e)&&(e=0),e},n.getPaddingLeft=function(){var e=this.layout.get("paddingLeft");return e||(e=this.layout.get("padding")),o.isNil(e)&&(e=0),e},n.getPaddingTop=function(){var e=this.layout.get("paddingTop");return e||(e=this.layout.get("padding")),o.isNil(e)&&(e=0),e},n.getBorderLeft=function(){return this.yogaNode.getComputedBorder(s.yoga.EDGE_LEFT)},n.getBorderTop=function(){return this.yogaNode.getComputedBorder(s.yoga.EDGE_TOP)},n.setType=function(e){var t=this;this._type=e,this.yogaNode.setType(e),ce((function(){t.emit("type")}))},n.removeProp=function(e){var t=this;if(e){var n;this._props.remove(e);var i=Z({},this._yogaNode.props,((n={})[e]=void 0,n));this._yogaNode.setProps(i),this.setYoga()}else this._props=new Fe;ce((function(){t.emit("style")}))},n.setProp=function(e,t){var n,i=this;this._props.set(e,t);var a=Z({},this._yogaNode.props,((n={})[e]=t,n));this._yogaNode.setProps(a),ce((function(){i.emit("props")})),this.setYoga()},n.lock=function(){var e=this;this._locked=!0,ce((function(){e.emit("locked")}))},n.unlock=function(){var e=this;this._locked=!1,ce((function(){e.emit("locked")}))},n.show=function(){this._preservedProperties.hidden&&(this.children.forEach((function(e){return e.show()})),this._visible=!0,this.unlock(),this.setStyle("opacity",this._preservedProperties.opacity),this._preservedProperties.locked&&this.lock(),this._preservedProperties.hidden=!1)},n.hide=function(e){this._preservedProperties.hidden||(this._visible=!1,this._preservedProperties={opacity:this._style.get("opacity"),locked:this._locked,hidden:!0},this.setStyle("opacity",0),this.lock(),this.children.forEach((function(e){return e.hide()})))},n.setName=function(e){this._name=e},n.setStyle=function(e,t){var n=this;"gradient"===e?(this._style.set(e,t),this._style.set("backgroundImage",t?function(e,t){var n,i=[];o.forEach(e.stops,(function(e,t){i.push(e.stopColor)})),n=e.to&&e.from?{x:e.to.x-e.from.x,y:e.to.y-e.from.y}:{x:0,y:2};var a=180*Math.atan2(n.y,n.x)/Math.PI+90,r=[];o.forEach(e.stops,(function(e,t){r.push(e.offset)}));var s=i.map((function(e,t){return e+" "+Math.round(100*r[t])+"%"})).join(", ");if(e.gradientType&&"LinearGradient"===e.gradientType)return"linear-gradient("+a+"deg, "+s+")";if(e.gradientType&&"RadialGradient"===e.gradientType){var l=Math.sqrt((e.to.x-e.from.x)*(e.to.x-e.from.x)+(e.to.y-e.from.y)*(e.to.y-e.from.y)),d=Math.sqrt((1-e.from.x)*(1-e.from.x)+(1-e.from.y)*(1-e.from.y)),c=i.map((function(e,t){return e+" "+Math.round(r[t]*(l/d)*100)+"%"})).join(", ");return"radial-gradient(circle at "+100*e.from.x+"% "+100*e.from.y+"%,"+c+")"}return e.gradientType&&"AngularGradient"===e.gradientType?"conic-gradient("+s+")":"linear-gradient("+a+"deg, "+s+")"}(t):"")):this._style.set(e,t),ce((function(){n.emit("style")}))},n.setParent=function(e){this._parent=e},n.executeFunction=function(e){for(var t,n=this;"canvas"!==n.name&&n.parent;)n=n.parent;if(t=n){for(var i,a={layer:this,canvas:t},r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return(i=t.functionRegistry).executeFunction.apply(i,[e,a].concat(o))}return new Promise((function(e,t){return t("The layer doesnot belong to a canvas.")}))},n.addChild=function(e,t){var n=this;e.setParent(this),e.setCollisionScope(this._collisionScope),o.isNil(t)?this._children.push(e):this._children.splice(t,0,e),e.addYogaNode(t),e.setCollisionNode(),this.calculateLayout(),this.setYoga(),ce((function(){n.emit("children")}))},n.removeChild=function(e){var t=this;e.removeCollisionNode();var n=this._children.indexOf(e);if(-1!==n){var i=new Ne("removeChild",e);e.parent&&e.parent.dispatchEvent("removeChild",i),this._children.splice(n,1),this._yogaNode.removeChild(e.yogaNode),e.setCollisionScope(null),this.calculateLayout(),e.isFlexChild()&&e.parent&&e.parent.children.forEach((function(e){e.setDims(),e.setCollisionNode()})),ce((function(){t.emit(["children","yogaNode"])}))}},n.move=function(e,t){this._parent&&this._parent.removeChild(this),e.addChild(this,t),e.children.forEach((function(e){e.isFlexChild()&&e.setYoga()}))},n.getRootLayer=function(e){return e||(e=this),"canvas"===e.type?e:e&&e.parent?this.getRootLayer(e.parent):void 0},n.addYogaNode=function(e){var t=this.parent;t&&t._yogaNode&&t._yogaNode.getChildCount&&(o.isNil(e)&&(e=t.yogaNode.getChildCount()),o.isNil(e)||t._yogaNode.insertChild&&t._yogaNode.insertChild(this._yogaNode,e))},n.getComputedLayout=function(){return this._yogaNode.getComputedLayout()},n.calculateLayout=function(){var e=this.getRootLayer();return e&&e.yogaNode?e.yogaNode.calculateLayout(s.yoga.UNDEFINED,s.yoga.UNDEFINED,s.yoga.DIRECTION_LTR):this.yogaNode.calculateLayout(s.yoga.UNDEFINED,s.yoga.UNDEFINED,s.yoga.DIRECTION_LTR),this.getComputedLayout()},n.isFlexChild=function(){var e=this._layout.get("position");return!e||"absolute"!==e},n.getTotalFlexOfFlexChildren=function(){var e=0;return this.children.forEach((function(t,n){var i=t.getFlexValue();void 0!==i&&(e+=i)})),e},n.getParentLayerFlexDirection=function(){var e;try{e=this.parent}catch(e){console.log(e)}return e&&e.layout.get("flexDirection")||"column"},n.isAutoWidth=function(){var e,t,n=this.layout.get("position"),i=this.layout.get("width");if(!o.isNil(i))return!1;if("absolute"===n)return e=this.layout.get("left"),t=this.layout.get("right"),!(!o.isNil(e)&&!o.isNil(t));var a=this.getParentLayerFlexDirection();if(!a)return!1;if("row"===a){var r=this.layout.get("flex");return!(!o.isNil(r)&&!isNaN(r))}var s=this.layout.get("flex"),l=this.layout.get("alignSelf");return!(!o.isNil(s)&&!isNaN(s)||"stretch"===l)},n.isAutoHeight=function(){var e,t,n=this.layout.get("position"),i=this.layout.get("height");if(!o.isNil(i))return!1;if("absolute"===n)return e=this.layout.get("top"),t=this.layout.get("bottom"),!(!o.isNil(e)&&!o.isNil(t));var a=this.getParentLayerFlexDirection();if(!a)return!1;if("row"!==a){var r=this.layout.get("flex");return!(!o.isNil(r)&&!isNaN(r))}var s=this.layout.get("alignSelf"),l=this.layout.get("flex");return!(!o.isNil(l)&&!isNaN(l)||"stretch"===s)},n.isFillWidth=function(){var e,t,n=this.layout.get("position"),i=this.layout.get("width");if(!o.isNil(i))return!1;if("absolute"===n)return e=this.layout.get("left"),t=this.layout.get("right"),!o.isNil(e)&&!o.isNil(t);var a=this.getParentLayerFlexDirection();if(!a)return!1;if(-1!==a.indexOf("row"))return this.layout.get("flex")>0;var r=this.layout.get("alignSelf");return!r||"stretch"===r},n.isFillHeight=function(){var e,t,n=this.layout.get("position"),i=this.layout.get("height");if(!o.isNil(i))return!1;if("absolute"===n)return e=this.layout.get("top"),t=this.layout.get("bottom"),!o.isNil(e)&&!o.isNil(t);var a=this.getParentLayerFlexDirection();if(!a)return!1;if(-1!==a.indexOf("column"))return this.layout.get("flex")>0;var r=this.layout.get("alignSelf");return!r||"stretch"===r},n.getFlexValue=function(){var e=this.layout.get("flexGrow"),t=this.layout.get("flex");return e||t},n.getSiblingsWithFlex=function(){var e=this,n=new Array,i=this.isFillWidth(),a=this.isFillHeight();return this.parent instanceof t&&this.parent.children.forEach((function(t,r){e.getFlexValue()&&e!==t&&t.isFillWidth()===i&&t.isFillHeight()===a&&n.push(t)})),n},n.setYoga=function(){Be.updateLayout?this.setYogaAfterBatch():Be.shouldAddToBatch()&&Be.layerMap.set(this,!0)},n.setYogaAfterBatch=function(){var e=this,t=this._layout.toJS(),n=Z({},this._yogaNode.props,{style:t.data});this._yogaNode.setProps(n),this._yogaNode.updateNode(t.data),this._thirdParty&&(this.updateDomainCompileDimensions(this._dom),this._domDims&&(this.yogaNode.setHeight(this._domDims.height),this.yogaNode.setWidth(this._domDims.width))),this.calculateLayout(),this.setDims(),this.setCollisionNode(),Be.rerender&&ce((function(){e.emit("yoga")}))},n.setChildrenLayout=function(e){var t=this;e.children.forEach((function(e){e.setYoga(),t.setChildrenLayout(e)}))},n.setLayout=function(e,t){if(!this.parent&&"canvas"!==this.type)throw new Error("setLayout cannot be called on an orphan layer. Use addChild to add it to another layer first.");this._layout.set(e,t),this.setYoga(),this.emitLayoutChanges()},n.recalculateLayout=function(){this.setYoga(),this.emitLayoutChanges()},n.removeLayout=function(e){e?this._layout.remove(e):this._layout=new Re,this.setYoga(),this.emitLayoutChanges()},n.removeStyle=function(e){var t=this;e?this._style.remove(e):this._style=new Pe,ce((function(){t.emit("style")}))},n.isValidLayoutKey=function(e){return this._layout.isValidKey(e)},n.setViewport=function(e,t){var n=this;this._layout.set(e,t);var i=this._layout.toJS();this._yogaNode.setProps(Z({},this._yogaNode.props,{style:i.data})),this._yogaNode.updateNode(i.data),this.calculateLayout(),this.setDims(),ce((function(){n.emit(["layout","yogaNode"])}))},n.setDims=function(){var e=this._yogaNode.getComputedLayout();this._dims={x:e.left,y:e.top,height:e.height||0,width:e.width||0,rotation:this.rotation}},n.setHeight=function(e){this._dims.height=e},n.setWidth=function(e){this._dims.width=e},n.getTransform=function(){var e=this.rootX,t=this.rootY,n=he.getCentroid([[e,t],[e+this._dims.width,t],[e+this._dims.width,t+this._dims.height],[e,t+this._dims.height]]),i={rotate:{rotation:this.rotation,centroid:n}},a=this.parent;if(!a)return[i];var r=[];a.getTransform&&o.isArray(a.getTransform())&&[].concat(a.getTransform()).map((function(e){r.push(Z({},e))}));var s=[].concat(r);return s.push(i),s},n.getAbsoluteRotation=function(){var e={x:this.rootX||0,y:this.rootY||0,width:this._dims.width||0,height:this._dims.height||0,transform:this.getTransform()},t=he.getPointsFromDims(e);return he.getAbsoluteRotation(t)},n.getRotatedDims=function(){var e={x:this.rootX||0,y:this.rootY||0,rootX:this.rootY||0,rootY:this.rootY||0,width:this._dims.width>0?this._dims.width:1,height:this._dims.height>0?this._dims.height:1,transform:this.getTransform()},t=he.getPointsFromDims(e),n=this.getAbsoluteRotation?this.getAbsoluteRotation():0,i=he.getCentroid(t),a=he.rotatePoint(t[0],360-n,i);return{x:isNaN(a[0])?t[0][0]:a[0],y:isNaN(a[1])?t[0][1]:a[1],height:isNaN(this._dims.height)?0:this._dims.height,width:isNaN(this._dims.width)?0:this._dims.width,rotation:isNaN(n)?0:n}},n.getRotatedPolygon=function(){var e={x:this.rootX||0,y:this.rootY||0,width:this._dims.width||0,height:this._dims.height||0,transform:this.getTransform()},t=he.getPointsFromDims(e),n=he.getAbsoluteRotation(t),i=he.getCentroid(t);return he.rotatePoint(t[0],360-n,i),{centroid:i,poly:t,rotation:n}},n.removeCollisionNode=function(){this._collisionNode&&this._collisionNode.remove()},n.setCollisionNode=function(){this.removeCollisionNode();var e=this.getRotatedPolygon(),t=e.poly.map((function(t){return[t[0]-e.centroid[0],t[1]-e.centroid[1]]}));this._collisionScope&&(this._collisionNode=this._collisionScope.createPolygon(e.centroid[0],e.centroid[1],t,0,1,1),this._collisionScope.update(),this._collisionNode.data=this)},n.getPartialPath=function(e){if(e||(e=this),e.parent&&e.parent.children){var t=o.findIndex(e.parent.children,(function(t){return!!t&&e===t})),n=this.getPartialPath(e.parent);return n?n+"."+t:""+t}return""},n.getDepth=function(){if(this.parent){var e=this.parent.getDepth()+1;return"none"===this.parent.style.get("pointerEvents")&&e--,e}return-1},n.getIndexInParent=function(){var e=this.parent;return e&&e.children?e.children.indexOf(this):0},n.getHitLayer=function(e,t){var n=this.getHitResult(e,t);return n[n.length-1]},n.getHitResult=function(e,t){var n;if(!this._collisionScope)return[];this._collisionScope.update();for(var i,a=this._collisionScope.createResult(),r=this._collisionScope.createPoint(e,t,1),o=[],s=ee(r.potentials());!(i=s()).done;){var l=i.value;r.collides(l,a)&&l&&-1===o.indexOf(l.data)&&o.push(l.data)}this._collisionScope.remove(r),o=o.sort((function(e,t){return he.depthComparator(e.getPartialPath(),t.getPartialPath())}));for(var d=[],c=0;c<o.length;c++)o[c].locked||"none"===o[c].style.get("pointerEvents")||c!==o.length-1&&o[c].getDepth()===o[c+1].getDepth()&&"none"!==o[c+1].style.get("pointerEvents")||d.push(o[c]);return n=d,this.getCanvas().executeMiddleware("Layer.getHitResult",n,(function(e){return e}))},n.getHitRectResult=function(e,t,n,i){if(!this._collisionScope)return[];var a=this._collisionScope.createResult(),r=this._collisionScope.createPolygon(0,0,he.getPointsFromBoundingBox({x:e,y:t,width:n,height:i}));this._collisionScope.update();for(var s,l=[],d=ee(r.potentials());!(s=d()).done;){var c=s.value;if(r.collides(c,a)&&c&&-1===l.indexOf(c.data)){var u=c.data;u.locked||e>u.rootX&&t>u.rootY&&n<u.width+u.rootX-e&&i<u.height+u.rootY-t||l.push(u)}}return this._collisionScope.remove(r),l=o.orderBy(l,[function(e){return e.getDepth()},function(e){return e.getIndexInParent()}],["desc","desc"]),o.remove(l,(function(e){return"none"===e.style.get("pointerEvents")})),this.getCanvas().executeMiddleware("Layer.getHitRectResult",l,(function(e){return e}))},n.addEventListener=function(e,t){this._eventCallableRegistry.addEventListener(e,t)},n.removeEventListener=function(e,t){this._eventCallableRegistry.removeEventListener(e,t)},n.dispatchEvent=function(e,t,n){"none"!==this.style.get("pointerEvents")&&this._eventCallableRegistry.dispatchEvent(e,t),t.propagate&&this._parent&&this._parent.dispatchEvent(e,t,n)},n.setInnerText=function(e){var t=this;this._innerText=e,this._yogaNode.children=e,this.emitLayoutChanges(),ce((function(){t.emit("innerText")})),this.setYoga()},n.convertLayerDimensions=function(e){var t,n,i,a,r,s,l={},d=this._layout.get("left"),c=this._layout.get("top"),u=this._layout.get("right"),h=this._layout.get("bottom"),p=this._layout.get("height"),v=this._layout.get("width"),g=(this._layout.get("transform"),this._layout.get("position")),y={width:this._parent?this._parent.getBoundingClientRect().width:1,height:this._parent?this._parent.getBoundingClientRect().height:1},f=this.getDimensions(e,y);o.isNil(d)||("number"==typeof d&&(t=f.left.number),"string"==typeof d&&d.endsWith("%")&&(t=f.left.percent)),o.isNil(u)||("number"==typeof u&&(n=f.right.number),"string"==typeof u&&u.endsWith("%")&&(n=f.right.percent)),o.isNil(v)||("number"==typeof v&&(r=f.width.number),"string"==typeof v&&v.endsWith("%")&&(r=f.width.percent,this.parent&&"thirdParty"===this.parent.type&&(r=v))),o.isNil(c)||("number"==typeof c&&(i=f.top.number),"string"==typeof c&&c.endsWith("%")&&(i=f.top.percent)),o.isNil(h)||("number"==typeof h&&(a=f.bottom.number),"string"==typeof h&&h.endsWith("%")&&(a=f.bottom.percent)),o.isNil(p)||("number"==typeof p&&(s=f.height.number),"string"==typeof p&&p.endsWith("%")&&(s=f.height.percent)),o.isNil(t)||o.isNil(e.x)||(l.left=t),o.isNil(n)||o.isNil(e.x)||(l.right=n),o.isNil(t)&&o.isNil(n)&&"absolute"===g&&!o.isNil(e.x)&&(l.left=e.x),o.isNil(r)||o.isNil(e.width)||(l.width=r),o.isNil(i)||o.isNil(e.y)||(l.top=i),o.isNil(a)||o.isNil(e.y)||(l.bottom=a),o.isNil(i)&&o.isNil(a)&&"absolute"===g&&!o.isNil(e.y)&&(l.top=e.y),o.isNil(s)||o.isNil(e.height)||(l.height=s),o.isNil(t)||o.isNil(n)||"absolute"!==g||o.isNil(r)||delete l.right,o.isNil(i)||o.isNil(a)||"absolute"!==g||o.isNil(s)||delete l.bottom,this.isFlexChild()&&(delete l.top,delete l.left,delete l.bottom,delete l.right);var m=void 0;return o.isNil(e.rotation)||(m=[{rotate:e.rotation+"deg"}]),Z({},l,{transform:m})},n.rerenderDescendants=function(){var e=this;ce((function(){e.emit(["layout","style","children"])})),this._children.forEach((function(e){e.rerenderDescendants()}))},j(t,[{key:"aspectRatio",get:function(){return this._aspectRatio}},{key:"id",get:function(){return this._id}},{key:"dragging",get:function(){return this._dragging}},{key:"name",get:function(){return this._name}},{key:"parent",get:function(){return this._parent}},{key:"type",get:function(){return this._type}},{key:"props",get:function(){return this._props}},{key:"children",get:function(){return this._children}},{key:"style",get:function(){return this._style}},{key:"layout",get:function(){return this._layout}},{key:"yogaNode",get:function(){return this._yogaNode}},{key:"collisionScope",get:function(){return this._collisionScope}},{key:"collisionNode",get:function(){return this._collisionNode}},{key:"locked",get:function(){return this._locked}},{key:"visible",get:function(){return this._visible}},{key:"innerText",get:function(){return this._innerText}},{key:"eventCallableRegistry",get:function(){return this._eventCallableRegistry}},{key:"rootX",get:function(){var e=0,t=this.parent;if(t){var n=o.isNil(t.rootX)?t._dims.x:t.rootX;e=this._dims.x+n}else e=this._dims.x;return e}},{key:"rootY",get:function(){var e=0,t=this.parent;if(t){var n=o.isNil(t.rootY)?t._dims.y:t.rootY;e=this._dims.y+n}else e=this._dims.y;return e}},{key:"rotation",get:function(){var e=this.layout.getAll(),t=0;if(e.transform){var n=o.isArray(e.transform)?e.transform:e.transform.value,i=o.findIndex(n,(function(e){return-1!==o.keys(e).indexOf("rotate")&&!o.isNil(e.rotate)}));if(i>-1){var a=n[i].rotate&&n[i].rotate.type?n[i].rotate.value:n[i].rotate;a&&a.indexOf&&(t=a.indexOf("rad")>-1?180*(a=parseFloat(a.slice(0,-3)))/Math.PI:a=parseFloat(a.slice(0,-3)))}}return t}}]),t}(ue),Ye=function(e){function t(){return e.apply(this,arguments)||this}return q(t,e),t}(He),_e=function(){function e(){var e=this;this.addMiddleware=function(t,n){var i=e._middlewares.get(t);i?i.push(n):e._middlewares.set(t,[n])},this._middlewares=new Map}var t=e.prototype;return t.execute=function(e,t,n){var i=this;if(0===e.length)return t(n);var a=e[0],r=[].concat(e);return r.splice(0,1),a((function(e){return i.execute(r,t,e)}),n)},t.executeMiddleware=function(e,t,n){var i=this._middlewares.get(e);return i?(window.debug&&window.debugLog&&window.debugLog("Middleware: "+e),this.execute(i,n,t)):n(t)},e}(),Xe=function(){var e=this;this.addFunction=function(t,n){e._functions.set(t,n)},this.executeFunction=function(t){var n=e._functions.get(t);if(n){for(var i=arguments.length,a=new Array(i>1?i-1:0),r=1;r<i;r++)a[r-1]=arguments[r];return n.apply(void 0,a)}throw new Error("No function with the given name("+t+") found.")},this.removeFunction=function(t){e._functions.delete(t)},this._functions=new Map},Ge=function(e){function t(t,n,i,a){var r;r=e.call(this,t,n,a)||this;var o=n.getCanvas(),s=i.pageX,l=i.pageY;r.originalEvent=i,r.pageX=s,r.pageY=l;var d=o.convertPoint({x:s,y:l},"page","world");r.worldX=d.x,r.worldY=d.y;var c=o.convertPoint({x:s,y:l},"page","viewport");return r.viewportX=c.x,r.viewportY=c.y,r}return q(t,e),t.prototype.preventDefault=function(){e.prototype.preventDefault.call(this),this.originalEvent&&this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t}(Te),je=function(e){function t(t,n,i,a){var r;r=e.call(this,t,n,a)||this;var o=n.getCanvas(),s=i.pageX,l=i.pageY;r.originalEvent=i,r.pageX=s,r.pageY=l;var d=o.convertPoint({x:s,y:l},"page","world");r.worldX=d.x,r.worldY=d.y;var c=o.convertPoint({x:s,y:l},"page","viewport");return r.viewportX=c.x,r.viewportY=c.y,r}return q(t,e),t}(Te),Ze=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,a)||this).payload=i,r}return q(t,e),t}(Te),qe=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,a)||this).scrollX=i.x,r.scrollY=i.y,r}return q(t,e),t}(Te),Je=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,a)||this).zoom=i,r}return q(t,e),t}(Te),Ke=function(e){function i(i){var r;return(r=e.call(this)||this).plugins=new Map,r.zoom=1,r.scroll={x:0,y:0},r._middlewareRegistry=new _e,r._functionRegistry=new Xe,r._componentMap={},r._isMouseDown=!1,r._assetURL="https://pre-cloud.builderx.io/assets/plugins/designer",r._mouseEventsBlocked=!1,r.moveWithGrabHandle=!1,r.convertPoint=function(e,t,n){var i={x:0,y:0};if("viewport"===t)switch(n){case"page":i=r.convertPointFromViewportToPage(e.x,e.y);break;case"world":i=r.convertPointFromViewportToWorld(e.x,e.y)}if("page"===t)switch(n){case"viewport":i=r.convertPointFromPageToViewport(e.x,e.y);break;case"world":var a=r.convertPointFromPageToViewport(e.x,e.y);i=r.convertPointFromViewportToWorld(a.x,a.y)}if("world"===t)switch(n){case"viewport":i=r.convertPointFromWorldToViewport(e.x,e.y);break;case"page":var o=r.convertPointFromWorldToViewport(e.x,e.y);i=r.convertPointFromViewportToPage(o.x,o.y)}return i},r.dom=i,r.viewport={width:0,height:0},r.setType("canvas"),r.setCollisionScope(new a.Collisions),r._hoveredLayers=[],r._selectedLayers=[],r._stackWorldDOM=[],r._stackViewportDOM=[],n.render(t.createElement(re,{canvas:K(r)}),r.dom),r.addFunction("setScroll",r.setScrollCallback.bind(K(r))),r.addFunction("setZoom",r.setZoomCallback.bind(K(r))),r}q(i,e);var r=i.prototype;return r.setMouseCursor=function(e){var t=this;this._mouseCursorType=e,ce((function(){t.emit("mouseCursorType")}))},r.setScrollCallback=function(e,t){this.dispatchEvent("setScroll",new qe("setScroll",this,t))},r.setZoomCallback=function(e,t){this.dispatchEvent("setZoom",new Je("setZoom",this,t))},r.blockMouseEvents=function(){var e=this;this._mouseEventsBlocked=!0,ce((function(){e.emit("mouseEventsBlocked")}))},r.unblockMouseEvents=function(){var e=this;this._mouseEventsBlocked=!1,ce((function(){e.emit("mouseEventsBlocked")}))},r.createLayer=function(){return new Ye(this)},r.addMiddleware=function(e,t){this._middlewareRegistry.addMiddleware(e,t)},r.executeMiddleware=function(e,t,n){return this._middlewareRegistry.executeMiddleware(e,t,n)},r.addFunction=function(e,t){this._functionRegistry.addFunction(e,t)},r.removeFunction=function(e){this._functionRegistry.removeFunction(e)},r.setAssetUrl=function(e){this._assetURL=e},r.setViewport=function(e){var t=this;this.viewport.width=e.width,this.viewport.height=e.height,ce((function(){t.emit("viewport")}))},r.setViewportRef=function(e){this._viewportRef=e},r.getViewport=function(){return this.viewport},r.setZoom=function(e){var t=this;this.zoom=e,ce((function(){t.emit("zoom")}))},r.getZoom=function(){return this.zoom},r.setScroll=function(e){var t=this;this.scroll=e,ce((function(){t.emit("scroll")}))},r.getScroll=function(){return this.scroll},r.setMouseDown=function(e){this._isMouseDown=e,this.moveWithGrabHandle&&this.setMouseCursor(e?"-webkit-grabbing":"-webkit-grab")},r.setHoverLayers=function(e){var t=this;this._hoveredLayers=[],e&&(Array.isArray(e)?e.forEach((function(e){e.locked||t._hoveredLayers.push(e)})):e.locked||(this._hoveredLayers=[e])),ce((function(){t.emit("hoveredLayers")}))},r.selectLayers=function(e){var t=this;this._selectedLayers=[],e&&(Array.isArray(e)?e.forEach((function(e){e.locked||t._selectedLayers.push(e)})):e.locked||(this._selectedLayers=[e])),Be.rerender&&ce((function(){t.emit("selectedLayers")}))},r.convertPointFromViewportToWorld=function(e,t){var n=(this.layout.get("width")-this.viewport.width/this.zoom)*this.scroll.x,i=(this.layout.get("height")-this.viewport.height/this.zoom)*this.scroll.y;return{x:n+e/this.zoom,y:i+t/this.zoom}},r.convertPointFromWorldToViewport=function(e,t){var n=(this.layout.get("width")-this.viewport.width/this.zoom)*this.scroll.x,i=(this.layout.get("height")-this.viewport.height/this.zoom)*this.scroll.y;return{x:(e-n)*this.zoom,y:(t-i)*this.zoom}},r.convertPointFromPageToViewport=function(e,t){var i=document.documentElement.scrollTop,a=document.documentElement.scrollLeft,r=n.findDOMNode(this._viewportRef),o=0,s=0;if(r){var l=r.getBoundingClientRect();o=l.x,s=l.y}return{x:e-a-o,y:t-i-s}},r.convertPointFromViewportToPage=function(e,t){var i=document.documentElement.scrollTop,a=document.documentElement.scrollLeft,r=n.findDOMNode(this._viewportRef),o=0,s=0;if(r){var l=r.getBoundingClientRect();o=l.x,s=l.y}return{x:e+a+o,y:t+i+s}},r.installPlugin=function(e){this.plugins.set(e.name,e),e.init(this),e.activate()},r.dispatchEventOnHitLayer=function(e,t,n){var i,a=this;window.debug&&window.debugLog&&window.debugLog("CanvasEvent:HitLayer "+e),"drag"!==e&&(i=this.getHitLayer(t.worldX,t.worldY)),i?(t.target=i,this._middlewareRegistry.executeMiddleware("Canvas.dispatchEventOnHitLayer",t,(function(t){"mousemove"===e&&(a.dragging||a.dispatchEvent("Canvas.hoverLayers",new Ze("Canvas.hoverLayers",a,t.target?[t.target]:[]))),i.dispatchEvent(e,t,n)}))):this.dispatchEvent(e,t,n)},r.addComponent=function(e,t,n){this.componentMap[e]={renderer:t,definition:n}},r.getComponentDefinition=function(e){try{return this.componentMap[e].definition}catch(t){throw new Error("Component Definition for "+e+" not found")}},r.getRenderer=function(e){try{return this.componentMap[e].renderer}catch(e){throw new Error("Renderer not found")}},r.addDomToWorld=function(e,t,n){var i=this;void 0===t&&(t=!1);var a=e;if(t){var r=this.getBoundingClientRect();(a=document.createElement("div")).style.height=r.height+"px",a.style.width=r.width+"px",a.style.top=r.y+"px",a.style.left=r.x+"px",a.style.pointerEvents="none",a.style.position="absolute",a.style.zIndex=n||void 0,this.on("zoom",(function(e){a.style.transform="scale("+1/i.getZoom()+")",a.style.zoom=i.getZoom()})),a.style.transform="scale("+1/this.getZoom()+")",a.style.transformOrigin="0 0",a.style.zoom=this.getZoom(),a.appendChild(e)}return this._stackWorldDOM.push(a),e.style.pointerEvents="all",ce((function(){i.emit("stackWorldDOM")})),this.removeDomFromWorld.bind(this,a)},r.removeDomFromWorld=function(e){var t=this,n=this._stackWorldDOM.indexOf(e);-1!==n&&(this._stackWorldDOM.splice(n,1),ce((function(){t.emit("stackWorldDOM")})))},r.addDomToViewport=function(e){var t=this;return this._stackViewportDOM.push(e),e.style.pointerEvents="all",ce((function(){t.emit("stackViewportDOM")})),this.removeDomFromViewport.bind(this,e)},r.removeDomFromViewport=function(e){var t=this,n=this._stackViewportDOM.indexOf(e);-1!==n&&(this._stackViewportDOM.splice(n,1),ce((function(){t.emit("stackViewportDOM")})))},r.dispatchHandledEvent=function(e){this.dispatchEventOnHitLayer(e.type,new Ge(e.type,this,e.nativeEvent?e.nativeEvent:e,this),e)},r.handleNativeEvent=function(e){var t=this;this._middlewareRegistry.executeMiddleware("Canvas.handleNativeEvent",e,(function(e){switch(e.type){case"click":break;case"mousemove":t.isMouseDown&&!t.dragging&&t.setDragging(!0),t.dispatchHandledEvent(e);break;case"mousedown":t.setMouseDown(!0),t.dispatchHandledEvent(e);break;case"mouseenter":t.dispatchHandledEvent(e);break;case"mouseup":t.dispatchHandledEvent(e),t.setMouseDown(!1),t.dragging||(e=new MouseEvent("click",e),t.dispatchHandledEvent(e)),t.setDragging(!1);break;case"contextmenu":case"dblclick":t.dispatchHandledEvent(e);break;case"drop":t.dispatchEvent(e.type,new je(e.type,t,e.nativeEvent,t),e)}}))},r.getContainerBoundingBox=function(e){return this.getBoundingBox(e,!0)},r.getContainerBoundingBoxWRTParent=function(e){return this.getBoundingBoxWRTParent(e,!0)},r.getBoundingBox=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i={x:0,y:0,height:0,width:0,rotation:0};if(o.isEmpty(e))return i;if(e.length>1||t){var a=[];e.map((function(e){var t=e.getBoundingClientRect(),i={x:t.rootX,y:t.rootY,width:t.width,height:t.height},r=e.rotation,o=e.getRotatedPolygon().poly;n&&(o=he.getPointsFromBoundingBox(i,r)),a=a.concat(o)}));var r=o.minBy(a,(function(e){return e[0]})),s=o.minBy(a,(function(e){return e[1]})),l=o.maxBy(a,(function(e){return e[0]})),d=o.maxBy(a,(function(e){return e[1]}));s=s?s[1]:0,l=l?l[0]:0,d=d?d[1]:0,i.x=r=r?r[0]:0,i.y=s,i.width=l?l-r:0,i.height=d?d-s:0,i.rotation=0}else if(1===e.length)return e[0].getRotatedDims();return i},r.getBoundingBoxWRTParent=function(e,t){void 0===t&&(t=!1);var n=this.getBoundingBox(e,t,!0),i=e.length&&e[0].parent?e[0].parent.getBoundingClientRect():{rootX:0,rootY:0};return Z({},n,{x:n.x-i.rootX,y:n.y-i.rootY,rootX:n.x,rootY:n.y})},r.enableMoveWithGrabHandle=function(){var e=this;this.mouseEventsBlocked||(this.moveWithGrabHandle=!0,this.setMouseCursor(this.isMouseDown?"-webkit-grabbing":"-webkit-grab"),this.blockMouseEvents(),ce((function(){e.emit("moveWithGrabHandle")})))},r.disableMoveWithGrabHandle=function(){var e=this;this.moveWithGrabHandle&&(this.moveWithGrabHandle=!1,this.setMouseCursor("default"),this.unblockMouseEvents(),ce((function(){e.emit("moveWithGrabHandle")})))},j(i,[{key:"mouseEventsBlocked",get:function(){return this._mouseEventsBlocked}},{key:"functionRegistry",get:function(){return this._functionRegistry}},{key:"assetURL",get:function(){return this._assetURL}},{key:"hoveredLayers",get:function(){return this._hoveredLayers}},{key:"mouseCursorType",get:function(){return this._mouseCursorType}},{key:"selectedLayers",get:function(){return this._selectedLayers}},{key:"stackWorldDOM",get:function(){return this._stackWorldDOM}},{key:"stackViewportDOM",get:function(){return this._stackViewportDOM}},{key:"componentMap",get:function(){return this._componentMap}},{key:"isMouseDown",get:function(){return this._isMouseDown}}]),i}(Ye),Qe=function(){function e(e,t,n,i,a,r){var s=this;this.activeIndex=0,this.getGradientString=function(e){var t,n=[];e?o.forEach(e,(function(e,t){n.push(e.color)})):o.forEach(s.stops,(function(e,t){n.push(e.stopColor)})),t=s.to&&s.from?{x:s.to.x-s.from.x,y:s.to.y-s.from.y}:{x:0,y:2};var i=180*Math.atan2(t.y,t.x)/Math.PI+90,a=[];e?o.forEach(e,(function(e,t){a.push(e.pos)})):o.forEach(s.stops,(function(e,t){a.push(e.offset)}));var r=n.map((function(e,t){return e+" "+Math.round(100*a[t])+"%"})).join(", ");return s.gradientType&&"LinearGradient"===s.gradientType?"linear-gradient("+i+"deg, "+r+")":s.gradientType&&"RadialGradient"===s.gradientType?"radial-gradient("+r+")":s.gradientType&&"AngularGradient"===s.gradientType?"conic-gradient("+r+")":"linear-gradient("+i+"deg, "+r+")"},this.gradientType=e,this.from=t,this.to=n,this.stops=i,this.activeIndex=a,this.elipseLength=r}var t=e.prototype;return t.toJS=function(){var e={};return o.forEach(this,(function(t,n){o.isFunction(t)||(e[n]=t&&t.toJS?t.toJS():t)})),e},t.rotate=function(e,t,n,i,a){var r=Math.PI/180*a,o=Math.cos(r),s=Math.sin(r),l=o*(i-t)-s*(n-e)+t;return{x:Math.round(o*(n-e)+s*(i-t)+e),y:Math.round(l)}},t.rotateGradient=function(e){var t=(this.from.x+this.to.x)/2,n=(this.from.y+this.to.y)/2,i=this.rotate(t,n,this.from.x,this.from.y,e),a=this.rotate(t,n,this.to.x,this.to.y,e),r={x:a.x,y:a.y};this.from={x:i.x,y:i.y},this.to=r},e}(),$e=function(){function e(){this.name="HoverPlugin",this.forbiddenLayers=[],this.hoverLayers=[]}var t=e.prototype;return t.init=function(e){this.canvas=e,this.dispose=null},t.hideLayerHover=function(e){this.forbiddenLayers.includes(e.layer)||this.forbiddenLayers.push(e.layer)},t.showLayerHover=function(e){this.forbiddenLayers.includes(e.layer)&&this.forbiddenLayers.splice(this.forbiddenLayers.indexOf(e.layer),1)},t.hideAllHoverBoxes=function(e){this.hoverWrapperLayer.style.display="none"},t.showAllHoverBoxes=function(e){this.hoverWrapperLayer.style.display="block"},t.showHover=function(e){return!this.forbiddenLayers.includes(e)&&"canvas"!==e.type&&!this.canvas.selectedLayers.includes(e)},t.renderBoxes=function(){for(var e=0;e<this.canvas.hoveredLayers.length;e++){var t=this.canvas.hoveredLayers[e];if(this.showHover(t)){var n=void 0;this.hoverLayers[e]?n=this.hoverLayers[e]:(n=document.createElement("div"),this.hoverWrapperLayer.appendChild(n)),n.style.position="absolute",n.style.pointerEvents="none";var i=t.getBoundingClientRect(),a=this.canvas.getBoundingBox([t]);n.style.top=a.y+"px",n.style.left=a.x+"px",n.style.height=i.height+"px",n.style.width=i.width+"px",n.style.transform=a.rotation?"rotate("+a.rotation+"deg)":"",n.id="hover"+e,n.style.border=1/this.canvas.getZoom()+"px solid #25B9D1",this.hoverLayers[e]=n}else this.hoverLayers[e]&&this.hoverLayers[e].remove&&(this.hoverLayers[e].remove(),this.hoverLayers.splice(e,1),e--)}var r=this.canvas.hoveredLayers.length;if(r<this.hoverLayers.length)for(var o=r;o<this.hoverLayers.length;o++)this.hoverLayers[o]&&this.hoverLayers[o].remove&&(this.hoverLayers[o].remove(),this.hoverLayers.splice(o,1),o--)},t.activate=function(){var e=this;this.hoverWrapperLayer=document.createElement("div"),this.dispose=this.canvas.addDomToWorld(this.hoverWrapperLayer,!0,102),this.hoverWrapperLayer.style.pointerEvents="none",this.canvas.on("hoveredLayers",(function(t){e.renderBoxes()})),this.canvas.on("selectedLayers",(function(t){e.renderBoxes()})),this.canvas.on("zoom",(function(t){e.renderBoxes()})),this.canvas.addFunction("Hover.hideLayer",this.hideLayerHover.bind(this)),this.canvas.addFunction("Hover.showLayer",this.showLayerHover.bind(this)),this.canvas.addFunction("Hover.hideAllHoverBoxes",this.hideAllHoverBoxes.bind(this)),this.canvas.addFunction("Hover.showAllHoverBoxes",this.showAllHoverBoxes.bind(this))},t.deactivate=function(){this.dispose()},e}(),et=function(e){function t(t,n,i,a,r){var o;o=e.call(this,t,n,i,r)||this;var s=n.getCanvas();o.worldDx=a.worldDx,o.worldDy=a.worldDy,o.worldX=a.worldX,o.worldY=a.worldY;var l=s.convertPoint({x:a.worldDx,y:a.worldDy},"world","page");o.pageDx=l.x,o.pageDy=l.y;var d=s.convertPoint({x:o.pageDx,y:o.pageDy},"page","viewport");return o.viewportDx=d.x,o.viewportDy=d.y,o}return q(t,e),t}(Ge),tt=function(){function e(){this.name="Drag",this.mouseDown=!1,this.dragStarted=!1,this.offsetPageX=0,this.offsetPageY=0,this.lastPageX=0,this.lastPageY=0}var t=e.prototype;return t.init=function(e){this.canvas=e,this.dispose=null,this.offsetPageX=0,this.offsetPageY=0},t.activate=function(){var e=this,t={x:0,y:0};this.canvas.addEventListener("mousedown",(function(t){2!==t.originalEvent.button&&3!==t.originalEvent.which&&(e.mouseDown=!0,e.dragStarted=!1,e.lastPageX=t.worldX,e.lastPageY=t.worldY)})),this.canvas.addEventListener("mousemove",(function(n){if(t={x:n.worldX-e.lastPageX,y:n.worldY-e.lastPageY},e.mouseDown&&!e.dragStarted){e.dragStarted=!0;var i=new et("dragStart",e.canvas,n.originalEvent,{worldDx:t.x,worldDy:t.y,worldX:e.lastPageX,worldY:e.lastPageY});e.canvas.dispatchEventOnHitLayer("dragStart",i,n)}else if(e.dragStarted){var a=new et("drag",e.canvas,n.originalEvent,{worldDx:t.x,worldDy:t.y,worldX:n.worldX,worldY:n.worldY});e.canvas.dispatchEventOnHitLayer("drag",a,n),e.lastPageX=n.worldX,e.lastPageY=n.worldY}})),this.canvas.addEventListener("mouseup",(function(n){if(t={x:n.worldX-e.lastPageX,y:n.worldY-e.lastPageY},e.dragStarted){var i=new et("dragEnd",e.canvas,n.originalEvent,{worldDx:0,worldDy:0,worldX:n.worldX,worldY:n.worldY});e.canvas.dispatchEventOnHitLayer("dragEnd",i,n)}e.lastPageX=0,e.lastPageY=0,e.mouseDown=!1,e.dragStarted=!1}))},t.deactivate=function(){this.dispose()},e}(),nt=["layout","children","props","style","visible","gradient"],it=function(e){function n(){var t;return(t=e.apply(this,arguments)||this)._ref=null,t.onUpdate=function(){t.forceUpdate()},t.getStyles=function(e){var t=Z({},e.style.getAll());delete t.gradient;var n=Z({},t,e.layout.getAll());return delete n.pointerEvents,n.overflow="scroll"===n.overflow?"hidden":n.overflow,n},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(nt,this.onUpdate),this.props.layer.setDomRef(this._ref);var e=d.findNodeHandle(this._ref);e.setAttribute("class","view-render "+e.className)},i.componentWillUnmount=function(){this.props.layer.off(nt,this.onUpdate)},i.componentDidUpdate=function(e){e.layer.off(nt,this.onUpdate),this.props.layer.on(nt,this.onUpdate),this.props.layer.setDomRef(this._ref)},i.render=function(){var e=this,n=this.props.layer,i=this.props.RootRenderer,a=Z({},n.props.getAll()),r=a.id;return delete a.id,t.createElement(d.View,Object.assign({ref:function(t){return e._ref=t},style:this.getStyles(n)},a,{nativeID:r}),n.children.map((function(n,a){return t.createElement(i,Object.assign({},e.props,{key:n.id,layer:n}))})))},n}(t.PureComponent),at={version:"0.0.1",template:{type:"view",children:[],import:{layerName:"View",packageName:"native",isDefaultImport:!1,asName:""},locked:!1,template:{centerVertical:!1,centerHorizontal:!1},layout:{top:50,left:100,width:100,height:100,position:"absolute"},style:{backgroundColor:"#E6E6E6"},props:{}},thumbnail:"",name:"Rect",controlsProperty:[{type:"AlignmentEditor",title:"Alignment Editor",value:{},showForMultiple:!0},{type:"OrientationEditor",title:"Orientation Editor",value:{},showForMultiple:!0},{type:"ResizingTypeEditor",title:"ResizingType Editor",value:{}},{type:"TouchableOpacityEditor",title:"TouchableOpacity Editor",value:{}},{type:"ScrollViewEditor",title:"Scroll View Editor",value:{}},{type:"group",title:"Styling",value:{},properties:[{propertyName:"opacity",type:"range",title:"Opacity",value:{defaultValue:1,min:0,max:1},category:"style"},{propertyName:"backgroundColor",type:"color",title:"Fill",value:{defaultValue:"#fff"},category:"style"},{type:"BorderWidthEditor",title:"BorderWidth Editor",value:{defaultValue:1}},{type:"BorderRadiusEditor",title:"BorderRadius Editor",value:{}},{type:"ShadowEditor",title:"Shadow Editor",value:{},properties:[{type:"shadowColor",title:"Shadow Color",value:{defaultValue:"rgba(0,0,0,1)"}},{type:"shadowOffset",title:"Shadow Offset",value:{defaultValue:3}},{type:"shadowOpacity",title:"Shadow Opacity",value:{defaultValue:.25}},{type:"elevation",title:"elevation",value:{defaultValue:5}}]},{propertyName:"overflow",title:"Overflow",type:"enum",value:{options:["visible","hidden","scroll"],defaultValue:"visible"}}]},{type:"group",title:"Layout",value:{},properties:[{type:"FlexboxEditor",title:"Flexbox Editor",value:{}},{type:"MarginPaddingEditor",title:"MarginPadding Editor",value:{}},{type:"LayoutEditor",title:"Layout Editor",value:{}}]}]},rt=function(){function e(){this.name="ViewRenderer"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addComponent("view",it,at)},t.deactivate=function(){},e}(),ot=["layout","children","props","style","visible","gradient"],st=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t.getStyles=function(e){var t=Z({},e.style.getAll());delete t.gradient;var n=Z({},t,e.layout.getAll());return n.overflow="scroll"===n.overflow?"hidden":n.overflow||"hidden",n},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(ot,this.onUpdate),this.props.layer.setDomRef(this._ref)},i.componentWillUnmount=function(){this.props.layer.off(ot,this.onUpdate)},i.componentDidUpdate=function(e){e.layer.off(ot,this.onUpdate),this.props.layer.on(ot,this.onUpdate),this.props.layer.setDomRef(this._ref)},i.render=function(){var e=this,n=this.props.layer,i=this.props.RootRenderer,a=Z({},n.props.getAll()),r=a.id;return delete a.id,t.createElement(d.View,Object.assign({ref:function(t){e._ref=t},style:this.getStyles(n)},a,{nativeID:r}),n.children.map((function(n,a){return t.createElement(i,Object.assign({},e.props,{key:n.id,layer:n}))})))},n}(t.PureComponent),lt={version:"0.0.1",template:{type:"touchableOpacity",children:[],import:{layerName:"TouchableOpacity",packageName:"native",isDefaultImport:!1,asName:""},locked:!1,template:{centerVertical:!1,centerHorizontal:!1},layout:{top:50,left:100,width:100,height:100,position:"absolute"},style:{backgroundColor:"#E6E6E6"},props:{}},thumbnail:"",name:"Rect",controlsProperty:[{type:"AlignmentEditor",title:"Alignment Editor",value:{},showForMultiple:!0},{type:"OrientationEditor",title:"Orientation Editor",value:{},showForMultiple:!0},{type:"ResizingTypeEditor",title:"ResizingType Editor",value:{}},{type:"TouchableOpacityEditor",title:"TouchableOpacity Editor",value:{}},{type:"NavigationEditor",title:"Navigation Editor",value:{}},{type:"group",title:"Styling",value:{},properties:[{propertyName:"opacity",type:"range",title:"Opacity",value:{defaultValue:1,min:0,max:1},category:"style"},{propertyName:"backgroundColor",type:"color",title:"Fill",value:{defaultValue:"#fff"},additionalOptions:{showGradient:!1},category:"style"},{type:"BorderWidthEditor",title:"BorderWidth Editor",value:{}},{type:"BorderRadiusEditor",title:"BorderRadius Editor",value:{}},{type:"ShadowEditor",title:"Shadow Editor",value:{}},{propertyName:"overflow",title:"Overflow",type:"enum",value:{options:["visible","hidden","scroll"],defaultValue:"visible"}}]},{type:"group",title:"Layout",value:{},properties:[{type:"FlexboxEditor",title:"Flexbox Editor",value:{}},{type:"MarginPaddingEditor",title:"MarginPadding Editor",value:{}},{type:"LayoutEditor",title:"Layout Editor",value:{}}]}]},dt=function(){function e(){this.name="TouchableOpacityRenderer"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addComponent("touchableOpacity",st,lt)},t.deactivate=function(){},e}(),ct=["layout","children","props","style","visible","gradient"],ut=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t.getStyles=function(e){var t=Z({},e.style.getAll());delete t.gradient;var n=Z({},t,e.layout.getAll());return n.overflow="scroll"===n.overflow?"hidden":n.overflow||"hidden",n},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(ct,this.onUpdate),this.props.layer.setDomRef(this._ref)},i.componentWillUnmount=function(){this.props.layer.off(ct,this.onUpdate)},i.componentDidUpdate=function(e){e.layer.off(ct,this.onUpdate),this.props.layer.on(ct,this.onUpdate),this.props.layer.setDomRef(this._ref)},i.render=function(){var e=this,n=this.props.layer,i=this.props.RootRenderer,a=Z({},n.props.getAll()),r=a.id;return delete a.id,t.createElement(d.View,Object.assign({ref:function(t){e._ref=t},style:this.getStyles(n)},a,{nativeID:r}),n.children.map((function(n,a){return t.createElement(i,Object.assign({},e.props,{key:n.id,layer:n}))})))},n}(t.PureComponent),ht={version:"0.0.1",template:{type:"scrollView",children:[],import:{layerName:"ScrollView",packageName:"native",isDefaultImport:!1,asName:""},locked:!1,template:{centerVertical:!1,centerHorizontal:!1},layout:{top:150,left:150,width:150,height:150,position:"absolute"},style:{backgroundColor:"rgba(230, 230, 230,1)"},props:{contentContainerStyle:{width:150,height:150}}},thumbnail:"",name:"Rect",controlsProperty:[{type:"AlignmentEditor",title:"Alignment Editor",value:{},showForMultiple:!0},{type:"OrientationEditor",title:"Orientation Editor",value:{},showForMultiple:!0},{type:"ResizingTypeEditor",title:"ResizingType Editor",value:{}},{type:"ScrollViewEditor",title:"Scroll View Editor",value:{}},{type:"group",title:"Styling",value:{},properties:[{propertyName:"opacity",type:"range",title:"Opacity",value:{defaultValue:1,min:0,max:1},category:"style"},{propertyName:"backgroundColor",type:"color",title:"Fill",value:{defaultValue:"#fff"},additionalOptions:{showGradient:!1},category:"style"},{type:"BorderWidthEditor",title:"BorderWidth Editor",value:{}},{type:"BorderRadiusEditor",title:"BorderRadius Editor",value:{}},{type:"ShadowEditor",title:"Shadow Editor",value:{}},{propertyName:"overflow",title:"Overflow",type:"enum",value:{options:["visible","hidden"],defaultValue:"visible"}}]},{type:"group",title:"Layout",value:{},properties:[{type:"FlexboxEditor",title:"Flexbox Editor",value:{}},{type:"MarginPaddingEditor",title:"MarginPadding Editor",value:{}},{type:"LayoutEditor",title:"Layout Editor",value:{}}]}]},pt=function(){function e(){this.name="ScrollViewRenderer"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addComponent("scrollView",ut,ht)},t.deactivate=function(){},e}(),vt=function(e){function t(t,n){return e.call(this,t,n)||this}return q(t,e),t}(Te),gt=["layout","children","props","innerText","style","visible"],yt=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t.getStyles=function(e){var t=Z({color:"black"},e.style.getAll(),e.layout.getAll(),{WebkitFontSmoothing:"antialiased",wordBreak:"break-all"});return delete t.fontPostscriptName,delete t.wordBreak,t.textDecoration&&(t.textDecorationLine=t.textDecoration),t},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(gt,this.onUpdate),this.props.layer.setDomRef(this.textRef),this.whiteSpaceTo("noWrap"),this.props.layer.dispatchEvent("domDidMount",new vt("domDidMount",this))},i.componentWillUnmount=function(){this.props.layer.off(gt,this.onUpdate)},i.componentDidUpdate=function(e){e.layer.off(gt,this.onUpdate),this.props.layer.on(gt,this.onUpdate),this.props.layer.setDomRef(this.textRef),this.props.layer.dispatchEvent("domDidUpdate",new vt("domDidUpdate",this))},i.whiteSpaceTo=function(e){this.textRef.setNativeProps({whiteSpace:e})},i.render=function(){var e=this,n=this.props.layer,i=n.innerText;i&&c(i,"{'\n'}")&&(i=u(i,new RegExp("{'\n'}","g"),"\n")),i&&c(i,"{'\t'}")&&(i=u(i,new RegExp("{'\t'}","g"),"\t"));var a=Z({},n.props.getAll()),r=a.id;delete a.id;var o=this.getStyles(n),s=void 0,l=void 0,h=void 0;return n.isAutoWidth()&&(s="pre"),n.isFlexChild()?(l="fit-content",h="fit-content"):(n.isFillHeight()||(l="fit-content"),n.isFillWidth()||(h="fit-content")),t.createElement(d.Text,Object.assign({webkit:"true"},a,{style:Z({fontSize:14,height:l,width:h},o,{whiteSpace:s}),nativeID:r,ref:function(t){e.textRef=t}}),i)},n}(t.PureComponent),ft={version:"0.0.1",template:{type:"text",children:[{type:"literal",value:"Lorem Ipsum"}],import:{layerName:"Text",packageName:"native",isDefaultImport:!1,asName:""},locked:!1,template:{centerVertical:!1,centerHorizontal:!1},layout:{top:0,left:0,position:"absolute"},style:{fontFamily:"Roboto",fontPostscriptName:"roboto-regular",fontStyle:"normal",fontWeight:"400",color:"#121212"},props:{}},thumbnail:"",name:"Text",controlsProperty:[{type:"AlignmentEditor",title:"Alignment Editor",value:{},showForMultiple:!0},{type:"OrientationEditor",title:"Orientation Editor",value:{},showForMultiple:!0},{type:"ResizingTypeEditor",title:"ResizingType Editor",value:{}},{type:"TextToTextInputEditor",title:"Text To TextInput Editor",value:{}},{type:"group",title:"Styling",value:{},properties:[{propertyName:"opacity",type:"range",title:"Opacity",value:{defaultValue:1,min:0,max:1},category:"style"},{type:"TextPropEditor",title:"Text Prop Editor",value:{}}]},{type:"group",title:"Layout",value:{},properties:[{type:"MarginPaddingEditor",title:"MarginPadding Editor",value:{}}]}]},mt=function(){function e(){this.name="TextRenderer"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addComponent("text",yt,ft)},t.deactivate=function(){},e}(),xt=["layout","children","props","style","visible"],wt=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t.getStyles=function(e){var t=Z({},e.style.getAll(),e.layout.getAll());return delete t.fontPostscriptName,delete t.wordBreak,t},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(xt,this.onUpdate),this.props.layer.setDomRef(this._ref)},i.componentDidUpdate=function(e){e.layer.off(xt,this.onUpdate),this.props.layer.on(xt,this.onUpdate),this.props.layer.setDomRef(this._ref)},i.componentWillUnmount=function(){this.props.layer.off(xt,this.onUpdate)},i.render=function(){var e=this,n=this.props.layer,i=Z({},n.props.getAll()),a=o.pick(i,["defaultValue","numberOfLines","multiline","maxLength","placeholder","placeholderTextColor","value"]),r=i.id;return delete i.id,t.createElement(d.TextInput,Object.assign({ref:function(t){e._ref=t}},a,{style:this.getStyles(n),nativeID:r}))},n}(t.PureComponent),bt={version:"0.0.1",template:{type:"textInput",children:[],import:{layerName:"TextInput",packageName:"native",isDefaultImport:!1,asName:""},locked:!1,template:{centerVertical:!1,centerHorizontal:!1},layout:{top:0,left:0,position:"absolute"},style:{fontFamily:"Roboto",fontPostscriptName:"roboto-regular",fontStyle:"normal",fontWeight:"400",color:"#121212"},props:{placeholder:"placeholder"}},thumbnail:"",name:"TextInput",controlsProperty:[{type:"AlignmentEditor",title:"Alignment Editor",value:{},showForMultiple:!0},{type:"OrientationEditor",title:"Orientation Editor",value:{},showForMultiple:!0},{type:"ResizingTypeEditor",title:"ResizingType Editor",value:{}},{type:"group",title:"Styling",value:{},properties:[{propertyName:"opacity",type:"range",title:"Opacity",value:{defaultValue:1,min:0,max:1},category:"style"},{type:"TextPropEditor",title:"Text Prop Editor",value:{}},{propertyName:"backgroundColor",type:"color",title:"Fill",value:{defaultValue:"#fff"},additionalOptions:{showGradient:!1},category:"style"},{type:"BorderWidthEditor",title:"BorderWidth Editor",value:{defaultValue:1}},{type:"BorderRadiusEditor",title:"BorderRadius Editor",value:{}},{type:"ShadowEditor",title:"Shadow Editor",value:{},properties:[{type:"shadowColor",title:"Shadow Color",value:{defaultValue:"rgba(0,0,0,1)"}},{type:"shadowOffset",title:"Shadow Offset",value:{defaultValue:3}},{type:"shadowOpacity",title:"Shadow Opacity",value:{defaultValue:.25}},{type:"elevation",title:"elevation",value:{defaultValue:5}}]}]},{type:"group",title:"Layout",value:{},properties:[{type:"MarginPaddingEditor",title:"MarginPadding Editor",value:{}}]},{type:"TextToTextInputEditor",title:"Text To TextInput Editor",value:{}},{type:"group",title:"TextInput",value:{},properties:[{propertyName:"placeholder",type:"string",title:"Placeholder",value:{placeholder:"",defaultValue:""},category:"props"},{propertyName:"textBreakStrategy",title:"Text Break Strategy",type:"enum",value:{options:["simple","highQuality","balanced"],defaultValue:"simple"},category:"props"},{propertyName:"clearButtonMode",type:"enum",title:"Clear Button Mode",value:{options:["never","while-editing","unless-editing","always"],defaultValue:"never"},category:"props"},{propertyName:"keyboardAppearance",title:"Keyboard Appearance",type:"enum",value:{options:["default","light","dark"],defaultValue:"default"},category:"props"},{propertyName:"dataDetector",title:"Data Detector Types",type:"enum",value:{options:["phoneNumber","link","address","calendarEvent","none","all","phoneNumber","link","address","calendarEvent","none","all"],defaultValue:"none"},category:"props"},{propertyName:"placeholderTextColor",type:"bareColor",title:"Placeholder Text Color",value:{defaultValue:"#fff"},additionalOptions:{showGradient:!1,uiOptions:{size:"s"}},category:"props"},{propertyName:"selectionColor",type:"bareColor",title:"Selection color",value:{defaultValue:"#fff"},additionalOptions:{showGradient:!1,uiOptions:{size:"s"}},category:"props"}]},{type:"group",title:"Other Props",value:{},properties:[{propertyName:"autoCapitalize",title:"Auto Capitalize",type:"enum",value:{options:["none","sentences","words","characters"],defaultValue:"none"},category:"props"},{propertyName:"keyboardType",type:"enum",title:"Keyboard Type",value:{options:["default","email-address","numeric","phone-pad","ascii-capable","numbers-and-punctuation","url","number-pad","name-phone-pad","decimal-pad","twitter","web-search"],defaultValue:"default"},category:"props"},{propertyName:"returnKeyType",title:"Return Key Type",type:"enum",value:{options:["done","go","next","search","send","none","previous","default","emergency-call","google","join","route","yahoo"],defaultValue:"default"},category:"props"},{propertyName:"defaultValue",type:"string",title:"Default value",value:{defaultValue:""},category:"props"},{propertyName:"maxLength",type:"number",title:"Max length",value:{defaultValue:140},category:"props"},{propertyName:"inlineImageLeft",type:"string",title:"Inline Image Left",value:{defaultValue:""}},{propertyName:"inlineImagePadding",type:"number",title:"Inline Image Padding",value:{defaultValue:0},category:"props"},{propertyName:"numberOfLines",type:"number",title:"Number of Lines",value:{defaultValue:1},category:"props"},{propertyName:"returnKeyLabel",type:"string",title:"Return Key Label",value:{defaultValue:""},category:"props"}]},{type:"group",title:"Booleans",value:{},properties:[{propertyName:"clearTextOnFocus",type:"boolean",title:"Clear Text onFocus",value:{defaultValue:!1},category:"props"},{propertyName:"enablesReturnKeyAutomatically",type:"boolean",title:"Enables Return Key Automatically",value:{defaultValue:!1},category:"props"},{propertyName:"spellCheck",type:"boolean",title:"Spell Check",value:{defaultValue:!1},category:"props"},{propertyName:"disableFullscreenUI",type:"boolean",title:"Disable Full Screen UI",value:{defaultValue:!1},category:"props"},{propertyName:"autoCorrect",type:"boolean",title:"Auto Correct",value:{defaultValue:!1},category:"props"},{propertyName:"autoFocus",type:"boolean",title:"Auto Focus",value:{defaultValue:!1},category:"props"},{propertyName:"blurOnSubmit",type:"boolean",title:"Blur on submit",value:{defaultValue:!1},category:"props"},{propertyName:"caretHidden",type:"boolean",title:"Caret hidden",value:{defaultValue:!1},category:"props"},{propertyName:"editable",type:"boolean",title:"Editable",value:{defaultValue:!0},category:"props"},{propertyName:"multiline",type:"boolean",title:"Multiline",value:{defaultValue:!1},category:"props"},{propertyName:"secureTextEntry",type:"boolean",title:"Password Input",value:{defaultValue:!1},category:"props"},{propertyName:"selectTextOnFocus",type:"boolean",title:"Select text on focus",value:{defaultValue:!1},category:"props"}]}]},Lt=function(){function e(){this.name="TextInputRenderer"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addComponent("textInput",wt,bt)},t.deactivate=function(){},e}(),Et=["layout","children","props","style","visible"],Dt=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(Et,this.onUpdate),this.props.layer.setDomRef(this._ref?this._ref:this)},i.componentWillUnmount=function(){this.props.layer.off(Et,this.onUpdate)},i.componentDidUpdate=function(e){e.layer.off(Et,this.onUpdate),this.props.layer.on(Et,this.onUpdate),this.props.layer.setDomRef(this._ref?this._ref:this)},i.render=function(){var e=this,n=this.props.layer,i=Z({},n.props.getAll()),a=i.id;delete i.id;var r=n.rotation?"rotate("+n.rotation+"deg)":void 0,s=Z({},n.style.getAll(),n.layout.getAll(),{transform:r}),l=o.get(i,"source.uri",void 0),c=n.props.get("blobURL")?n.props.get("blobURL"):l||void 0;if(this.maskPath){var u=Se(6);return t.createElement(p,{id:a,style:s,key:n.id,viewBox:i.viewBox,preserveAspectRatio:"none",ref:function(t){e._ref=t}},t.createElement(h.Defs,null,t.createElement(h.Mask,{id:u,x:"0",y:"0"},t.createElement(h.Path,{fill:"white",d:this.maskPath}))),t.createElement(h.Image,{x:i.svgDims.x,y:i.svgDims.y,width:i.svgDims.width,height:i.svgDims.height,href:c,preserveAspectRatio:"none",mask:"url(#"+u+")"}))}return"center"===i.resizeMode?t.createElement("img",Object.assign({ref:function(t){e._ref=t},src:c},i,{style:Z({},s,{objectFit:"none"}),id:a})):t.createElement(d.Image,Object.assign({},i,{style:s,source:{uri:c},resizeMode:i.resizeMode?i.resizeMode:void 0,nativeID:a}))},j(n,[{key:"maskPath",get:function(){var e=this.props.layer,t=e.props.get("mask");return t?v.generateSVGPath(t||[],1,!0,e.props.get("viewBox")):""}}]),n}(t.PureComponent),St={version:"0.0.1",template:{type:"image",import:{layerName:"Image",packageName:"native",isDefaultImport:!1,asName:""},locked:!1,template:{centerVertical:!1,centerHorizontal:!1},layout:{top:50,left:50,width:200,height:200,position:"absolute"},style:{},props:{source:{uri:""},resizeMode:"contain"},children:[]},thumbnail:"",name:"Image",controlsProperty:[{type:"AlignmentEditor",title:"Alignment Editor",value:{},showForMultiple:!0},{type:"OrientationEditor",title:"Orientation Editor",value:{},showForMultiple:!0},{type:"ResizingTypeEditor",title:"ResizingType Editor",value:{}},{type:"group",title:"Styling",value:{},properties:[{propertyName:"opacity",type:"range",title:"Opacity",value:{defaultValue:1,min:0,max:1},category:"style"},{propertyName:"backgroundColor",type:"color",title:"Fill",value:{defaultValue:"#fff"},additionalOptions:{showGradient:!1},category:"style"},{type:"BorderWidthEditor",title:"BorderWidth Editor",value:{defaultValue:1}},{type:"BorderRadiusEditor",title:"BorderRadius Editor",value:{}},{type:"AccessibilityLabel",title:"Accessibility Label",value:{}}]},{type:"group",title:"Image",value:{},properties:[{type:"ImageEditor",title:"Image",value:{}}]},{type:"group",title:"Layout",value:{},properties:[{type:"FlexboxEditor",title:"Flexbox Editor",value:{}},{type:"MarginPaddingEditor",title:"",value:{}}]}]},Ct=function(){function e(){this.name="ImageRenderer"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addComponent("image",Dt,St)},t.deactivate=function(){},e}(),Mt=["layout","children","props","style","visible"],Pt=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(Mt,this.onUpdate),this.props.layer.setDomRef(this)},i.componentWillUnmount=function(){this.props.layer.off(Mt,this.onUpdate)},i.componentDidUpdate=function(e){e.layer.off(Mt,this.onUpdate),this.props.layer.on(Mt,this.onUpdate),this.props.layer.setDomRef(this)},i.render=function(){var e=this.props.layer,n=Z({},e.props.getAll()),i=n.id;delete n.id;var a=e.rotation?"rotate("+e.rotation+"deg)":void 0,r=Z({},e.style.getAll(),e.layout.getAll(),{transform:a});delete r.backgroundImage;var s=e.style.get("gradient")||{},l=e.props.get("mask"),d=Se(6),c=Se(6);return t.createElement(p,{id:i,style:r,viewBox:n.viewBox,preserveAspectRatio:"none"},!o.isEmpty(s)||l&&!o.isEmpty(l)?t.createElement(h.Defs,null,l&&!o.isEmpty(l)&&t.createElement(h.Mask,{id:d,x:"0",y:"0"},t.createElement(h.Path,{fill:"white",d:this.maskPath})),!o.isEmpty(s)&&t.createElement(h.LinearGradient,{id:c,x1:s.from.x,y1:s.from.y,x2:s.to.x,y2:s.to.y},s.stops.map((function(e,n){return t.createElement(h.Stop,{key:"gradient-"+s.id+"-stop-"+n,offset:e.offset,stopColor:e.stopColor})})))):null,t.createElement(h.Path,{stroke:n.stroke,fill:o.isEmpty(s)?n.fill:"url(#"+c+")",strokeWidth:n.strokeWidth,fillOpacity:n.fillOpacity,strokeOpacity:n.strokeOpacity,clipPath:n.clipPath,d:this.svgPath,mask:l&&!o.isEmpty(l)?"url(#"+d+")":void 0}))},j(n,[{key:"svgPath",get:function(){var e=this.props.layer.props.getAll();return v.generateSVGPath(e.points,e.strokeWidth,e.isClosed,e.viewBox)}},{key:"maskPath",get:function(){var e=this.props.layer,t=e.props.get("mask");return t?v.generateSVGPath(t||[],1,!0,e.props.get("viewBox")):""}}]),n}(t.PureComponent),Ft={version:"0.0.1",template:{type:"path",children:[],import:{layerName:"Path",packageName:"react-native-svg",isDefaultImport:!1,asName:""},locked:!1,template:{centerVertical:!1,centerHorizontal:!1},layout:{top:50,left:50,width:50,height:50,position:"absolute"},style:{},props:{points:[],isClosed:!0,strokeWidth:0,stroke:"rgba(230, 230, 230,1)",fill:"rgba(230, 230, 230,1)"}},thumbnail:"",name:"Path",controlsProperty:[{type:"AlignmentEditor",title:"Alignment Editor",value:{},showForMultiple:!0},{type:"OrientationEditor",title:"Orientation Editor",value:{},showForMultiple:!0},{type:"group",title:"Styling",value:{},properties:[{propertyName:"opacity",type:"range",title:"Opacity",value:{defaultValue:1,min:0,max:1},category:"style"},{type:"PathCurveTypeEditor",title:"Point Mode",value:{}},{propertyName:"fill",type:"simpleColor",title:"Fill",value:{defaultValue:"#fff"},category:"props"},{propertyName:"stroke",type:"simpleColor",title:"Stroke",value:{defaultValue:"#fff"},category:"props"},{propertyName:"strokeWidth",type:"range",title:"Stroke Width",value:{defaultValue:1,min:0,max:100},category:"props"}]}]},Rt=function(){function e(){this.name="PathRenderer"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addComponent("path",Pt,Ft)},t.deactivate=function(){},e}(),Tt={EntypoIcon:g,AntDesignIcon:y,EvilIconsIcon:f,FeatherIcon:m,FontAwesomeIcon:x,FoundationIcon:w,IoniconsIcon:b,MaterialCommunityIconsIcon:L,MaterialIconsIcon:E,OcticonsIcon:D,SimpleLineIconsIcon:S,ZocialIcon:C},At={EntypoFont:M,AntDesignFont:P,EvilIconsFont:F,FeatherFont:R,FontAwesomeFont:T,FoundationFont:A,IoniconsFont:N,MaterialCommunityIconsFont:B,MaterialIconsFont:k,OcticonsFont:O,SimpleLineIconsFont:z,ZocialFont:I},Nt=["layout","children","props","style","innerText","visible"],Bt=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(Nt,this.onUpdate),this.props.layer.setDomRef(this._ref),this.props.layer.dispatchEvent("domDidMount",new vt("domDidMount",this))},i.componentWillUnmount=function(){this.props.layer.off(Nt,this.onUpdate)},i.componentWillUpdate=function(){this.props.layer.dispatchEvent("domWillUpdate",new vt("domWillUpdate",this))},i.componentDidUpdate=function(e){e.layer.off(Nt,this.onUpdate),this.props.layer.on(Nt,this.onUpdate),this.props.layer.setDomRef(this._ref),this.props.layer.dispatchEvent("domDidUpdate",new vt("domDidUpdate",this))},i.render=function(){var e=this,n=this.props.layer,i=Z({},n.props.getAll()),a=i.id;delete i.id;var r=Z({},n.style.getAll(),n.layout.getAll());return delete(r=Z({},r,{overflow:r.overflow?r.overflow:"hidden",height:"fit-content",width:"fit-content"})).fontPostscriptName,t.createElement(Tt[(i.type?i.type:"Entypo")+"Icon"]||Tt.EntypoIcon,Object.assign({ref:function(t){e._ref=t}},i,{style:r,nativeID:a}))},n}(t.PureComponent),kt={version:"0.0.1",template:{type:"icon",children:[],import:{layerName:"Icon",packageName:"@builderx/icons",isDefaultImport:!0,asName:""},locked:!1,template:{centerVertical:!1,centerHorizontal:!1},layout:{top:150,left:150,position:"absolute"},style:{color:"rgba(128,128,128,1)",fontSize:40},props:{type:"MaterialCommunityIcons",name:"home"}},thumbnail:"",name:"Icon",controlsProperty:[{type:"AlignmentEditor",title:"Alignment Editor",value:{},showForMultiple:!0},{type:"OrientationEditor",title:"Orientation Editor",value:{},showForMultiple:!0,additionalOptions:{hideSize:!0}},{type:"ResizingTypeEditor",title:"ResizingType Editor",value:{},additionalOptions:{hideSize:!0}},{type:"IconEditor",title:"Icon Editor",value:{}},{type:"group",title:"Layout",value:{},properties:[{type:"FlexboxEditor",title:"Flexbox Editor",value:{}},{type:"MarginPaddingEditor",title:"MarginPadding Editor",value:{}}]},{type:"group",title:"Styling",value:{},properties:[{propertyName:"color",type:"color",title:"Color",value:{defaultValue:"rgba(128,128,128,1)"},category:"style"},{propertyName:"fontSize",type:"range",title:"Size",value:{defaultValue:40,min:0,max:200},category:"style"},{propertyName:"opacity",type:"range",title:"Opacity",value:{defaultValue:1,min:0,max:1},category:"style"}]}]},Ot=function(){function e(){this.name="IconRendererPlugin"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addComponent("icon",Bt,kt)},t.deactivate=function(){},e}(),zt=["layout","props","style","visible"],It=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(zt,this.onUpdate),this.props.layer.setDomRef(this._ref),this.props.layer.dispatchEvent("domDidMount",new vt("domDidMount",this))},i.componentDidUpdate=function(e){e.layer.off(zt,this.onUpdate),this.props.layer.on(zt,this.onUpdate),this.props.layer.setDomRef(this._ref),this.props.layer.dispatchEvent("domDidUpdate",new vt("domDidUpdate",this))},i.componentWillUnmount=function(){this.props.layer.off(zt,this.onUpdate)},i.render=function(){var e=this,n=this.props.layer,i=Z({},n.style.getAll(),n.layout.getAll()),a=Z({},n.props.getAll()),r=a.id;return delete a.id,t.createElement(d.Switch,Object.assign({ref:function(t){e._ref=t}},a,{activeThumbColor:a.thumbTintColor,trackColor:{true:a.onTintColor,false:a.tintColor},style:Z({},i,{width:void 0,height:void 0}),nativeID:r}))},n}(t.PureComponent);function Wt(){var e=Q(["\n  cursor: ",";\n  -webkit-appearance: none;\n  font-size: 5px;\n  position: relative;\n  display: inline-block;\n  width: 9em;\n  height: 4.6em;\n  line-height: 4.6em;\n  border-radius: 2.3em;\n  margin: 0;\n  padding: 0;\n  transform: ",";\n  box-shadow: ",";\n  outline: 1px solid transparent !important;\n  border: none;\n  background: transparent;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n  :checked {\n    content: '';\n    box-shadow: ",";\n    padding-left: 4.4em;\n  }\n  :before {\n    content: '';\n    display: inline-block;\n    height: 4.2em;\n    width: 4.2em;\n    margin: 0.2em 0 0 0.2em;\n    background-color: ",";\n    border-radius: 2.1em;\n    box-shadow: 0 0.2em 0.4em 0 rgba(0, 0, 0, 0.2),\n      0 0 0.1em 0.1em rgba(0, 0, 0, 0.1);\n  }\n"]);return Wt=function(){return e},e}var Vt=V.input(Wt(),(function(e){return void 0!==e.disabled&&e.disabled?"not-allowed":"pointer"}),(function(e){return e.style.transform?"rotate("+e.style.transform[0].rotate+")":"rotate(0deg);"}),(function(e){return e.disabled?"inset 0 0 0 0.2em #bbb;":e.tintColor?"inset 0 0 0 0.2em "+e.tintColor:"inset 0 0 0 0.2em #ddd;"}),(function(e){return e.disabled?"inset 0 0 0 2.62857em #ddd !important;":e.onTintColor?"inset 0 0 0 2.62857em "+e.onTintColor+"!important;":"inset 0 0 0 2.62857em #00c169 !important;"}),(function(e){return e.disabled?"#ccc":e.thumbTintColor?e.thumbTintColor:"#fff"})),Ut=["layout","props","style","visible"],Ht=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(Ut,this.onUpdate),this.props.layer.setDomRef(this._ref),this.props.layer.dispatchEvent("domDidMount",new vt("domDidMount",this))},i.componentWillUnmount=function(){this.props.layer.off(Ut,this.onUpdate)},i.componentDidUpdate=function(e){e.layer.off(Ut,this.onUpdate),this.props.layer.on(Ut,this.onUpdate),this.props.layer.setDomRef(this._ref),this.props.layer.dispatchEvent("domDidUpdate",new vt("domDidUpdate",this))},i.render=function(){var e=this,n=this.props.layer,i=Z({},n.style.getAll(),n.layout.getAll()),a=Z({},n.props.getAll()),r=a.id;return delete a.id,t.createElement(Vt,Object.assign({ref:function(t){e._ref=t},type:"checkbox"},a,{checked:a.value,onChange:function(){},style:Z({},i,{width:void 0,height:void 0}),nativeID:r}))},n}(t.PureComponent),Yt=["layout","props","style","visible"],_t=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(Yt,this.onUpdate)},i.componentWillUnmount=function(){this.props.layer.off(Yt,this.onUpdate)},i.componentDidUpdate=function(e){e.layer.off(Yt,this.onUpdate),this.props.layer.on(Yt,this.onUpdate)},i.render=function(){var e="iOS",n=this.props.layer.executeFunction("getDeviceData");return n&&(e=n.platform),t.createElement("Android"===e?It:Ht,Object.assign({},this.props))},n}(t.PureComponent),Xt={version:"0.0.1",template:{type:"switch",import:{layerName:"Switch",packageName:"react-native",isDefaultImport:!1,asName:""},locked:!1,template:{centerVertical:!1,centerHorizontal:!1},layout:{position:"absolute",top:50,left:50},style:{},props:{value:!0},children:[]},thumbnail:"",name:"Switch",controlsProperty:[{type:"AlignmentEditor",title:"Alignment Editor",value:{},showForMultiple:!0},{type:"OrientationEditor",title:"Orientation Editor",value:{},showForMultiple:!0,additionalOptions:{hideSize:!0}},{type:"ResizingTypeEditor",title:"ResizingType Editor",value:{},additionalOptions:{hideSize:!0}},{type:"group",title:"Styling",value:{},properties:[{propertyName:"opacity",type:"range",title:"Opacity",value:{defaultValue:1,min:0,max:1},category:"style"}]},{type:"group",title:"Switch",value:{},properties:[{propertyName:"value",category:"props",type:"boolean",title:"Value",value:{defaultValue:!1}},{propertyName:"disabled",category:"props",type:"boolean",title:"Disabled",value:{defaultValue:!1}},{propertyName:"thumbTintColor",type:"bareColor",title:"Grip",value:{defaultValue:"#fff"},category:"props"},{propertyName:"onTintColor",type:"bareColor",title:"Turned On",value:{defaultValue:"#fff"},category:"props"},{propertyName:"tintColor",type:"bareColor",title:"Turned Off",value:{defaultValue:"#fff"},category:"props"}]}]},Gt=function(){function e(){this.name="IOSSwitchRenderer"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addComponent("switch",_t,Xt)},t.deactivate=function(){},e}(),jt=["layout","props","style","visible"],Zt=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(jt,this.onUpdate),this.props.layer.setDomRef(this._ref),this.props.layer.dispatchEvent("domDidMount",new vt("domDidMount",this))},i.componentDidUpdate=function(e){e.layer.off(jt,this.onUpdate),this.props.layer.on(jt,this.onUpdate),this.props.layer.setDomRef(this._ref),this.props.layer.dispatchEvent("domDidUpdate",new vt("domDidUpdate",this))},i.componentWillUnmount=function(){this.props.layer.off(jt,this.onUpdate)},i.render=function(){var e=this,n=this.props.layer,i=Z({},n.props.getAll()),a=i.id;delete i.id;var r=Z({},n.style.getAll(),n.layout.getAll());return t.createElement(d.ActivityIndicator,Object.assign({ref:function(t){e._ref=t}},i,{style:Z({},r,{height:"large"===i.size?40:22,width:"large"===i.size?39:22}),nativeID:a}))},n}(t.PureComponent);function qt(){var e=Q(["\n  position: relative;\n  display: inline-block;\n"]);return qt=function(){return e},e}function Jt(){var e=Q(["\n  width: 6%;\n  height: 16%;\n  background: #000;\n  position: absolute;\n  left: 49%;\n  top: 43%;\n  opacity: 0;\n  -webkit-border-radius: 50px;\n  -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);\n  -webkit-animation: "," 1s linear infinite;\n  background: ",";\n"]);return Jt=function(){return e},e}function Kt(){var e=Q(["\nfrom {\n  opacity: 1;\n}\nto {\n  opacitfy: 0.25;\n}\n"]);return Kt=function(){return e},e}var Qt=W.keyframes(Kt()),$t=V.div(Jt(),Qt,(function(e){return e.color?e.color:"#353940"})),en=V.div(qt()),tn=t.forwardRef((function(e,n){var i=e.size,a=e.color,r=J(e,["size","color"]);return t.createElement(en,Object.assign({ref:n,style:{height:"large"===i?40:22,width:"large"===i?40:22}},r),t.createElement($t,{color:a,style:{transform:"rotate(0deg) translate(0, -130%)",animationDelay:"0s"}}),t.createElement($t,{color:a,style:{transform:"rotate(30deg) translate(0, -130%)",animationDelay:"-0.9167s"}}),t.createElement($t,{color:a,style:{transform:"rotate(60deg) translate(0, -130%)",animationDelay:"-0.833s"}}),t.createElement($t,{color:a,style:{transform:"rotate(90deg) translate(0, -130%)",animationDelay:"-0.7497s"}}),t.createElement($t,{color:a,style:{transform:"rotate(120deg) translate(0, -130%)",animationDelay:"-0.667s"}}),t.createElement($t,{color:a,style:{transform:"rotate(150deg) translate(0, -130%)",animationDelay:"-0.5837s"}}),t.createElement($t,{color:a,style:{transform:"rotate(180deg) translate(0, -130%)",animationDelay:"-0.5s"}}),t.createElement($t,{color:a,style:{transform:"rotate(210deg) translate(0, -130%)",animationDelay:"-0.4167s"}}),t.createElement($t,{color:a,style:{transform:"rotate(240deg) translate(0, -130%)",animationDelay:"-0.333s"}}),t.createElement($t,{color:a,style:{transform:"rotate(270deg) translate(0, -130%)",animationDelay:"-0.2497s"}}),t.createElement($t,{color:a,style:{transform:"rotate(300deg) translate(0, -130%)",animationDelay:"-0.167s"}}),t.createElement($t,{color:a,style:{transform:"rotate(330deg) translate(0, -130%)",animationDelay:"-0.0833s"}}))})),nn=["layout","props","style","visible"],an=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(nn,this.onUpdate),this.props.layer.setDomRef(this._ref),this.props.layer.dispatchEvent("domDidMount",new vt("domDidMount",this))},i.componentDidUpdate=function(e){e.layer.off(nn,this.onUpdate),this.props.layer.on(nn,this.onUpdate),this.props.layer.setDomRef(this._ref),this.props.layer.dispatchEvent("domDidUpdate",new vt("domDidUpdate",this))},i.componentWillUnmount=function(){this.props.layer.off(nn,this.onUpdate)},i.render=function(){var e=this,n=this.props.layer,i=Z({},n.props.getAll()),a=i.id;delete i.id;var r=Z({},n.style.getAll(),n.layout.getAll());return t.createElement(tn,Object.assign({ref:function(t){e._ref=t}},i,{color:i.color,style:Z({},r,{height:"large"===i.size?40:22,width:"large"===i.size?39:22}),className:a}))},n}(t.PureComponent),rn=["layout","props","style","visible"],on=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(rn,this.onUpdate)},i.componentWillUnmount=function(){this.props.layer.off(rn,this.onUpdate)},i.componentDidUpdate=function(e){e.layer.off(rn,this.onUpdate),this.props.layer.on(rn,this.onUpdate)},i.render=function(){var e="iOS",n=this.props.layer.executeFunction("getDeviceData");return n&&(e=n.platform),t.createElement("Android"===e?Zt:an,Object.assign({},this.props))},n}(t.PureComponent),sn={version:"0.0.1",template:{type:"activityIndicator",import:{layerName:"ActivityIndicator",packageName:"react-native",isDefaultImport:!1,asName:""},locked:!1,template:{centerVertical:!1,centerHorizontal:!1},layout:{position:"absolute",top:50,left:50},style:{},props:{},children:[]},thumbnail:"",name:"ActivityIndicator",controlsProperty:[{type:"AlignmentEditor",title:"Alignment Editor",value:{},showForMultiple:!0},{type:"OrientationEditor",title:"Orientation Editor",value:{},showForMultiple:!0,additionalOptions:{hideSize:!0}},{type:"ResizingTypeEditor",title:"ResizingType Editor",value:{},additionalOptions:{hideSize:!0}},{type:"group",title:"Activity Indicator",value:{},properties:[{propertyName:"color",type:"simpleColor",title:"Color",value:{defaultValue:"#fff"},category:"props"},{propertyName:"size",type:"enum",title:"Size",value:{options:["small","large"],defaultValue:"small"},category:"props"},{propertyName:"opacity",type:"range",title:"Opacity",value:{defaultValue:1,min:0,max:1},category:"style"}]}]},ln=function(){function e(){this.name="ActivityIndicatorRenderer"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addComponent("activityIndicator",on,sn)},t.deactivate=function(){},e}(),dn=["layout","children","props","style","visible","gradient"],cn=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(dn,this.onUpdate),this.props.layer.setDomRef(this)},i.componentWillUnmount=function(){this.props.layer.off(dn,this.onUpdate)},i.componentDidUpdate=function(e){e.layer.off(dn,this.onUpdate),this.props.layer.on(dn,this.onUpdate),this.props.layer.setDomRef(this)},i.render=function(){var e=this,n=this.props.layer,i=Z({},n.props.getAll()),a=i.id;delete i.id;var r=n.rotation?"rotate("+n.rotation+"deg)":void 0,o=Z({},n.style.getAll(),n.layout.getAll(),{transform:r}),s=Number(U(i,"strokeWidth",0)),l={cx:i.cx,cy:i.cy,rx:i.rx,ry:i.ry,fill:U(i,"fill","transparent"),fillOpacity:i.fillOpacity,strokeOpacity:i.strokeOpacity,stroke:i.stroke,strokeWidth:s};return t.createElement(p,{ref:function(t){e._ref=t},getRef:function(e){console.log(e,"ref here")},id:a,style:o,viewBox:i.viewBox,preserveAspectRatio:"none"},t.createElement(h.Ellipse,Object.assign({},l)))},n}(t.PureComponent),un={version:"0.0.1",template:{type:"ellipse",import:{layerName:"Ellipse",packageName:"react-native-svg",isDefaultImport:!1,asName:""},locked:!1,template:{centerVertical:!1,centerHorizontal:!1},layout:{top:50,left:50,width:100,height:100,position:"absolute"},style:{},props:{stroke:"rgba(230, 230, 230,1)",strokeWidth:0,fill:"rgba(230, 230, 230,1)"},children:[]},thumbnail:"",name:"Ellipse",controlsProperty:[{type:"AlignmentEditor",title:"Alignment Editor",value:{},showForMultiple:!0},{type:"OrientationEditor",title:"Orientation Editor",value:{},showForMultiple:!0},{type:"group",title:"Styling",value:{},properties:[{propertyName:"opacity",type:"range",title:"Opacity",value:{defaultValue:1,min:0,max:1},category:"style"},{propertyName:"fill",type:"simpleColor",title:"Fill",value:{defaultValue:"#fff"},additionalOptions:{showGradient:!1},category:"props"},{propertyName:"stroke",type:"simpleColor",title:"Stroke",value:{defaultValue:"#000"},category:"props"},{propertyName:"strokeWidth",type:"range",title:"Width",value:{defaultValue:1,min:0,max:100},category:"props"}]},{type:"group",title:"Layout",value:{},properties:[{type:"FlexboxEditor",title:"Flexbox Editor",value:{}},{type:"MarginPaddingEditor",title:"",value:{}}]}]},hn=function(){function e(){this.name="EllipseRenderer"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addComponent("ellipse",cn,un)},t.deactivate=function(){},e}();function pn(){var e=Q(["\n  height: 2px;\n  border-radius: 2px;\n  position: relative;\n  top: -2px;\n  -webkit-appearance: none;\n\n  background-image: ",";\n"]);return pn=function(){return e},e}function vn(){var e=Q(["\n  webkit-appearance: none;\n  background-color: #666;\n  display: block;\n  width: 28px;\n  height: 28px;\n  // z-index:2;\n  border-radius: 50%;\n  background: #fff;\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  position: relative;\n  top: -12.5px;\n\n  left: ",";\n"]);return vn=function(){return e},e}function gn(){var e=Q(["\n  height: 2px;\n  border-radius: 2px;\n  position: relative;\n  -webkit-appearance: none;\n\n  background-image: ",";\n"]);return gn=function(){return e},e}function yn(){var e=Q(["\n  -webkit-appearance: none;\n  background-color: #666;\n  width: 14px;\n  height: 14px;\n  // z-index:2;\n  border-radius: 50%;\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  position: relative;\n  top: -5.5px;\n  background: ",";\n  left: ",";\n  box-shadow: ",";\n"]);return yn=function(){return e},e}function fn(){var e=Q([""]);return fn=function(){return e},e}var mn=V.div(fn()),xn=V.div(yn(),(function(e){return e.disabled?"#666":e.thumbTintColor||"#00897b"}),(function(e){var t=e.value;return t?t+"px":"0px"}),(function(e){return e.disabled?"0px 2px 4px transparent":"0px 2px 4px rgba(0,0,0,.2)"})),wn=V.div(gn(),(function(e){var t=e.value;return t?"-webkit-gradient(\n              linear,\n              left top,\n              right top,\n              color-stop("+t+", "+(e.minimumTrackTintColor||"#00897b")+"),\n              color-stop("+t+", "+(e.maximumTrackTintColor||"#b7b7b7")+"))":"-webkit-gradient(\n              linear,\n              left top,\n              right top,\n              color-stop(0, #00897b),\n              color-stop(0, #b7b7b7))"})),bn=V.div(vn(),(function(e){var t=e.value;return t?t+"px":"0px"})),Ln=V.div(pn(),(function(e){var t=e.value;return t?"-webkit-gradient(\n          linear,\n          left top,\n          right top,\n          color-stop("+t+", "+(e.minimumTrackTintColor||"#007aff")+"),\n          color-stop("+t+", "+(e.maximumTrackTintColor||"#b7b7b7")+"))":"-webkit-gradient(\n          linear,\n          left top,\n          right top,\n          color-stop(0, #007aff),\n          color-stop(0, #b7b7b7))"})),En=function(e){function n(){return e.apply(this,arguments)||this}return q(n,e),n.prototype.render=function(){var e="Android"===this.props.platform,n=e?wn:Ln,i=e?xn:bn,a=o.isNil(this.props.value)?0:this.props.value,r=o.isNil(this.props.maximumValue)?100:this.props.maximumValue,s=this.props.minimumValue||0,l=r-s,d=a-s>=0?a-s:0,c=d/l*((this.props.style.width||0)-(e?12:28));return t.createElement(mn,{style:Z({},this.props.style,{paddingTop:this.props.style.height?this.props.style.height/2:0}),className:this.props.className?this.props.className:void 0},t.createElement(n,{style:{width:"100%",height:2,opacity:this.props.disabled?e?.7:.5:1},value:d/l,minimumTrackTintColor:this.props.minimumTrackTintColor,maximumTrackTintColor:this.props.maximumTrackTintColor},t.createElement(i,{value:c,thumbTintColor:e?this.props.thumbTintColor:void 0})))},n}(t.PureComponent),Dn=["layout","props","style","visible"],Sn=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(Dn,this.onUpdate),this.props.layer.setDomRef(this._ref)},i.componentDidUpdate=function(e){e.layer.off(Dn,this.onUpdate),this.props.layer.on(Dn,this.onUpdate),this.props.layer.setDomRef(this._ref)},i.componentWillUnmount=function(){this.props.layer.off(Dn,this.onUpdate)},i.render=function(){var e=this,n=this.props.layer,i=Z({},n.props.getAll()),a=Z({},n.style.getAll(),n.layout.getAll(),{width:n.getBoundingClientRect().width,height:n.getBoundingClientRect().height}),r="iOS",o=this.props.layer.executeFunction("getDeviceData");return o&&(r=o.platform),t.createElement(En,Object.assign({ref:function(t){e._ref=t}},i,{platform:r,style:a}))},n}(t.PureComponent),Cn={version:"0.0.1",template:{type:"slider",import:{layerName:"Slider",packageName:"react-native",isDefaultImport:!1,asName:""},locked:!1,template:{centerVertical:!1,centerHorizontal:!1},layout:{position:"absolute",top:50,left:50,height:50,width:50},style:{},props:{value:50},children:[]},thumbnail:"",name:"Slider",controlsProperty:[{type:"AlignmentEditor",title:"Alignment Editor",value:{},showForMultiple:!0},{type:"OrientationEditor",title:"Orientation Editor",value:{},showForMultiple:!0},{type:"ResizingTypeEditor",title:"ResizingType Editor",value:{}},{type:"group",title:"Styling",value:{},properties:[{propertyName:"opacity",type:"range",title:"Opacity",value:{defaultValue:1,min:0,max:1},category:"style"}]},{type:"group",title:"Slider",value:{},properties:[{propertyName:"disabled",type:"boolean",title:"Disabled",value:{defaultValue:!1},category:"props"},{propertyName:"value",type:"range",title:"Value",value:{defaultValue:0,min:0,max:100},category:"props"},{propertyName:"minimumValue",type:"number",title:"Minimum Value",value:{defaultValue:0},category:"props"},{propertyName:"maximumValue",type:"number",title:"Maximum Value",value:{defaultValue:100},category:"props"},{propertyName:"step",type:"number",title:"Step",value:{defaultValue:0},category:"props"},{propertyName:"minimumTrackTintColor",type:"bareColor",title:"Minimum Track",value:{defaultValue:"#000"},category:"props"},{propertyName:"maximumTrackTintColor",type:"bareColor",title:"Maximum Track",value:{defaultValue:"#000"},category:"props"},{propertyName:"thumbTintColor",type:"bareColor",title:"Thumb",value:{defaultValue:"#000"},category:"props"}]}]},Mn=function(){function e(){this.name="SliderRenderer"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addComponent("slider",Sn,Cn)},t.deactivate=function(){},e}(),Pn=["layout","children","props","style","visible"],Fn=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).onUpdate=function(){t.forceUpdate()},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(Pn,this.onUpdate),this.props.layer.setDomRef(this._ref)},i.componentWillUnmount=function(){this.props.layer.off(Pn,this.onUpdate)},i.componentDidUpdate=function(e){e.layer.off(Pn,this.onUpdate),this.props.layer.on(Pn,this.onUpdate),this.props.layer.setDomRef(this._ref)},i.render=function(){var e=this,n=this.props.layer,i=Z({},n.props.getAll()),a=i.id;delete i.id;var r=Z({},n.style.getAll(),n.layout.getAll()),o=i.customMapStyle?i.customMapStyle:"Standard",s=n.getCanvas();try{return t.createElement(d.Image,Object.assign({ref:function(t){e._ref=t}},i,{style:Z({resizeMode:"cover"},r),source:{uri:s.assetURL+"/"+o+".png"},nativeID:a}))}catch(n){return t.createElement(d.Image,Object.assign({ref:function(t){e._ref=t}},i,{style:Z({resizeMode:"cover"},r),source:{uri:s.assetURL+"/Standard.png"},nativeID:a}))}},n}(t.PureComponent),Rn={version:"0.0.1",template:{type:"mapView",import:{layerName:"MapView",packageName:"expo",isDefaultImport:!1,asName:""},locked:!1,template:{centerVertical:!1,centerHorizontal:!1},layout:{position:"absolute",top:50,left:50},style:{},props:{provider:"MapView.PROVIDER_GOOGLE",initialRegion:{latitude:37.78825,longitude:-122.4324,latitudeDelta:.0922,longitudeDelta:.0421},customMapStyle:"Standard"},children:[]},thumbnail:"",name:"MapView",controlsProperty:[{type:"AlignmentEditor",title:"Alignment Editor",value:{},showForMultiple:!0},{type:"OrientationEditor",title:"Orientation Editor",value:{},showForMultiple:!0},{type:"ResizingTypeEditor",title:"ResizingType Editor",value:{}},{type:"group",title:"Styling",value:{},properties:[{propertyName:"opacity",type:"range",title:"Opacity",value:{defaultValue:1,min:0,max:1},category:"style"},{propertyName:"customMapStyle",title:"Map View Style",type:"enum",value:{options:["Standard","Silver","Retro","Dark","Night","Aubergine"],defaultValue:"Standard"},category:"props"}]}]},Tn=function(){function e(){this.name="MapViewRenderer"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addComponent("mapView",Fn,Rn)},t.deactivate=function(){},e}(),An=function(){function e(){this.name="PopoverMenu"}var n=e.prototype;return n.init=function(e){this.canvas=e,this.dispose=null},n.showMenu=function(e,n,a){this.dispose(),a.originalEvent.preventDefault(),this.containerElement=document.createElement("div"),this.dispose=this.canvas.addDomToViewport(this.containerElement);var r=Se(4),o=t.createElement(H.MainMenu,{menuId:"menuId-"+r,data:n});i.render(o,this.containerElement),H.contextMenu.show({id:"menuId-"+r,event:a.originalEvent})},n.activate=function(){this.containerElement=document.createElement("div"),this.dispose=this.canvas.addDomToViewport(this.containerElement),this.canvas.addFunction("showPopoverMenu",this.showMenu.bind(this))},n.deactivate=function(){this.canvas.removeFunction("showPopoverMenu"),this.dispose()},e}();function Nn(e,t,n,i){var a={x:[],y:[]};return i&&e.snap&&e.siblingSnap?(i&&o.forEach(i.children,(function(e){try{if(n.includes(e))return Promise.resolve();var i=function(e,t){var n=[],i=[],a=e.canvas.getBoundingBoxWRTParent([t],!0),r={value:a.x+a.width,rootValue:a.rootX+a.width,minY:void 0,maxY:void 0,snapTo:{center:!0,start:!0,end:!0}},o={value:a.x+a.width/2,rootValue:a.rootX+a.width/2,minY:void 0,maxY:void 0,snapTo:{center:!0,start:!0,end:!0}},s={value:a.y,rootValue:a.rootY,minX:void 0,maxX:void 0,snapTo:{center:!0,start:!0,end:!0}},l={value:a.y+a.height,rootValue:a.rootY+a.height,minX:void 0,maxX:void 0,snapTo:{center:!0,start:!0,end:!0}},d={value:a.y+a.height/2,rootValue:a.rootY+a.height/2,minX:void 0,maxX:void 0,snapTo:{center:!0,start:!0,end:!0}};return n.push({value:a.x,rootValue:a.rootX,minY:void 0,maxY:void 0,snapTo:{center:!0,start:!0,end:!0}}),n.push(r),n.push(o),i.push(s),i.push(l),i.push(d),{x:n,y:i}}(t,e);return a.x=a.x.concat(i.x),a.y=a.y.concat(i.y),Promise.resolve()}catch(e){return Promise.reject(e)}})),a):{x:[],y:[]}}function Bn(e,t,n){if(!n||0===n.length||!e.snap||!e.parentSnap)return{x:[],y:[]};var i=[],a=[],r=n[0].getBoundingClientRect(),o={value:r.width,rootValue:r.rootX+r.width,minY:void 0,maxY:void 0,snapTo:{center:!1,start:!1,end:!0}},s={value:r.width/2,rootValue:r.rootX+r.width/2,minY:void 0,maxY:void 0,snapTo:{center:!0,start:!0,end:!0}},l={value:0,rootValue:r.rootY,minX:void 0,maxX:void 0,snapTo:{center:!1,start:!0,end:!1}},d={value:r.height,rootValue:r.rootY+r.height,minX:void 0,maxX:void 0,snapTo:{center:!1,start:!1,end:!0}},c={value:r.height/2,rootValue:r.rootY+r.height/2,minX:void 0,maxX:void 0,snapTo:{center:!0,start:!0,end:!0}};return i.push({value:0,rootValue:r.rootX,minY:void 0,maxY:void 0,snapTo:{center:!1,start:!0,end:!1}}),i.push(o),i.push(s),a.push(l),a.push(d),a.push(c),{x:i,y:a}}function kn(e,t,n){return"x"===e?n.x-(t.x+t.width):n.y-(t.y+t.height)}function On(e,t,n){var i=0,a=t.getBoundingClientRect(),r=n.getBoundingClientRect();if("x"===e){if(a.x<r.x&&a.x+a.width>r.x)return-1;if(r.x<a.x&&r.x+r.width>a.x)return-1;i=a.x<r.x?kn("x",a,r):kn("x",r,a)}else{if(a.y<r.y&&a.y+a.height>r.y)return-1;if(r.y<a.y&&r.y+r.height>a.y)return-1;i=a.y<r.y?kn("y",a,r):kn("y",r,a)}return i}function zn(e,t,n){return"x"===e?!(n.rootY>t.rootY+t.height||t.rootY>n.rootY+n.height):"y"===e&&!(n.rootX>t.rootX+t.width||t.rootX>n.rootX+n.width)}function In(e,t,n){var i={min:0,max:0};return"y"===e?(i.min=t.rootX>n.rootX?t.rootX:n.rootX,i.max=t.rootX+t.width>n.rootX+n.width?n.rootX+n.width:t.rootX+t.width):(i.min=t.rootY>n.rootY?t.rootY:n.rootY,i.max=t.rootY+t.height>n.rootY+n.height?n.rootY+n.height:t.rootY+t.height),i}function Wn(e,t,n,i,a,r){o.find(e,(function(e){return e.value===t&&e.rootValue===n&&e.minY===i&&e.maxY===a}))||e.push({value:t,rootValue:n,minY:i,maxY:a,snapLines:{distance:r}})}function Vn(e,t,n,i,a,r){o.find(e,(function(e){return e.value===t&&e.rootValue===n&&e.minY===i&&e.maxY===a}))||e.push({value:t,rootValue:n,minX:i,maxX:a,snapLines:{distance:r}})}function Un(e,t,n){if(!n||0===n.length||!e.snap||!e.gutterSnap)return{x:[],y:[]};var i=n[0],a=[],r=[];if(!i.parent)return{x:[],y:[]};var o=i.parent;return o.children.forEach((function(e){n.includes(e)||o.children.forEach((function(t){if(e!==t&&!n.includes(t)){if(zn("x",e.getBoundingClientRect(),t.getBoundingClientRect())){var i=On("x",e,t);if(i>0){var s=function(e,t,n,i){var a=t[0].getBoundingClientRect(),r=t[1].getBoundingClientRect();return n.filter((function(e){return!t.includes(e)})).forEach((function(t){var n=t.getBoundingClientRect();if(zn("x",a,n)&&zn("x",r,n)){var o=n.x-i,s=n.rootX-i,l=n.rootY,d=n.rootY+n.height;Wn(e,n.x+n.width+i,n.rootX+n.width+i,l,d,i),Wn(e,o,s,l,d,i)}})),[]}(a,[e,t].concat(n),o.children,i);a.push.apply(a,s);var l=In("x",e.getBoundingClientRect(),t.getBoundingClientRect()),d=e.getBoundingClientRect(),c=t.getBoundingClientRect(),u=0,h=0,p=0,v=0;d.x+d.width>c.x+c.width?(u=d.x+d.width,h=d.rootX+d.width,p=c.x-i,v=c.rootX-i):(u=c.x+c.width,h=c.rootX+c.width,p=d.x-i,v=d.rootX-i),Wn(a,u+=i,h+=i,l.min,l.max,i),Wn(a,p,v,l.min,l.max,i)}}if(zn("y",e.getBoundingClientRect(),t.getBoundingClientRect())){var g=On("y",e,t);if(g>0){var y=function(e,t,n,i){var a=t[0].getBoundingClientRect(),r=t[1].getBoundingClientRect();return n.filter((function(e){return!t.includes(e)})).forEach((function(t){var n=t.getBoundingClientRect();if(zn("y",a,n)&&zn("y",r,n)){var o=n.y-i,s=n.rootY-i,l=n.rootX,d=n.rootX+n.width;Vn(e,n.y+n.height+i,n.rootY+n.height+i,l,d,i),Vn(e,o,s,l,d,i)}})),[]}(r,[e,t].concat(n),o.children,g);r.push.apply(r,y);var f=In("y",e.getBoundingClientRect(),t.getBoundingClientRect()),m=e.getBoundingClientRect(),x=t.getBoundingClientRect(),w=0,b=0,L=0,E=0;m.y+m.height>x.y+x.height?(w=m.y+m.height,b=m.rootY+m.height,L=x.y-g,E=x.rootY-g):(w=x.y+x.height,b=x.rootY+x.height,L=m.y-g,E=m.rootY-g),Vn(r,w+=g,b+=g,f.min,f.max,g),Vn(r,L,E,f.min,f.max,g)}}}}))})),{x:a,y:r}}function Hn(e,t,n,i,a){var r={coordinate:NaN,start:!1,center:!1,end:!1},o=t+e,s=(o=Math.round(o/n)*n)-t,l=t+i+e,d=(l=Math.round(l/n)*n)-i-t,c=s;return r.coordinate=o,r.start=!0,c=s,a?-1===a.indexOf("L")&&-1===a.indexOf("T")&&(r.coordinate=l,r.end=!0,c=d):Math.abs(e+t-o)>Math.abs(e+t+i-l)&&(r.coordinate=l,r.end=!0,c=d),{value:r.coordinate,rootValue:r.coordinate,snappedSide:r,snapType:"grid",delta:c}}function Yn(e,t,n,i,a,r,o,s,l){if(e.snap&&e.gridSnap){var d=t.canvas.executeFunction("getGridOffset"),c=t.canvas.executeFunction("getGridSize");return c||(c={x:20,y:20}),c?{x:Hn(i,n-d.x,c.x,o,l),y:Hn(r,a-d.y,c.y,s,l)}:{x:{value:n+i,rootValue:n+i},y:{value:a+r,rootValue:a+r}}}}function _n(e,t,n,i,a,r,s,l,d,c){void 0===r&&(r=[0,0]),void 0===s&&(s=[0,0]);var u={snappedSide:{x:void 0,y:void 0}},h=i[0],p=i[1];if(t){var v=function(e,t,n,i,a,r,s,l,d,c){var u=a.width,h=a.height,p=t.rulerSnapPoints.y,v=t.rulerSnapPoints.x,g=t.parentSnapPoints.x,y=t.parentSnapPoints.y,f=t.siblingSnapPoints.x,m=t.siblingSnapPoints.y,x=e.canvas.executeFunction("getSnapBound")/e.canvas.getZoom(),w=n[0]+i[0],b=n[1]+i[1],L=Xn(g,w,u,x),E=Xn(y,b,h,x);L.snapType="documentBounds",E.snapType="documentBounds",L.delta=L.value-n[0],E.delta=E.value-n[1];var D=Gn(f,w,u,x);D.snapType="sibling";var S=Gn(m,b,h,x);S.snapType="sibling",D.delta=D.value-n[0],S.delta=S.value-n[1];var C=jn(p,s[0]+r[0],u,x),M=jn(v,s[1]+r[1],h,x);C.snapType="ruler",M.snapType="ruler",C.delta=C.value-s[0],M.delta=M.value-s[1];var P=he.rotatePoint([C.delta,M.delta],360-l,[0,0]);C.delta=P[0],M.delta=P[1];var F={delta:0,snappedSide:{coordinate:NaN,start:!0,center:!1,end:!0}},R={delta:0,snappedSide:{coordinate:NaN,start:!0,center:!1,end:!0}},T=e.canvas.executeFunction("snapToGrid",d.x,r[0],d.y,r[1],u,h,c);if(T){var A=he.rotatePoint([(F=T.x).delta,(R=T.y).delta],360-l,[0,0]);F.delta=A[0],R.delta=A[1]}var N=o.minBy([C,F,D,L],(function(e){return isNaN(e.snappedSide.coordinate)?Number.MAX_VALUE:Math.abs(e.delta-i[0])})),B=o.minBy([M,R,S,E],(function(e){return isNaN(e.snappedSide.coordinate)?Number.MAX_VALUE:Math.abs(e.delta-i[1])}));return{value:N.value,delta:{x:N.delta,y:B.delta},meta:{x:{snappedSide:N.snappedSide,snapType:N.snapType},y:{snappedSide:B.snappedSide,snapType:B.snapType}}}}(e,t,n,i,a,r,s,l,d,c);h=v.delta.x,p=v.delta.y,u.snappedSide.x=v.meta.x,u.snappedSide.y=v.meta.y}return{x:h,y:p,delta:{x:h,y:p},meta:u}}function Xn(e,t,n,i){void 0===i&&(i=0);for(var a,r=Number.MAX_VALUE,o={coordinate:NaN,start:!1,center:!1,end:!1,snappedPoint:{value:NaN,rootValue:NaN}},s=t,l=ee(e);!(a=l()).done;){var d=a.value,c=qn(s,t,d,i,n,r,o);t=c.coordinateValue,r=c.distance,o=c.snapped,d=d}return{value:t,snappedSide:o}}function Gn(e,t,n,i,a){void 0===i&&(i=0);for(var r,o=Number.MAX_VALUE,s={coordinate:NaN,start:!1,center:!1,end:!1,snappedPoint:{value:NaN,rootValue:NaN}},l=t,d=ee(e);!(r=d()).done;){var c=qn(l,t,r.value,i,n,o,s);t=c.coordinateValue,o=c.distance,s=c.snapped}return{value:t,snappedSide:s}}function jn(e,t,n,i){void 0===i&&(i=0);for(var a,r={coordinate:NaN,start:!1,center:!1,end:!1,snappedPoint:{value:NaN,rootValue:NaN}},o=Number.MAX_VALUE,s=t,l=ee(e);!(a=l()).done;){var d=qn(s,t,a.value,i,n,o,r);r=d.snapped,t=d.coordinateValue,o=d.distance}return{value:t,snappedSide:r}}function Zn(e,t){return Math.abs(e-t)}function qn(e,t,n,i,a,r,o,s){var l={start:!0,center:!0,end:!0},d=o;return d.coordinateValue=t,d.distance=r,n.snapTo&&(l=n.snapTo),Math.abs(e-n.value)<=i&&l.start&&r>=Zn(e,n.value)&&(d.start=!0,d.coordinate=n.value,d.snappedPoint={value:n.value,rootValue:n.rootValue},d.distance=Zn(e,n.value),d.coordinateValue=n.value),Math.abs(e+a/2-n.value)<=i&&l.center&&r>=Zn(e+a/2,n.value)&&(d.distance=Zn(e+a/2,n.value),d.coordinateValue=n.value-a/2,d.center=!0,d.coordinate=n.value,d.snappedPoint={value:n.value,rootValue:n.rootValue}),Math.abs(e+a-n.value)<=i&&l.end&&r>=Zn(e+a,n.value)&&(d.distance=Zn(e+a,n.value),d.coordinateValue=n.value-a,d.end=!0,d.coordinate=n.value,d.snappedPoint={value:n.value,rootValue:n.rootValue}),{coordinateValue:d.coordinateValue,distance:d.distance,snapped:d}}function Jn(e,t){e.snapTo.center=!1,e.snapTo.start=!0,e.snapTo.end=!0,-1!==t.indexOf("R")&&(e.snapTo.start=!1),-1!==t.indexOf("L")&&(e.snapTo.end=!1)}function Kn(e,t){e.snapTo.center=!1,e.snapTo.start=!0,e.snapTo.end=!0,-1!==t.indexOf("B")&&(e.snapTo.start=!1),-1!==t.indexOf("T")&&(e.snapTo.end=!1)}function Qn(e,t,n,i,a){void 0===i&&(i=void 0);var r={x:[],y:[]};if(!i||!e.snap)return{parentSnapPoints:r,siblingSnapPoints:r,gutterSnapPoints:r,rulerSnapPoints:r,gridSnap:void 0};var s=[];if(i&&(s=i.children),0===s.length&&!i)return{parentSnapPoints:r,siblingSnapPoints:r,gutterSnapPoints:r,rulerSnapPoints:r,gridSnap:e.gridSnap};var l=i;l||(l=s[0].parent);var d=r;l&&e.parentSnap&&(d=l.executeFunction("getParentSnapPoints",[l])),r.x=r.x.concat(d.x),r.y=r.y.concat(d.y);var c={x:[],y:[]};e.siblingSnap&&s[0]&&(c=s[0].executeFunction("getSiblingSnapPoints",n,i));var u={x:[],y:[]};e.gutterSnap&&i&&s[0]&&(u=s[0].executeFunction("getGutterSnapPoints",n));var h={x:[],y:[]};if(e.rulerSnap){h=t.canvas.executeFunction("RulerLines.getLineCoordinates");var p=t.canvas.getBoundingBox([i],!0);o.forEach(h.x,(function(e,t){h.x[t]={value:e-p.y,rootValue:e}})),o.forEach(h.y,(function(e,t){h.y[t]={value:e-p.x,rootValue:e}}))}return a&&(d.x.forEach((function(e){Jn(e,a)})),d.y.forEach((function(e){Kn(e,a)})),c.x.forEach((function(e){Jn(e,a)})),c.y.forEach((function(e){Kn(e,a)}))),{parentSnapPoints:d,siblingSnapPoints:c,gutterSnapPoints:u,rulerSnapPoints:h,gridSnap:e.gridSnap}}var $n=function(){function e(){var e=this;this.name="SnapPointsCalculator",this.snapBound=5,this.setSnapBound=function(t,n){e.snapBound=n},this.getSnapBound=function(t){return e.snapBound},this.getConfig=function(){return e.config},this.setConfig=function(t,n){e.config=Z({},e.config,n)}}var t=e.prototype;return t.init=function(e){this.canvas=e,this.config={snap:!1,parentSnap:!1,siblingSnap:!1,gutterSnap:!1,gridSnap:!1,rulerSnap:!1}},t.activate=function(){var e=this;this.canvas.addFunction("getSnapConfig",this.getConfig),this.canvas.addFunction("setSnapConfig",this.setConfig),this.canvas.addFunction("getSiblingSnapPoints",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Nn.apply(void 0,[e.config].concat(n))})),this.canvas.addFunction("getParentSnapPoints",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Bn.apply(void 0,[e.config].concat(n))})),this.canvas.addFunction("getGutterSnapPoints",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Un.apply(void 0,[e.config].concat(n))})),this.canvas.addFunction("snapToGrid",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Yn.apply(void 0,[e.config].concat(n))})),this.canvas.addFunction("snapToPoints",_n),this.canvas.addFunction("getSnapPoints",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Qn.apply(void 0,[e.config].concat(n))})),this.canvas.addFunction("setSnapBound",this.setSnapBound),this.canvas.addFunction("getSnapBound",this.getSnapBound)},t.deactivate=function(){this.canvas.removeFunction("getSiblingSnapPoints"),this.canvas.removeFunction("getParentSnapPoints"),this.canvas.removeFunction("getGutterSnapPoints"),this.canvas.removeFunction("snapToGrid"),this.canvas.removeFunction("snapToPoints"),this.canvas.removeFunction("getSnapPoints"),this.canvas.removeFunction("setSnapBound"),this.canvas.removeFunction("getSnapBound")},e}(),ei=function(){function e(){var e=this;this.name="ConstructionLinesPlugin",this.updateLines=function(){var t=e.canvasDOMElement.getContext("2d"),n=e.canvas.collisionScope;t&&n&&(t.clearRect(0,0,e.canvasDOMElement.width,e.canvasDOMElement.height),t.strokeStyle="#f00",t.beginPath(),n.drawBVH(t),t.stroke())},this.showConstructionLines=function(){e.constructionLinesWrapper.style.display="block"},this.setDimensions=function(){e.canvasDOMElement.setAttribute("height",e.canvas.getBoundingClientRect().height.toString()+"px"),e.canvasDOMElement.setAttribute("width",e.canvas.getBoundingClientRect().width.toString()+"px")},this.hideConstructionLines=function(){e.constructionLinesWrapper.style.display="none"}}var t=e.prototype;return t.init=function(e){this.canvas=e,this.dispose=null},t.activate=function(){this.canvas.addFunction("showConstructionLines",this.showConstructionLines.bind(this)),this.canvas.addFunction("hideConstructionLines",this.hideConstructionLines.bind(this)),this.canvas.addEventListener("setLayout",this.setDimensions.bind(this)),this.constructionLinesWrapper=document.createElement("div"),this.constructionLinesWrapper.className="construction-line-wrapper",this.dispose=this.canvas.addDomToWorld(this.constructionLinesWrapper),this.canvasDOMElement=document.createElement("canvas"),this.setDimensions(),this.canvasDOMElement.style.pointerEvents="none";var e=this.canvasDOMElement.getContext("2d");this.constructionLinesWrapper.style.pointerEvents="none",this.constructionLinesWrapper.appendChild(this.canvasDOMElement);var t=this.canvas.collisionScope;this.attachListeners(this.canvas),e&&t&&(e.strokeStyle="#f00",e.beginPath(),t.drawBVH(e),e.stroke())},t.attachListeners=function(e){var t=this;e.on("*",this.updateLines),e.on(["children"],(function(){e.children.forEach((function(e){t.attachListeners(e)}))})),e.children.forEach((function(e){t.attachListeners(e)}))},t.deactivate=function(){this.dispose(),this.canvas.removeFunction("showConstructionLines"),this.canvas.removeFunction("hideConstructionLines"),this.canvas.removeEventListener("setLayout",this.setDimensions)},e}(),ti=function(){function e(){this.name="ScrollMousePositionPlugin"}var t=e.prototype;return t.init=function(e){this.canvas=e,this.dispose=null},t.activate=function(){var e=this,t=document.createElement("div");this.dispose=this.canvas.addDomToViewport(t);var n=document.createElement("div");t.appendChild(n),n.style.position="absolute",n.style.top="10px",n.style.right="10px",n.style.height="95px",n.style.width="245px",n.style.pointerEvents="none",n.style.backgroundColor="skyblue",n.style.zIndex="10";var i=document.createTextNode(" Mouse World: {x:0, y:0} ");n.appendChild(i),n.appendChild(document.createElement("br"));var a=document.createTextNode("Mouse Viewport: {x: 0, y:0} ");n.appendChild(a),n.appendChild(document.createElement("br"));var r=document.createTextNode("Mouse Page: {x: 0, y:0} ");n.appendChild(r),n.appendChild(document.createElement("br"));var o=this.canvas.getScroll(),s=document.createTextNode("Scroll: {x:"+o.x+", y:"+o.y+"}");n.appendChild(s),n.appendChild(document.createElement("br"));var l=this.canvas.getZoom(),d=document.createTextNode("Zoom: "+Number(l.toFixed(2)));n.appendChild(d),this.canvas.on("scroll",(function(){o=e.canvas.getScroll(),s.nodeValue="Scroll: {x:"+Number(o.x.toFixed(2))+", y:"+Number(o.y.toFixed(2))+"}"})),this.canvas.on("zoom",(function(t){l=e.canvas.getZoom(),d.nodeValue="Zoom: "+Number(l.toFixed(2))})),this.canvas.addEventListener("mousemove",(function(e){i.nodeValue="Mouse W: {x:"+Number(e.worldX.toFixed(2))+", y:"+Number(e.worldY.toFixed(2))+"}",a.nodeValue="Mouse VP: {x:"+Number(e.viewportX.toFixed(2))+", y:"+Number(e.viewportY.toFixed(2))+"}",r.nodeValue="Mouse P: {x:"+Number(e.pageX.toFixed(2))+", y:"+Number(e.pageY.toFixed(2))+"}"}))},t.deactivate=function(){this.dispose()},e}();function ni(e,t,n){if("x"===e){var i=t.x<=n.x,a=o.round(t.x+t.width,2)>=o.round(n.x+n.width,2);if(i&&a)return!0}if("y"===e){var r=t.y<=n.y,s=o.round(t.y+t.height,2)>=o.round(n.y+n.height,2);if(r&&s)return!0}return!1}function ii(e,t,n){return"x"===e?!(n.y>t.y+t.height||t.y>n.y+n.height):"y"===e&&!(n.x>t.x+t.width||t.x>n.x+n.width)}function ai(e,t,n){return"x"===e?n.x>t.x?"left":"right":"y"===e?n.y>t.y?"top":"bottom":"No Axis"}var ri=function(){function e(){this.name="MeasurementLinesPlugin",this.namespace="MeasurementLines",this.show=!1,this.lines=[],this.temporarilyHidden=!1}var t=e.prototype;return t.init=function(e){this.canvas=e,this.dispose=null},t.display=function(){if(this.show){var e,t,n=this.canvas.hoveredLayers.filter((function(e){return"canvas"!==e.type})),i={x:0,y:0,height:0,width:0},a=i,r=i;if(n.length&&(e=this.canvas.getBoundingBox([n[0]]),this.currentHoveredLayer=n[0],t=o.get(n,"[0].parent")),this.canvas.selectedLayers.length&&e)r=this.canvas.getBoundingBox(this.canvas.selectedLayers),a=e;else if(t&&"canvas"!==t.type&&e)r=e,a=this.canvas.getBoundingBox([t]);else if(this.canvas.selectedLayers.length){r=this.canvas.getBoundingBox(this.canvas.selectedLayers);var s=o.get(this.canvas,"selectedLayers[0].parent");a=s&&"canvas"!==s.type?this.canvas.getBoundingBox([s]):i}var l=function(e){var t=e.box,n=e.helperBox,i=ni("x",t,n),a=ni("y",t,n),r=ii("x",t,n),o=!1,s=!1,l=ai("x",t,n);r&&("left"===l?o=!0:"right"===l&&(s=!0));var d=function(e,t,n){return e&&t?n.x:n.x+n.width}(i,a,e.box),c=function(e,t,n,i){return e&&t?i.x-n.x:i.x-n.x-n.width}(i,a,e.box,e.helperBox),u=function(e){return e.y+Math.floor(e.height/2)}(e.helperBox),h=function(e){return e.x+e.width}(e.helperBox),p=function(e,t,n,i){return e&&t?n.x+n.width-(i.x+i.width):n.x-i.x-i.width}(i,a,e.box,e.helperBox),v=i&&a?n.x-t.x:n.x-t.x-t.width,g=i&&a?t.x+t.width-(n.x+n.width):t.x-n.x-n.width,y=(s||i&&a)&&g>0,f=[];return(o||i&&a)&&v>0&&(v=Math.round(v),f.push(e.canvas.executeFunction("drawLine","y",d,"measurementXLine1-edge",u-2.5,u+3,!1)),f.push(e.canvas.executeFunction("drawLine","x",u,"measurementXLine1",d,d+c,!1,v)),f.push(e.canvas.executeFunction("drawLine","y",d+c-1,"measurementXLine1-edge",u-2.5,u+3,!1))),y&&(g=Math.round(g),f.push(e.canvas.executeFunction("drawLine","y",h,"measurementXLine1-edge",u-2.5,u+3,!1)),f.push(e.canvas.executeFunction("drawLine","x",u,"measurementXLine2",h,p+h,!1,g)),f.push(e.canvas.executeFunction("drawLine","y",p+h-1,"measurementXLine1-edge",u-2.5,u+3,!1))),f}({box:a,helperBox:r,canvas:this.canvas}),d=function(e){var t=e.box,n=e.helperBox,i=ni("x",t,n),a=ni("y",t,n),r=ii("y",t,n),o=!1,s=!1,l=ai("y",t,n);r&&("top"===l?o=!0:"bottom"===l&&(s=!0));var d=function(e,t,n){return e&&t?n.y:n.y+n.height}(i,a,e.box),c=function(e,t,n,i){return e&&t?i.y-n.y:i.y-n.y-n.height}(i,a,e.box,e.helperBox),u=function(e){return e.x+Math.floor(e.width/2)}(e.helperBox),h=function(e){return e.y+e.height}(e.helperBox),p=function(e,t,n,i){return e&&t?n.y+n.height-(i.y+i.height):n.y-i.y-i.height}(i,a,e.box,e.helperBox),v=i&&a?n.y-t.y:n.y-t.y-t.height,g=i&&a?t.y+t.height-(n.y+n.height):t.y-n.y-n.height,y=(s||i&&a)&&g>0,f=[];return(o||i&&a)&&v>0&&(v=Math.round(v),f.push(e.canvas.executeFunction("drawLine","x",d,"measurementXLine1-edge",u-2.5,u+3,!1)),f.push(e.canvas.executeFunction("drawLine","y",u,"measurementYLine1",d,d+c,!1,v)),f.push(e.canvas.executeFunction("drawLine","x",d+c-1,"measurementXLine1-edge",u-2.5,u+3,!1))),y&&(g=Math.round(g),f.push(e.canvas.executeFunction("drawLine","x",h,"measurementXLine1-edge",u-2.5,u+3,!1)),f.push(e.canvas.executeFunction("drawLine","y",u,"measurementYLine2",h,h+p,!1,g)),f.push(e.canvas.executeFunction("drawLine","x",h+p-1,"measurementXLine1-edge",u-2.5,u+3,!1))),f}({box:a,helperBox:r,canvas:this.canvas});this.lines&&this.lines.length>0&&(this.lines.forEach((function(e){e.parentNode.removeChild(e)})),this.lines=[]),this.lines=[].concat(l,d)}},t.showLines=function(){this.show=!0,this.temporarilyHidden=!1,this.display()},t.hideLines=function(){this.show=!1,this.lines&&this.lines.length>0&&(this.lines.forEach((function(e){e.parentNode.removeChild(e)})),this.lines=[]),this.currentHoveredLayer=void 0},t.activate=function(){var e=this;this.canvas.addFunction(this.namespace+".show",this.showLines.bind(this)),this.canvas.addFunction(this.namespace+".hide",this.hideLines.bind(this)),this.canvas.addEventListener("keyUp",(function(t){18===(t.originalEvent?t.originalEvent:t).keyCode&&(e.temporarilyHidden=!1,e.hideLines())})),this.canvas.addEventListener("blur",(function(t){e.hideLines()})),this.canvas.addEventListener("keyDown",(function(t){18===(t.originalEvent?t.originalEvent:t).keyCode&&e.showLines()})),this.canvas.on("mouseEventsBlocked",(function(){e.canvas.mouseEventsBlocked&&e.show?(e.temporarilyHidden=!0,e.hideLines()):e.temporarilyHidden&&(e.temporarilyHidden=!1,e.showLines())})),this.canvas.on("hoveredLayers",(function(){e.show&&e.canvas.hoveredLayers.length>0&&"canvas"!==e.canvas.hoveredLayers[0].type&&e.canvas.hoveredLayers[0]!==e.currentHoveredLayer&&e.display()}))},t.deactivate=function(){this.canvas.removeFunction(this.namespace+".show"),this.canvas.removeFunction(this.namespace+".hide"),this.dispose()},e}(),oi=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,a)||this).payload=i,r}return q(t,e),t}(Te),si=function(){function e(){var e=this;this.name="MouseRectPlugin",this.namespace="MouseRect",this.dragStarted=!1,this.dragStart={x:0,y:0},this.dims={x:0,y:0,height:0,width:0},this.getLayers=function(){var t=e.canvas.getHitRectResult(e.dims.x,e.dims.y,e.dims.width,e.dims.height);return e.canvas.executeMiddleware("MouseRect.getHitRectResult",t,(function(e){return e}))}}var t=e.prototype;return t.init=function(e){this.canvas=e,this.dispose=null},t.activate=function(){var e=this;this.canvas.getZoom(),this.wrapperLayer=document.createElement("div"),this.dispose=this.canvas.addDomToWorld(this.wrapperLayer,!0,105),this.wrapperLayer.style.position="absolute",this.wrapperLayer.style.border=1/this.canvas.getZoom()+"px solid #25B9D1",this.wrapperLayer.style.top="0px",this.wrapperLayer.style.left="0px",this.wrapperLayer.style.height="0px",this.wrapperLayer.style.width="0px",this.wrapperLayer.style.display="none",this.wrapperLayer.style.backgroundColor="rgba(121,121,121,0.09)",this.wrapperLayer.style.pointerEvents="none",this.canvas.addEventListener("dragStart",(function(t){return e.canvas.executeMiddleware("MouseRect.dragStart",t,(function(t){e.dragStarted=!0,e.dragStart={x:t.worldX,y:t.worldY},e.wrapperLayer.style.display="",e.wrapperLayer.style.left=e.dragStart.x+"px",e.wrapperLayer.style.top=e.dragStart.y+"px"}))})),this.canvas.addEventListener("drag",(function(t){if(e.dragStarted){e.dims.x=t.worldX<e.dragStart.x?t.worldX:e.dragStart.x,e.dims.y=t.worldY<e.dragStart.y?t.worldY:e.dragStart.y,e.dims.height=Math.abs(t.worldY-e.dragStart.y),e.dims.width=Math.abs(t.worldX-e.dragStart.x),e.wrapperLayer.style.left=e.dims.x+"px",e.wrapperLayer.style.top=e.dims.y+"px",e.wrapperLayer.style.height=e.dims.height+"px",e.wrapperLayer.style.width=e.dims.width+"px";var n=new oi(e.namespace+".draw",e.canvas,e.getLayers(),e.canvas);e.canvas.dispatchEvent(e.namespace+".draw",n)}})),this.canvas.addEventListener("dragEnd",(function(t){if(e.dragStarted){e.wrapperLayer.style.top="0px",e.wrapperLayer.style.left="0px",e.wrapperLayer.style.height="0px",e.wrapperLayer.style.width="0px",e.wrapperLayer.style.display="none";var n=new oi(e.namespace+".drawEnd",e.canvas,e.getLayers(),e.canvas);e.canvas.dispatchEvent(e.namespace+".drawEnd",n),e.dragStarted=!1}})),this.canvas.on("zoom",(function(t){var n=e.canvas.getZoom();e.wrapperLayer.style.border=1/n+"px solid #25B9D1"}))},t.deactivate=function(){this.dispose()},e}(),li=function(e){function n(t){var n;return(n=e.call(this,t)||this).isBlurred=!1,n.text="",n.dims=n.props.layer.getBoundingClientRect(),n.isText="text"===n.props.layer.type,n.isAuto=n.props.layer&&n.props.layer.layout&&o.isNil(n.props.layer.layout.get("width")),n.onBlur=function(){n.isBlurred=!0;var e=new wi("onEditorBlur",n.props.layer,n.state.editorState.getCurrentContent().getPlainText(),n.isBlurred);n.props.onEvent(e)},n.onFocus=function(){n.isBlurred=!1;var e=new wi("onEditorFocus",n.props.layer,n.state.editorState.getCurrentContent().getPlainText());n.props.onEvent(e)},n.handleNumpadEnter=function(e){n.isNumpadEnter(e)&&n.onBlur()},n.removePositionalAttribute=function(e){var t=Z({},e);return delete t.left,delete t.top,delete t.width,delete t.height,delete t.flex,delete t.margin,delete t.marginTop,delete t.marginRight,delete t.marginBottom,delete t.marginLeft,t.fontFamily&&"System"!==t.fontFamily||(t.fontFamily="system-ui"),t},n.onChange=function(e){if(!n.isBlurred){if(e.getCurrentContent().getPlainText()!==n.text){var t=new wi("onEditorChange",n.props.layer,n.state.editorState.getCurrentContent().getPlainText(),n.isBlurred);n.props.onEvent(t)}n.setState({editorState:e})}},n.myBlockStyleFn=function(e){return"unstyled"===e.getType()?"defaultTextStyle":""},n.getStringStyle=function(e){var t=n.props.layer.layout.isValidKey(e)?n.props.layer.layout.get(e):n.props.layer.style.get(e);return"number"==typeof t?t.toString()+"px":t},n.handleTab=function(e){if(e.preventDefault(),!n.isBlurred){var t=Y.Modifier.replaceText(n.state.editorState.getCurrentContent(),n.state.editorState.getSelection(),"\t"),i=Y.EditorState.push(n.state.editorState,t,"insert-characters");if(i.getCurrentContent().getPlainText()!==n.text){var a=new wi("onEditorChange",n.props.layer,n.state.editorState.getCurrentContent().getPlainText(),n.isBlurred);n.props.onEvent(a)}n.setState({editorState:i})}},n.handleKeyBinding=function(e){return 27===e.keyCode&&n.onBlur(),Y.getDefaultKeyBinding(e)},n.text=n.isText?n.props.layer.innerText:n.props.layer.props?n.props.layer.props.get("placeholder"):" ",n.state={editorState:Y.EditorState.moveFocusToEnd(Y.EditorState.createWithContent(Y.ContentState.createFromText(n.text||"")))},n}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.onFocus(),document.addEventListener("keydown",this.handleNumpadEnter),document.execCommand("selectAll",!1,void 0)},i.isNumpadEnter=function(e){return"Enter"===e.key&&3===e.location&&13===e.which},i.render=function(){var e=this,n=this.removePositionalAttribute(Z({},this.props.layer.style.getAll(),this.props.layer.layout.getAll()));return t.createElement("div",{className:"editorWrapper",style:Z({},n,{display:"",visibility:"visible",position:"absolute",transform:this.props.layer.rotation?"rotate("+this.props.layer.rotation+"deg)":void 0,top:this.dims.rootY+(this.isText?0:this.dims.height/2-7.6),left:this.dims.rootX,height:this.dims.height,width:this.isAuto?void 0:this.dims.width,caretColor:this.isText?n.color||"black":"grey",color:this.isText?n.color||"black":"#757575",fontSize:n.fontSize?parseInt(n.fontSize,10):14,lineHeight:this.getStringStyle("lineHeight")||"normal",letterSpacing:this.getStringStyle("letterSpacing"),WebkitFontSmoothing:"antialiased"})},t.createElement(Y.Editor,{ref:function(t){e.editorRef=t},editorState:this.state.editorState,onChange:this.onChange,keyBindingFn:this.handleKeyBinding,blockStyleFn:this.myBlockStyleFn,handleReturn:function(t,n){return e.isNumpadEnter(t)?"handled":"not-handled"},onBlur:this.onBlur,onFocus:this.onFocus,onTab:this.handleTab}))},n}(t.Component),di=function(){function e(){this.name="TextEditorPlugin"}var n=e.prototype;return n.init=function(e){this.canvas=e,this.dispose=null},n.mountTextEditor=function(e,n){var a=this;if(n&&("text"==n.type||"textInput"==n.type)){n.setStyle("visibility","hidden");var r=this.canvas.getBoundingClientRect();this.wrapperLayer.style.display="",this.wrapperLayer.style.top=r.rootY+"px",this.wrapperLayer.style.left=r.rootX+"px",this.wrapperLayer.style.height=r.height+"px",this.wrapperLayer.style.width=r.width+"px",i.render(t.createElement(li,{layer:n,onEvent:function(e){"onEditorChange"===e.name&&e.target?e.target.dispatchEvent("setText",e):"onEditorBlur"===e.name&&e.target&&(a.wrapperLayer.style.display="none",e.target.removeStyle("visibility"),e.target.dispatchEvent("setText",e))}}),this.wrapperLayer)}},n.unmountTextEditor=function(e){i.unmountComponentAtNode(this.wrapperLayer)},n.activate=function(){this.wrapperLayer=document.createElement("div"),this.dispose=this.canvas.addDomToWorld(this.wrapperLayer),this.wrapperLayer.style.position="absolute",this.wrapperLayer.style.top="0",this.wrapperLayer.style.left="0",this.wrapperLayer.style.height="0",this.wrapperLayer.style.width="0",this.wrapperLayer.style.display="none",this.canvas.addFunction("TextEditorPlugin.mountEditor",this.mountTextEditor.bind(this)),this.canvas.addFunction("TextEditorPlugin.unmountEditor",this.unmountTextEditor.bind(this))},n.deactivate=function(){this.canvas.removeFunction("TextEditorPlugin.mountEditor"),this.canvas.removeFunction("TextEditorPlugin.unmountEditor"),this.dispose()},e}(),ci=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).paper=_,t.xFactor=1,t.yFactor=1,t.isFirstClick=!0,t.onUpdate=function(e){t.forceUpdate()},t.getRotation=function(){return 0},t.finishEditing=function(){t.segment&&(t.segment.remove(),t.segment=null)},t.closePath=function(){t.finishEditing(),t.path&&t.path.closePath()},t.deleteSelectedPoint=function(){t.segment&&(t.segment.remove(),t.ready())},t.straightenSelectedPoint=function(){t.segment&&(t.segment.clearHandles(),t.ready())},t.disconnectSelectedPoint=function(){t.segment&&(t.segment.handleIn.isZero()&&t.segment.smooth(),t.segment.handleOut.isZero()&&t.segment.smooth(),t.ready())},t.emitUpdatedJSON=function(){if(t.path)if(t.props.newPath){var e=t.path.clone({insert:!1,deep:!0});e.translate(new _.Point(-t.path.bounds.x,-t.path.bounds.y));var n=v.convertPaperPointToBxObj(e),i=new mi("pathEditorOnChange",t.props.layer,{pathProps:n,bounds:t.path.bounds});t.props.onEvent(i)}else{var a=t.path.clone({insert:!1,deep:!0});a.translate(new _.Point(-t.props.dimensions.x,-t.props.dimensions.y));var r=t.path.clone({insert:!1,deep:!0}),o=t.getRotation();o&&(a.rotate(-o),r.rotate(-o)),a.bounds=t.oldBounds;var s=v.convertPaperPointToBxObj(a),l=new mi("pathEditorOnChange",t.props.layer,{pathProps:s,bounds:r.bounds});t.props.onEvent(l)}},t.onMouseUp=function(e){var n=e.point,i=new Ge("PaperEvent",t.props.canvas,e.event);if(n.x=i.worldX,n.y=i.worldY,t.props.newPath&&t.path){t.segment&&(t.segment.selected=!1);var a=t.paper.project.hitTest(n,{segments:!0,tolerance:5});a&&a.segment&&0===a.segment.index&&a.segment.next||2===o.get(e,"event.detail")?(t.closePath(),t.emitUpdatedJSON()):(t.segment=t.path.add(n),t.segment.selected=!0)}t.handle=null},t.onMouseDrag=function(e){var n=e.point,i=e.downPoint;if(i){var a=new Ge("PaperEvent",t.props.canvas,e.event);if(n.x=a.worldX,n.y=a.worldY,t.props.newPath&&t.segment)t.segment.handleIn=i.subtract(n),t.segment.handleOut=n.subtract(i);else if(t.segment)switch(t.handle){case"segment":t.segment.point=n,t.emitUpdatedJSON();break;case"handle-in":t.segment.handleIn=n.subtract(t.segment.point),t.emitUpdatedJSON();break;case"handle-out":t.segment.handleOut=n.subtract(t.segment.point),t.emitUpdatedJSON()}}},t.pathEditorOnEnd=function(e){void 0===e&&(e=!1),e||t.emitUpdatedJSON();var n=new mi("pathEditorOnEnd",t.props.layer);t.props.onEvent(n)},t.onMouseDown=function(e){if(t.isFirstClick){var n=new Ge("pathEditor.selectParent",t.props.canvas,e.event);t.props.onEvent(n),t.isFirstClick=!1}if(t.path){var i=e.downPoint,a=new Ge("PaperEvent",t.props.canvas,e.event);if(i.x=a.worldX,i.y=a.worldY,!t.props.newPath){var r=t.paper.project.hitTest(i,{stroke:!0,segments:!0,handles:!0,tolerance:5});if(t.segment&&(t.segment.selected=!1),r){switch(t.handle=r.type,r.type){case"stroke":if(r.location){var o=r.location,s=o.curve.divideAt(o);s&&(t.segment=s.segment1,t.segment.selected=!0,t.handle="segment")}break;case"segment":case"handle-in":case"handle-out":t.segment=r.segment,t.segment.selected=!0}t.ready()}else t.path.contains(i)||t.pathEditorOnEnd()}}},t.onMouseMove=function(e){var n=t.props.newPath,i=e.point,a=new Ge("PaperEvent",t.props.canvas,e.event);i.x=a.worldX,i.y=a.worldY,n&&t.segment&&t.segment.point.set(i)},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){var e=document.getElementById("path-editor-canvas");if(e){this.props.canvas.on("zoom",this.onUpdate),this.paper.setup(e),this.init();var t=new _.Tool;t.onMouseDrag=this.onMouseDrag,t.onMouseDown=this.onMouseDown,t.onMouseUp=this.onMouseUp,t.onMouseMove=this.onMouseMove,this.tool=t,this.paper.settings.handleSize=7/this.props.canvas.getZoom(),this.ready()}},i.ready=function(){var e="";this.segment&&(e=this.segment.handleIn.isZero()||this.segment.handleOut.isZero()?"straight":"disconnected");var t=new mi("pathEditorOnReady",this.props.layer,{actions:{deleteSelectedPoint:this.deleteSelectedPoint,straightenSelectedPoint:this.straightenSelectedPoint,disconnectSelectedPoint:this.disconnectSelectedPoint,finishEditing:this.finishEditing,closePath:this.closePath},pointMode:e});this.props.onEvent(t)},i.componentDidUpdate=function(e){this.paper.settings.handleSize=7/this.props.canvas.getZoom(),this.init()},i.componentWillUnmount=function(){this.tool&&this.tool.remove(),this.pathEditorOnEnd(!0),this.paper.project.clear(),this.paper.project.remove()},i.init=function(){var e,t=this.props,n=t.layer,i=t.dimensions;if(t.newPath){e=new _.Path,this.segment=e.add(new _.Point(0,0)),e.selectedColor="#A3A3A3",e.strokeColor="#A3A3A3",e.strokeWidth=1/this.props.canvas.getZoom(),this.paper.project.clear();var a=new _.Layer([e]);this.paper.project.addLayer(a)}else{this.path&&this.path.remove(),this.isFirstClick=!1;var r=n.props.getAll(),o=v.getPaperPathFromPoints(r.points,r.isClosed);this.xFactor=i.width/(e=o).bounds.width,this.yFactor=i.height/e.bounds.height,this.oldBounds=e.bounds,e.applyMatrix=!0,e.bounds.x=0,e.bounds.y=0,e.translate(new _.Point(i.rootX,i.rootY)),e.scale(this.xFactor,this.yFactor,e.bounds.topLeft);var s=this.getRotation();s&&e.rotate(s),e.selectedColor="#A3A3A3",e.strokeColor="#A3A3A3",e.fillColor=r.fill,this.paper.project.clear();var l=new _.Layer([e]);this.paper.project.addLayer(l)}e.selected=!0,this.paper.view.draw(),this.paper.view.update(),this.path=e},i.render=function(){return t.createElement("canvas",{width:this.props.bounds.width,height:this.props.bounds.height,style:{cursor:"crosshair",position:"absolute",pointerEvents:"auto"},id:"path-editor-canvas"})},n}(t.PureComponent),ui=function(){function e(){var e=this;this.name="PathEditorPlugin",this.nameSpace="PathEditor",this.selectedTool="pen",this.handlePathEditorEvents=function(t){var n=t.payload,i=t.target;switch(t.name){case"pathEditorOnReady":var a=n.actions,r=a.disconnectSelectedPoint,o=a.straightenSelectedPoint,s=a.finishEditing,l=a.closePath;e.canvas.addFunction(e.nameSpace+".deleteSelectedPoint",a.deleteSelectedPoint),e.canvas.addFunction(e.nameSpace+".disconnectSelectedPoint",r),e.canvas.addFunction(e.nameSpace+".straightenSelectedPoint",o),e.canvas.addFunction(e.nameSpace+".finishEditing",s),e.canvas.addFunction(e.nameSpace+".closePath",l);break;case"pathEditorOnChange":var d=n.pathProps,c=n.bounds,u="0 0 "+c.width+" "+c.height,h={left:c.x,top:c.y,width:c.width,height:c.height,position:"absolute"};"path"===e.selectedTool&&i?i.dispatchEvent(e.nameSpace+".onEdit",new mi(e.nameSpace+".onEdit",i,{viewBox:u,points:d.points,style:h,isClosed:d.closed})):"pen"===e.selectedTool&&(e.canvas.dispatchEvent(e.nameSpace+".addNew",new mi(e.nameSpace+".addNew",e.canvas,{viewBox:u,points:d.points,style:h,isClosed:d.closed})),e.hide());break;case"pathEditorOnEnd":e.hide(),i.setStyle("display",""),e.canvas.dispatchEvent(e.nameSpace+".isClosed",new mi(e.nameSpace+".isClosed",e.canvas));break;case"pathEditor.selectParent":e.canvas.dispatchEvent(e.nameSpace+".selectParent",t)}},this.hide=function(){i.unmountComponentAtNode(e.wrapperLayer),e.wrapperLayer.style.display="none",e.canvas.removeFunction(e.nameSpace+".deleteSelectedPoint"),e.canvas.removeFunction(e.nameSpace+".disconnectSelectedPoint"),e.canvas.removeFunction(e.nameSpace+".straightenSelectedPoint"),e.canvas.removeFunction(e.nameSpace+".finishEditing"),e.canvas.removeFunction(e.nameSpace+".closePath")},this.getScrollShift=function(){var t=e.canvas.getScroll(),n=e.canvas.getZoom();return{x:t.x*(e.canvas.layout.get("width")*n-e.canvas.getViewport().width),y:t.y*(e.canvas.layout.get("height")*n-e.canvas.getViewport().height)}},this.handleEvent=function(n){var a;e.selectedTool=n.payload.selectedTool,e.canvas.getViewport(),e.getScrollShift(),e.canvas.getZoom();var r=e.canvas.getBoundingClientRect();"path"===e.selectedTool?(n.target.setStyle("display","none"),a=n.target.getBoundingClientRect()):a=r,e.wrapperLayer.style.display="",e.wrapperLayer.style.height=a.height+"px",e.wrapperLayer.style.width=a.width+"px",i.render(t.createElement(ci,{onEvent:e.handlePathEditorEvents,layer:"pen"===e.selectedTool?e.canvas:n.target,newPath:"pen"===e.selectedTool,bounds:{left:r.x,top:r.y,width:r.width/e.canvas.getZoom(),height:r.height/e.canvas.getZoom()},canvas:e.canvas,dimensions:a}),e.wrapperLayer)}}var n=e.prototype;return n.init=function(e){this.canvas=e,this.dispose=null},n.activate=function(){var e=this;this.wrapperLayer=document.createElement("div"),this.dispose=this.canvas.addDomToWorld(this.wrapperLayer),this.wrapperLayer.style.position="absolute",this.wrapperLayer.style.top="0",this.wrapperLayer.style.left="0",this.wrapperLayer.style.height="0",this.wrapperLayer.style.width="0",this.wrapperLayer.style.display="none",this.canvas.addFunction(this.nameSpace+".open",(function(t,n){e.handleEvent(n)})),this.canvas.addFunction(this.nameSpace+".mount",this.mountEditor.bind(this)),this.canvas.addFunction(this.nameSpace+".unmount",this.hide.bind(this))},n.mountEditor=function(e,t){this.handleEvent(new mi("PathEditor.open",t,{selectedTool:"path"})),this.canvas.dispatchEvent(this.nameSpace+".isOpened",new mi(this.nameSpace+".isOpened",this.canvas))},n.deactivate=function(){this.canvas.removeFunction(this.nameSpace+".open"),this.canvas.removeFunction(this.nameSpace+".mount"),this.canvas.removeFunction(this.nameSpace+".unmount"),this.dispose()},e}(),hi=function(e){var t=[];return e.stops.map((function(e){t.push({position:e.offset,color:e.stopColor})})),{from:[e.from.x,e.from.y],to:[e.to.x,e.to.y],stops:t,activeIndex:e.activeIndex,gradientType:e.gradientType}},pi=function(e){function n(t){var n;return(n=e.call(this,t)||this).handleMove=function(e,t){return"from"===e?(n.props.onChange(Z({},n.state,{from:t}),"Skip"),n.setState({from:t})):"to"===e?(n.props.onChange(Z({},n.state,{to:t}),"Skip"),n.setState({to:t})):(n.props.onChange(Z({},n.state,{stops:t}),"Skip"),n.setState({stops:t})),null},n.removeHandle=function(){if(n.state.activeIndex){var e=n.state.stops;0!==n.state.activeIndex&&n.state.activeIndex!==e.length-1&&e.splice(n.state.activeIndex,1),n.setState({stops:e}),n.props.onChange(Z({},n.state),"")}},n.changeIndex=function(e){n.setState({activeIndex:e}),n.props.onChange(Z({},n.state,{activeIndex:e}),"Skip")},n.handleDragStart=function(){n.props.onChange(Z({},n.state),"Forget")},n.handleDragEnd=function(){n.props.onChange(Z({},n.state),"")},n.state=Z({activeIndex:t.gradient.activeIndex},hi(t.gradient)),n}q(n,e);var i=n.prototype;return i.componentDidMount=function(){var e=this,t=this.props.canvas;t.addFunction("GradientEditor.changeStopColor",(function(t,n){var i=e.state.stops;i[e.state.activeIndex].color=n.color,e.setState({stops:i}),e.props.onChange(Z({},e.state),"Skip")})),t.addFunction("GradientEditor.change",(function(t,n){if(n){var i=hi(n);e.setState(Z({},i))}}))},i.render=function(){var e=this.props,n=this.state,i=e.dims;return t.createElement(X,{x:i.rootX,y:i.rootY,width:i.width,height:i.height,from:n.from,to:n.to,stops:n.stops,index:n.activeIndex,zoom:e.zoom,rotation:i.rotation,scroll:e.scroll,changeIndex:this.changeIndex,handleMove:this.handleMove,removeHandle:this.removeHandle,onClickOutside:this.props.onClickOutside,onWrapperMouseDown:this.props.onWrapperMouseDown,onWrapperContexMenu:this.props.onWrapperContexMenu,onWrapperDoubleClick:this.props.onWrapperDoubleClick,onWrapperMouseOut:this.props.onWrapperMouseOut,onWrapperDrop:this.props.onWrapperDrop,onDragOver:this.props.onDragOver,onWrapperMouseMove:this.props.onWrapperMouseMove,onWrapperMouseUp:this.props.onWrapperMouseUp,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd})},n}(t.Component),vi=function(e){function t(t,n,i,a,r){var o;return(o=e.call(this,t,n,a)||this).commandParams=i,o.type=r||"",o}return q(t,e),t}(Te),gi=function(){function e(){var e=this;this.name="GradientEditorPlugin",this.nameSpace="GradientEditor",this.isOpened=!1,this.getScrollShift=function(){var t=e.canvas.getScroll(),n=e.canvas.getZoom();return{x:t.x*(e.canvas.layout.get("width")*n-e.canvas.getViewport().width),y:t.y*(e.canvas.layout.get("height")*n-e.canvas.getViewport().height)}},this.render=function(n){e.gradient=n.style.get("gradient"),e.gradient||(e.gradient=new Qe("LinearGradient",{x:.1,y:.1},{x:.9,y:.9},[{stopColor:"#E70B0B",offset:0},{stopColor:"#EEEEEE",offset:1}],1),e.canvas.dispatchEvent("setStyleAttribute",new vi("setStyleAttribute",e.canvas,{layer:n,key:"gradient",value:e.gradient.toJS(),stylePropName:"style"})));var a=n.getBoundingClientRect();if(e.wrapperLayer){e.isOpened=!0,e.wrapperLayer.style.display="";var r=e.getScrollShift();e.initialShift&&(r={x:r.x-e.initialShift.x,y:r.y-e.initialShift.y}),i.render(t.createElement(pi,{layer:n,dims:a,zoom:e.canvas.getZoom(),scroll:r,canvas:e.canvas,gradient:e.gradient,onChange:function(t,i){var a=function(e){var t=[];return e.stops.map((function(e){t.push({offset:e.position,stopColor:e.color})})),{from:{x:e.from[0],y:e.from[1]},to:{x:e.to[0],y:e.to[1]},stops:t,activeIndex:e.activeIndex,gradientType:e.gradientType}}(t);e.gradient=new Qe(t?t.gradientType:"LinearGradient",a.from,a.to,a.stops,a.activeIndex),e.canvas.dispatchEvent("setStyleAttribute",new vi("setStyleAttribute",e.canvas,{layer:n,key:"gradient",value:e.gradient.toJS(),stylePropName:"style"},void 0,i))},onClickOutside:function(t){e.closeEditor(),e.canvas.dispatchEventOnHitLayer(t.type,new Ge(t.type,e.canvas,t,e.canvas))},onWrapperMouseDown:function(t){e.canvas.dispatchEventOnHitLayer(t.type,new Ge(t.type,e.canvas,t,e.canvas))},onWrapperContexMenu:function(t){e.canvas.dispatchEventOnHitLayer(t.type,new Ge(t.type,e.canvas,t,e.canvas))},onWrapperDoubleClick:function(t){e.canvas.dispatchEventOnHitLayer(t.type,new Ge(t.type,e.canvas,t,e.canvas))},onWrapperMouseOut:function(t){e.canvas.dispatchEventOnHitLayer(t.type,new Ge(t.type,e.canvas,t,e.canvas))},onWrapperDrop:function(t){e.canvas.dispatchEventOnHitLayer(t.type,new Ge(t.type,e.canvas,t,e.canvas))},onDragOver:function(t){e.canvas.dispatchEventOnHitLayer(t.type,new Ge(t.type,e.canvas,t,e.canvas))},onWrapperMouseMove:function(t){e.canvas.dispatchEventOnHitLayer(t.type,new Ge(t.type,e.canvas,t,e.canvas))},onWrapperMouseUp:function(t){e.canvas.dispatchEventOnHitLayer(t.type,new Ge(t.type,e.canvas,t,e.canvas))}}),e.wrapperLayer)}},this.rerender=function(){var t=e.canvas.selectedLayers[0];t&&e.isOpened&&e.render(t)},this.closeEditor=function(){e.isOpened&&(i.unmountComponentAtNode(e.wrapperLayer),e.isOpened=!1,e.wrapperLayer.style.display="none",e.canvas.off("zoom",e.rerender),e.canvas.off("scroll",e.rerender),e.canvas.removeFunction(e.nameSpace+".change"),e.canvas.removeFunction(e.nameSpace+".changeStopColor"))}}var n=e.prototype;return n.init=function(e){this.canvas=e},n.activate=function(){var e=this;this.wrapperLayer=document.createElement("div"),this.dispose=this.canvas.addDomToWorld(this.wrapperLayer),this.wrapperLayer.style.position="absolute",this.wrapperLayer.style.top="0",this.wrapperLayer.style.left="0",this.wrapperLayer.style.right="0",this.wrapperLayer.style.bottom="0",this.wrapperLayer.style.display="none",this.wrapperLayer.style.zIndex=101,this.canvas.addEventListener(this.nameSpace+".open",(function(t){if(!e.isOpened){var n=e.canvas.selectedLayers[0];e.initialShift=e.getScrollShift(),n&&e.render(n),e.canvas.on("zoom",e.rerender),e.canvas.on("scroll",e.rerender)}})),this.canvas.addFunction(this.nameSpace+".isOpen",(function(t){return e.isOpened})),this.canvas.addEventListener(this.nameSpace+".close",this.closeEditor)},n.deactivate=function(){this.canvas.removeFunction(this.nameSpace+".isOpen"),this.canvas.removeEventListener(this.nameSpace+".close",this.closeEditor),this.dispose()},e}(),yi=function(){function e(){var e=this;this.name="NativeHtmlDrag",this.namespace="NativeHtmlDrag",this.mouseDown=!1,this.dragStarted=!1,this.onMouseMove=function(t,n){if(e.mouseDown&&!e.dragStarted){e.dragStarted=!0;var i=new MouseEvent("htmlDragStart",n);t.dispatchEvent(i)}else e.dragStarted&&(i=new MouseEvent("htmlDrag",n),t.dispatchEvent(i))},this.disableSelect=function(e){e.preventDefault()},this.onMouseUp=function(t,n){if(n.preventDefault(),e.dragStarted){var i=new MouseEvent("htmlDragEnd",n);t.dispatchEvent(i)}e.mouseDown=!1,e.dragStarted=!1,t.ownerDocument.removeEventListener("mousemove",e.boundMouseMove),t.ownerDocument.removeEventListener("mouseup",e.boundMouseUp),t.ownerDocument.removeEventListener("contextmenu",e.boundMouseUp),window.removeEventListener("selectstart",e.disableSelect)}}var t=e.prototype;return t.init=function(e){this.canvas=e},t.handleHtmlDrag=function(e,t){var n=this;this.dragDom=t,t.addEventListener("mousedown",(function(e){window.addEventListener("selectstart",n.disableSelect),2!==e.button&&3!==e.which&&(n.mouseDown=!0,n.dragStarted=!1,t&&t.ownerDocument&&(n.boundMouseMove=n.onMouseMove.bind(n,t),n.boundMouseUp=n.onMouseUp.bind(n,t),t.ownerDocument.addEventListener("mousemove",n.boundMouseMove),t.ownerDocument.addEventListener("mouseup",n.boundMouseUp),t.ownerDocument.addEventListener("contextmenu",n.boundMouseUp)))}))},t.activate=function(){this.canvas.addFunction("handleHtmlDrag",this.handleHtmlDrag.bind(this))},t.deactivate=function(){this.canvas.removeFunction("handleHtmlDrag")},e}(),fi=function(){function e(){var e=this;this.name="StageDesignerDeviceData",this.dataMap=new Map,this.getDeviceData=function(t){return e.getDeviceDataOnLayer(t.layer)},this.getDeviceDataOnLayer=function(t){return t.executeFunction("getData","deviceData")||(t.parent?e.getDeviceDataOnLayer(t.parent):null)}}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addFunction("getDeviceData",this.getDeviceData)},t.deactivate=function(){this.canvas.removeFunction("getDeviceData")},e}(),mi=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,a)||this).payload=i,r}return q(t,e),t}(Te),xi=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,a)||this).artboard=i,r}return q(t,e),t}(Te),wi=function(e){function t(t,n,i,a,r){var o;return(o=e.call(this,t,n,r)||this).payload=i,o.isFinal=a||!1,o}return q(t,e),t}(Te),bi=function(e){function t(t,n,i,a,r){var o;o=e.call(this,t,n,i,r)||this;var s=n.getBoundingClientRect(),l=n.convertLayerDimensions({x:a.layerWorldX,y:a.layerWorldY,width:s.width,height:s.height,rotation:s.rotation});return o.layout=l,o.meta=a.meta,o.snapPoints=a.snapPoints,o}return q(t,e),t}(Ge),Li=function(){function e(){this.name="LayerDrag",this.nameSpace="LayerDrag",this.dragStarted=!1,this.startX=0,this.startY=0,this.startLayoutX=0,this.startLayoutY=0,this.startAbsoluteX=0,this.startAbsoluteY=0,this.totalDx=0,this.totalDy=0,this.isAltPressed=!1,this.isShiftPressed=!1,this.shiftDirection=""}var t=e.prototype;return t.applyDimensions=function(e,t){var n=this.dragEventData,i=isNaN(n.worldDx)?0:n.worldDx,a=isNaN(n.worldDy)?0:n.worldDy;this.totalDx+=i,this.totalDy+=a;var r=this.totalDx,o=this.totalDy;if(this.targetLayer.parent){var s=this.targetLayer?this.targetLayer.parent.getAbsoluteRotation():0,l=he.rotatePoint([r,o],360-s,[0,0]),d=this.canvas.executeFunction("snapToPoints",this.snapPoints,[this.startX,this.startY],[l[0],l[1]],Z({},this.boundingBox),[r,o],[this.startAbsoluteX,this.startAbsoluteY],s,this.boundingBoxWRTWorld);this.boundingBox=Z({},this.boundingBox,{x:this.boundingBox.x+d.delta.x,y:d.y+d.delta.y});var c=d.delta;this.isShiftPressed||(this.shiftDirection="");var u={layerWorldX:this.startLayoutX+c.x,layerWorldY:this.startLayoutY+c.y,meta:d.meta};this.isShiftPressed&&(this.shiftDirection||Math.abs(n.worldDx)!==Math.abs(n.worldDy)&&(this.shiftDirection=Math.abs(n.worldDx)>Math.abs(n.worldDy)?"horizontal":"vertical"),this.shiftDirection&&("horizontal"===this.shiftDirection?u.layerWorldY=this.targetLayer.getBoundingClientRect().y:u.layerWorldX=this.targetLayer.getBoundingClientRect().x));var h=new bi(e,this.targetLayer,n.originalEvent,u);this.targetLayer.dispatchEvent(e,h,n)}},t.init=function(e){this.canvas=e,this.dispose=null},t.activate=function(){var e=this;this.canvas.addFunction(this.nameSpace+".isDragging",(function(){return e.dragStarted})),this.canvas.addEventListener("dragStart",(function(t){return e.canvas.executeMiddleware("LayerDrag.dragStart",t,(function(t){try{if(e.dragStarted=!0,e.targetLayer=t.target,e.targetLayer){e.targetLayer.setDragging(!0),e.boundingBox=e.canvas.getContainerBoundingBoxWRTParent([e.targetLayer]),e.boundingBoxWRTWorld=e.canvas.getContainerBoundingBox([e.targetLayer]);var n=e.targetLayer.parent;if(!n)return Promise.resolve();e.startX=e.boundingBox.x,e.startY=e.boundingBox.y,e.startAbsoluteX=e.boundingBoxWRTWorld.x-e.canvas.getContainerBoundingBox([n]).x,e.startAbsoluteY=e.boundingBoxWRTWorld.y-e.canvas.getContainerBoundingBox([n]).y,e.snapPoints=e.canvas.executeFunction("getSnapPoints",[e.targetLayer],n);var i=e.targetLayer.getBoundingClientRect();e.startLayoutX=i.x,e.startLayoutY=i.y;var a=new bi("layerDragStart",e.targetLayer,t.originalEvent,{layerWorldX:i.x,layerWorldY:i.y,snapPoints:e.snapPoints});e.targetLayer.dispatchEvent("layerDragStart",a,t)}return Promise.resolve()}catch(e){return Promise.reject(e)}}))})),this.canvas.addEventListener("drag",(function(t){return e.canvas.executeMiddleware("LayerDrag.drag",t,(function(t){if(e.dragStarted){if(!e.targetLayer)return;e.dragEventData=t,e.applyDimensions("layerDrag")}}))})),this.canvas.addEventListener("dragEnd",(function(t){return e.canvas.executeMiddleware("LayerDrag.dragEnd",t,(function(t){if(e.dragStarted){if(!e.targetLayer)return;e.targetLayer.setDragging(!1),e.dragEventData=t,e.applyDimensions("layerDragEnd"),e.shiftDirection="",e.totalDx=0,e.totalDy=0,e.startX=0,e.startY=0,e.startAbsoluteX=0,e.startAbsoluteY=0,e.dragStarted=!1,e.dragEventData=void 0}}))})),this.canvas.addEventListener("blur",(function(){e.isAltPressed&&(e.isAltPressed=!1),e.isShiftPressed&&(e.isShiftPressed=!1)})),this.canvas.addEventListener("keyUp",(function(t){var n=t.originalEvent?t.originalEvent:t;16===n.keyCode&&(e.isShiftPressed=!1),18===n.keyCode&&(e.isAltPressed=!1),e.dragEventData&&e.applyDimensions("layerDrag",!0)})),this.canvas.addEventListener("keyDown",(function(t){var n=t.originalEvent?t.originalEvent:t;16===n.keyCode&&(e.isShiftPressed=!0),18===n.keyCode&&(e.isAltPressed=!0),e.dragEventData&&e.applyDimensions("layerDrag")}))},t.deactivate=function(){this.dispose()},e}(),Ei=function(){function e(){var e=this;this.name="GridRenderer",this.gridLayers=new Map,this.gridLayersRef=new Map,this.gridOffset={x:0,y:0},this.refreshGrid=function(t){var n=e.gridLayers.get(t);"canvas"!==t.type&&e.createGrid(t,n?n.dimensions:{x:0,y:0})},this.getGridSize=function(t){var n=e.gridLayers.get(t.layer);return n?n.dimensions:null},this.setGridSize=function(t,n){var i=t.layer;e.gridLayers.has(i)&&e.gridLayers.delete(i),e.gridLayers.set(i,{dimensions:n})},this.hideGrid=function(t){var n=t.layer;if(e.gridLayers.has(n)&&(e.gridLayers.delete(n),e.gridLayersRef.get(n))){var i=e.gridLayersRef.get(n);if(i){var a=i.get("wrapper");e.gridWrapper.removeChild(a)}e.gridLayersRef.delete(n)}e.gridLayers.forEach((function(t,n){e.refreshGrid(n)}))},this.showGrid=function(t,n){e.setGridSize(t,n),e.gridLayers.forEach((function(t,n){e.refreshGrid(n)}))},this.setGridOffset=function(t,n){e.gridOffset=n},this.getGridOffset=function(t,n){return e.gridOffset},this.adjustStroke=function(){e.gridLayers.forEach((function(t,n){var i=e.gridLayersRef.get(n);if(i){var a=i.get("path");a&&a.setAttributeNS(null,"stroke-width",1/e.canvas.getZoom()+"px")}}))},this.createGrid=function(t,n){var i=t.getBoundingClientRect(),a=e.gridLayersRef.get(t);if(a){var r=a.get("wrapper");r||((r=document.createElement("div")).style.pointerEvents="none",r.style.position="absolute",e.gridWrapper.appendChild(r),a.set("wrapper",r)),r.style.left=i.rootX+"px",r.style.top=i.rootY+"px",r.style.height=i.height+"px",r.style.width=i.width+"px";var o="http://www.w3.org/2000/svg",s=a.get("svg");s||((s=document.createElementNS(o,"svg")).setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"width","100%"),r.appendChild(s),a.set("svg",s));var l=a.get("defs");l||(l=document.createElementNS(o,"defs"),s.appendChild(l),a.set("defs",l));var d=a.get("pattern");d||(d=document.createElementNS(o,"pattern"),l.appendChild(d),d.setAttributeNS(null,"id","grid-pattern"),d.setAttributeNS(null,"patternUnits","userSpaceOnUse"),a.set("pattern",d)),d.setAttributeNS(null,"width",n.x+"px"),d.setAttributeNS(null,"height",n.y+"px");var c=a.get("path");c||(c=document.createElementNS(o,"path"),d.appendChild(c),c.setAttributeNS(null,"fill","none"),c.setAttributeNS(null,"stroke","#DBDBDB"),a.set("path",c)),c.setAttributeNS(null,"d","M "+n.x+" 0 L 0 0 0 "+n.y),c.setAttributeNS(null,"stroke-width",1/e.canvas.getZoom()+"px");var u=a.get("rect");u||(u=document.createElementNS(o,"rect"),s.appendChild(u),u.setAttributeNS(null,"height","100%"),u.setAttributeNS(null,"width","100%"),u.setAttributeNS(null,"fill","url(#grid-pattern)"),a.set("rect",u))}else e.gridLayersRef.set(t,new Map),e.createGrid(t,n)}}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){var e=this,t=this.canvas.getBoundingClientRect();this.gridWrapper=document.createElement("div"),this.dispose=this.canvas.addDomToWorld(this.gridWrapper,!0),this.gridWrapper.style.pointerEvents="none",this.gridWrapper.style.position="absolute",this.gridWrapper.style.height=t.height+"px",this.gridWrapper.style.width=t.width+"px",this.canvas.addFunction("showGrid",this.showGrid),this.canvas.addFunction("hideGrid",this.hideGrid),this.canvas.addFunction("getGridSize",this.getGridSize),this.canvas.addFunction("setGridSize",this.setGridSize),this.canvas.addFunction("setGridOffset",this.setGridOffset),this.canvas.addFunction("getGridOffset",this.getGridOffset),this.canvas.addEventListener("setLayout",(function(t){if("canvas"===t.target.type){var n=t.target.getBoundingClientRect();e.gridWrapper.style.height=n.height,e.gridWrapper.style.width=n.width,e.gridLayers.forEach((function(t,n){e.refreshGrid(n)}))}if(e.gridLayers.has(t.target)){var i=e.gridLayers.get(t.target);i&&t.target.executeFunction("showGrid",i.dimensions)}})),this.canvas.on("zoom",(function(){e.adjustStroke()}))},t.deactivate=function(){this.canvas.removeFunction("showGrid"),this.canvas.removeFunction("hideGrid"),this.canvas.removeFunction("getGridSize"),this.canvas.removeFunction("setGridSize"),this.canvas.removeFunction("setGridOffset"),this.canvas.removeFunction("getGridOffset"),this.dispose()},e}(),Di=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,a)||this).layers=i,r}return q(t,e),t}(Te),Si=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,a)||this).originalEvent=i,r}return q(t,e),t}(Te),Ci=function(){function e(){var e=this;this.name="StageDesigner",this.artboards=new Map,this.topLayerSelectionMode=!1,this.previousMovedLayers=[],this.getNewRootLayer=function(t,n){var i,a=e.canvas.getHitRectResult(t.rootX,t.rootY,t.width,t.height),r=n.children[0];return o.filter(a,(function(e){return!(e===r||!e.parent||!e.parent.parent||"canvas"!==e.parent.parent.type)})).forEach((function(e){var n=e.getBoundingClientRect(),a=Math.max(0,Math.min(n.rootX+n.width,t.rootX+t.width)-Math.max(n.rootX,t.rootX)),r=Math.max(0,Math.min(n.rootY+n.height,t.rootY+t.height)-Math.max(n.rootY,t.rootY));i=a*r>t.width*t.height/2?e:void 0})),i},this.handleMoveLayerArtboard=function(t){if(-1===o.indexOf(e.previousMovedLayers,t.target)){e.canvas.executeFunction("Hover.hideAllHoverBoxes");var n=t.target.getBoundingClientRect(),i=t.target.executeFunction("getArtboard"),a=o.filter(e.canvas.selectedLayers,(function(e){return!e.parent||"canvas"!==e.parent.type})),r={};if(a.length>1){var s=e.canvas.getBoundingBox(a);r={rootX:s.x,rootY:s.y,width:s.width,height:s.height}}else r={rootX:n.rootX,rootY:n.rootY,width:n.width,height:n.height};var l=e.getNewRootLayer(r,i);if(l)if(a.length>0&&a.includes(t.target)){var d=[];a.forEach((function(t){e.previousMovedLayers.push(t);var n=e.moveLayer(t,l);n&&d.push(n)})),e.canvas.selectLayers(d),e.canvas.dispatchEvent("resetResizer",new Si("resetResizer",e.canvas,t.originalEvent))}else{var c=new Ge("mouseup",e.canvas,t.originalEvent,e.canvas);e.canvas.dispatchEventOnHitLayer("mouseup",c),e.moveLayer(t.target,l);var u=new Ge("mousedown",e.canvas,t.originalEvent,e.canvas);e.canvas.dispatchEventOnHitLayer("mousedown",u)}e.canvas.executeFunction("Hover.showAllHoverBoxes")}},this.moveLayer=function(t,n){var i,a=o.indexOf(null==(i=t.parent)?void 0:i.children,t),r=n.children.length;e.canvas.dispatchEvent("moveLayer",new vi("moveLayer",e.canvas,{fromParent:t.parent,toParent:n,fromIndex:a,toIndex:r}));var s=n.children[r],l=t.getBoundingClientRect(),d=n.getBoundingClientRect(),c=Z({},t.getBoundingClientRect(),{x:l.rootX-d.rootX,y:l.rootY-d.rootY});return s&&o.forEach(s.convertLayerDimensions(c),(function(t,n){e.canvas.dispatchEvent("setStyleAttribute",new vi("setStyleAttribute",e.canvas,{layer:s,key:n,value:t,stylePropName:"style"}))})),s},this.getNewArtboardPosition=function(){var t,n=Number.MIN_VALUE,i=Number.MIN_VALUE,a=Number.MIN_VALUE;return 0===e.artboards.size?{left:300,top:50,artTop:50,artLeft:300}:(e.artboards.forEach((function(e){var t=e.getBoundingClientRect(),r=t.x+t.width;n<r&&(n=r,a=t.y+t.height/2,i=t.y)})),t=n+50,{left:n=1*n+50,top:a=1*a-40,artTop:i,artLeft:t})}}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){var e=this;this.canvas.addFunction("addArtboard",this.addArtboard.bind(this)),this.canvas.addFunction("removeArtboard",this.removeArtboard.bind(this)),this.canvas.addFunction("selectArtboard",this.selectArtboard.bind(this)),this.canvas.addFunction("getSelectedArtboard",this.getSelectedArtboard.bind(this)),this.canvas.addFunction("getArtboard",this.getArtboard.bind(this)),this.canvas.addFunction("focusArtboard",this.focusArtboard.bind(this)),this.canvas.addFunction("getAllArtboards",this.getAllArtboards.bind(this)),this.canvas.addFunction("getArtboardById",this.getArtboardById.bind(this)),this.canvas.addFunction("getSelectedArtboardId",this.getSelectedArtboardId.bind(this)),this.canvas.addFunction("getNewArtboardPosition",this.getNewArtboardPosition.bind(this)),this.canvas.addFunction("getHitArtboard",this.getHitArtboard.bind(this)),this.canvas.on("selectedLayers",(function(){if(e.canvas.selectedLayers[0]&&e.canvas.selectedLayers[0].parent&&e.canvas.selectedLayers[0].parent.parent&&"canvas"===e.canvas.selectedLayers[0].parent.parent.type&&"scrollView"!==e.canvas.selectedLayers[0].type){ze();var t=e.canvas.selectedLayers[0].parent;e.canvas.selectLayers(t),t.executeFunction(0===t.children[0].children.length?"LayerResizer.showLayer":"LayerResizer.hideLayer"),Ie()}})),this.canvas.addMiddleware("MouseRect.getHitRectResult",(function(t,n){var i=e.canvas.executeFunction("getSelectedArtboard");if(i){var a=[],r=[],s=Array.from(e.artboards.values()),l=s.length-1,d=[];return n.forEach((function(e){e.parent&&"none"===e.parent.style.get("pointerEvents")&&d.push(e.parent)})),o.union(n,d).forEach((function(e){if("canvas"!==e.type){var t,d=e.executeFunction("getArtboard");if(d&&(d.children[0]&&d.children[0].children.includes(e)&&(t="none"!==e.style.get("pointerEvents")?[e]:o.intersection(n,e.children)),t))if(d===i)a=o.union(a,t);else{var c=o.indexOf(s,d);c<l?(r=o.union(r=[],t),l=c):c===l&&(r=o.union(r,t))}}})),t(a.length?a:r)}return t(n)})),this.canvas.addMiddleware("Canvas.dispatchEventOnHitLayer",(function(t,n){return"click"===n.name||"mousemove"===n.name?(e.modifyEventForSelectableLayers(n),t(n)):t(n)})),this.canvas.addMiddleware("LayerDrag.dragStart",(function(t,n){var i=n.target;if(!("canvas"===i.type||i.parent.parent&&"canvas"===i.parent.parent.type||e.canvas.moveWithGrabHandle))return e.modifyEventForSelectableLayers(n,!0),t(n)})),this.canvas.addEventListener("dblclick",(function(t){for(var n=t.target.getHitResult(t.worldX,t.worldY),i=t.target;i&&"canvas"!==i.type&&!e.canvas.selectedLayers.includes(i);){if(e.canvas.selectedLayers.includes(i.parent)){var a=Mi(i,n);a&&e.canvas.dispatchEvent("selectLayers",new Di("selectLayers",e.canvas,[a]));break}i=i.parent}})),this.canvas.addMiddleware("MouseRect.dragStart",(function(t,n){if(!e.canvas.moveWithGrabHandle){var i=e.canvas.getHitLayer(n.worldX,n.worldY);if(i&&(i.locked||"canvas"===i.type&&n.target&&"canvas"===n.target.type))t(n);else{var a=[];Array.from(e.artboards.values()).forEach((function(e){var t=e.children[0];t&&a.push(t)})),a.includes(i)&&t(n)}}})),this.canvas.addMiddleware("LayerResizer.dragStart",(function(t,n){e.canvas.moveWithGrabHandle||t(n)})),this.canvas.addMiddleware("LayerResizer.drag",(function(t,n){e.canvas.moveWithGrabHandle||t(n)})),this.canvas.addMiddleware("LayerResizer.dragEnd",(function(t,n){e.canvas.moveWithGrabHandle||t(n)})),this.canvas.addEventListener("keyUp",(function(t){91===(t.originalEvent?t.originalEvent:t).keyCode&&e.setTopLayerSelectionMode(!1)})),this.canvas.addEventListener("keyDown",(function(t){91===(t.originalEvent?t.originalEvent:t).keyCode&&e.setTopLayerSelectionMode(!0)})),this.canvas.addMiddleware("LayerResizer.getHandles",(function(e,t){var n,i;if("canvas"===(null==t||null==(n=t[0])||null==(i=n.parent)?void 0:i.type)){var a=e(t);return o.filter(a,(function(e){return"ROTATE"!==e}))}return e(t)})),this.canvas.addEventListener("keyDown",(function(t){32===(t=t.originalEvent?t.originalEvent:t).keyCode&&e.canvas.enableMoveWithGrabHandle()})),this.canvas.addEventListener("keyUp",(function(t){32===(t=t.originalEvent?t.originalEvent:t).keyCode&&e.canvas.disableMoveWithGrabHandle()}))},t.addArtboard=function(e,t){var n=this,i=this.getNewArtboardPosition(),a=this.canvas.createLayer();return this.canvas.addChild(a),a.setLayout({top:i.artTop,left:i.artLeft,height:600,width:300,position:"absolute"}),a.setStyle("backgroundColor","white"),a.setProp("id",Se(20)),this.artboards.set(t,a),a.on("layout",(function(){n.canvas.dispatchEvent("artboardLayoutChanges",new Te("artboardLayoutChanges",n.canvas,n.canvas))})),a.on("updateDom",(function(){n.canvas.dispatchEvent("artboardLayoutChanges",new Te("artboardLayoutChanges",n.canvas,n.canvas))})),this.canvas.dispatchEvent("artboardLayoutChanges",new Te("artboardLayoutChanges",this.canvas,this.canvas)),a},t.removeArtboard=function(e,t){var n=this.artboards.get(t);n&&(this.artboards.delete(t),this.canvas.removeChild(n)),this.canvas.dispatchEvent("artboardLayoutChanges",new Te("artboardLayoutChanges",this.canvas,this.canvas))},t.selectArtboard=function(e,t){if(this.selectedArtboard=t,this.selectedArtboard){var n=this.selectedArtboard.getBoundingClientRect();this.canvas.executeFunction("setGridOffset",{x:n.rootX,y:n.rootY}),this.canvas.executeFunction("setGridSize",this.selectedArtboard.executeFunction("getGridSize"))}this.canvas.dispatchEvent("artboardSelected",new xi("artboardSelected",this.canvas,t,this.canvas))},t.focusArtboard=function(e){var t=this.canvas.getBoundingClientRect(),n=e.layer.getBoundingClientRect();this.canvas.executeFunction("setScroll",{x:(n.x+n.width/2)/t.width,y:(n.y+n.height/2)/t.height})},t.getHitArtboard=function(e,t,n){var i=this.canvas.getHitResult(t,n),a=Array.from(this.artboards.values()),r=[];return o.forEach(i.reverse(),(function(e){a.includes(e)&&r.push(e)})),o.isEmpty(r)?null:r[r.length-1]},t.getSelectedArtboard=function(e,t){return this.selectedArtboard},t.getSelectedArtboardId=function(e){return this.selectedArtboard?this.selectedArtboard.props.get("id"):void 0},t.getAllArtboards=function(e){return this.artboards},t.getArtboardById=function(e,t){return this.artboards.get(t)},t.getArtboard=function(e){var t=e.layer;if("canvas"!==t.type){for(var n=Array.from(this.artboards.values());!n.includes(t)&&t.parent;)t=t.parent;return n.includes(t)?t:null}throw new Error("getArtboard should be called on layer only")},t.modifyEventForSelectableLayers=function(e,t){var n=this;if(void 0===t&&(t=!1),!e.target||"canvas"!==e.target.type){var i,a=e.target.getHitResult(e.worldX,e.worldY),r=this.canvas.executeFunction("getSelectedArtboard");r&&(i=r.children[0]);var s=[],l=[],d=Array.from(this.artboards.values());if(d.forEach((function(e){var t=e.children[0];t&&(s=s.concat(t.children),l.push(t))})),!d.includes(e.target)||!t)for(var c=e.target,u=function(){if(n.topLayerSelectionMode)return"break";if(n.canvas.selectedLayers.length>0&&n.canvas.selectedLayers[0].parent&&n.canvas.selectedLayers[0].parent.children.includes(c)){var t=Mi(c,a);return t&&(e.target=t),"break"}if(s.includes(c)){var r=Mi(c,a);return r&&(e.target=r),"break"}if(l.includes(c)){var d=Mi(c,a);return d&&(e.target=d),"break"}for(var u=[],h=n.canvas.selectedLayers[0];i&&h&&!i.children.includes(h)&&h.parent;)u.push(h=h.parent);var p=[];if(u.forEach((function(e){e.parent&&(p=p.concat(e.parent.children))})),o.union(u,p).includes(c)){var v=Mi(c,a);return v&&(e.target=v),"break"}c=c.parent,e.target=null};c&&"canvas"!==c.type&&"break"!==u(););}},t.setTopLayerSelectionMode=function(e){this.topLayerSelectionMode=e},t.deactivate=function(){this.canvas.removeFunction("addArtboard"),this.canvas.removeFunction("removeArtboard"),this.canvas.removeFunction("getArtboardById"),this.canvas.removeFunction("getNewArtboardPosition"),this.canvas.removeFunction("getSelectedArtboardId")},e}();function Mi(e,t){if(t.includes(e))return e;if("none"===e.style.get("pointerEvents")){var n=o.findLast(e.children,(function(e){return!!t.includes(e)}));if(n)return n}}var Pi=function(){function e(){this.name="LayerMouseCursorPlugin"}var t=e.prototype;return t.init=function(e){this.canvas=e,this.dispose=null},t.activate=function(){var e=this;this.canvas.addFunction("setMouseCursor",(function(t,n){t.layer.addEventListener("mouseEnter",(function(t){e.canvas.setMouseCursor(n)})),t.layer.addEventListener("mouseLeave",(function(t){e.canvas.setMouseCursor("default")}))}))},t.deactivate=function(){this.canvas.removeFunction("setMouseCursor"),this.dispose()},e}(),Fi=function(){function e(){this.name="DataStore",this.dataMap=new Map}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addFunction("setData",this.setData.bind(this)),this.canvas.addFunction("getData",this.getData.bind(this)),this.canvas.addFunction("removeData",this.removeData.bind(this))},t.setData=function(e,t,n){var i,a,r=e.layer,o=this.dataMap.get(r);o?o=Z({},o,((i={})[t]=n,i)):((a={})[t]=n,o=a),this.dataMap.set(r,o)},t.getData=function(e,t){var n=this.dataMap.get(e.layer);if(n)return t?n[t]:n},t.removeData=function(e,t){var n=e.layer,i=this.dataMap.get(n);t?delete i[t]:this.dataMap.delete(n)},t.deactivate=function(){this.canvas.removeFunction("setData"),this.canvas.removeFunction("getData"),this.canvas.removeFunction("removeData")},e}(),Ri=function(){function e(){this.name="Tooltip"}var t=e.prototype;return t.init=function(e){this.canvas=e,this.dispose=null},t.activate=function(){var e=document.createElement("div");e.style.position="absolute",this.dispose=this.canvas.addDomToViewport(e),e.style.pointerEvents="none",e.style.padding=".25em .4em",e.style.fontWeight="700px",e.style.textAlign="center",e.style.flexDirection="row",e.style.alignItems="center",e.style.justifyContent="center",e.style.display="none",e.style.whiteSpace="nowrap",e.style.verticalAlign="middle",e.style.borderRadius="2px",e.style.position="absolute",e.style.color="white",e.style.fontSize="10px",e.style.background="#1FB2CC",e.style.fontFamily="Roboto, -apple-system, BlinkMacSystemFont, sans-serif",this.canvas.addFunction(this.name+".show",(function(t,n,i){e.style.left=n.x+"px",e.style.top=n.y+"px",e.style.display="flex",e.childNodes.length?e.childNodes[0].nodeValue=i:e.appendChild(document.createTextNode(i))})),this.canvas.addFunction(this.name+".hide",(function(t){e.style.display="none"})),this.canvas.addFunction(this.name+".setPosition",(function(t,n){e.style.left=n.x+"px",e.style.top=n.y+"px"})),this.canvas.addFunction(this.name+".setText",(function(t,n){e.childNodes.length?e.childNodes[0].nodeValue=n:e.appendChild(document.createTextNode(n))}))},t.deactivate=function(){this.canvas.removeFunction(this.name+".show"),this.canvas.removeFunction(this.name+".hide"),this.canvas.removeFunction(this.name+".setPosition"),this.canvas.removeFunction(this.name+".setText"),this.dispose()},e}(),Ti=function(){function e(){var e=this;this.name="OpacityShortcut",this.opacity=100,this.handleKeyPress=function(t){var n=t.originalEvent,i=n.keyCode||n.which,a=e.opacity;if(!(n.altKey||n.ctrlKey||n.metaKey||n.shiftKey)&&e.canvas.selectedLayers.length>0&&i>=48&&i<=57){if(e.previousEvent&&n.timeStamp-e.previousEvent.timeStamp<1e3){if((a=10*e.opacity+parseInt(n.key))>100){var r=a.toString();a=parseInt(r.slice(r.length-2,r.length))}e.opacity=a}else a=10*parseInt(n.key),e.opacity=parseInt(n.key);e.previousEvent=n,e.canvas.selectedLayers.map((function(t){e.canvas.dispatchEvent("setStyleAttribute",new vi("setStyleAttribute",e.canvas,{layer:t,key:"opacity",value:a/100,stylePropName:"style"}))}))}}}var t=e.prototype;return t.init=function(e){this.canvas=e,this.dispose=null},t.activate=function(){this.canvas.addEventListener("keyDown",this.handleKeyPress)},t.deactivate=function(){this.dispose()},e}(),Ai=function(e){function t(t,n,i,a){var r;r=e.call(this,t,n,a)||this;var o=i.x,s=i.y,l=i.fontSize;return l&&(r.fontSize=l),s&&(r.y=s),o&&(r.x=o),r}return q(t,e),t}(Te),Ni=function(){function e(){var e=this;this.name="FontResizerPlugin",this.namespace="FontResizer",this.disabled=!1,this.getHandles=function(t,n){if(1!==n.length||"text"!==n[0].type||n[0].layout.get("height")||n[0].layout.get("width"))return t(n);var i,a=n[0],r=null==(i=a.parent)?void 0:i.getBoundingClientRect(),o=a.getBoundingClientRect(),s="";if(r){var l=r.rootY+r.height/2,d=r.rootX+r.width/2,c=o.rootY+o.height/2,u=o.rootX+o.width/2;return c<l?s="B":s+=c>l?"T":"",s+=u<d?"R":u>d?"L":"",a.parent&&e.isInsideCenterBox(o,r)&&(s="B"),[s,"ROTATE"]}},this.handleDragStart=function(t,n){var i=n.data,a=n.selectedLayer;return i.targetHandle&&i.targetHandle.includes("ROTATE")||e.disabled||!a||"text"!==a.type||a.layout.get("height")||a.layout.get("width")?t(n):(e.canvas.executeFunction("Tooltip.hide"),a.executeFunction("setData","fontSize",a.layout.get("fontSize")||14),a.executeFunction("setData","initialDimensions",a.getBoundingClientRect()),e.canvas.executeFunction("LayerResizer.stopHandleRerender"),void e.canvas.dispatchEvent(e.namespace+".dragStart",new Ai(e.namespace+".dragStart",a,{})))},this.handleDrag=function(t,n){var i=n.data,a=n.selectedLayer;if(i.targetHandle&&i.targetHandle.includes("ROTATE")||e.disabled)return t(n);if(!a||"text"!==a.type||a.layout.get("height")||a.layout.get("width"))return t(n);var r=i.session,o=i.targetHandle,s=r.current.x-r.start.x,l=r.current.y-r.start.y,d=a.executeFunction("getData","fontSize"),c=a.executeFunction("getData","initialDimensions"),u=s/c.width,h=l/c.height,p=d,v=c.x,g=c.y;"B"===o?p+=d*h:"T"===o?p+=-d*h:-1===o.indexOf("L")?p+=d*u:p+=-d*u,p<=0&&(p*=-1),e.canvas.dispatchEvent(e.namespace+".setFontSize",new Ai(e.namespace+".setFontSize",a,{fontSize:Math.round(p)}));var y=a.getBoundingClientRect(),f=y.width-c.width,m=y.height-c.height;"L"===o||"R"===o?g-=m/2:-1===o.indexOf("B")&&(g-=m),-1!==o.indexOf("L")?v-=f:"T"!==o&&"B"!==o||(v-=f/2),(c.y!==g||c.x!==v)&&e.canvas.dispatchEvent(e.namespace+".setPosition",new Ai(e.namespace+".setPosition",a,{y:g,x:v})),e.canvas.executeFunction("Tooltip.show",{x:i.viewportX+20,y:i.viewportY+20},""+Math.round(p))},this.handleDragEnd=function(t,n){var i=n.data,a=n.selectedLayer;return i.targetHandle&&i.targetHandle.includes("ROTATE")||e.disabled||!a||"text"!==a.type||a.layout.get("height")||a.layout.get("width")?t(n):(e.canvas.executeFunction("Tooltip.hide"),a.executeFunction("setData","fontSize",a.layout.get("fontSize")||14),a.executeFunction("setData","initialDimensions",a.getBoundingClientRect()),e.canvas.executeFunction("LayerResizer.startHandleRerender"),void e.canvas.dispatchEvent(e.namespace+".dragEnd",new Ai(e.namespace+".dragEnd",a,{})))}}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addMiddleware("LayerResizer.handleDragStart",this.handleDragStart),this.canvas.addMiddleware("LayerResizer.handleDrag",this.handleDrag),this.canvas.addMiddleware("LayerResizer.handleDragEnd",this.handleDragEnd),this.canvas.addMiddleware("LayerResizer.getHandles",this.getHandles),this.canvas.addFunction(this.namespace+".disable",this.disableDrag.bind(this))},t.disableDrag=function(){this.disabled=!0},t.isInsideCenterBox=function(e,t){var n=e.rootY+e.height/2,i=e.rootX+e.width/2;return i>t.rootX+t.width/5&&i<t.rootX+4*t.width/5&&n>t.rootY+t.height/10&&n<t.rootY+9*t.height/10},t.deactivate=function(){},e}(),Bi=document.createElement("style");Bi.innerHTML="\n #transition {\n   transition: top 0.2s ease-in 0s, left 0.2s ease-in 0s, right 0.2s ease-in 0s,\n     bottom 0.2s ease-in 0s;\n }";var ki=function(){function e(){var e=this;this.name="FlexDragPlugin",this.namespace="FlexDrag",this.disabled=!1,this.layerOpacities=new Map,this.previousTriggerPoint=null,this.nextTriggerPoint=null,this.target=[],this.flexLayers=[],this.totalDx=0,this.totalDy=0,this.initialSnapshotData=new Map,this.beforeDragSnapshotData=new Map,this.currentSnapshotData=new Map,this.isFlex=!1,this.layersHeightWidth=new Map,this.saveLayersHeightWidth=function(t){e.layersHeightWidth.get(t)||e.layersHeightWidth.set(t,{height:t.layout.get("height"),width:t.layout.get("width")})},this.clearFlexLayersHeightWidth=function(){e.layersHeightWidth.clear()},this.saveSiblingOpacity=function(t){o.forEach(t.children,(function(t){if(t.isFlexChild()){var n=o.isNil(t.style.get("opacity"))?1:t.style.get("opacity");e.layerOpacities.set(t,n),t.setStyle("opacity",.3)}}))},this.revertSiblingOpacity=function(){e.layerOpacities.forEach((function(t,n){n.setStyle("opacity",e.layerOpacities.get(n))})),e.layerOpacities.clear()},this.layerResizerDrag=function(t,n){if(!e.disabled&&0!==n.selectedLayers.length)return e.isFlex?void 0:t(n)},this.layerResizerDragEnd=function(t,n){if(!e.disabled&&0!==n.selectedLayers.length)return e.revertParentDims(),e.canvas.dispatchEvent(e.namespace+".dragEnd",new Te(e.namespace+".dragEnd",e.canvas)),e.isFlex?void 0:t(n)},this.revertParentDims=function(){if(e.initialParentData){var t=e.initialParentData.layer,n=e.initialParentData.dims;(t.isAutoHeight()||t.isAutoWidth())&&(t.removeLayout(["position","top","left","right","bottom"]),n.hasOwnProperty("height")||t.removeLayout("height"),n.hasOwnProperty("width")||t.removeLayout("width"),t.setLayout(n),e.initialParentData=void 0)}},this.changeParentDims=function(t){if(!e.initialParentData&&(t.isAutoHeight()||t.isAutoWidth())){e.initialParentData={layer:t,dims:t.layout.getAll()};var n=e.getMarginAdjustedBounds(t);t.setLayout({position:"absolute",left:n.x,top:n.y,width:n.width,height:n.height})}},this.setFlexLayers=function(){var t;(t=e.target instanceof He?e.target.parent:e.target[0].parent)&&(e.flexLayers=[],o.forEach(t.children,(function(t){document.body.appendChild(Bi),t.isFlexChild()?(t.setProp("id","transition"),e.saveLayersHeightWidth(t),e.flexLayers.push(t)):e.flexLayers.push(void 0)})))},this.createGhostLayer=function(t,n){var i={width:t.width,height:t.height,left:t.x,top:t.y,position:"absolute"};if(e.target instanceof He){e.ghostLayer=e.canvas.createLayer(),n.addChild(e.ghostLayer),e.ghostLayer.setLayout(i),e.ghostLayer.executeFunction("Hover.hideLayer"),e.target.setStyle("opacity",e.layerOpacities.get(e.target));var a=Z({},e.target.style.getAll());e.ghostLayer.setStyle(Z({},a,{opacity:0}))}else{var r=e.canvas.createLayer();n.addChild(r),r.setLayout(i),r.executeFunction("Hover.hideLayer"),e.target.forEach((function(t){var n=e.canvas.createLayer();r.addChild(n);var i=e.getMarginAdjustedBounds(t),a=Z({},t.style.getAll());t.setStyle("opacity",e.layerOpacities.get(t));var o=e.getMarginAdjustedBounds(r);n.setLayout({left:i.x-o.x,top:i.y-o.y,width:i.width,height:i.height,position:"absolute"}),n.setStyle(Z({},a,{opacity:0}))})),e.ghostLayer=r}},this.startGhostDragging=function(t){document.addEventListener("mousemove",e.ghostMove),document.addEventListener("mouseup",e.ghostMouseUp),document.addEventListener("contextmenu",e.ghostMouseUp),e.canvas.setDragging(!0);var n=new Ge("mousedown",e.canvas,t.originalEvent,e.canvas);e.canvas.dispatchEventOnHitLayer("mousedown",n)},this.ghostMove=function(t){e.canvas.handleNativeEvent(t)},this.ghostMouseUp=function(t){document.removeEventListener("mousemove",e.ghostMove),document.removeEventListener("mouseup",e.ghostMouseUp),document.removeEventListener("contextmenu",e.ghostMouseUp),e.canvas.handleNativeEvent(t),e.canvas.setDragging(!1)},this.getMarginAdjustedBounds=function(e){var t=e.getBoundingClientRect();return Z({},t,{x:t.x-e.getMarginLeft(),y:t.y-e.getMarginTop()})},this.endFlexLayerDragging=function(t){var n=new Ge("mouseup",e.canvas,t.originalEvent,e.canvas);e.canvas.dispatchEventOnHitLayer("mouseup",n)},this.recordCurrentSnapshot=function(t){e.currentSnapshotData.clear(),t.children.forEach((function(t,n){t!==e.ghostLayer&&e.currentSnapshotData.set(t,{index:n,dims:o.cloneDeep(e.getMarginAdjustedBounds(t))})}))},this.changeToAbsolute=function(t){t.children.forEach((function(t){if(t!==e.ghostLayer){var n=e.getMarginAdjustedBounds(t);t.setLayout({position:"absolute",left:n.x,top:n.y,width:n.width,height:n.height})}}))},this.revertBackToSnapshot=function(t,n){n.forEach((function(n,i){i.getIndexInParent()!==n.index&&i.move(t,n.index),e.flexLayers.includes(i)&&i.removeLayout(["position","top","left","right","bottom"]);var a=e.layersHeightWidth.get(i);e.flexLayers.includes(i)&&a&&(a.height||o.isNil(i.layout.get("height"))||i.removeLayout("height"),a.width||o.isNil(i.layout.get("width"))||i.removeLayout("width"))}))},this.findAbsolutePreviousLayer=function(t){for(var n=void 0,i=t-1;o.isNil(n)&&i>=0;)e.flexLayers[i]&&(n=e.flexLayers[i]),i--;return n},this.findPreviousLayer=function(t){return e.flexDirection&&e.flexDirection.includes("reverse")?e.findAbsoluteNextLayer(t):e.findAbsolutePreviousLayer(t)},this.findAbsoluteNextLayer=function(t){for(var n=void 0,i=t+1;o.isNil(n)&&i<e.flexLayers.length;)e.flexLayers[i]&&(n=e.flexLayers[i]),i++;return n},this.findNextLayer=function(t){return e.flexDirection&&e.flexDirection.includes("reverse")?e.findAbsolutePreviousLayer(t):e.findAbsoluteNextLayer(t)},this.setTriggerPoints=function(){if(e.previousTriggerPoint=null,e.nextTriggerPoint=null,e.target instanceof He){var t=o.indexOf(e.flexLayers,e.target);if(-1!==t){var n=e.findPreviousLayer(t),i=e.findNextLayer(t),a=e.getMarginAdjustedBounds(e.target);if(n){var r=e.getMarginAdjustedBounds(n);e.previousTriggerPoint=e.calculateTriggerPoint(r,a)}if(i){var s=e.getMarginAdjustedBounds(i);e.nextTriggerPoint=e.calculateTriggerPoint(a,s)}}}else{var l=o.sortBy(e.target,(function(e){return e.getIndexInParent()})),d=o.indexOf(e.flexLayers,l[0]),c=o.indexOf(e.flexLayers,l[l.length-1]);if(-1!==d&&-1!==c){var u=e.findPreviousLayer(d),h=e.findNextLayer(c),p=e.canvas.getBoundingBox(l),v=l.length&&l[0].parent?e.getMarginAdjustedBounds(l[0].parent):void 0;if(v){var g=Z({},p,{x:p.x-v.rootX,y:p.y-v.rootY});if(u){var y=e.getMarginAdjustedBounds(u);e.previousTriggerPoint=e.calculateTriggerPoint(y,g)}if(h){var f=e.getMarginAdjustedBounds(h);e.nextTriggerPoint=e.calculateTriggerPoint(g,f)}}}}},this.calculateTriggerPoint=function(t,n){return"row"===e.flexDirection||"row-reverse"===e.flexDirection?(t.x+n.x+n.width)/2:(n.y+n.height+t.y)/2},this.handleSwapWRTNewPosition=function(t,n){var i,a,r,s=e.previousTriggerPoint&&t>e.previousTriggerPoint&&n<e.previousTriggerPoint,l=e.nextTriggerPoint&&t<e.nextTriggerPoint&&n>e.nextTriggerPoint;if(e.target instanceof He)a=i=o.indexOf(e.flexLayers,e.target),(r=s?e.findPreviousLayer(i):l?e.findNextLayer(i):null)&&(e.newTargetIndex=o.indexOf(e.flexLayers,r));else{var d=o.sortBy(e.target,(function(e){return e.getIndexInParent()})),c=o.indexOf(e.flexLayers,d[0]),u=o.indexOf(e.flexLayers,d[d.length-1]);s?(a=u,(r=e.findPreviousLayer(c))&&(e.newTargetIndex=o.indexOf(e.flexLayers,r))):l&&(a=c,(r=e.findNextLayer(u))&&(e.newTargetIndex=o.indexOf(e.flexLayers,r)))}!o.isNil(a)&&a>=0&&r&&e.internalMove(r,a)},this.internalMove=function(t,n){var i=t.parent;if(i){e.revertBackToSnapshot(i,e.currentSnapshotData),t.move(i,n);var a=new Map;i.children.forEach((function(t){t!==e.ghostLayer&&a.set(t,e.getMarginAdjustedBounds(t))})),e.recordCurrentSnapshot(i),e.setFlexLayers(),e.setTriggerPoints(),e.revertBackToSnapshot(i,e.beforeDragSnapshotData),e.changeToAbsolute(i),i.children.forEach((function(t){var n=a.get(t);t!==e.ghostLayer&&n&&t.setLayout({left:n.x,top:n.y})}))}},this.layerDragStart=function(t,n){if(!e.disabled)if(e.totalDx=0,e.totalDy=0,e.canvas.dispatchEvent(e.namespace+".dragStart",new Te(e.namespace+".dragStart",e.canvas)),n.selectedLayers){var i=n.selectedLayers.every((function(e){return e.isFlexChild()}));if(e.isFlex=i,!i)return t(n);e.target=n.selectedLayers;var a=o.get(n.selectedLayers,"[0].parent"),r=e.canvas.getBoundingBox(n.selectedLayers);if(a){var s=e.getMarginAdjustedBounds(a);e.saveSiblingOpacity(a);var l=Z({},r,{x:r.x-s.rootX,y:r.y-s.rootY});e.targetInitialDims=l,e.flexDirection=a.layout.get("flexDirection"),e.setFlexLayers(),e.recordCurrentSnapshot(a),e.initialSnapshotData=new Map(e.currentSnapshotData),e.beforeDragSnapshotData=new Map(e.currentSnapshotData),e.endFlexLayerDragging(n.data),e.createGhostLayer(e.targetInitialDims,a),e.startGhostDragging(n.data),e.changeParentDims(a),e.changeToAbsolute(a),e.setTriggerPoints()}}else{if(!n||!n||!n.target)return t(n);var d=!!n.target&&n.target.isFlexChild();if(e.isFlex=d,n.target===e.ghostLayer&&(e.targetGhostLayer=n.target),!d)return t(n);e.target=n.target,e.targetInitialDims=e.getMarginAdjustedBounds(n.target);var c=n.target.parent;c&&(e.saveSiblingOpacity(c),e.flexDirection=c.layout.get("flexDirection"),e.setFlexLayers(),e.recordCurrentSnapshot(c),e.initialSnapshotData=new Map(e.currentSnapshotData),e.beforeDragSnapshotData=new Map(e.currentSnapshotData),e.endFlexLayerDragging(n),e.createGhostLayer(e.targetInitialDims,c),e.startGhostDragging(n),e.changeParentDims(c),e.changeToAbsolute(c),e.setTriggerPoints())}},this.layerDrag=function(t,n){if(!e.disabled)if(e.canvas.dispatchEvent(e.namespace+".drag",new Te(e.namespace+".drag",e.canvas)),e.targetGhostLayer){var i;if(e.canvas.selectLayers([]),e.totalDx+=n.worldDx,e.totalDy+=n.worldDy,e.target instanceof He)i=e.getMarginAdjustedBounds(e.target);else{var a=e.canvas.getBoundingBox(e.target),r=e.target[0].parent?e.getMarginAdjustedBounds(e.target[0].parent):void 0;i=r?Z({},a,{x:a.x-r.rootX,y:a.y-r.rootY}):a}var o=e.targetInitialDims.x+e.totalDx,s=e.targetInitialDims.y+e.totalDy;e.ghostLayer.setLayout({left:o,top:s});var l=null,d=null;"row"===e.flexDirection||"row-reverse"===e.flexDirection?(l=i.x+i.width/2,d=o+e.targetInitialDims.width/2):(l=i.y+i.height/2,d=s+e.targetInitialDims.height/2),e.handleSwapWRTNewPosition(l,d)}else t(n)},this.layerDragEnd=function(t,n){if(!e.disabled){if(!e.targetGhostLayer)return t(n);e.isFlex=!1;var i=e.targetGhostLayer.parent;if(e.revertSiblingOpacity(),i){for(;0!==e.ghostLayer.children.length;)e.ghostLayer.removeChild(e.ghostLayer.children[0]);i.removeChild(e.ghostLayer),delete e.ghostLayer,e.revertBackToSnapshot(i,e.beforeDragSnapshotData)}if(document.body.removeChild(Bi),delete e.targetGhostLayer,e.target instanceof He){var a;o.isNil(e.newTargetIndex)||e.target.getIndexInParent()===e.newTargetIndex||e.canvas.dispatchEvent("moveLayer",new vi("moveLayer",e.canvas,{fromParent:e.target.parent,toParent:e.target.parent,fromIndex:e.target.getIndexInParent(),toIndex:e.newTargetIndex})),null==(a=e.target.parent)||a.children.forEach((function(e){e.setProp("id",void 0)}))}else{var r,s=o.sortBy(e.target,(function(e){return e.getIndexInParent()}));!o.isNil(e.newTargetIndex)&&s[0].getIndexInParent()>e.newTargetIndex&&(s=s.reverse());var l=[];o.isNil(e.newTargetIndex)||s[0].getIndexInParent()===e.newTargetIndex||s.forEach((function(t){var n=t.parent;e.canvas.dispatchEvent("moveLayer",new vi("moveLayer",e.canvas,{fromParent:n,toParent:n,fromIndex:t.getIndexInParent(),toIndex:e.newTargetIndex})),n&&!o.isNil(e.newTargetIndex)&&l.push(n.children[e.newTargetIndex])})),e.canvas.selectLayers(l.length?l:e.target),null==(r=e.target[0].parent)||r.children.forEach((function(e){e.setProp("id",void 0)}))}e.clearFlexLayersHeightWidth(),e.revertParentDims(),delete e.newTargetIndex,e.canvas.dispatchEvent(e.namespace+".dragEnd",new Te(e.namespace+".dragEnd",e.canvas))}}}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){var e=this;this.canvas.addMiddleware("LayerDrag.dragStart",this.layerDragStart),this.canvas.addMiddleware("LayerDrag.drag",this.layerDrag),this.canvas.addMiddleware("LayerDrag.dragEnd",this.layerDragEnd),this.canvas.addMiddleware("LayerResizer.dragStart",this.layerDragStart),this.canvas.addMiddleware("LayerResizer.drag",this.layerResizerDrag),this.canvas.addMiddleware("LayerResizer.dragEnd",this.layerResizerDragEnd),this.canvas.addFunction(this.namespace+".disable",(function(){e.disabled=!0}))},t.deactivate=function(){},e}(),Oi=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).handleResize=function(e){var n=t.props.height,i=t.props.width;t.domWidth=i,t.domHeight=n,t.width=i*t.props.ratio,t.height=n*t.props.ratio,t.ruler.width=t.width,t.ruler.height=t.height;var a=t.ruler.getContext("2d");a.font=12*t.props.ratio+'px Roboto, -apple-system, ".SFNSText-Regular",\n      "SF UI Text", "Helvetica Neue", Arial, "PingFang SC",\n      "Hiragino Sans GB", "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif',a.lineWidth=t.props.ratio,a.strokeStyle="#6F727D",a.textBaseline="middle",t.ctx=a,e&&t.drawRuler(t.props.start,a)},t}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.handleResize(!0),window.addEventListener("resize",this.handleResize)},i.componentDidUpdate=function(){this.handleResize(!0)},i.componentWillUnmount=function(){window.removeEventListener("resize",this.handleResize)},i.drawRuler=function(e,t){},i.render=function(){var e=this;return t.createElement("canvas",{style:{pointerEvents:"none"},className:"ruler",ref:function(t){return e.ruler=t}})},n}(t.PureComponent),zi=function(e){function t(){return e.apply(this,arguments)||this}return q(t,e),t.prototype.drawRuler=function(e,t){var n=this.props,i=n.fontColor,a=n.fontScale,r=n.width,o=n.height,s=n.ratio,l=n.perWidth,d=n.scale,c=n.zoom;t.fillStyle=n.bgColor,t.fillRect(0,0,r,o),t.translate(-e*s,0),t.beginPath(),t.fillStyle=i;for(var u=e-e%l,h=u;h<u+r/s;h+=l){var p=(.5+(h>>0))*s;t.lineWidth=.5,t.moveTo(p,o);var v=h/c;(v=Math.round(v/d)*d)%(10*d)==0?(t.save(),t.translate((h+2)*s,0),t.scale(a,a),t.fillText(v,2*s,o/2),t.restore(),t.lineTo(p,0)):t.lineTo(p,v%(5*d)==0?o/2:2*o/3),t.stroke()}t.closePath(),t.translate(e*s,0)},t}(Oi),Ii=function(e){function t(t){var n;return(n=e.call(this,t)||this).vertical=!0,n}return q(t,e),t.prototype.drawRuler=function(e,t){var n=this.props,i=n.fontColor,a=n.fontScale,r=n.width,o=n.height,s=n.ratio,l=n.perWidth,d=n.scale,c=n.zoom;t.fillStyle=n.bgColor,t.fillRect(0,0,r,o),t.translate(0,-e*s),t.beginPath(),t.fillStyle=i;for(var u=l,h=e-e%u,p=h;p<h+o/s;p+=u){var v=(.5+(p>>0))*s,g=p/c;g=Math.round(g/d)*d,t.moveTo(r,v),g%(10*d)==0?(t.save(),t.translate(r,(p-2)*s),t.rotate(-Math.PI/2),t.scale(a,a),t.fillText(g,2*s,-r/3*2),t.restore(),t.lineTo(0,v)):t.lineTo(g%(5*d)==0?r/2:2*r/3,v),t.stroke()}t.closePath(),t.translate(0,e*s)},t}(Oi),Wi=function(e){function n(){return e.apply(this,arguments)||this}q(n,e);var i=n.prototype;return i.getPixelRatio=function(){var e=document.createElement("canvas").getContext("2d"),t=1;return e&&(t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),(window.devicePixelRatio||1)/t},i.render=function(){var e=this.props,n=e.verLineArr,i=e.shadow,a=this.props.canvas,r=i.y,o=i.height,s={perWidth:this.props.perWidth,scale:this.props.scale,zoom:this.props.zoom,fontScale:.83,ratio:1,bgColor:this.props.bgColor,fgColor:this.props.fgColor,fontColor:this.props.fontColor,shadowColor:this.props.shadowColor};return t.createElement("div",null,t.createElement("div",{className:"hor-ruler",onContextMenu:this.props.onContextMenu,style:{cursor:"row-resize",pointerEvents:"auto"},draggable:!0,onDragStart:this.props.onDragStartHorizontal,onDrag:this.props.onDragHorizontal,onDragEnd:this.props.onDragEndHorizontal},t.createElement(zi,Object.assign({start:-this.props.initialPoint.x,lines:e.horLineArr,select:{x:i.x,width:i.width},height:20,width:a.getViewport().width},s))),t.createElement("div",{className:"ver-ruler",style:{position:"absolute",marginTop:-24,cursor:"col-resize",pointerEvents:"auto"},draggable:!0,onDragStart:this.props.onDragStartVertical,onDrag:this.props.onDragVertical,onDragEnd:this.props.onDragEndVertical,onContextMenu:this.props.onContextMenu},t.createElement(Ii,Object.assign({start:-this.props.initialPoint.y,lines:n,select:{y:r,height:o},height:a.getViewport().height,width:20},s))))},n}(t.PureComponent),Vi=function(){function e(){var e=this;this.name="RulerScalePlugin",this.initialPoint={x:0,y:0},this.onDragStartHorizontal=function(t){e.handleGhostImage(t),e.canvas.executeFunction("HtmlDragToWorld.dragStart",t,{x:0,y:19,height:1,width:1e3,rotation:0}),e.selectedLineIndex=e.canvas.executeFunction("RulerLines.addLine","x",19)},this.onDragEndHorizontal=function(t){e.disposeGhostImage(),t.preventDefault();var n=e.canvas.executeFunction("HtmlDragToWorld.dragEnd",t);e.canvas.executeFunction("RulerLines.setPosition",n.session.current.y,e.selectedLineIndex),e.selectedLineIndex=void 0},this.onDragHorizontal=function(t){if(t.pageX&&t.pageY){var n=e.canvas.executeFunction("HtmlDragToWorld.drag",t);0===n.session.current.deltaX&&0===n.session.current.deltaY||n.session.current.y>18&&e.canvas.executeFunction("RulerLines.setPosition",n.session.current.y,e.selectedLineIndex)}},this.onDragStartVertical=function(t){e.handleGhostImage(t),e.canvas.executeFunction("HtmlDragToWorld.dragStart",t,{x:19,y:0,height:1e3,width:1,rotation:0}),e.selectedLineIndex=e.canvas.executeFunction("RulerLines.addLine","y",19)},this.onDragEndVertical=function(t){e.disposeGhostImage(),t.preventDefault();var n=e.canvas.executeFunction("HtmlDragToWorld.dragEnd",t);e.canvas.executeFunction("RulerLines.setPosition",n.session.current.x,e.selectedLineIndex),e.selectedLineIndex=void 0},this.onDragVertical=function(t){if(t.pageX&&t.pageY){var n=e.canvas.executeFunction("HtmlDragToWorld.drag",t);0===n.session.current.deltaX&&0===n.session.current.deltaY||n.session.current.x>18&&e.canvas.executeFunction("RulerLines.setPosition",n.session.current.x,e.selectedLineIndex)}}}var n=e.prototype;return n.init=function(e){this.canvas=e,this.dispose=null,this.show=!0},n.showRulers=function(){this.show=!0,this.renderScale(),this.wrapperLayer.style.display=""},n.hideRulers=function(){this.show=!1,this.wrapperLayer.style.display="none",i.unmountComponentAtNode(this.wrapperLayer)},n.setInitialPoint=function(e,t){this.initialPoint=t,this.show&&this.renderScale()},n.handleGhostImage=function(e){var t=e.target.cloneNode(!0);t.style.backgroundColor="red",t.style.opacity=0,t.style.pointerEvents="none",document.body.appendChild(t),this.ghostImageDOM=t,e.dataTransfer.setDragImage(t,0,0)},n.disposeGhostImage=function(){this.ghostImageDOM&&this.ghostImageDOM.remove()},n.calculateScaleFromZoom=function(e){var t=1;return e<=.01?t=1e3:e<=.03?t=500:e<=.06?t=200:e<=.12?t=100:e<=.25?t=50:e>.25&&e<=.5?t=20:e>.5&&e<=1?t=10:e>1&&e<=2?t=5:e>2&&e<=4&&(t=2),t},n.renderScale=function(){var e=this.canvas.getZoom(),n=this.calculateScaleFromZoom(e);i.render(t.createElement(Wi,{canvas:this.canvas,initialPoint:this.initialPoint,thick:.5,perWidth:n*e,zoom:e,scale:n,horLineArr:[1,1],verLineArr:[1,1],bgColor:"#252a31",fgColor:"#6F727D",fontColor:"#6F727D",lineColor:"#FF0000",shadowColor:"#6F727D",horLineValue:[100,200],verLineValue:[100,200],shadow:{x:200,y:100,width:100,height:400},onDragStartHorizontal:this.onDragStartHorizontal,onDragEndHorizontal:this.onDragEndHorizontal,onDragHorizontal:this.onDragHorizontal,onDragStartVertical:this.onDragStartVertical,onDragEndVertical:this.onDragEndVertical,onDragVertical:this.onDragVertical}),this.wrapperLayer)},n.activate=function(){var e=this;this.show&&(this.wrapperLayer=document.createElement("div"),this.dispose=this.canvas.addDomToViewport(this.wrapperLayer),this.wrapperLayer.style.position="absolute",this.wrapperLayer.style.top="0px",this.wrapperLayer.style.left="0px",this.wrapperLayer.style.bottom="0px",this.wrapperLayer.style.right="0px",this.wrapperLayer.style.display=this.show?"":"none",this.wrapperLayer.id="ruler-wrapper",this.wrapperLayer.style.zIndex="1",this.wrapperLayer.style.pointerEvents="none",this.show&&this.renderScale(),this.canvas.on("zoom",(function(){e.show&&e.renderScale()}))),this.canvas.addFunction("RulerScale.setInitialPoint",this.setInitialPoint.bind(this)),this.canvas.addFunction("RulerScale.show",this.showRulers.bind(this)),this.canvas.addFunction("RulerScale.hide",this.hideRulers.bind(this))},n.deactivate=function(){this.dispose(),this.canvas.removeFunction("RulerScale.setInitialPoint"),this.canvas.removeFunction("RulerScale.show"),this.canvas.removeFunction("RulerScale.hide")},e}(),Ui=function(e){function t(t,n,i,a,r){var o;return(o=e.call(this,t,n,r)||this).axisCoordinate=a,o.axis=i,o}return q(t,e),t}(Te),Hi=function(e){function t(t,n,i,a,r,o){var s;return(s=e.call(this,t,n,o)||this).axisCoordinate=a,s.axis=i,s.index=r,s}return q(t,e),t}(Te),Yi=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,a)||this).index=i,r}return q(t,e),t}(Te),_i=function(){function e(){var e=this;this.name="RulerLinesPlugin",this.lines=[],this.addLine=function(t,n,i,a){void 0===a&&(a=!1);var r=e.canvas.executeFunction("drawLine",n,i,"rulerHorizontalLine",0,null,!0);return e.lines.push({axis:n,axisCoordinate:i,dom:r}),a||e.canvas.dispatchEvent("RulerLines.add",new Ui("RulerLines.add",r,n,i)),e.canvas.addEventListener("LineDrawer.dragStart",(function(t){var n={x:t.session.current.x,y:t.session.current.y},i=t.originalEvent.originalEvent.target,a=o.findIndex(e.lines,(function(e){return e.dom==i}));e.setPosition({layer:i,canvas:e.canvas},"y"==t.axis?n.x:n.y,a)})),e.canvas.addEventListener("LineDrawer.onDrag",(function(t){var n={x:t.session.current.x,y:t.session.current.y},i=t.originalEvent.originalEvent.target,a=o.findIndex(e.lines,(function(e){return e.dom==i}));e.setPosition({layer:i,canvas:e.canvas},"y"==t.axis?n.x:n.y,a)})),e.canvas.addEventListener("LineDrawer.dragEnd",(function(t){var n={x:t.session.current.x,y:t.session.current.y},i=t.originalEvent.originalEvent.target,a=o.findIndex(e.lines,(function(e){return e.dom==i}));e.setPosition({layer:i,canvas:e.canvas},"y"==t.axis?n.x:n.y,a,!0)})),e.lines.length-1},this.removeLine=function(t,n){var i=e.lines[n].dom;i&&i.parentNode&&(i.parentNode.removeChild(i),e.canvas.removeDomFromWorld(i),e.lines.splice(n,1),e.canvas.dispatchEvent("RulerLines.remove",new Yi("RulerLines.remove",e.canvas,n)))},this.setPosition=function(t,n,i,a){var r;r=o.isNil(i)?e.lines.length-1:i;var s=e.lines[r];if(s){var l=s.dom,d=s.axis;if("y"==d?l.style.left=n+"px":l.style.top=n+"px",e.lines[r]={axis:d,axisCoordinate:n,dom:l},e.canvas.dispatchEvent("RulerLines.setPosition",new Hi("RulerLines.setPosition",e.canvas,d,n,r)),a){var c=e.canvas.convertPoint({x:"y"==d?n:0,y:"x"==d?n:0},"world","viewport");("y"===d?c.x:c.y)<18&&e.removeLine({layer:e.canvas,canvas:e.canvas},r)}}},this.removeAll=function(t){e.lines.forEach((function(t){var n=t.dom;n&&(n.remove(),e.canvas.removeDomFromWorld(n))})),e.lines=[]},this.addAll=function(t,n,i){void 0===i&&(i=!0),n.forEach((function(t){e.addLine({layer:e.canvas,canvas:e.canvas},t.axis,t.axisCoordinate,i)}))},this.show=function(t){e.lines.forEach((function(e){var t=e.dom;t&&(t.style.display="")}))},this.hide=function(t){e.lines.forEach((function(e){var t=e.dom;t&&(t.style.display="none")}))},this.getLineCoordinates=function(t){var n={x:[],y:[]};if(e.lines&&e.lines.length>0&&"none"!==e.lines[0].dom.style.display)for(var i,a=ee(e.lines);!(i=a()).done;){var r=i.value;"x"===r.axis?n.x.push(r.axisCoordinate):n.y.push(r.axisCoordinate)}return n}}var t=e.prototype;return t.init=function(e){this.canvas=e,this.lines=[]},t.activate=function(){this.canvas.addFunction("RulerLines.addLine",this.addLine),this.canvas.addFunction("RulerLines.removeLine",this.removeLine),this.canvas.addFunction("RulerLines.setPosition",this.setPosition),this.canvas.addFunction("RulerLines.removeAll",this.removeAll),this.canvas.addFunction("RulerLines.addAll",this.addAll),this.canvas.addFunction("RulerLines.show",this.show),this.canvas.addFunction("RulerLines.hide",this.hide),this.canvas.addFunction("RulerLines.getLineCoordinates",this.getLineCoordinates)},t.deactivate=function(){this.canvas.removeFunction("RulerLines.addLine"),this.canvas.removeFunction("RulerLines.removeLine"),this.canvas.removeFunction("RulerLines.setPosition"),this.canvas.removeFunction("RulerLines.removeAll"),this.canvas.removeFunction("RulerLines.addAll"),this.canvas.removeFunction("RulerLines.show"),this.canvas.removeFunction("RulerLines.hide"),this.canvas.removeFunction("RulerLines.getLineCoordinates")},e}();function Xi(e,t,n,i,a){a||(a="snap-lines");var r=t.parent?t.parent:i&&i.parent;if(r){for(var s,l=document.querySelectorAll("."+a+"-x"),d=document.querySelectorAll("."+a+"-y"),c=ee(l);!(s=c()).done;)s.value.style.visibility="hidden";for(var u,h=ee(d);!(u=h()).done;)u.value.style.visibility="hidden";if(!isNaN(o.get(i,"snappedSide.x.snappedSide.snappedPoint.rootValue",NaN))){var p=i.snappedSide.x.snappedSide.snappedPoint.rootValue;if(he.pointsOverlap(p,n.x)||he.pointsOverlap(p,n.width/2+n.x)||he.pointsOverlap(p,n.width+n.x))for(var v,g=ee(document.querySelectorAll("."+a+"-y"));!(v=g()).done;){var y=v.value;y.style.visibility="visible",y.style.left=p+"px";var f=r.getAbsoluteRotation(),m=r.getRotatedPolygon(),x=Math.max(n.width,n.height);y.style.transform="rotate("+f+"deg)",y.style.transformOrigin=m.centroid[0]-p+"px "+(m.centroid[1]+x)+"px"}}if(!isNaN(o.get(i,"snappedSide.y.snappedSide.snappedPoint.rootValue",NaN))){var w=i.snappedSide.y.snappedSide.snappedPoint.rootValue;if(he.pointsOverlap(w,n.y)||he.pointsOverlap(w,n.height/2+n.y)||he.pointsOverlap(w,n.height+n.y))for(var b,L=ee(document.querySelectorAll("."+a+"-x"));!(b=L()).done;){var E=b.value;E.style.visibility="visible",E.style.top=w+"px";var D=r.getAbsoluteRotation(),S=r.getRotatedPolygon(),C=Math.max(n.width,n.height);E.style.transform="rotate("+D+"deg)",E.style.transformOrigin=S.centroid[0]+C+"px "+(S.centroid[1]-w)+"px"}}}}function Gi(e,t,n,i,a,r,o){var s=t.parent?t.parent:r&&r.parent;if(s){var l=s.getAbsoluteRotation(),d=s.getRotatedPolygon(),c=Math.max(i.width,i.height),u=n,h={};h=Z({},h,"y"===a?{transform:"rotate("+l+"deg)",transformOrigin:d.centroid[0]-u+"px "+(d.centroid[1]+c)+"px"}:{transform:"rotate("+l+"deg)",transformOrigin:d.centroid[0]+c+"px "+(d.centroid[1]-u)+"px"}),e.executeFunction("drawLine",a,u,o+"-"+a,-c,void 0,void 0,void 0,h)}}var ji=function(){function e(){this.name="SnapLines"}var t=e.prototype;return t.removeElementsWithClass=function(e){for(var t,n=ee(document.querySelectorAll("."+e+"-x"));!(t=n()).done;){var i=t.value;i.remove(),this.canvas.removeDomFromWorld(i)}for(var a,r=ee(document.querySelectorAll("."+e+"-y"));!(a=r()).done;){var o=a.value;o.remove(),this.canvas.removeDomFromWorld(o)}},t.init=function(e){this.canvas=e},t.dragStartListener=function(e,t){void 0===t&&(t="snap-lines"),this.removeElementsWithClass(t);var n=this.canvas.getContainerBoundingBoxWRTParent([e.target]);!function(e,t,n,i,a,r){void 0===a&&(a="snap-lines"),Gi(e,t,-100,n,"y",r,a),Gi(e,t,-100,n,"x",r,a)}(this.canvas,e.target,n,0,t,e.meta)},t.dragListener=function(e,t){void 0===t&&(t="snap-lines");var n=this.canvas.getContainerBoundingBoxWRTParent([e.target]);e.target.parent&&(n=Z({},n,{x:n.x+e.target.parent.rootX,y:n.y+e.target.parent.rootY})),e.target&&Xi(0,e.target,n,e.meta,t)},t.dragListenerDraw=function(e,t){void 0===t&&(t="snap-lines"),e.target&&Xi(0,e.target,{x:e.worldX,y:e.worldY,width:e.dimensions.width,height:e.dimensions.height},e.meta,t)},t.dragListenerResizer=function(e,t){void 0===t&&(t="snap-lines");var n=this.canvas.getContainerBoundingBoxWRTParent(this.canvas.selectedLayers);this.canvas.selectedLayers[0].parent&&(n=Z({},n,{x:n.x+this.canvas.selectedLayers[0].parent.rootX,y:n.y+this.canvas.selectedLayers[0].parent.rootY})),e.target&&Xi(0,e.target,n,e.meta,t)},t.drawComponentMouseMoveListener=function(e,t){void 0===t&&(t="snap-lines"),e.target&&Xi(0,e.target,{x:e.worldX,y:e.worldY,width:0,height:0},e.meta,t)},t.activate=function(){var e=this;this.canvas.addEventListener("layerDragStart",(function(t){e.dragStartListener(t)})),this.canvas.addEventListener("layerDrag",(function(t){e.dragListener(t)})),this.canvas.addEventListener("layerDragEnd",(function(t){e.removeElementsWithClass("snap-lines")})),this.canvas.addEventListener("LayerResizer.dragStart",(function(t){e.dragStartListener(t)})),this.canvas.addEventListener("LayerResizer.drag",(function(t){e.dragListenerResizer(t)})),this.canvas.addEventListener("LayerResizer.dragEnd",(function(t){e.removeElementsWithClass("snap-lines")})),this.canvas.addEventListener("LayerResizer.handleDragStart",(function(t){e.dragStartListener(t)})),this.canvas.addEventListener("LayerResizer.handleDrag",(function(t){e.dragListenerResizer(t)})),this.canvas.addEventListener("LayerResizer.handleDragEnd",(function(t){e.removeElementsWithClass("snap-lines")})),this.canvas.addEventListener("StageDesignerDrawComponent.drawShape",(function(t){e.dragStartListener(t,"snap-lines-draw")})),this.canvas.addEventListener("StageDesignerDrawComponent.mousemove",(function(t){e.drawComponentMouseMoveListener(t,"snap-lines-draw")})),this.canvas.addEventListener("StageDesignerDrawComponent.drawStart",(function(t){e.dragStartListener(t)})),this.canvas.addEventListener("StageDesignerDrawComponent.draw",(function(t){e.dragListenerDraw(t)})),this.canvas.addEventListener("StageDesignerDrawComponent.drawEnd",(function(t){e.removeElementsWithClass("snap-lines"),e.removeElementsWithClass("snap-lines-draw")}))},t.deactivate=function(){},e}(),Zi=function(e){function t(t,n,i,a,r,o,s){var l;return(l=e.call(this,t,r,a,o)||this).session=i,l.startValues=n,l.axis=s,l}return q(t,e),t}(Ge),qi=function(){function e(){this.name="LineDrawer",this.namespace="LineDrawer"}var t=e.prototype;return t.handleGhostImage=function(e){var t=e.target.cloneNode(!0);t.style.backgroundColor="red",t.style.opacity=0,t.style.pointerEvents="none",document.body.appendChild(t),this.ghostImageDOM=t,e.dataTransfer.setDragImage(t,0,0)},t.disposeGhostImage=function(){this.ghostImageDOM&&this.ghostImageDOM.remove()},t.drawLine=function(e,t,n,i,a,r,o,s,l){var d=this;void 0===l&&(l={});var c=document.createElement("div");this.dispose=this.canvas.addDomToWorld(c,!0,103);var u,h,p=this.canvas.getZoom(),v=1/p,g=8/p,y=document.createElement("div");this.canvas.on("zoom",(function(e){p=d.canvas.getZoom(),v=1/p,g=8/p,y&&c&&("x"===t?(y.style.height=v+"px",c.style.height=g+"px"):(c.style.width=g+"px",y.style.width=v+"px"))})),i&&(c.className=i),a=a||0,y.style.position="absolute",c.style.position="absolute",y.style.backgroundColor="#22b9d1",c.style.pointerEvents="none",c.style.transform=l.transform,c.style.transformOrigin=l.transformOrigin,c.style.visibility=l.visibility;var f=Math.max(this.canvas.getBoundingClientRect().width,this.canvas.getBoundingClientRect().height);if(o){var m,x;c.style.pointerEvents="auto",c.draggable=!0,"x"==t?(r=r||f,m=Math.min(a,r),x=n,c.onmouseover=function(e){d.canvas.executeFunction("LayerDrag.isDragging")||d.canvas.setMouseCursor("row-resize")}):(r=r||f,x=Math.min(a,r),m=n,c.onmouseover=function(e){d.canvas.executeFunction("LayerDrag.isDragging")||d.canvas.setMouseCursor("col-resize")}),c.onmouseleave=function(e){d.canvas.setMouseCursor("default")};var w={x:m,y:x,height:v,width:Math.abs(a-r),rotation:0};c.ondragstart=function(e){d.handleGhostImage(e);var n=d.canvas.executeFunction("HtmlDragToWorld.dragStart",e,w);d.canvas.dispatchEvent(d.namespace+".dragStart",new Zi(d.namespace+".dragStart",n.startValues,n.session,n.event,d.canvas,void 0,t))},c.ondrag=function(e){if(e.pageX&&e.pageY){var n=d.canvas.executeFunction("HtmlDragToWorld.drag",e);0===n.session.current.deltaX&&0===n.session.current.deltaY||d.canvas.dispatchEvent(d.namespace+".onDrag",new Zi(d.namespace+".onDrag",n.startValues,n.session,n.event,d.canvas,void 0,t))}},c.ondragend=function(e){d.disposeGhostImage(),e.preventDefault();var n=d.canvas.executeFunction("HtmlDragToWorld.dragEnd",e);d.canvas.dispatchEvent(d.namespace+".dragEnd",new Zi(d.namespace+".dragEnd",n.startValues,n.session,n.event,d.canvas,void 0,t))}}switch(t){case"x":r=r||f,h=Math.abs(a-r),y.style.height=v+"px",y.style.width=h+"px",c.style.width=h+"px",c.style.height=g+"px",c.style.left=Math.min(a,r)+"px",c.style.top=n+"px",c.appendChild(y),(u=this.createLabelBox(s,"x",n,h/2-15,15,30,10,10))&&c.appendChild(u);break;case"y":r=r||f,h=Math.abs(a-r),y.style.width=v+"px",y.style.height=h+"px",c.style.height=h+"px",c.style.width=g+"px",c.style.top=Math.min(a,r)+"px",c.style.left=n+"px",c.appendChild(y),(u=this.createLabelBox(s,"y",n,h/2-7.5,15,30,10,10))&&c.appendChild(u)}return c},t.setLabelBoxStyle=function(e,t,n,i,a,r,o,s){var l=this.canvas.getZoom();t/=l,a/=l,e.style.width=(n/=l)+"px",e.style.height=t+"px",e.style.borderRadius=2/l+"px","x"===i?(e.style.top=t-a<=0?a+"px":-(a+t)+"px",e.style.left=r+"px"):(e.style.left=n-a<=0?-(a+n)+"px":a+"px",e.style.top=r+"px"),o.style.fontSize=s/l+"px"},t.createLabelBox=function(e,t,n,i,a,r,o,s){var l=this;if(e){var d=document.createElement("div");d.style.position="absolute",d.style.backgroundColor="#22b9d1";var c=document.createElement("span");return c.style.backgroundColor="transparent",c.style.color="white",c.style.left="0px",c.style.right="0px",c.style.top="0px",c.style.bottom="0px",c.style.position="absolute",c.style.display="flex",c.style.textAlign="center",c.style.justifyContent="center",c.style.alignItems="center",this.setLabelBoxStyle(d,a,r,t,o,i,c,s),c.innerHTML=e,d.appendChild(c),this.canvas.on("zoom",(function(){l.setLabelBoxStyle(d,a,r,t,o,i,c,s)})),d}},t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addFunction("drawLine",this.drawLine.bind(this))},t.deactivate=function(){this.canvas.removeFunction("drawLine"),this.dispose()},e}();function Ji(e){return"\nbackground: transparent;\nwidth: auto;\ncolor: rgb(251,251,251);\nheight: 80px;\npadding-left: "+6/e+"px;\npadding-right: "+6/e+"px;\nmargin-top: 0px;\nborder:none;\nmin-width: "+100/e+"px;\n"}function Ki(e){return"\n  border: none;\n  margin-right: 0px;\n  margin-left: 0px;\n  opacity: 1;\n  width: "+32/e+"px;\n  height: "+32/e+"px;\n  "}var Qi="\nposition: absolute;\npointer-events: auto;\nz-index: 4;\ntransform-origin: 0px 0px;\n",$i=function(){function e(){this.name="StageDesignerPreviewMode",this.artboards=[]}var t=e.prototype;return t.init=function(e){this.canvas=e,this.disposeNextBtn=null,this.disposePreviousBtn=null,this.currentMode="stage"},t.activate=function(){var e=this;this.canvas.addFunction("switchToPreviewMode",this.previewMode.bind(this)),this.canvas.addFunction("switchToStageMode",this.stageMode.bind(this)),this.disposeNextBtn=this.renderNextButton(),this.disposePreviousBtn=this.renderPreviousButton(),this.previousBtnContainerNode.style.display="none",this.nextBtnContainerNode.style.display="none",this.canvas.on("zoom",(function(){"preview"===e.currentMode&&e.artboards.length>1&&(e.prevImgElement.style.cssText=Ki(e.canvas.getZoom()),e.prevBtnElement.style.cssText=Ji(e.canvas.getZoom()),e.nextBtnElement.style.cssText=Ji(e.canvas.getZoom()),e.nextImgElement.style.cssText=Ki(e.canvas.getZoom()),e.setPreviousButtonContainerLayout(),e.setNextButtonContainerLayout(),e.setDisplayForButtons())}))},t.previewMode=function(e){this.currentMode="preview";var t=this.canvas.executeFunction("getAllArtboards");this.artboards=Array.from(t.values()),this.canvas.executeFunction("hidePlusButton"),this.artboards.length>1&&this.handleSelectedArtboardChange()},t.stageMode=function(e){var t=this;this.currentMode="stage";var n=this.canvas.executeFunction("getAllArtboards");this.artboards=Array.from(n.values()),this.previousBtnContainerNode.style.display="none",this.nextBtnContainerNode.style.display="none",this.canvas.executeFunction("showPlusButton"),o.map(this.artboards,(function(e){e.show(),e.executeFunction("LayerLabel.show"),e.executeFunction("showGrid",t.canvas.executeFunction("getGridSize"))}))},t.nextArtboard=function(){var e=this.canvas.executeFunction("getSelectedArtboard");e.hide();var t=0;e&&(t=o.indexOf(this.artboards,e)),this.artboards[t+=1].show(),this.canvas.dispatchEvent("StageDesignerPreviewMode.selectArtboard",new Te("StageDesignerPreviewMode.selectArtboard",this.artboards[t])),this.handleSelectedArtboardChange()},t.previousArtboard=function(){var e=this.canvas.executeFunction("getSelectedArtboard");e.hide();var t=0;e&&(t=o.indexOf(this.artboards,e)),this.artboards[t-=1].show(),this.canvas.dispatchEvent("StageDesignerPreviewMode.selectArtboard",new Te("StageDesignerPreviewMode.selectArtboard",this.artboards[t])),this.handleSelectedArtboardChange()},t.setDisplayForButtons=function(){var e=this.canvas.executeFunction("getSelectedArtboard");if(e){var t=o.indexOf(this.artboards,e);0===t?(this.previousBtnContainerNode.style.display="none",this.nextBtnContainerNode.style.display=""):t===this.artboards.length-1?(this.nextBtnContainerNode.style.display="none",this.previousBtnContainerNode.style.display=""):(this.previousBtnContainerNode.style.display="",this.nextBtnContainerNode.style.display="")}else this.nextBtnContainerNode.style.display="none",this.previousBtnContainerNode.style.display="none"},t.handleSelectedArtboardChange=function(){var e=this;this.setPreviousButtonContainerLayout(),this.setNextButtonContainerLayout();var t=this.canvas.executeFunction("getSelectedArtboard");t?this.setDisplayForButtons():((t=this.artboards[0])&&this.canvas.dispatchEvent("StageDesignerPreviewMode.selectArtboard",new Te("StageDesignerPreviewMode.selectArtboard",t)),this.previousBtnContainerNode.style.display="none",this.nextBtnContainerNode.style.display=""),o.map(this.artboards,(function(n){o.isEqual(n,t)?(n.show(),n.executeFunction("LayerLabel.show"),n.executeFunction("showGrid",e.canvas.executeFunction("getGridSize")),n&&e.canvas.dispatchEvent("StageDesignerPreviewMode.selectArtboard",new Te("StageDesignerPreviewMode.selectArtboard",n))):(n.hide(),n.executeFunction("LayerLabel.hide"),n.executeFunction("hideGrid"))})),t.executeFunction("focusArtboard")},t.renderNextButton=function(){var e=this;return this.nextBtnContainerNode=document.createElement("div"),this.nextBtnElement=document.createElement("button"),this.nextBtnElement.style.cssText=Ji(this.canvas.getZoom()),this.nextBtnElement.onclick=function(){return e.nextArtboard()},this.nextImgElement=document.createElement("img"),this.nextImgElement.src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0OS4zICg1MTE2NykgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+aWNvbl9yaWdodDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJpY29uX3JpZ2h0IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0icmlnaHRfYXJyb3ciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDAuMDAwMDAwKSIgZmlsbD0iIzZGNzI3RCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBvbHlnb24gaWQ9Iu+PkiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUzLjU1Mzk4NiwgMjU1LjkyMzMwOSkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMTUzLjU1Mzk4NiwgLTI1NS45MjMzMDkpICIgcG9pbnRzPSIzMDcuMTA3OTcxIDMwLjM5MDg5MyA2Ny4xNzk4Njk4IDI1NS45MjMzMDkgMzA3LjEwNzk3MSA0ODEuNDU1NzI0IDI3My41MTgwMzcgNTExLjg0NjYxNyAxLjE0OTgxMjhlLTA2IDI1NS45MjMzMDkgMjczLjUxODAzNyAwIj48L3BvbHlnb24+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=",this.nextImgElement.style.cssText=Ki(this.canvas.getZoom()),this.nextBtnElement.append(this.nextImgElement),this.nextBtnContainerNode.appendChild(this.nextBtnElement),this.canvas.addDomToWorld(this.nextBtnContainerNode)},t.renderPreviousButton=function(){var e=this;return this.previousBtnContainerNode=document.createElement("div"),this.prevBtnElement=document.createElement("button"),this.prevBtnElement.style.cssText=Ji(this.canvas.getZoom()),this.prevBtnElement.onclick=function(){return e.previousArtboard()},this.prevImgElement=document.createElement("img"),this.prevImgElement.src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0OS4zICg1MTE2NykgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+aWNvbl9sZWZ0PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9Imljb25fbGVmdCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InJpZ2h0X2Fycm93IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNTYuMDAwMDAwLCAyNTYuMDAwMDAwKSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC0yNTYuMDAwMDAwLCAtMjU2LjAwMDAwMCkgdHJhbnNsYXRlKDEwMi4wMDAwMDAsIDAuMDAwMDAwKSIgZmlsbD0iIzZGNzI3RCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBvbHlnb24gaWQ9Iu+PkiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUzLjU1Mzk4NiwgMjU1LjkyMzMwOSkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMTUzLjU1Mzk4NiwgLTI1NS45MjMzMDkpICIgcG9pbnRzPSIzMDcuMTA3OTcxIDMwLjM5MDg5MyA2Ny4xNzk4Njk4IDI1NS45MjMzMDkgMzA3LjEwNzk3MSA0ODEuNDU1NzI0IDI3My41MTgwMzcgNTExLjg0NjYxNyAxLjE0OTgxMjhlLTA2IDI1NS45MjMzMDkgMjczLjUxODAzNyAwIj48L3BvbHlnb24+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=",this.prevImgElement.style.cssText=Ki(this.canvas.getZoom()),this.prevBtnElement.append(this.prevImgElement),this.previousBtnContainerNode.appendChild(this.prevBtnElement),this.canvas.addDomToWorld(this.previousBtnContainerNode)},t.setPreviousButtonContainerLayout=function(){var e=this.canvas.executeFunction("getSelectedArtboard");e||(e=this.artboards[0]);var t=e.layout.data.left-150/this.canvas.getZoom(),n=e.layout.data.height/2+e.layout.data.top-40/this.canvas.getZoom();this.previousBtnContainerNode.style.cssText=Qi+"left:"+t+"px;top:"+n+"px"},t.setNextButtonContainerLayout=function(){var e=this.canvas.executeFunction("getSelectedArtboard");e||(e=this.artboards[0]);var t=e.layout.data.left+e.layout.data.width+50/this.canvas.getZoom(),n=e.layout.data.height/2+e.layout.data.top-40/this.canvas.getZoom();this.nextBtnContainerNode.style.cssText=Qi+"left:"+t+"px;top:"+n+"px"},t.deactivate=function(){this.canvas.removeFunction("switchToPreviewMode"),this.canvas.removeFunction("switchToStageMode"),this.disposeNextBtn(),this.disposePreviousBtn()},e}(),ea=function(e){function t(t,n,i,a,r){var o;return(o=e.call(this,t,n,i,r)||this).artboard=a,o}return q(t,e),t}(je),ta=function(){function e(){this.name="StageDesignerDrop"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){var e=this;this.canvas.addEventListener("drop",(function(t){var n=JSON.parse(t.originalEvent.dataTransfer.getData("text")),i=e.canvas.getHitRectResult(t.worldX-n.offsetX,t.worldY-n.offsetY,parseInt(n.width.replace("px","")),parseInt(n.height.replace("px",""))),a=i.pop(),r=null;o.map(i,(function(e){a.children.indexOf(e)>=0&&(r=e)})),r||(r=e.canvas.executeFunction("getSelectedArtboard")),e.canvas.dispatchEvent("StageDesigner.drop",new ea("StageDesigner.drop",e.canvas,t.originalEvent,r,e.canvas))}))},t.deactivate=function(){},e}(),na=function(e){function t(t,n,i,a,r,o){var s;return(s=e.call(this,t,n,a)||this).dimensions={x:i.x,y:i.y,height:i.height,width:i.width},s.worldX=i.worldX,s.worldY=i.worldY,s.meta=r,s.snapPoints=o,s}return q(t,e),t}(Te),ia=function(){function e(){var e=this;this.name="StageDesignerDrawComponent",this.firstTime=!0,this.setSelectedArtboard=function(t){var n=t.dimensions,i=e.canvas.executeFunction("getHitArtboard",n.worldX,n.worldY),a=e.canvas.executeFunction("getSelectedArtboard");if(i)a!==i&&e.canvas.dispatchEvent("selectArtboard",new Te("selectArtboard",i)),e.selectedArtboard=i;else{if(!a)throw new Error("No artboard is selected");e.selectedArtboard=a}},this.drawShape=function(t){var n=t.dimensions,i=n.worldX,a=n.worldY,r=e.getDimsFromArtboard(t.dimensions);t.meta.parent=e.selectedArtboard.children[0],e.snapPoints=e.canvas.executeFunction("getSnapPoints",[],e.selectedArtboard.children[0]),e.canvas.executeFunction("DrawComponent.setSnapPoints",e.snapPoints);var o=new na(e.name+".drawShape",e.canvas,Z({},r,{worldX:i,worldY:a}),void 0,t.meta,e.snapPoints);e.canvas.dispatchEvent(e.name+".drawShape",o)},this.addListeners=function(){e.canvas.addEventListener("DrawComponent.drawShape",(function(t){e.selectedArtboard&&(t.meta.parent=e.selectedArtboard.children[0],e.drawShape(t))})),e.canvas.addEventListener("DrawComponent.mousemove",(function(t){var n=t.dimensions,i=n.worldX,a=n.worldY,r=e.selectedArtboard;e.setSelectedArtboard(t);var o=e.getDimsFromArtboard(t.dimensions);t.meta.parent=e.selectedArtboard.children[0],r!==e.selectedArtboard&&e.drawShape(t);var s=new na(e.name+".mousemove",e.canvas,Z({},o,{worldX:i,worldY:a}),void 0,t.meta);e.canvas.dispatchEvent(e.name+".mousemove",s)})),e.canvas.addEventListener("DrawComponent.drawStart",(function(t){e.setSelectedArtboard(t);var n=t.dimensions,i=n.worldX,a=n.worldY,r=e.getDimsFromArtboard(t.dimensions),o=e.selectedArtboard.children[0],s=new na(e.name+".drawStart",e.canvas,Z({},r,{worldX:i,worldY:a}),void 0,{parent:o},e.snapPoints);e.canvas.dispatchEvent(e.name+".drawStart",s),e.canvas.executeFunction("DrawComponent.setSnapPoints",e.snapPoints)})),e.canvas.addEventListener("DrawComponent.draw",(function(t){t.meta.parent=e.selectedArtboard.children[0];var n=e.getDimsFromArtboard(t.dimensions),i=new na(e.name+".draw",e.canvas,Z({},n,{worldX:t.dimensions.worldX,worldY:t.dimensions.worldY}),void 0,t.meta);e.canvas.dispatchEvent(e.name+".draw",i)})),e.canvas.addEventListener("DrawComponent.drawEnd",(function(t){var n=t.dimensions,i=n.worldX,a=n.worldY,r=e.getDimsFromArtboard(t.dimensions),o=new na(e.name+".drawEnd",e.canvas,Z({},r,{worldX:i,worldY:a}));e.canvas.dispatchEvent(e.name+".drawEnd",o)})),e.canvas.addEventListener("DrawComponent.click",(function(t){var n=t.dimensions,i=n.worldX,a=n.worldY,r=e.getDimsFromArtboard(t.dimensions),o=new na(e.name+".click",e.canvas,Z({},r,{worldX:i,worldY:a,height:void 0,width:void 0}));e.canvas.dispatchEvent(e.name+".click",o)}))},this.getDimsFromArtboard=function(t){var n=0,i=0,a=o.get(t,"worldX",void 0),r=o.get(t,"worldY",void 0),s=o.get(t,"height",void 0),l=o.get(t,"width",void 0);return a&&e.selectedArtboard&&(n=a-e.selectedArtboard.rootX),r&&e.selectedArtboard&&(i=r-e.selectedArtboard.rootY),{x:n,y:i,height:s,width:l}}}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.addListeners()},t.deactivate=function(){},e}(),aa=function(){function e(){var e=this;this.name="StageDesignerRuler",this.rulerVisibility=!0,this.artboardLinesMap=new Map,this.showRuler=function(t){e.rulerVisibility=!0,e.canvas.executeFunction("RulerScale.show"),e.canvas.executeFunction("RulerLines.show")},this.hideRuler=function(t){e.rulerVisibility=!1,e.canvas.executeFunction("RulerScale.hide"),e.canvas.executeFunction("RulerLines.hide")},this.artboardSelected=function(t){var n=t.artboard,i=n.getBoundingClientRect();if(n){var a=e.canvas.convertPoint({x:n.rootX,y:n.rootY},"world","viewport");e.canvas.executeFunction("RulerScale.setInitialPoint",{x:a.x,y:a.y})}e.canvas.executeFunction("RulerLines.removeAll");var r=e.artboardLinesMap.get(n)||[];0!==r.length&&(r=r.map((function(e){return"x"===e.axis?{axis:"x",axisCoordinate:i.rootY+e.axisCoordinate}:{axis:"y",axisCoordinate:i.rootX+e.axisCoordinate}}))),e.canvas.executeFunction("RulerLines.addAll",r),e.rulerVisibility||e.canvas.executeFunction("RulerLines.hide",r)},this.getAllLines=function(t,n){return n||(n=e.canvas.executeFunction("getSelectedArtboard")),e.artboardLinesMap.get(n)},this.getLineCoordinates=function(){var t=e.canvas.executeFunction("getSelectedArtboard"),n={x:[],y:[]};if(!t)return n;var i=e.artboardLinesMap.get(t);return i?(o.forEach(i,(function(e){"y"===e.axis?n.y.push(e.axisCoordinate):n.x.push(e.axisCoordinate)})),n):n},this.addLine=function(t){var n=e.canvas.executeFunction("getSelectedArtboard");if(n){var i=n.getBoundingClientRect(),a=e.artboardLinesMap.get(n);a||(a=[]),a.push({axis:t.axis,axisCoordinate:t.axisCoordinate-("x"===t.axis?i.rootY:i.rootX)}),e.artboardLinesMap.set(n,a)}},this.setPosition=function(t){var n=e.canvas.executeFunction("getSelectedArtboard");if(n){var i=n.getBoundingClientRect(),a=e.artboardLinesMap.get(n),r={axis:t.axis,axisCoordinate:t.axisCoordinate-("x"===t.axis?i.rootY:i.rootX)};a?t.index||0===t.index?a[t.index]=r:a[a.length-1]=r:(a=[]).push(r),e.artboardLinesMap.set(n,a)}},this.removeLine=function(t){var n=e.canvas.executeFunction("getSelectedArtboard");if(n){var i=e.artboardLinesMap.get(n);null==i||i.splice(t.index,1),e.artboardLinesMap.set(n,i||[])}}}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){var e=this;this.canvas.addEventListener("artboardSelected",this.artboardSelected),this.canvas.addEventListener("RulerLines.add",this.addLine),this.canvas.addEventListener("RulerLines.setPosition",this.setPosition),this.canvas.addEventListener("RulerLines.remove",this.removeLine),this.canvas.addFunction(this.name+".getAllLines",this.getAllLines),this.canvas.addFunction(this.name+".getLineCoordinates",this.getLineCoordinates),this.canvas.addFunction(this.name+".show",this.showRuler),this.canvas.addFunction(this.name+".hide",this.hideRuler),this.canvas.on("scroll",(function(t){var n=e.canvas.executeFunction("getSelectedArtboard");if(n){var i=e.canvas.convertPoint({x:n.rootX,y:n.rootY},"world","viewport");e.canvas.executeFunction("RulerScale.setInitialPoint",{x:i.x,y:i.y})}}))},t.deactivate=function(){this.canvas.removeEventListener("artboardSelected",this.artboardSelected),this.canvas.removeEventListener("RulerLines.add",this.addLine),this.canvas.removeEventListener("RulerLines.setPosition",this.setPosition),this.canvas.removeEventListener("RulerLines.remove",this.removeLine),this.canvas.removeFunction(this.name+".getAllLines"),this.canvas.removeFunction(this.name+".getLineCoordinates"),this.canvas.removeFunction(this.name+".show"),this.canvas.removeFunction(this.name+".hide")},e}(),ra=function(e){function t(t,n,i,a,r){var o;return(o=e.call(this,t,n,a)||this).dimensions={worldX:i.x,worldY:i.y,height:i.height,width:i.width},o.meta=r,o}return q(t,e),t}(Te),oa=function(){function e(){var e=this;this.name="DrawComponent",this.dragStart={x:0,y:0},this.isShiftPressed=!1,this.isAltPressed=!1,this.dims={x:0,y:0,height:0,width:0},this.dragSession={start:{x:0,y:0,deltaX:0,deltaY:0},current:{x:0,y:0,deltaX:0,deltaY:0},end:{x:0,y:0,deltaX:0,deltaY:0}},this.initialDimensions={x:0,y:0,height:0,width:0,rotation:0},this.newDimensions={x:0,y:0,height:0,width:0,rotation:0},this.getQuad=function(e,t){return t.x<e.x&&t.y>e.y?2:t.x<e.x&&t.y<=e.y?3:t.x>=e.x&&t.y<e.y?4:1},this.onMouseMove=function(t,n){var i=0;if(e.mouseDown&&!e.dragStarted){if(n.pageX&&n.pageY){i=e.dims.y,e.initialDimensions.x=e.dims.x,e.initialDimensions.y=i,e.initialDimensions.width=0,e.initialDimensions.height=0;var a=e.canvas.executeFunction("snapToPoints",e.snapPoints,[e.initialDimensions.x,e.initialDimensions.y],[0,0],Z({},e.initialDimensions),[0,0],[e.initialDimensions.x,e.initialDimensions.y],0,e.initialDimensions);e.initialDelta=a.delta,e.newDimensions=ve(e.initialDimensions,a.delta,"C",!1,!1),e.dims.x=e.newDimensions.x,e.dims.y=e.newDimensions.y,e.initialDimensions.x=e.dims.x,e.initialDimensions.y=e.dims.y,e.dragStarted=!0;var r=new ra(e.name+".draw",e.canvas,Z({},e.initialDimensions),void 0,a.meta);e.canvas.dispatchEvent(e.name+".draw",r)}}else if(e.dragStarted){var o=e.canvas.getZoom();if(e.canvas.getBoundingClientRect(),n.pageX&&n.pageY){var s=e.canvas.executeFunction("HtmlDragToWorld.drag",n);e.dragSession.current=s.session.current;var l=s.session.current.x-s.session.start.x+e.initialDelta.x,d=s.session.current.y-s.session.start.y+e.initialDelta.y,c=e.canvas.executeFunction("snapToPoints",e.snapPoints,[e.initialDimensions.x,e.initialDimensions.y],[l,d],Z({},e.initialDimensions),[l,d],[e.initialDimensions.x,e.initialDimensions.y],0,e.initialDimensions),u=c.delta,h="";if(u.x>=0&&(h+="R"),u.x<0&&(h+="L"),u.y>=0&&(h+="B"),u.y<0&&(h+="T"),e.newDimensions=ve(e.initialDimensions,u,h,e.isShiftPressed,e.isAltPressed),e.renderer.style.backgroundColor="transparent","rect"===t)e.renderer.style.position="absolute",e.renderer.style.left=e.newDimensions.x?e.newDimensions.x+"px":"",e.renderer.style.top=e.newDimensions.y?e.newDimensions.y+"px":"",e.renderer.style.height=e.newDimensions.height+"px",e.renderer.style.width=e.newDimensions.width+"px",e.renderer.style.border=1/o+"px solid black";else if("ellipse"===t){e.overlayLayer.style.display="block",e.renderer.style.position="absolute",e.renderer.style.left=e.newDimensions.x,e.renderer.style.top=e.newDimensions.y,e.renderer.setAttribute("height",e.newDimensions.height+"px"),e.renderer.setAttribute("width",e.newDimensions.width+"px"),e.ellipseRenderer.setAttribute("cx",e.newDimensions.width/2+"px"),e.ellipseRenderer.setAttribute("cy",e.newDimensions.height/2+"px");var p=1/(2*o);e.ellipseRenderer.setAttribute("rx",0!==e.newDimensions.width?e.newDimensions.width/2-p+"px":0),e.ellipseRenderer.setAttribute("ry",0!==e.newDimensions.height?e.newDimensions.height/2-p+"px":0),e.ellipseRenderer.style.strokeWidth=1/o+"px"}e.overlayLayer.appendChild(e.renderer);var v=new ra(e.name+".draw",e.canvas,Z({},e.newDimensions),void 0,c.meta),g=e.canvas.convertPoint(e.newDimensions,"world","viewport");e.canvas.executeFunction("Tooltip.show",{x:g.x+e.newDimensions.width*o,y:g.y+e.newDimensions.height*o},Math.round(e.newDimensions.width)+" ✕ "+Math.round(e.newDimensions.height)),e.canvas.dispatchEvent(e.name+".draw",v)}}},this.onMouseUp=function(t){e.dragStarted=!1,e.mouseDown=!1;var n=new ra(e.name+".drawEnd",e.canvas,{x:e.newDimensions.x,y:e.newDimensions.y,height:e.newDimensions.height,width:e.newDimensions.width});e.canvas.executeFunction("Tooltip.hide"),e.newDimensions.height=0,e.newDimensions.width=0,e.renderer.style.width="0px",e.renderer.style.height="0px",e.renderer.style.display="none",e.overlayDispose(),e.canvas.setMouseCursor("default"),e.canvas.dispatchEvent(e.name+".drawEnd",n),e.overlayLayer&&(e.overlayLayer.ownerDocument.removeEventListener("mousemove",e.boundMouseMove),e.overlayLayer.ownerDocument.removeEventListener("mouseup",e.boundMouseUp),e.overlayLayer.ownerDocument.removeEventListener("contextmenu",e.boundMouseUp)),e.renderer=void 0,e.overlayLayer=void 0,e.shapeType=void 0},this.clickEvent=function(t){var n=new ra(e.name+".click",e.canvas,{x:t.worldX,y:t.worldY,height:void 0,width:void 0});e.canvas.dispatchEvent(e.name+".click",n)},this.abortDraw=function(){e.dragStarted=!1,e.mouseDown=!1,e.dims.height=0,e.dims.width=0,e.renderer&&e.renderer.style&&(e.renderer.style.width="0px",e.renderer.style.height="0px",e.renderer.style.display="none"),e.canvas.executeFunction("Tooltip.hide"),e.overlayDispose&&e.overlayDispose(),e.canvas.setMouseCursor("default"),e.canvas.removeEventListener("click",e.clickEvent),e.overlayLayer&&(e.overlayLayer.ownerDocument.removeEventListener("mousemove",e.boundMouseMove),e.overlayLayer.ownerDocument.removeEventListener("mouseup",e.boundMouseUp),e.overlayLayer.ownerDocument.removeEventListener("contextmenu",e.boundMouseUp),e.renderer=void 0,e.overlayLayer=void 0),e.shapeType=void 0},this.setSnapPoints=function(t,n){e.snapPoints=n,e.snapPoints&&(e.snapPoints.parentSnapPoints.x.forEach((function(e){e.value=e.rootValue})),e.snapPoints.parentSnapPoints.y.forEach((function(e){e.value=e.rootValue})),e.snapPoints.siblingSnapPoints.x.forEach((function(e){e.value=e.rootValue})),e.snapPoints.siblingSnapPoints.y.forEach((function(e){e.value=e.rootValue})),e.snapPoints.rulerSnapPoints.x.forEach((function(e){e.value=e.rootValue})),e.snapPoints.rulerSnapPoints.y.forEach((function(e){e.value=e.rootValue})))}}var t=e.prototype;return t.drawShape=function(e,t,n){var i=this;if(void 0===t&&(t="rect"),void 0===n&&(n="crosshair"),this.shapeType&&this.shapeType!==t&&this.abortDraw(),!this.mouseDown&&!this.overlayLayer){var a=0,r=0,o=new ra(this.name+".drawShape",this.canvas,{x:a,y:r,height:0,width:0},void 0,{});this.canvas.dispatchEvent(this.name+".drawShape",o),this.canvas.setMouseCursor(n),this.shapeType=t,"rect"===t?this.renderer=document.createElement("div"):"ellipse"===t&&(this.renderer=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.ellipseRenderer=document.createElementNS("http://www.w3.org/2000/svg","ellipse"),this.ellipseRenderer.style.fill="transparent",this.ellipseRenderer.style.stroke="black",this.renderer.appendChild(this.ellipseRenderer)),this.renderer.style.position="absolute";var s=this.canvas.getBoundingClientRect();this.overlayLayer=document.createElement("div"),this.overlayLayer.style.background="transparent",this.overlayLayer.style.height=s.height+"px",this.overlayLayer.style.width=s.width+"px",this.overlayLayer.style.top=s.y+"px",this.overlayLayer.style.left=s.x+"px",this.overlayLayer.style.pointerEvents="none",this.overlayLayer.style.position="absolute",this.overlayLayer.style.zIndex=1,this.overlayDispose=this.canvas.addDomToWorld(this.overlayLayer,!0,105),this.overlayLayer.addEventListener("mousemove",(function(e){if(!i.mouseDown){var t=i.canvas.executeFunction("HtmlDragToWorld.dragStart",e,{x:0,y:0,height:0,width:0,rotation:0}),n={x:a=t.session.start.x,y:r=t.session.start.y,width:0,height:0},o=i.canvas.executeFunction("snapToPoints",i.snapPoints,[a,r],[0,0],Z({},n),[0,0],[a,r],0,i.initialDimensions);n=Z({},n,{x:n.x+o.delta.x,y:n.y+o.delta.y});var s=new ra(i.name+".mousemove",i.canvas,Z({},n),void 0,o.meta);i.canvas.dispatchEvent(i.name+".mousemove",s)}})),this.overlayLayer.addEventListener("mousedown",(function(e){var n=i.canvas.executeFunction("HtmlDragToWorld.dragStart",e,{x:0,y:0,height:0,width:0,rotation:0});a=n.session.start.x,r=n.session.start.y,i.dragSession.start=n.session.start,i.mouseDown=!0,i.dragStarted=!1,i.dims={x:a,y:r,height:0,width:0},i.newDimensions={x:a,y:r,height:0,width:0},i.boundMouseMove=i.onMouseMove.bind(i,t),i.boundMouseUp=i.onMouseUp,i.overlayLayer.ownerDocument.addEventListener("mousemove",i.boundMouseMove),i.overlayLayer.ownerDocument.addEventListener("mouseup",i.boundMouseUp),i.overlayLayer.ownerDocument.addEventListener("contextmenu",i.boundMouseUp);var o=new ra(i.name+".drawStart",i.canvas,{x:a,y:r,height:0,width:0});i.canvas.dispatchEvent(i.name+".drawStart",o)})),this.canvas.addEventListener("click",this.clickEvent)}},t.init=function(e){this.canvas=e},t.activate=function(){var e=this;this.canvas.addFunction("drawShape",this.drawShape.bind(this)),this.canvas.addFunction("abortDraw",this.abortDraw.bind(this)),this.canvas.addFunction("DrawComponent.setSnapPoints",this.setSnapPoints.bind(this)),this.canvas.addEventListener("blur",(function(){e.isAltPressed&&(e.isAltPressed=!1),e.isShiftPressed&&(e.isShiftPressed=!1)})),this.canvas.addEventListener("keyUp",(function(t){var n=t.originalEvent?t.originalEvent:t;16===n.keyCode&&(e.isShiftPressed=!1),18===n.keyCode&&(e.isAltPressed=!1)})),this.canvas.addEventListener("keyDown",(function(t){var n=t.originalEvent?t.originalEvent:t;16===n.keyCode&&(e.isShiftPressed=!0),18===n.keyCode&&(e.isAltPressed=!0)}))},t.deactivate=function(){this.canvas.removeFunction("drawShape"),this.canvas.removeFunction("abortDraw"),this.canvas.removeFunction("DrawComponent.setSnapPoints"),this.overlayDispose()},e}(),sa=function(e){function t(t,n,i,a,r){var o;o=e.call(this,t,n,i,r)||this;var s=n.getCanvas();o.worldDx=a.worldDx,o.worldDy=a.worldDy;var l=s.convertPoint({x:a.worldDx,y:a.worldDy},"world","page");o.pageDx=l.x,o.pageDy=l.y;var d=s.convertPoint({x:o.pageDx,y:o.pageDy},"page","viewport");return o.viewportDx=d.x,o.viewportDy=d.y,o}return q(t,e),t}(Ge),la=function(){function e(){var e=this;this.name="LayerLabel",this.lastPageX=0,this.lastPageY=0,this.dragStart={x:0,y:0},this.dims={x:0,y:0,height:0,width:0},this.layerLabelMap=new Map([]),this.selectedArtboardChanged=function(t){var n=t.artboard;n&&e.layerLabelMap.forEach((function(e,t){e.labeltextNode.parentElement&&(e.labeltextNode.parentElement.style.color=t===n?"rgb(26, 170, 198)":"rgb(186, 189, 198)")}))}}var t=e.prototype;return t.handleGhostImage=function(e){var t=e.target.cloneNode(!0);t.style.backgroundColor="red",t.style.opacity=0,t.style.pointerEvents="none",document.body.appendChild(t),this.ghostImageDOM=t,e.dataTransfer.setDragImage(t,0,0)},t.updateLabelLayout=function(e,t){e.style.top=t.rootY-20/this.canvas.getZoom()+"px",e.style.left=t.rootX+"px",e.style.height=20/this.canvas.getZoom()+"px",e.style.fontSize=12/this.canvas.getZoom()+"px"},t.setLabel=function(e,t){this.layerLabelMap.get(e.layer).labeltextNode.nodeValue=t},t.removeLabel=function(e){(0,this.layerLabelMap.get(e.layer).removeCallback)()},t.hideLabel=function(e){var t=this.layerLabelMap.get(e.layer);t&&t.labelNode&&(t.labelNode.style.display="none")},t.showLabel=function(e){var t=this.layerLabelMap.get(e.layer);t&&t.labelNode&&(t.labelNode.style.display="")},t.addLabel=function(e,t){var n=this,i=e.layer,a=document.createElement("span"),r=document.createTextNode(t);a.appendChild(r),a.style.position="absolute",a.style.top=i.rootY-20/this.canvas.getZoom()+"px",a.style.left=i.rootX+"px",a.style.height=20/this.canvas.getZoom()+"px",a.style.fontSize=12/this.canvas.getZoom()+"px",a.style.fontFamily="Roboto, -apple-system, BlinkMacSystemFont, sans-serif",a.style.textOverflow="ellipsis",a.style.color="rgb(186, 189, 198)",a.style.overflow="hidden",a.style.fontWeight="300px",a.style.letterSpacing="0.6px",this.canvas.on("zoom",(function(){n.updateLabelLayout(a,e.layer)})),i.parent&&i.parent.addEventListener("removeChild",(function(e){i===e.layer&&i.executeFunction("LayerLabel.remove")}));var o=this.canvas.addDomToWorld(a,!0,101);a.setAttribute("class","file-header "+a.className),a.setAttribute("data-cypress-id","file-header"),this.layerLabelMap.set(i,{removeCallback:o,labelNode:a,labeltextNode:r}),a.style.pointerEvents="all",e.layer.on("layout",(function(){n.updateLabelLayout(a,e.layer)})),e.layer.on("updateDom",(function(){n.updateLabelLayout(a,e.layer)})),this.canvas.executeFunction("handleHtmlDrag",a),a.addEventListener("htmlDragStart",(function(t){var a=n.canvas.executeFunction("HtmlDragToWorld.dragStart",t,{x:0,y:0,height:0,width:0,rotation:0});n.lastPageX=a.event.worldX,n.lastPageY=a.event.worldY;var r=new sa("dragStart",e.layer,t,{worldX:a.event.worldX,worldY:a.event.worldY},e.layer);i.dispatchEvent("dragStart",r)})),a.addEventListener("htmlDrag",(function(t){if(t.pageX&&t.pageY){var a=n.canvas.executeFunction("HtmlDragToWorld.drag",t);if(a.session.current.deltaX||a.session.current.deltaY){var r={x:a.event.worldX-n.lastPageX,y:a.event.worldY-n.lastPageY},o=new sa("drag",e.layer,t,{worldDx:r.x,worldDy:r.y});i.dispatchEvent("drag",o),n.lastPageX=a.event.worldX,n.lastPageY=a.event.worldY}}})),a.addEventListener("contextmenu",(function(e){n.canvas.dispatchEventOnHitLayer(e.type,new Ge(e.type,n.canvas,e,n.canvas),e)})),a.addEventListener("htmlDragEnd",(function(t){var a=i.executeFunction("HtmlDragToWorld.dragEnd",t),r=new sa("dragEnd",e.layer,t,{worldX:a.event.worldX,worldY:a.event.worldY},e.layer);i.dispatchEvent("dragEnd",r),n.lastPageX=0,n.lastPageY=0})),a.addEventListener("click",(function(e){var t=new sa(n.name+".click",i,e,{});i.dispatchEvent(n.name+".click",t)})),a.addEventListener("dblclick",(function(e){var t=new sa(n.name+".doubleClick",i,e,{});i.dispatchEvent(n.name+".doubleClick",t)}))},t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addFunction(this.name+".add",this.addLabel.bind(this)),this.canvas.addFunction(this.name+".set",this.setLabel.bind(this)),this.canvas.addFunction(this.name+".remove",this.removeLabel.bind(this)),this.canvas.addFunction(this.name+".show",this.showLabel.bind(this)),this.canvas.addFunction(this.name+".hide",this.hideLabel.bind(this)),this.canvas.addEventListener("artboardSelected",this.selectedArtboardChanged)},t.deactivate=function(){},e}(),da=function(e){function n(){return e.apply(this,arguments)||this}return q(n,e),n.prototype.render=function(){var e=this.props,n=e.deviceOrientation,i=e.left,a=e.top;return t.createElement("div",{style:{position:"absolute",pointerEvents:"none",left:"landscape"===n?i+211:i-8,top:"landscape"===n?a-225:a-8,transform:"landscape"===n?"rotate(270deg)":"none"}},t.createElement("svg",{width:"388px",height:"824px",viewBox:"-2 -2 388 824",version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink"},t.createElement("path",{d:"M46,6 C23.909,6 6,23.909 6,46 L6,778 C6,800.091 23.909,818 46,818 L341,818 C363.091,818 381,800.091 381,\n            778 L381,46 C381,23.909 363.091,6 341,6 L46,6 Z M112.04,37 C99.337,37 89.04,26.703 89.04,13.961\n            L89.046,10.037 C89.0345531,9.99058934 89.0205314,9.94485191 89.004,9.9 C88.334,8.086 86.78,6.674\n            84.892,6.216 L84,6 L303,6 L302.108,6.216 C300.210771,6.68271966 298.67094,8.06429185 298.002,9.9\n            C297.970221,9.98647005 297.953971,10.0778752 297.954,10.17 L297.961,14 C297.961,26.703 287.663,37\n            274.961,37 L112.039,37 L112.04,37 Z M0,0 L388,0 L388,824 L0,824 L0,0 Z M128.5,800 C127.119288,800\n            126,801.119288 126,802.5 C126,803.880712 127.119288,805 128.5,805 L258.5,805 C259.880712,805 261,803.880712\n            261,802.5 C261,801.119288 259.880712,800 258.5,800 L128.5,800 Z",fill:"#171A21",fillRule:"evenodd",id:"Shape"})))},n}(t.Component),ca=function(e){function n(){return e.apply(this,arguments)||this}return q(n,e),n.prototype.render=function(){var e=this.props,n=e.deviceOrientation,i=e.left,a=e.top;return t.createElement("div",{style:{position:"absolute",pointerEvents:"none",zIndex:1,left:"landscape"===n?i+235:i-8,top:"landscape"===n?a-248:a-8,transform:"landscape"===n?"rotate(270deg)":"none"}},t.createElement("svg",{width:"427px",height:"908px",viewBox:"0 -2 384 825",version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink"},t.createElement("path",{d:"M46,6 C23.909,6 6,23.909 6,46 L6,778 C6,800.091 23.909,818 46,818 L341,818 C363.091,818 381,800.091 381,\n            778 L381,46 C381,23.909 363.091,6 341,6 L46,6 Z M112.04,37 C99.337,37 89.04,26.703 89.04,13.961\n            L89.046,10.037 C89.0345531,9.99058934 89.0205314,9.94485191 89.004,9.9 C88.334,8.086 86.78,6.674\n            84.892,6.216 L84,6 L303,6 L302.108,6.216 C300.210771,6.68271966 298.67094,8.06429185 298.002,9.9\n            C297.970221,9.98647005 297.953971,10.0778752 297.954,10.17 L297.961,14 C297.961,26.703 287.663,37\n            274.961,37 L112.039,37 L112.04,37 Z M0,0 L388,0 L388,824 L0,824 L0,0 Z M128.5,800 C127.119288,800\n            126,801.119288 126,802.5 C126,803.880712 127.119288,805 128.5,805 L258.5,805 C259.880712,805 261,803.880712\n            261,802.5 C261,801.119288 259.880712,800 258.5,800 L128.5,800 Z",fill:"#171A21",fillRule:"evenodd",id:"Shape"})))},n}(t.Component),ua=function(){function e(){var e=this;this.name="DeviceFrame",this.deviceFrameMap=new Map([]),this.lastPageX=0,this.lastPageY=0,this.dragStart={x:0,y:0},this.dims={x:0,y:0,height:0,width:0},this.DeviceFrameMap=new Map([]),this.selectedArtboardChanged=function(t){var n=t.artboard;n&&e.DeviceFrameMap.forEach((function(e,t){e.labeltextNode.parentElement.style.color=t===n?"rgb(26, 170, 198)":"rgb(186, 189, 198)"}))},this.render=function(n){var a,r=e.deviceFrameMap.get(n);if(r){if(r.frameNode.style.top=n.getBoundingClientRect().rootY+"px",r.frameNode.style.left=n.getBoundingClientRect().rootX+"px",r.deviceName)switch(r.deviceName.toLowerCase()){case"iphone x":case"iphone xs":case"iphone 11 pro":a=t.createElement(da,{deviceOrientation:r.deviceOrientation,left:0,top:0});break;case"iphone xs max":case"iphone xr":case"iphone 11 pro max":case"iphone 11":a=t.createElement(ca,{deviceOrientation:r.deviceOrientation,left:0,top:0})}a&&i.render(a,r.frameNode)}}}var n=e.prototype;return n.removeFrame=function(e){var t=this.deviceFrameMap.get(e.layer);t&&t.removeCallback()},n.addFrame=function(e,t,n){var i=this,a=e.layer,r=this.deviceFrameMap.get(a);r&&r.removeCallback();var o=document.createElement("div");o.className="frame-wrappers",o.style.pointerEvents="none",o.style.position="absolute";var s=this.canvas.addDomToWorld(o,!0,100);this.deviceFrameMap.set(a,{removeCallback:s,frameNode:o,deviceName:t,deviceOrientation:n}),this.render(a),a.parent&&a.parent.addEventListener("removeChild",(function(e){a===e.layer&&a.executeFunction("DeviceFrame.remove")})),e.layer.on("layout",(function(){i.render(e.layer)})),e.layer.on("updateDom",(function(){i.render(e.layer)}))},n.init=function(e){this.canvas=e},n.activate=function(){this.canvas.addFunction(this.name+".add",this.addFrame.bind(this)),this.canvas.addFunction(this.name+".remove",this.removeFrame.bind(this)),this.canvas.addEventListener("artboardSelected",this.selectedArtboardChanged)},n.deactivate=function(){},e}(),ha=function(e){function n(){return e.apply(this,arguments)||this}return q(n,e),n.prototype.render=function(){return t.createElement("div",{style:{position:"absolute",top:0,left:this.props.left}},t.createElement("svg",{width:"150px",height:"24px",viewBox:"0 0 150 24",version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink"},t.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},t.createElement("rect",{x:0,y:0,width:150,height:24}))))},n}(t.Component),pa=function(e){function n(){return e.apply(this,arguments)||this}return q(n,e),n.prototype.render=function(){return t.createElement("div",{style:{position:"absolute",top:0,left:this.props.left}},t.createElement("svg",{width:"116px",height:"24px",viewBox:"0 0 116 24",version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink"},t.createElement("g",{strokeWidth:1},t.createElement("text",{opacity:"0.9",transform:"translate(74.000000, 4.000000)",fill:this.props.color,fontFamily:"Roboto-Medium, Roboto",fontSize:14,fontWeight:400},t.createElement("tspan",{x:"0.459960938",y:13},"12:30")),t.createElement("g",{transform:"translate(55.000000, 4.000000)",fill:"transparent"},t.createElement("polygon",{points:"0 0 16 0 16 16 0 16"}),t.createElement("polygon",{fill:this.props.color,points:"9 1.875 9 1 6 1 6 1.875 3 1.875 3 15 12 15 12 1.875"})),t.createElement("g",{transform:"translate(35.000000, 4.000000)",fill:"transparent"},t.createElement("polygon",{points:"0 0 16 0 16 16 0 16"}),t.createElement("polygon",{fill:this.props.color,points:"0 15 14 15 14 1"})),t.createElement("g",{transform:"translate(14.000000, 4.000000)",fill:"transparent"},t.createElement("polygon",{points:"2 0 18 0 18 16 2 16"}),t.createElement("path",{d:"M.977 4.016A14.934 14.934 0 0 1 10 1c3.387 0 6.512 1.123 9.023 3.016L10 15 .977 4.016z",fill:this.props.color})))))},n}(t.Component),va=function(e){var n=e.color?e.color:"#FFF";return t.createElement("div",{style:{position:"relative",width:e.width,height:24,zIndex:1,backgroundColor:e.backgroundColor?e.backgroundColor:"#000"}},t.createElement(ha,{width:e.width,left:0}),t.createElement(pa,{width:e.width,color:n,left:e.width-115}))},ga=function(e){function n(){return e.apply(this,arguments)||this}return q(n,e),n.prototype.render=function(){return t.createElement("div",{style:{position:"absolute",top:13,left:this.props.left}},t.createElement("svg",{width:"97px",height:"18px",viewBox:"0 0 145 27",version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink"},t.createElement("g",{transform:"translate(-461.000000, -204.000000) translate(88.000000, 201.000000)\n            translate(373.000000, 3.000000)",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},t.createElement("path",{d:"M0 11.99c0-.546.444-.99 1-.99h3a1 1 0 0 1 1 .99v4.02c0 .546-.444.99-1 .99H1a1\n              1 0 0 1-1-.99v-4.02zm7-2.992C7 8.447 7.444 8 8 8h3c.552 0 1 .446 1 .998v7.004c0\n              .551-.444.998-1 .998H8c-.552 0-1-.446-1-.998V8.998zm7-4A.997.997 0 0 1 15 4h3a1 1 0 0\n              1 1 .999V16A.997.997 0 0 1 18 17h-3a1 1 0 0 1-1-.999V5zm7-2.997C21 1.448 21.444 1 22\n              1h3c.552 0 1 .445 1 1v14c0 .552-.444 1-1 1h-3c-.552 0-1-.445-1-1V2z",fill:this.props.color}),t.createElement("path",{d:"M32.348 5.634C38.603-.621 48.745-.621 55 5.634l-2.35\n              2.35c-4.957-4.957-12.994-4.957-17.951 0l-2.35-2.35zm3.858 3.857c4.125-4.124 10.812-4.124\n              14.936 0l-2.028 2.03a7.692 7.692 0 0 0-10.88 0l-2.028-2.03zm3.33 3.33a5.853 5.853 0 0\n              1 8.277 0l-4.139 4.139-4.138-4.139z",fill:this.props.color}),t.createElement("g",{transform:"translate(61.000000, 0.000000)"},t.createElement("rect",{stroke:this.props.color,opacity:"0.300000012",x:"0.5",y:"0.5",width:31,height:17,rx:6}),t.createElement("rect",{fill:this.props.color,x:3,y:3,width:26,height:12,rx:3}),t.createElement("path",{d:"M34 7a2 2 0 1 1 0 4V7z",fill:this.props.color})))))},n}(t.Component),ya=function(e){function n(){return e.apply(this,arguments)||this}return q(n,e),n.prototype.render=function(){return t.createElement("div",{style:{position:"absolute",top:13,left:this.props.left}},t.createElement("svg",{version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink"},t.createElement("g",{fill:this.props.color,stroke:"none",strokeWidth:1,fillRule:"evenodd"},t.createElement("g",{fill:this.props.color},t.createElement("text",{fontFamily:".AppleSystemUIFont",fontSize:"11.9931181",fontWeight:"normal"},t.createElement("tspan",{x:0,y:13},"9:41 AM")),t.createElement("path",{d:"M61.797 2.5a2.163 2.163 0 0 0-.763.134l-.339.133 2.764 2.763.242.221.12-.312a2.186 2.186 0 0\n                0-.495-2.304 2.18 2.18 0 0 0-1.529-.636zm-5.535.002a2.185 2.185 0 0 0-1.656.633 2.18 2.18 0 0 0-.502\n                2.292l.133.34L57 3.002l.22-.241-.31-.122-.046-.019a2.153 2.153 0 0 0-.602-.119zm2.704.866a4.568 4.568\n                0 0 0-4.562 4.562 4.568 4.568 0 0 0 4.562 4.563A4.568 4.568 0 0 0 63.53 7.93a4.568 4.568 0 0\n                0-4.563-4.562zm0 1.303c.12 0 .217.098.217.217V7.93c0 .12-.097.217-.217.217h-1.738a.217.217 0\n                0 1 0-.434h1.52V4.888c0-.12.098-.217.218-.217z",fillRule:"nonzero"})))))},n}(t.Component),fa=function(e){return t.createElement("div",{style:{position:"relative",width:"100%",height:44,zIndex:1}},t.createElement(ya,{left:14,width:83,color:e.color}),t.createElement(ga,{left:e.width-80,width:83,color:e.color}))},ma=function(e){function n(){return e.apply(this,arguments)||this}return q(n,e),n.prototype.render=function(){return t.createElement("div",{style:{position:"absolute",top:2.5,left:this.props.left}},t.createElement("svg",{version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink"},t.createElement("g",{fill:this.props.color,stroke:"none",strokeWidth:1,fillRule:"evenodd"},t.createElement("g",{strokeWidth:1,fillRule:"evenodd"},t.createElement("path",{d:"M37.494 2.5h19.512c.82 0 1.494.674 1.494 1.505v6.49c0 .837-.669\n              1.505-1.494 1.505H37.494c-.82 0-1.494-.674-1.494-1.505v-6.49c0-.837.669-1.505\n              1.494-1.505zM59 5.5h.75c.417 0 .75.332.75.742v2.016a.748.748 0 0 1-.75.742H59V5.5zM37.508\n              3c-.557 0-1.008.457-1.008 1.008v6.484c0 .557.45 1.008 1.008 1.008h19.484c.557 0 1.008-.457\n              1.008-1.008V4.008C58 3.451 57.55 3 56.992 3H37.508zm-.001.5h19.486c.277\n              0 .507.22.507.492v6.516a.497.497 0 0 1-.507.492H37.507a.502.502 0 0\n              1-.507-.492V3.992c0-.276.227-.492.507-.492z"}),t.createElement("text",{fontFamily:".AppleSystemUIFont",fontSize:12,fontWeight:"normal"},t.createElement("tspan",{x:"2.85351562",y:"11.5"},"100%"))))))},n}(t.Component),xa=function(e){function n(){return e.apply(this,arguments)||this}return q(n,e),n.prototype.render=function(){return t.createElement("div",{style:{position:"absolute",top:2.5,left:this.props.left}},t.createElement("svg",{version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"red"},t.createElement("g",{fill:this.props.color,stroke:"none",strokeWidth:1,fillRule:"evenodd"},t.createElement("g",{strokeWidth:1,fillRule:"evenodd"},t.createElement("path",{d:"M90.144 9.439L88.023 11.5 85.86 9.405a2.857 2.857 0 0 1 2.128-.936c.864 0\n              1.638.376 2.156.97zm2.18-2.118l-1.09 1.058a4.417 4.417 0 0 0-3.246-1.402c-1.274 0-2.42.528-3.219\n              1.372l-1.09-1.056a5.979 5.979 0 0 1 4.309-1.809c1.713 0 3.257.708 4.335 1.837zM94.5 5.207l-1.088\n              1.057a7.539 7.539 0 0 0-5.424-2.272 7.54 7.54 0 0 0-5.398 2.245L81.5 5.182A9.1 9.1 0 0 1 87.988 2.5\n              9.1 9.1 0 0 1 94.5 5.207z"}),t.createElement("text",{fontFamily:".AppleSystemUIFont",fontSize:12,fontWeight:"normal"},t.createElement("tspan",{x:38,y:"11.5"},"Carrier")),t.createElement("path",{d:"M3.25 10a2.75 2.75 0 1 1 0-5.5 2.75 2.75 0 0 1 0 5.5zm7 0a2.75 2.75 0 1\n              1 0-5.5 2.75 2.75 0 0 1 0 5.5zm7 0a2.75 2.75 0 1 1 0-5.5 2.75 2.75 0 0 1 0 5.5zm7 0a2.75 2.75\n              0 1 1 0-5.5 2.75 2.75 0 0 1 0 5.5zm7 0a2.75 2.75 0 1 1 0-5.5 2.75 2.75 0 0 1 0 5.5z"})))))},n}(t.Component),wa=function(e){function n(){return e.apply(this,arguments)||this}return q(n,e),n.prototype.render=function(){return t.createElement("div",{style:{position:"absolute",top:2.5,left:this.props.left}},t.createElement("svg",{version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink"},t.createElement("g",{fill:this.props.color,stroke:"none",strokeWidth:1,fillRule:"evenodd"},t.createElement("text",{fontFamily:".AppleSystemUIFont",fontSize:12,fontWeight:"normal"},t.createElement("tspan",{x:"0",y:"11.5"},"9:41 AM")))))},n}(t.Component),ba=function(e){function n(){return e.apply(this,arguments)||this}return q(n,e),n.prototype.render=function(){return t.createElement("div",{style:{position:"absolute",top:0,left:0,width:this.props.width}},t.createElement("svg",{width:this.props.width+"px",height:"20px",viewBox:"0 0 "+this.props.width+" 20",version:"1.1",xmlnsXlink:"http://www.w3.org/1999/xlink"},t.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},t.createElement("rect",{fill:this.props.backgroundColor,x:0,y:0,width:this.props.width,height:20}))))},n}(t.Component),La=function(e){return t.createElement("div",{style:{position:"relative",width:e.width,height:20,zIndex:1}},t.createElement(ba,{backgroundColor:e.backgroundColor,width:e.width}),t.createElement(xa,{left:3,color:e.color}),t.createElement(wa,{color:e.color,left:e.width/2-20}),t.createElement(ma,{color:e.color,left:e.width-65}))},Ea=function(e){function n(t){var n;return(n=e.call(this,t)||this).onUpdate=function(){},n.attachStatusBarListeners=function(){},n.removeStatusBarListeners=function(){},n}q(n,e);var i=n.prototype;return i.componentDidMount=function(){this.props.layer.on(["layout","updateDom"],this.onUpdate)},i.componentDidUpdate=function(e){var t=this;e.layer.off(["layout","updateDom"],this.onUpdate),this.props.layer.on(["layout","updateDom"],(function(){t.onUpdate()}))},i.componentWillUnmount=function(){this.props.layer.off(["layout","updateDom"],this.onUpdate)},i.getElement=function(){if(!this.props.layer)return null;var e=this.props.deviceName,n=this.props.deviceOS,i=this.props.deviceOrientation,a="#000",r=this.props.width,o=this.props.height,s={},l=!1,d=!1;return n&&e&&(l="ios"===n.toLowerCase()&&("iphone x"===e.toLowerCase()||"iphone xs"===e.toLowerCase()||"iphone 11 pro"===e.toLowerCase()),d="ios"===n.toLowerCase()&&("iphone xr"===e.toLowerCase()||"iphone xs max"===e.toLowerCase()||"iphone 11"===e.toLowerCase()||"iphone 11 pro max"===e.toLowerCase())),"Web"===n?null:"iOS"!==n||l||d?l||d?("light-content"===this.props.barStyle?a="#ffffff":"dark-content"===this.props.barStyle&&(a="#000000"),t.createElement("div",{style:{position:"absolute",top:0,left:0}},t.createElement(fa,{width:r,deviceOrientation:i,backgroundColor:"rgba(255,255,255,0.2)",color:a,style:s}))):("light-content"===this.props.barStyle?a="#ffffff":"dark-content"===this.props.barStyle&&(a="#404040"),t.createElement("div",{style:{position:"absolute",top:0,left:0}},t.createElement(va,{width:r,height:o,backgroundColor:this.props.backgroundColor||"#999999",color:a,style:s}))):("light-content"===this.props.barStyle?a="#ffffff":"dark-content"===this.props.barStyle&&(a="#000000"),t.createElement("div",{style:{position:"absolute",top:0,left:0}},t.createElement(La,{width:r,color:a,style:s})))},i.render=function(){return this.getElement()},n}(t.Component),Da=function(){function e(){var e=this;this.name="StatusBar",this.statusBarMap=new Map([]),this.lastPageX=0,this.lastPageY=0,this.dragStart={x:0,y:0},this.dims={x:0,y:0,height:0,width:0},this.selectedArtboardChanged=function(e){},this.render=function(n){var a=e.statusBarMap.get(n);a&&(a.frameNode.style.top=n.getBoundingClientRect().rootY+"px",a.frameNode.style.left=n.getBoundingClientRect().rootX+"px",i.render(t.createElement(Ea,{layer:n,width:n.getBoundingClientRect().width,height:n.getBoundingClientRect().height,deviceName:a.deviceName,deviceOS:a.deviceOS,deviceOrientation:a.deviceOrientation,barStyle:a.barStyle,backgroundColor:a.backgroundColor}),a.frameNode))}}var n=e.prototype;return n.removeStatusBar=function(e){var t=this.statusBarMap.get(e.layer);t&&t.removeCallback()},n.addStatusBar=function(e,t){var n=this,i=e.layer,a=this.statusBarMap.get(i);a&&a.removeCallback();var r=document.createElement("div");r.className="status-bar-wrappers",r.style.position="absolute";var o=this.canvas.addDomToWorld(r,!0,100);r.style.pointerEvents="none",this.statusBarMap.set(i,{removeCallback:o,frameNode:r,deviceName:t.deviceName,deviceOS:t.deviceOS,deviceOrientation:t.deviceOrientation,barStyle:t.barStyle,backgroundColor:t.backgroundColor}),this.render(i),i.parent&&i.parent.addEventListener("removeChild",(function(e){i===e.layer&&i.executeFunction("StatusBar.remove")})),e.layer.on("layout",(function(){n.render(e.layer)})),e.layer.on("updateDom",(function(){n.render(e.layer)}))},n.init=function(e){this.canvas=e},n.activate=function(){this.canvas.addFunction(this.name+".add",this.addStatusBar.bind(this)),this.canvas.addFunction(this.name+".remove",this.removeStatusBar.bind(this))},n.deactivate=function(){},e}(),Sa=function(e){function t(t,n,i,a,r,o,s){var l;return(l=e.call(this,t,o,r,s)||this).targetHandle=n,l.session=a,l.startValues=i,l}return q(t,e),t}(Ge);function Ca(e){switch(e){case"TL":return 0;case"T":return 45;case"TR":return 90;case"R":return 135;case"BR":return 180;case"B":return 225;case"BL":return 270;case"L":return 315;default:return 0}}function Ma(e){return'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 564 581" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <defs>\n          <path d="M477.685,171.292105 L371.8863,39.25 L263.608591,171.292105 L335.318307,171.23947 C335.404758,201.878069 335.447983,217.197368 335.447983,217.197368 C335.447983,240.945561 331.697189,285.753289 307.961066,309.007895 C286.086784,330.438429 244.930829,340.175619 223.588558,340.175619 L167.014783,340.175619 L166.896133,269.807895 L35.685,375.028947 L166.896133,480.25 L166.896133,410.453368 L223.42583,410.453368 C276.561146,410.453368 325.08715,391.950329 360.415853,357.229972 C395.744556,322.509615 406.110126,270.927723 406.110126,217.334067 C406.110126,217.334067 406.066901,201.986747 405.98045,171.292105 L477.685,171.292105 Z" id="path-1"></path>\n          <filter x="-22.4%" y="-22.4%" width="147.3%" height="147.4%" filterUnits="objectBoundingBox" id="filter-2">\n              <feMorphology radius="14" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n              <feOffset dx="2" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n              <feGaussianBlur stdDeviation="25" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n              <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>\n              <feColorMatrix values="0 0 0 0 0.0487149004   0 0 0 0 0.0471071601   0 0 0 0 0.0471071601  0 0 0 1 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n          </filter>\n      </defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g id="iPhone-8" transform="translate(0.000000, -95.000000)">\n              <g id="curve-arrow" transform="translate(21.000000, 131.000000)">\n                  <g id="Path" fill-rule="nonzero" transform="translate(256.685000, 259.750000) rotate('+(180+e)+') translate(-256.685000, -259.750000) ">\n                      <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                      <use stroke="#FCF7F7" stroke-width="26" fill="#000000" xlink:href="#path-1"></use>\n                  </g>\n              </g>\n          </g>\n      </g>\n  </svg>'}function Pa(e){return'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <defs>\n          <path d="M30,256.450973 L156.560656,361 L156.597461,295.437849 C156.852233,295.437849 157.086901,295.480695 157.343864,295.480695 L343.414557,295.480695 C343.671649,295.480695 343.955674,295.444441 344.210833,295.437849 L344.053652,361 L482,256.343185 L344.053652,151 L344.210833,217.464668 C343.955932,217.464668 343.67152,217.421822 343.414557,217.421822 L157.343864,217.421822 C157.086772,217.421822 156.85249,217.458076 156.597461,217.464668 L156.560656,151 L30,256.450973 Z" id="path-1"></path>\n          <filter x="-21.8%" y="-51.0%" width="144.7%" height="203.6%" filterUnits="objectBoundingBox" id="filter-2">\n              <feMorphology radius="14" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n              <feOffset dx="2" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n              <feGaussianBlur stdDeviation="25" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n              <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>\n              <feColorMatrix values="0 0 0 0 0.0448086504   0 0 0 0 0.0442135355   0 0 0 0 0.0442135355  0 0 0 1 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n          </filter>\n      </defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g id="iPhone-8-Copy">\n              <g id="rect3044-174-4-7-5-8-7-1-1-3-2">\n                  <g id="rect3044-174-4-7-5-8-7-1-1-3" fill-rule="nonzero" transform="translate(256.000000, 256.000000) rotate('+(45+e)+') translate(-256.000000, -256.000000) ">\n                      <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                      <use stroke="#FCF9F9" stroke-width="26" fill="#000000" xlink:href="#path-1"></use>\n                  </g>\n              </g>\n          </g>\n      </g>\n  </svg>'}var Fa=function(){function e(){var e=this;this.name="ResizerRenderer",this.namespace="ResizerRenderer",this.allowClickEvents=!1,this.passedEvent=["mousedown","mouseup","mousemove","dblclick","contextmenu","click","drop"],this.show=!0,this.mouseDown=!1,this.dragStarted=!1,this.handleDragStarted=!1,this.passEvent=function(t){"mousedown"!==t.type?("mousemove"===t.type&&e.mouseDown&&(e.dragStarted=!0),e.dragStarted&&e.mouseDown||e.canvas.dispatchEventOnHitLayer(t.type,new Ge(t.type,e.canvas,t,e.canvas),t),"mouseup"===t.type&&(e.dragStarted=!1,e.mouseDown=!1,e.canvas.dispatchEventOnHitLayer(t.type,new Ge(t.type,e.canvas,t,e.canvas),t))):2!==t.button&&3!==t.which&&(e.mouseDown=!0)},this.renderDragLayer=function(){var t=document.createElement("div");t.style.pointerEvents="auto",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.right="0",t.style.bottom="0",t.setAttribute("class","resizer move "+t.className),e.wrapperLayer.appendChild(t),e.handleLayerListeners(t),e.canvas.executeFunction("handleHtmlDrag",t),t.addEventListener("htmlDragStart",(function(t){var n=e.canvas.executeFunction("HtmlDragToWorld.dragStart",t,e.resizerData.dims);return e.canvas.blockMouseEvents(),e.canvas.dispatchEvent(e.namespace+".dragStart",new Sa(e.namespace+".handleDragStart","C",n.startValues,n.session,n.event,e.canvas)),!1})),t.addEventListener("htmlDrag",(function(t){if(t.pageX&&t.pageY){var n=e.canvas.executeFunction("HtmlDragToWorld.drag",t);0===n.session.current.deltaX&&0===n.session.current.deltaY||e.canvas.dispatchEvent(e.namespace+".drag",new Sa(e.namespace+".drag","C",n.startValues,n.session,n.event,e.canvas))}})),t.addEventListener("htmlDragEnd",(function(t){var n=e.canvas.executeFunction("HtmlDragToWorld.drag",t);e.canvas.unblockMouseEvents(),e.canvas.dispatchEvent(e.namespace+".dragEnd",new Sa(e.namespace+".dragEnd","C",n.startValues,n.session,n.event,e.canvas))}))}}var t=e.prototype;return t.init=function(e){this.canvas=e,this.dispose=null,this.resizerData={dims:{x:0,y:0,height:0,width:0,rotation:0},handles:[]},this.resizerHandleLayersRef=new Map},t.setHandleStyle=function(e,t){var n=this.canvas.getZoom();if("ROTATE"!==t){var i={position:"absolute",display:"","background-color":"rgba(255, 255, 255, 1)",border:1/n+"px solid #1FB2CC","pointer-events":"auto","z-index":"1"},a={height:10/n,width:10/n,"margin-left":-1/n-10/(2*n),"margin-top":-1/n-10/(2*n),"margin-right":-1/n-10/(2*n),"margin-bottom":-1/n-10/(2*n),"border-radius":20/n},r={},s={},l=this.resizerData.dims;switch(t){case"T":r={left:l.width/2,top:0},s={left:l.width/2-20/(2*n),top:-20/n};break;case"L":r={left:0,top:l.height/2},s={left:-20/n,top:l.height/2-20/(2*n)};break;case"R":r={left:l.width,top:l.height/2},s={left:l.width,top:l.height/2-20/(2*n)};break;case"B":r={left:l.width/2,top:l.height},s={left:l.width/2-20/(2*n),top:l.height};break;case"TR":s={left:l.width,top:-20/n},r={left:l.width,top:0};break;case"BL":s={left:-20/n,top:l.height},r={left:0,top:l.height};break;case"BR":s={left:l.width,top:l.height},r={left:l.width,top:l.height};break;default:s={left:-20/n,top:-20/n},r={left:0,top:0}}o.forEach(i,(function(t,n){e.handleLayer.style[n]=t})),o.forEach(Z({},a,r),(function(t,n){e.handleLayer.style[n]=t.toString()+"px"})),"ROTATE"!==t&&(a={height:20/n,width:20/n},r=s,o.forEach({position:"absolute",display:"","pointer-events":"auto"},(function(t,n){e.handleRotator.style[n]=t})),o.forEach(Z({},a,r),(function(t,n){e.handleRotator.style[n]=t.toString()+"px"})))}},t.addEventListeners=function(e,t,n){var i,a=this;n&&(this.resizerData.dims=Z({},this.resizerData.dims,{rotation:this.resizerData.dims.rotation+Ca(n)})),this.canvas.executeFunction("handleHtmlDrag",e),e.addEventListener("htmlDragStart",(function(e){if(!(n&&!a.resizerData.handles.includes("ROTATE")||a.canvas.moveWithGrabHandle)){a.canvas.blockMouseEvents();var r=a.canvas.executeFunction("HtmlDragToWorld.dragStart",e,a.resizerData.dims);a.handleDragStarted=!0,n&&a.canvas.setMouseCursor('url("data:image/svg+xml,'+escape(Ma(Ca(n)+a.resizerData.dims.rotation))+'") 10 10, auto'),i=r,a.canvas.dispatchEvent(a.namespace+".handleDragStart",new Sa(a.namespace+".handleDragStart",t+(n||""),r.startValues,r.session,r.event,a.canvas))}})),e.addEventListener("htmlDrag",(function(e){if(!(n&&!a.resizerData.handles.includes("ROTATE")||a.canvas.moveWithGrabHandle)&&e.pageX&&e.pageY){var r=a.canvas.executeFunction("HtmlDragToWorld.drag",e);0===r.session.current.deltaX&&0===r.session.current.deltaY||(i=r,n&&a.canvas.setMouseCursor('url("data:image/svg+xml,'+escape(Ma(Ca(n)+a.resizerData.dims.rotation))+'") 10 10, auto'),a.canvas.dispatchEvent(a.namespace+".handleDrag",new Sa(a.namespace+".handleDrag",t+(n||""),r.startValues,r.session,r.event,a.canvas)))}})),e.addEventListener("htmlDragEnd",(function(e){e.preventDefault(),a.canvas.setMouseCursor("default"),a.canvas.unblockMouseEvents(),n&&!a.resizerData.handles.includes("ROTATE")||a.canvas.moveWithGrabHandle||(a.handleDragStarted=!1,a.canvas.dispatchEvent(a.namespace+".handleDragEnd",new Sa(a.namespace+".handleDragEnd",t+(n||""),i.startValues,i.session,i.event,a.canvas)))}))},t.renderCursor=function(e,t){var n=this;e.handleLayer.addEventListener("mousemove",(function(e){n.handleDragStarted||n.canvas.mouseEventsBlocked||n.canvas.setMouseCursor('url("data:image/svg+xml,'+escape(Pa(Ca(t)+n.resizerData.dims.rotation))+'") 10 10, auto')})),e.handleLayer.addEventListener("mouseenter",(function(e){n.handleDragStarted||n.canvas.mouseEventsBlocked||n.canvas.setMouseCursor('url("data:image/svg+xml,'+escape(Pa(Ca(t)+n.resizerData.dims.rotation))+'") 10 10, auto')})),e.handleLayer.addEventListener("mouseleave",(function(){!n.handleDragStarted&&!n.canvas.mouseEventsBlocked&&n.canvas.mouseCursorType&&n.canvas.mouseCursorType.includes("url")&&n.canvas.setMouseCursor("default")})),e.handleLayer.addEventListener("contextmenu",(function(e){e.preventDefault()})),e.handleRotator.addEventListener("contextmenu",(function(e){e.preventDefault()})),e.handleRotator.addEventListener("mouseenter",(function(e){!n.resizerData.handles.includes("ROTATE")||n.handleDragStarted||n.canvas.mouseEventsBlocked||n.canvas.setMouseCursor('url("data:image/svg+xml,'+escape(Ma(Ca(t)+n.resizerData.dims.rotation))+'") 10 10, auto')})),e.handleRotator.addEventListener("mouseleave",(function(){!n.handleDragStarted&&n.canvas.mouseCursorType&&n.canvas.mouseCursorType.includes("url")&&!n.canvas.mouseEventsBlocked&&n.canvas.setMouseCursor("default")}))},t.renderHandles=function(){var e=this;return this.resizerData.handles.map((function(t,n){var i=e.resizerHandleLayersRef.get(t);if(!i){var a=document.createElement("div"),r=document.createElement("div");e.wrapperLayer.appendChild(a),e.wrapperLayer.appendChild(r),e.resizerHandleLayersRef.set(t,{handleLayer:a,handleRotator:r}),e.addEventListeners((i={handleLayer:a,handleRotator:r}).handleLayer,t),e.addEventListeners(i.handleRotator,"ROTATE",t),e.renderCursor(i,t)}e.setHandleStyle(i,t)}))},t.isVisible=function(){return this.show&&this.resizerData.dims.x&&this.resizerData.dims.y&&this.resizerData.dims.width&&this.resizerData.dims.height},t.renderResizer=function(){if(this.isVisible()){var e=this.canvas.getZoom();this.wrapperLayer.style.border=1/e+"px solid #1FB2CC",this.wrapperLayer.style.top=this.resizerData.dims.y+"px",this.wrapperLayer.style.left=this.resizerData.dims.x+"px",this.wrapperLayer.style.height=this.resizerData.dims.height+"px",this.wrapperLayer.style.width=this.resizerData.dims.width+"px",this.wrapperLayer.style.transform=this.resizerData.dims.rotation?"rotate("+this.resizerData.dims.rotation+"deg":"",this.wrapperLayer.style.display="",this.renderHandles()}else this.wrapperLayer.style.display="none"},t.toggleResizer=function(e){this.show=e,this.renderResizer()},t.showHandle=function(e,t){this.resizerData.handles.includes(t.toUpperCase())||(this.resizerData.handles.push(t.toUpperCase()),this.renderHandles())},t.hideHandle=function(e,t){if(this.resizerData.handles.includes(t.toUpperCase())){this.resizerData.handles.splice(this.resizerData.handles.indexOf(t.toUpperCase()),1);var n=this.resizerHandleLayersRef.get(t);if(n){var i=n.handleRotator;n.handleLayer.style.display="none",i.style.display="none"}}},t.isValidKey=function(e){return"x"===e||"y"===e||"height"===e||"width"===e||"rotation"===e},t.setResizerOrientation=function(e,t,n){if("object"==typeof t)for(var i in t){if(!this.isValidKey(i))throw new Error("Resizer Orientation Error: Invalid key '"+i+"'");this.resizerData.dims[i]=t[i]}else{if(!this.isValidKey(t))throw new Error("Resizer Orientation Error: Invalid key '"+t+"'");this.resizerData.dims[t]=n}this.renderResizer()},t.handleLayerListeners=function(e){var t=this;this.passedEvent.map((function(n){e.addEventListener(n,(function(e){t.passEvent(e)}))}))},t.hideAllHandles=function(e){var t=this;this.resizerData.handles.forEach((function(e){var n=t.resizerHandleLayersRef.get(e);if(n){var i=n.handleRotator;n.handleLayer.style.display="none",i.style.display="none"}})),this.resizerData.handles=[]},t.activate=function(){var e=this;this.canvas.addFunction(this.namespace+".show",this.toggleResizer.bind(this,!0)),this.canvas.addFunction(this.namespace+".hide",this.toggleResizer.bind(this,!1)),this.canvas.addFunction(this.namespace+".showHandle",this.showHandle.bind(this)),this.canvas.addFunction(this.namespace+".hideHandle",this.hideHandle.bind(this)),this.canvas.addFunction(this.namespace+".setOrientation",this.setResizerOrientation.bind(this)),this.canvas.addFunction(this.namespace+".hideAllHandles",this.hideAllHandles.bind(this)),this.canvas.addEventListener("resetResizer",(function(t){e.canvas.executeFunction("HtmlDragToWorld.dragEnd",t.originalEvent),e.canvas.executeFunction("HtmlDragToWorld.dragStart",t.originalEvent,e.resizerData.dims)})),this.wrapperLayer=document.createElement("div"),this.wrapperLayer.style.pointerEvents="none",this.wrapperLayer.style.position="absolute",this.wrapperLayer.style.zIndex=200,this.renderDragLayer(),this.dispose=this.canvas.addDomToWorld(this.wrapperLayer,!0,101),this.renderResizer(),["zoom","scroll"].map((function(t){e.canvas.on(t,(function(t){e.renderResizer()}))}))},t.deactivate=function(){this.canvas.removeFunction(this.namespace+".show"),this.canvas.removeFunction(this.namespace+".hide"),this.canvas.removeFunction(this.namespace+".showHandle"),this.canvas.removeFunction(this.namespace+".hideHandle"),this.canvas.removeFunction(this.namespace+".setOrientation"),this.canvas.removeFunction(this.namespace+".hideAllHandles"),this.dispose()},e}(),Ra=function(){function e(){this.name="UndoRedoPlugin",this.store=[]}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){var e=this;this.canvas.addMiddleware("Layer.setStyle",(function(t,n){t(n),e.store.push({type:"Layer.setStyle",payload:n})}))},t.deactivate=function(){},e}(),Ta=function(e){function t(t,n,i,a,r,o,s){var l;return(l=e.call(this,t,n,r)||this).payload=i,l.meta=o,l.originalEvent=a,l.snapPoints=s,l}return q(t,e),t}(Te),Aa=function(){function e(){var e=this;this.name="LayerResizerPlugin",this.namespace="LayerResizer",this.forbiddenLayers=[],this.draggingHandles=!1,this.selectedLayers=[],this.selectedLayerDims=new Map,this.boundQueueUpdates=new Map,this.rerenderHandles=!0,this.isAltPressed=!1,this.isShiftPressed=!1,this.layoutElementArray=[],this.shiftDirection="",this.startX=0,this.startY=0,this.startAbsoluteX=0,this.startAbsoluteY=0,this.totalDx=0,this.totalDy=0,this.getHandlesForFill=function(t){var n=[],i=t.isFillWidth(),a=t.isFillHeight(),r=[];if("root"!==t.type&&(r=t.getSiblingsWithFlex()),0===r.length)n=e.getHandlesForFlexLayer(a,i);else if(t.parent){var o=t.parent.layout.get("flexDirection");n=e.getHandlesForFlexLayerWithSiblings(t,o,a,i)}return n},this.getHandlesForAutoOrAbsoluteLayer=function(e,t){return e&&t?["ROTATE"]:e?["ROTATE","L","R"]:t?["ROTATE","T","B"]:["ROTATE","T","B","R","L","BL","BR","TR","TL"]},this.getHandlesForFlexLayer=function(e,t){return e&&t?[]:e?["L","R"]:t?["T","B"]:["T","B","R","L","BL","BR","TR","TL","ROTATE"]},this.getHandlesForFlexLayerWithSiblings=function(t,n,i,a){return"row"===n?i?e.getResizerHandlesLayout(t,n):a?e.getResizerHandlesLayout(t,n).concat(["T","B"]):["T","B","R","L","BL","BR","TR","TL","ROTATE"]:a?e.getResizerHandlesLayout(t,n):i?e.getResizerHandlesLayout(t,n).concat(["L","R"]):["T","B","R","L","BL","BR","TR","TL","ROTATE"]},this.getResizerHandlesLayout=function(e,t){var n=e.parent,i=[],a=n.children.length;return n.children.forEach((function(n,r){n===e&&(0===r?i.push("row"===t?"R":"B"):r===a-1?i.push("row"===t?"L":"T"):"row"===t?(i.push("R"),i.push("L")):(i.push("B"),i.push("T")))})),i},this.getHandles=function(t){return e.canvas.executeMiddleware("LayerResizer.getHandles",t,(function(t){var n=["T","B","R","L","BL","BR","TR","TL","ROTATE"];return 0===t.length||1===t.length&&"canvas"===t[0].type?[]:(t.forEach((function(t){var i=!o.isNil(t.layout.get("position")),a=t.isAutoHeight(),r=t.isAutoWidth();("icon"===t.type||"switch"===t.type||"activityIndicator"===t.type||a&&r)&&(n=o.intersection(n,["ROTATE"]));var s=e.getHandlesForAutoOrAbsoluteLayer(a,r);if(i)n=o.intersection(n,s);else{var l=e.getHandlesForFill(t),d=o.intersection(s,l);n=o.intersection(n,d)}})),n)}))},this.layersQueuedForUpdate=[],this.onUpdate=function(){e.rerender()},this.queueUpdate=function(t){e.layersQueuedForUpdate.push(t),e.layersQueuedForUpdate.length===e.selectedLayers.length&&(e.rerender(),e.layersQueuedForUpdate=[])}}var t=e.prototype;return t.init=function(e){this.canvas=e,this.dispose=null,this.selectedLayers=[]},t.hideLayerResizer=function(e){this.forbiddenLayers.includes(e.layer)||(this.forbiddenLayers.push(e.layer),this.setSelectedLayers(),this.rerender())},t.showLayerResizer=function(e){this.forbiddenLayers.includes(e.layer)&&(this.forbiddenLayers.splice(this.forbiddenLayers.indexOf(e.layer),1),this.setSelectedLayers(),this.rerender())},t.rerender=function(){var e=this,t=this.canvas.getBoundingBox(this.selectedLayers);this.rerenderHandles&&(this.canvas.executeFunction("ResizerRenderer.hideAllHandles"),this.getHandles(this.canvas.selectedLayers).map((function(t){e.canvas.executeFunction("ResizerRenderer.showHandle",t)}))),this.canvas.executeFunction("ResizerRenderer.setOrientation",t)},t.setSelectedLayers=function(){var e=this;this.layersQueuedForUpdate=[],this.boundQueueUpdates.forEach((function(e,t){t.off("yoga",e)})),this.boundQueueUpdates.clear(),this.selectedLayers=this.canvas.selectedLayers.filter((function(t){return!e.forbiddenLayers.includes(t)})),this.selectedLayers.forEach((function(t){var n=e.queueUpdate.bind(e,t);t.on("yoga",n),e.boundQueueUpdates.set(t,n)}))},t.getParentRelativeDims=function(e,t){var n=t.parent?t.parent.getBoundingClientRect():{rootX:0,rootY:0};return Z({},e,{x:e.x-n.rootX,y:e.y-n.rootY})},t.applyDimensions=function(e){var t,n,i=this.dragEventData,a=i.session.current.x-i.session.start.x,r=i.session.current.y-i.session.start.y;if(this.isShiftPressed||(this.shiftDirection=""),i.targetHandle.indexOf("C")>-1&&this.isShiftPressed?(this.shiftDirection||(this.shiftDirection=Math.abs(i.session.current.deltaX)>Math.abs(i.session.current.deltaY)?"horizontal":"vertical"),"horizontal"===this.shiftDirection?this.totalDx=a:this.totalDy=r):(this.totalDy=r,this.totalDx=a),this.selectedLayers.length&&(!this.selectedLayers.length||this.selectedLayers[0].parent)){var o=this.selectedLayers.length&&this.selectedLayers[0].parent?this.selectedLayers[0].parent.getAbsoluteRotation():0,s=he.rotatePoint([this.totalDx,this.totalDy],360-o,[0,0]),l=this.canvas.executeFunction("snapToPoints",this.snapPoints,[this.startX,this.startY],[s[0],s[1]],Z({},this.boundingBox),[this.totalDx,this.totalDy],[this.startAbsoluteX,this.startAbsoluteY],o,this.boundingBoxWRTWorld);this.boundingBox=Z({},this.boundingBox,{x:(null==(t=this.boundingBox)?void 0:t.x)+l.delta.x,y:(null==(n=this.boundingBox)?void 0:n.y)+l.delta.y}),this.setNewLayout(this.selectedLayers,this.boundingBox,i.session,i.targetHandle,e,i,l.delta,l.meta)}},t.normalizeChildrenFlex=function(){var e=this.selectedLayers.length?this.selectedLayers[0].parent:void 0;if(e){var t=e.getTotalFlexOfFlexChildren();e.children.forEach((function(e,n){var i=e.getFlexValue();o.isNil(i)||o.isNil(t)||(e.removeLayout("flexGrow"),e.setLayout("flex",i*(1/t)))}))}},t.setLayoutChildren=function(){var e=this;if(this.selectedLayers.some((function(e){return(e.isFillHeight()||e.isFillWidth())&&"root"!==e.type}))&&this.normalizeChildrenFlex(),this.layoutElementArray.length=0,0!==this.selectedLayers.length){var t=this.selectedLayers[0].parent;t&&t.children.forEach((function(t,n){var i={layer:t,startFlex:t.layout.get("flex")?t.layout.get("flex"):0};e.layoutElementArray.push(i)}))}},t.setLayoutChildSize=function(e,t){var n=e.getParentLayerFlexDirection(),i=e.executeFunction("getData","initialDims"),a=i.width,r=i.height;i&&(a=i.width+i.width*t,r=i.height+i.height*t),"row"===n?e.setLayout("width",a):e.setLayout("height",r)},t.getDeltaFactor=function(e,t,n){var i=e.parent;if(!i)return 0;var a=e.getParentLayerFlexDirection(),r=i.getBoundingClientRect().width,o=i.getBoundingClientRect().height,s=t.x/r,l=t.y/o,d=0;return-1===n.indexOf("C")&&("row"===a?(n.indexOf("L")>-1&&(s=-s),d=s):(n.indexOf("T")>-1&&(l=-l),d=l)),+d.toFixed(2)},t.dragLayout=function(e,t,n,i){var a=this,r=t.x,s=t.y,l=e.executeFunction("getData","initialDims"),d=this.getDeltaFactor(e,{x:r,y:s},n),c=l.flex;if(c){var u=this.layoutElementArray.length;this.layoutElementArray.forEach((function(t,n){var r;o.isNil(r=+(r=t.layer===e?c+d:t.startFlex-d/(u-1)))||t.layer.dispatchEvent(a.namespace+"."+i,new Ta(a.namespace+"."+i,t.layer,{flex:r},null))}))}else this.setLayoutChildSize(e,d)},t.dragLayoutIsDoable=function(e,t){var n=t.layout.get("position");return(e.indexOf("B")>-1||e.indexOf("T")>-1)&&"absolute"!==n&&t.isFillHeight()||(e.indexOf("L")>-1||e.indexOf("R")>-1)&&"absolute"!==n&&t.isFillWidth()},t.applyDimensionsForHandle=function(e){var t=this.dragEventData;if(this.totalDx=t.session.current.x-t.session.start.x,this.totalDy=t.session.current.y-t.session.start.y,this.selectedLayers.length&&(!this.selectedLayers.length||this.selectedLayers[0].parent)){var n=this.selectedLayers.length&&this.selectedLayers[0].parent?this.selectedLayers[0].parent.getAbsoluteRotation():0,i=he.rotatePoint([this.totalDx,this.totalDy],360-n,[0,0]);if(this.dragLayoutIsDoable(t.targetHandle,this.selectedLayers[0]))this.dragLayout(this.selectedLayers[0],{x:i[0],y:i[1]},t.targetHandle,e+"Layout");else{var a=this.canvas.executeFunction("snapToPoints",this.snapPoints,[this.startX,this.startY],[i[0],i[1]],Z({},this.boundingBox),[this.totalDx,this.totalDy],[this.startAbsoluteX,this.startAbsoluteY],n,this.boundingBoxWRTWorld,t.targetHandle),r=a.delta,o=this.boundingBox;if(1===this.selectedLayers.length){var s=he.rotatePoint([a.delta.x,a.delta.y],360-this.selectedLayers[0].getBoundingClientRect().rotation,[0,0]);r={x:s[0],y:s[1]}}else o=this.boundingBoxWRTWorld,o=Z({},this.boundingBoxWRTWorld,{x:this.boundingBoxWRTWorld.x,y:this.boundingBoxWRTWorld.y});this.setNewLayout(this.selectedLayers,o,t.session,t.targetHandle,e,t,r,a.meta)}}},t.activate=function(){var e=this;this.setSelectedLayers(),this.startX=0,this.startY=0,this.startAbsoluteX=0,this.startAbsoluteY=0,this.totalDx=0,this.totalDy=0,this.canvas.on("selectedLayers",(function(t){e.setSelectedLayers(),o.isEmpty(e.canvas.selectedLayers)?e.canvas.executeFunction("ResizerRenderer.hide"):(e.canvas.executeFunction("ResizerRenderer.show"),e.rerender())})),this.canvas.addFunction(this.namespace+".stopHandleRerender",(function(){e.rerenderHandles=!1})),this.canvas.addFunction(this.namespace+".startHandleRerender",(function(){e.rerenderHandles=!0,e.rerender()})),this.canvas.addEventListener("ResizerRenderer.dragStart",(function(t){e.canvas.executeMiddleware("LayerResizer.dragStart",{data:t,selectedLayers:e.selectedLayers},(function(t){var n=t.data;e.boundingBox=e.canvas.getContainerBoundingBoxWRTParent(e.selectedLayers),e.boundingBoxWRTWorld=e.canvas.getContainerBoundingBox(e.selectedLayers),o.forEach(e.selectedLayers,(function(e){e.setDragging(!0)}));var i=e.selectedLayers.length?e.selectedLayers[0].parent:void 0;i&&(e.startValues=e.getParentRelativeDims(n.startValues,e.selectedLayers[0]),e.startX=e.boundingBox.x,e.startY=e.boundingBox.y,e.startAbsoluteX=e.boundingBoxWRTWorld.x-e.canvas.getContainerBoundingBox([i]).x,e.startAbsoluteY=e.boundingBoxWRTWorld.y-e.canvas.getContainerBoundingBox([i]).y,e.snapPoints=e.canvas.executeFunction("getSnapPoints",e.selectedLayers,i),e.selectedLayers.forEach((function(t){var a=t.getBoundingClientRect();a.rootX=a.rootX-i.getBorderLeft(),a.rootY=a.rootY-i.getBorderTop(),t.executeFunction("setData","initialDims",Z({},a,{absoluteRotation:t.getAbsoluteRotation(),flex:t.layout.get("flex")})),t.dispatchEvent(e.namespace+".dragStart",new Ta(e.namespace+".dragStart",t,a,n,void 0,void 0,e.snapPoints)),e.selectedLayerDims.set(t,a)})))}))})),this.canvas.addEventListener("ResizerRenderer.drag",(function(t){e.canvas.executeMiddleware("LayerResizer.drag",{data:t,selectedLayers:e.selectedLayers},(function(t){e.dragEventData=t.data,e.applyDimensions("drag")}))})),this.canvas.addEventListener("ResizerRenderer.dragEnd",(function(t){e.canvas.executeMiddleware("LayerResizer.dragEnd",{data:t,selectedLayers:e.selectedLayers},(function(t){o.forEach(e.selectedLayers,(function(e){e.setDragging(!1)})),e.dragEventData=t.data,e.applyDimensions("dragEnd"),e.startValues=void 0,e.selectedLayerDims=new Map,e.shiftDirection="",e.dragEventData=void 0,e.totalDx=0,e.totalDy=0}))})),this.canvas.addEventListener("ResizerRenderer.handleDragStart",(function(t){return e.canvas.executeMiddleware("LayerResizer.handleDragStart",{data:t,selectedLayer:e.selectedLayers[0]},(function(t){var n=t.data;e.boundingBox=e.canvas.getContainerBoundingBoxWRTParent(e.selectedLayers),e.boundingBoxWRTWorld=e.canvas.getContainerBoundingBox(e.selectedLayers),o.forEach(e.selectedLayers,(function(e){e.setDragging(!0)})),e.startValues=e.getParentRelativeDims(n.startValues,e.selectedLayers[0]);var i=e.selectedLayers.length?e.selectedLayers[0].parent:void 0;i&&(e.snapPoints=e.canvas.executeFunction("getSnapPoints",e.selectedLayers,i,n.targetHandle),e.setLayoutChildren(),e.selectedLayers.forEach((function(t){var a=t.getBoundingClientRect();a.rootX=a.rootX-i.getBorderLeft(),a.rootY=a.rootY-i.getBorderTop(),t.executeFunction("setData","initialDims",Z({},a,{absoluteRotation:t.getAbsoluteRotation(),flex:t.layout.get("flex")})),t.dispatchEvent(e.namespace+".handleDragStart",new Ta(e.namespace+".handleDragStart",t,a,n,void 0,void 0,e.snapPoints)),e.selectedLayerDims.set(t,a)})),e.startX=e.boundingBox.x,e.startY=e.boundingBox.y,e.startAbsoluteX=e.boundingBoxWRTWorld.x-e.canvas.getContainerBoundingBox([i]).x,e.startAbsoluteY=e.boundingBoxWRTWorld.y-e.canvas.getContainerBoundingBox([i]).y)}))})),this.canvas.addEventListener("ResizerRenderer.handleDrag",(function(t){return e.canvas.executeMiddleware("LayerResizer.handleDrag",{data:t,selectedLayer:e.selectedLayers[0]},(function(t){e.dragEventData=t.data,e.applyDimensionsForHandle("handleDrag")}))})),this.canvas.addEventListener("ResizerRenderer.handleDragEnd",(function(t){return e.canvas.executeMiddleware("LayerResizer.handleDragEnd",{data:t,selectedLayer:e.selectedLayers[0]},(function(t){o.forEach(e.selectedLayers,(function(e){e.setDragging(!1)})),e.dragEventData=t.data,e.applyDimensionsForHandle("handleDragEnd"),e.startValues=void 0,e.dragEventData=void 0,e.totalDx=0,e.totalDy=0,e.selectedLayerDims=new Map}))})),this.canvas.addFunction("LayerResizer.hideLayer",this.hideLayerResizer.bind(this)),this.canvas.addFunction("LayerResizer.showLayer",this.showLayerResizer.bind(this)),this.canvas.addEventListener("blur",(function(){e.isAltPressed&&(e.isAltPressed=!1),e.isShiftPressed&&(e.isShiftPressed=!1)})),this.canvas.addEventListener("keyUp",(function(t){var n=t.originalEvent?t.originalEvent:t;16===n.keyCode&&(e.isShiftPressed=!1),18===n.keyCode&&(e.isAltPressed=!1),e.dragEventData&&(-1===e.dragEventData.targetHandle.indexOf("C")?e.applyDimensionsForHandle("handleDrag"):e.applyDimensions("drag"))})),this.canvas.addEventListener("keyDown",(function(t){var n=t.originalEvent?t.originalEvent:t;16===n.keyCode&&(e.isShiftPressed=!0),18===n.keyCode&&(e.isAltPressed=!0),e.dragEventData&&(-1===e.dragEventData.targetHandle.indexOf("C")?e.applyDimensionsForHandle("handleDrag"):e.applyDimensions("drag"))})),this.canvas.addEventListener("resetResizer",(function(t){var n=t.originalEvent;e.startValues=void 0,e.selectedLayerDims=new Map,e.boundingBox=e.canvas.getContainerBoundingBox(e.selectedLayers),e.startValues=e.getParentRelativeDims(n.startValues,e.selectedLayers[0]);var i=e.selectedLayers.length?e.selectedLayers[0].parent:void 0;e.startX=e.boundingBox.x-(i?i.rootX:0),e.startY=e.boundingBox.y-(i?i.rootY:0),e.selectedLayers.forEach((function(t){var n=t.getBoundingClientRect();t.executeFunction("setData","initialDims",n),e.selectedLayerDims.set(t,n)})),e.snapPoints=e.canvas.executeFunction("getSnapPoints",e.selectedLayers,i)}))},t.setNewLayout=function(e,t,n,i,a,r,o,s){var l=this,d={x:n.current.x-n.start.x,y:n.current.y-n.start.y};o&&(d=o),e.forEach((function(o,c){var u=o.executeFunction("getData","initialDims");if(u){var h,p={x:u.rootX,y:u.rootY,height:u.height,width:u.width,rotation:u.rotation};if(-1!==i.indexOf("ROTATE")){var v={x:n.current.x-n.start.x,y:n.current.y-n.start.y};if(1===e.length){t=Z({},t,{x:o.getBoundingClientRect().x,y:o.getBoundingClientRect().y});var g=he.rotatePoint([v.x,v.y],360-u.absoluteRotation,[0,0]);v={x:g[0],y:g[1]}}var y=De(Z({},t),n,u.rotation,v,i);l.isShiftPressed&&(y=15*Math.round(y/15)),h=Z({},p,{rotation:y})}else{var f=!1,m=!1;e.forEach((function(e){e.isFlexChild()&&(f=!0),e.aspectRatio&&(m=!0)})),h=1===e.length?ve(p,d,i,l.isShiftPressed||m,l.isAltPressed&&!f):function(e,t,n,i,a,r,o){return r&&!o?fe(e,t,n,i,a):!r&&o?me(e,t,n,i,a):r&&o?xe(e,t,n,i,a):ye(e,t,n,i,a)}(p,d,i,t,he.getPointsFromBoundingBox(p,u.rotation),l.isShiftPressed||m,l.isAltPressed&&!f)}var x={rootX:0,rootY:0};o.parent&&(x=o.parent.getBoundingClientRect());var w=Z({},h);w=Z({},h,{x:h.x-x.rootX,y:h.y-x.rootY}),o.dispatchEvent(l.namespace+"."+a,new Ta(l.namespace+"."+a,o,w,r,void 0,s)),l.selectedLayerDims.set(o,w)}}))},t.deactivate=function(){this.dispose()},e}(),Na=function(){function e(){this.name="FloatingButton"}var t=e.prototype;return t.init=function(e){this.canvas=e},t.activate=function(){this.canvas.addFunction("addFloatingButton",this.addFloatingButton.bind(this)),this.canvas.addFunction("removeFloatingButton",this.removeFloatingButton.bind(this))},t.removeFloatingButton=function(){this.dom&&this.canvas.removeDomFromViewport(this.dom)},t.addFloatingButton=function(e,t,n){var i=document.createElement("button");this.dom=i,i.innerHTML=t,i.addEventListener("click",n),i.setAttribute("style","text-size-adjust: 100%;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n    box-sizing: border-box;\n    user-select: none;\n    -webkit-font-smoothing: antialiased;\n    outline: none;\n    font-size: 11px;\n    align-items: center;\n    display: inline-flex;\n    position: relative;\n    border: none;\n    transition: all 0.3s ease 0s;\n    cursor: pointer;\n    border-right: none;\n    border-left: none;\n    padding: 3px 6px;\n    justify-content: center;\n    margin-right: 0px;\n    margin-left: 0px;\n    min-width: 0px;\n    -webkit-app-region: no-drag;\n    border-radius: 2px;\n    background: rgb(37, 41, 49);\n    width: auto;\n    color: rgb(251, 251, 251);\n    height: 30px;\n    padding-left: 6px;\n    padding-right: 6px;\n    margin-top: 30px;\n    margin-left: 30px;\n\n    text-size-adjust: 100%;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n    cursor: pointer;\n    vertical-align: baseline;\n    border-width: 0px;\n    border-style: initial;\n    border-color: initial;\n    border-image: initial;\n    font: inherit;\n    box-sizing: border-box;\n    user-select: none;\n    -webkit-font-smoothing: antialiased;\n    font-family: Roboto, -apple-system, BlinkMacSystemFont, sans-serif;\n    font-weight: 400;\n    align-self: center;\n    text-overflow: ellipsis;\n    letter-spacing: -0.27px;\n    font-size: 14px;\n    color: rgb(241, 242, 244, 0.6);\n\n    "),this.canvas.addDomToViewport(i)},t.deactivate=function(){this.canvas.removeFunction("addFloatingButton"),this.canvas.removeFunction("removeFloatingButton")},e}(),Ba=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,a)||this).task=i,r}return q(t,e),t}(Te),ka=function(){function e(){this.name="PlusButton",this.passedEvent=["mouseup","mousemove","drop"]}var t=e.prototype;return t.init=function(e){this.canvas=e,this.dispose=null},t.activate=function(){this.canvas.addFunction("addPlusButton",this.addPlusButton.bind(this)),this.canvas.addFunction("showPlusButton",this.showPlusButton.bind(this)),this.canvas.addFunction("hidePlusButton",this.hidePlusButton.bind(this)),this.canvas.addFunction("removePlusButton",this.removePlusButton.bind(this)),this.canvas.on("zoom",this.handleZoom.bind(this)),this.canvas.addEventListener("artboardLayoutChanges",this.positionPlusButton.bind(this))},t.passEvent=function(e){e.preventDefault(),this.canvas.dispatchEventOnHitLayer(e.type,new Ge(e.type,this.canvas,e,this.canvas),e)},t.handleLayerListeners=function(e){var t=this;this.passedEvent.map((function(n){e.addEventListener(n,(function(e){t.passEvent(e)}))}))},t.positionPlusButton=function(){if(this.dom){var e,t=this.canvas.executeFunction("getAllArtboards"),n=Number.MIN_VALUE,i=Number.MIN_VALUE,a=Number.MIN_VALUE;0===t.size&&(this.dom.style.display="none"),0===t.size&&(r={left:300,top:50,artTop:50,artLeft:300}),t.forEach((function(e){var t=e.getBoundingClientRect(),r=t.x+t.width;n<r&&(n=r,a=t.y+t.height/2,i=t.y)})),e=n+50;var r={left:n=1*n+50,top:a=1*a-40,artTop:i,artLeft:e};this.dom.style.top=r.top+"px",this.dom.style.left=r.left+"px"}},t.handleZoom=function(){if(this.dom){var e=this.canvas.getZoom();e>.5&&(this.dom.style.transform="scale("+1/e+")")}},t.removePlusButton=function(){this.dom&&this.canvas.removeDomFromWorld(this.dom)},t.hidePlusButton=function(){this.dom&&(this.dom.style.display="none")},t.showPlusButton=function(){this.dom&&(this.dom.style.display="")},t.addPlusButton=function(e,t,n){var i=this,a=document.createElement("button");this.dom=a,a.innerHTML='<span style="font-size: 36px">+</span>',a.addEventListener("click",(function(e){!i.canvas.mouseEventsBlocked&&e.sourceCapabilities&&n()})),this.handleLayerListeners(a),a.setAttribute("style","text-size-adjust: 100%;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n    box-sizing: border-box;\n    user-select: none;\n    -webkit-font-smoothing: antialiased;\n    outline: none;\n    font-size: 11px;\n    align-items: center;\n    display: inline-flex;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100px;\n    height: 80px;\n    border: none;\n    cursor: inherit;\n    border-right: none;\n    border-left: none;\n    padding: 3px 6px;\n    justify-content: center;\n    margin-right: 0px;\n    margin-left: 0px;\n    min-width: 0px;\n    -webkit-app-region: no-drag;\n    border-radius: 2px;\n    background: rgb(37, 41, 49);\n    color: rgb(251, 251, 251);\n    padding-left: 6px;\n    padding-right: 6px;\n    margin-top: 2px;\n    margin-left: 2px;\n\n    text-size-adjust: 100%;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n    vertical-align: baseline;\n    border-width: 0px;\n    border-style: initial;\n    border-color: initial;\n    border-image: initial;\n    font: inherit;\n    box-sizing: border-box;\n    user-select: none;\n    -webkit-font-smoothing: antialiased;\n    font-family: Roboto, -apple-system, BlinkMacSystemFont, sans-serif;\n    font-weight: 400;\n    align-self: center;\n    text-overflow: ellipsis;\n    letter-spacing: -0.27px;\n    font-size: 14px;\n    color: rgb(241, 242, 244, 0.6);\n    transform-origin: 0 0;\n    "),a.setAttribute("name","add-artboard"),a.addEventListener("mouseenter",(function(e){i.canvas.mouseEventsBlocked||i.canvas.setMouseCursor("pointer")})),a.addEventListener("mouseleave",(function(e){i.canvas.mouseEventsBlocked||i.canvas.setMouseCursor("default")})),this.dispose=this.canvas.addDomToWorld(a),this.positionPlusButton()},t.deactivate=function(){this.canvas.removeFunction("addPlusButton"),this.canvas.removeFunction("removePlusButton"),this.dispose()},e}(),Oa=function(){function e(){var e=this;this.name="HtmlDragToWorldPlugin",this.namespace="HtmlDragToWorld",this.initPos={x:0,y:0},this.relPos={x:0,y:0},this.lastPos={x:0,y:0},this.startValues={x:0,y:0,height:0,width:0,rotation:0},this.dragSession={start:{x:0,y:0,deltaX:0,deltaY:0},current:{x:0,y:0,deltaX:0,deltaY:0},end:{x:0,y:0,deltaX:0,deltaY:0}},this.setStartValues=function(t){e.startValues=t},this.startDragSession=function(t,n){e.dragSession.start={x:t,y:n,deltaX:0,deltaY:0},e.dragSession.current={x:t,y:n,deltaX:0,deltaY:0},e.dragSession.end={x:t,y:n,deltaX:0,deltaY:0}},this.endDragSession=function(){e.dragSession.end={x:e.dragSession.current.x,y:e.dragSession.current.y,deltaX:e.dragSession.current.x-e.dragSession.start.x,deltaY:e.dragSession.current.y-e.dragSession.start.y}},this.updateDragSession=function(t,n){e.dragSession.current={x:e.dragSession.current.x+t,y:e.dragSession.current.y+n,deltaX:t,deltaY:n}}}var t=e.prototype;return t.init=function(e){this.canvas=e},t.dragStart=function(e,t,n){var i=new Ge(this.namespace+".dragStart",this.canvas,t);return this.initPos={x:i.worldX,y:i.worldY},this.setStartValues(n),this.startDragSession(i.worldX,i.worldY),this.lastPos={x:0,y:0},{event:i,startValues:Z({},this.startValues),session:Z({},this.dragSession)}},t.drag=function(e,t){t.preventDefault();var n=new Ge(this.namespace+".drag",this.canvas,t);return this.relPos={x:n.worldX-this.initPos.x,y:n.worldY-this.initPos.y},this.updateDragSession(this.relPos.x-this.lastPos.x,this.relPos.y-this.lastPos.y),this.lastPos=Z({},this.relPos),{event:n,startValues:Z({},this.startValues),session:Z({},this.dragSession)}},t.dragEnd=function(e,t){t.preventDefault();var n=new Ge(this.namespace+".dragEnd",this.canvas,t);return this.setStartValues({x:0,y:0,height:0,width:0,rotation:0}),this.endDragSession(),this.initPos={x:0,y:0},{event:n,startValues:Z({},this.startValues),session:Z({},this.dragSession)}},t.activate=function(){this.canvas.addFunction(this.namespace+".dragStart",this.dragStart.bind(this)),this.canvas.addFunction(this.namespace+".drag",this.drag.bind(this)),this.canvas.addFunction(this.namespace+".dragEnd",this.dragEnd.bind(this))},t.deactivate=function(){},e}(),za=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n)||this).originalEvent=i,a}return q(t,e),t}(Te);exports.ActivityIndicatorRendererPlugin=ln,exports.ArtboardEvent=xi,exports.Canvas=Ke,exports.ConstructionLinesPlugin=ei,exports.DataStorePlugin=Fi,exports.DesignerKeyboardEvent=za,exports.DeviceFrame=ua,exports.DragPlugin=tt,exports.DrawComponent=oa,exports.EllipseRendererPlugin=hn,exports.Event=Te,exports.FlexDragPlugin=ki,exports.FloatingButtonPlugin=Na,exports.FontResizerEvent=Ai,exports.FontResizerPlugin=Ni,exports.Gradient=Qe,exports.GradientEditorEvent=Ba,exports.GradientEditorPlugin=gi,exports.GridRendererPlugin=Ei,exports.HoverPlugin=$e,exports.HtmlDragToWorldPlugin=Oa,exports.IconFonts=At,exports.IconRendererPlugin=Ot,exports.ImageRendererPlugin=Ct,exports.KeyValueContainer=Me,exports.Layer=He,exports.LayerDragPlugin=Li,exports.LayerLabel=la,exports.LayerMouseCursor=Pi,exports.LayerResizerEvent=Ta,exports.LayerResizerPlugin=Aa,exports.LineDrawerPlugin=qi,exports.MapViewRendererPlugin=Tn,exports.MeasurementLinesPlugin=ri,exports.ModelUtils=he,exports.MouseEvent=Ge,exports.MouseRectPlugin=si,exports.NativeHtmlDragPlugin=yi,exports.OpacityShortcutPlugin=Ti,exports.PathEditorPlugin=ui,exports.PathEvent=mi,exports.PathRendererPlugin=Rt,exports.PlusButtonPlugin=ka,exports.PopoverMenuPlugin=An,exports.ResizerRendererPlugin=Fa,exports.RulerLinesPlugin=_i,exports.RulerScalePlugin=Vi,exports.ScrollMousePositionPlugin=ti,exports.ScrollViewRendererPlugin=pt,exports.SetScrollEvent=Te,exports.SliderRendererPlugin=Mn,exports.SnapLinesPlugin=ji,exports.SnapPointsCalculatorPlugin=$n,exports.StageDesignerDeviceDataPlugin=fi,exports.StageDesignerDrawComponent=ia,exports.StageDesignerDropPlugin=ta,exports.StageDesignerPlugin=Ci,exports.StageDesignerPreviewModePlugin=$i,exports.StageDesignerRulerPlugin=aa,exports.StatusBar=Da,exports.SwitchRendererPlugin=Gt,exports.TextEditorEvent=wi,exports.TextEditorPlugin=di,exports.TextInputRendererPlugin=Lt,exports.TextRendererPlugin=mt,exports.TooltipPlugin=Ri,exports.TouchableOpacityRendererPlugin=dt,exports.UndoRedoPlugin=Ra,exports.ViewRendererPlugin=rt,exports.computeDelta=function(e,t){var n=0,i=0,a=Ee(e),r=Ee(t);return a.minX!==r.minX&&(n=r.minX-a.minX),a.minY!==r.minY&&(i=r.minY-a.minY),a.maxX!==r.maxX&&(n=r.maxX-a.maxX),a.maxY!==r.maxY&&(i=r.maxY-a.maxY),{x:n,y:i}},exports.computeOrientation=ve,exports.computeOrientationWithDelta=ge,exports.computeOrientationWithDeltaAR=we,exports.computeOrientationWithDeltaARMultiple=fe,exports.computeOrientationWithDeltaAlt=be,exports.computeOrientationWithDeltaAltMultiple=me,exports.computeOrientationWithDeltaMultiple=ye,exports.computeOrientationWithDeltaShiftAlt=Le,exports.computeOrientationWithDeltaShiftAltMultiple=xe,exports.designerAction=ce,exports.getBoundingBoxFromOrientation=Ee,exports.getCorrection=pe,exports.getNewLayout=function(e,t,n){var i,a=t.current.deltaX,r=t.current.deltaY;if(-1!==n.indexOf("ROTATE"))i=Z({},e,{rotation:De(e,t,void 0,void 0,n)});else if("C"===n){var o=he.rotatePoint([a,r],e.rotation,[0,0]);i=ge(e,{x:a=o[0],y:r=o[1]},n)}else i=ge(e,{x:a,y:r},n);return 0===i.height&&(i.height=0),0===i.width&&(i.width=0),i},exports.getResizerQuad=function(e){return(e%=360)<0&&(e+=360),e?e>=22.5&&e<67.5||e>=202.5&&e<247.5?"1":e>=67.5&&e<112.5||e>=247.5&&e<292.5?"2":e>=112.5&&e<157.5||e>=292.5&&e<337.5?"3":"4":"4"},exports.resumeLayoutUpdates=Ue,exports.startChildrenLayoutUpdates=Oe,exports.startRerender=Ie,exports.stopAndBatchLayoutUpdates=We,exports.stopAndForgetLayoutUpdates=Ve,exports.stopChildrenLayoutUpdates=ke,exports.stopRerender=ze;
//# sourceMappingURL=designer.cjs.production.min.js.map
