import deleteShapeBySelecter from "./actions/deleteShape";

import selectTool from "./actions/selectTool";
import drawShape from "./actions/drawShape";

export default function rightPanelTests() {
  context("Right Panel Actions", () => {
    context("Alignment Editor Tests", () => {
      beforeEach(function() {
        Cypress.Cookies.preserveOnce("access-token");
      });

      it("can can create a Rectangle", function() {
        cy.get(".bx-artboard-Untitled > .view-render > .view-render").should(
          "not.exist"
        );
        selectTool("rectangle");
        drawShape();
        cy.get(".bx-artboard-Untitled > .view-render > .view-render").should(
          "exist"
        );
      });
      it("can move created Rectangle clockwise and delete at end", function() {
        cy.get(".bx-artboard-Untitled > .view-render > .view-render").should(
          "exist"
        );
      });

      var selecter = ".bx-artboard-Untitled > .view-render > .view-render";

      it("can select the layer", function() {
        cy.get(selecter).then(elem => {
          var pos = Cypress.dom.getElementCoordinatesByPosition(elem)
            .fromViewport;
          cy.get("body").click(pos.left + 10, pos.top + 10);
        });
      });

      it("can  center align the layer", function() {
        cy.get(
          "button[data-cypress-id=align-horizontally-center-button]"
        ).click("center");
        cy.get("button[data-cypress-id=align-vertically-center-button]").click(
          "center"
        );
      });

      it("can place layer at 9 o'clock", function() {
        cy.get("button[data-cypress-id=align-left-button]").click("center");
        cy.get(".bx-artboard-Untitled").then(artboard => {
          var artBoardPos = Cypress.dom.getElementCoordinatesByPosition(
            artboard
          ).fromViewport;
          cy.get(selecter + " > .view-render").then(elem => {
            var rectPos = Cypress.dom.getElementCoordinatesByPosition(elem)
              .fromViewport;
            expect(artBoardPos.left - rectPos.left).to.equal(0);
          });
        });
      });

      it("can place layer at 10.5 o'clock", function() {
        cy.get("button[data-cypress-id=align-top-button]").click("center");

        cy.get(".bx-artboard-Untitled").then(artboard => {
          var artBoardPos = Cypress.dom.getElementCoordinatesByPosition(
            artboard
          ).fromViewport;
          cy.get(selecter).then(elem => {
            var rectPos = Cypress.dom.getElementCoordinatesByPosition(elem)
              .fromViewport;
            expect(artBoardPos.left - rectPos.left).to.equal(0);
            expect(artBoardPos.top - rectPos.top).to.equal(0);
          });
        });
      });

      it("can place layer at 12 o'clock", function() {
        cy.get(
          "button[data-cypress-id=align-horizontally-center-button]"
        ).click("center");

        cy.get(".bx-artboard-Untitled").then(artboard => {
          var artBoardPos = Cypress.dom.getElementCoordinatesByPosition(
            artboard
          ).fromViewport;
          cy.get(selecter + " > .view-render").then(elem => {
            var rectPos = Cypress.dom.getElementCoordinatesByPosition(elem)
              .fromViewport;
            expect(artBoardPos.top - rectPos.top).to.equal(0);
          });
        });
      });

      it("can place layer at 1.5 o'clock", function() {
        cy.get("button[data-cypress-id=align-right-button]").click("center");

        cy.get(".bx-artboard-Untitled").then(artboard => {
          var artBoardPos = Cypress.dom.getElementCoordinatesByPosition(
            artboard
          ).fromViewport;
          cy.get(selecter).then(elem => {
            var rectPos = Cypress.dom.getElementCoordinatesByPosition(elem)
              .fromViewport;
            expect(artBoardPos.right - rectPos.right).to.equal(0);
            expect(artBoardPos.top - rectPos.top).to.equal(0);
          });
        });
      });

      it("can place layer at 3 o'clock", function() {
        cy.get("button[data-cypress-id=align-vertically-center-button]").click(
          "center"
        );

        cy.get(".bx-artboard-Untitled").then(artboard => {
          var artBoardPos = Cypress.dom.getElementCoordinatesByPosition(
            artboard
          ).fromViewport;
          cy.get(selecter + " > .view-render").then(elem => {
            var rectPos = Cypress.dom.getElementCoordinatesByPosition(elem)
              .fromViewport;
            expect(artBoardPos.right - rectPos.right).to.equal(0);
          });
        });
      });

      it("can place layer at 4.5 o'clock", function() {
        cy.get("button[data-cypress-id=align-bottom-button]").click("center");

        cy.get(".bx-artboard-Untitled").then(artboard => {
          var artBoardPos = Cypress.dom.getElementCoordinatesByPosition(
            artboard
          ).fromViewport;
          cy.get(selecter).then(elem => {
            var rectPos = Cypress.dom.getElementCoordinatesByPosition(elem)
              .fromViewport;
            expect(artBoardPos.right - rectPos.right).to.equal(0);
            expect(artBoardPos.bottom - rectPos.bottom).to.equal(0);
          });
        });
      });

      it("can place layer at 6 o'clock", function() {
        cy.get(
          "button[data-cypress-id=align-horizontally-center-button]"
        ).click("center");

        cy.get(".bx-artboard-Untitled").then(artboard => {
          var artBoardPos = Cypress.dom.getElementCoordinatesByPosition(
            artboard
          ).fromViewport;
          cy.get(selecter + " > .view-render").then(elem => {
            var rectPos = Cypress.dom.getElementCoordinatesByPosition(elem)
              .fromViewport;
            expect(artBoardPos.bottom - rectPos.bottom).to.equal(0);
          });
        });
      });

      it("can place layer at 7.5 o'clock", function() {
        cy.get("button[data-cypress-id=align-left-button]").click("center");

        cy.get(".bx-artboard-Untitled").then(artboard => {
          var artBoardPos = Cypress.dom.getElementCoordinatesByPosition(
            artboard
          ).fromViewport;
          cy.get(selecter).then(elem => {
            var rectPos = Cypress.dom.getElementCoordinatesByPosition(elem)
              .fromViewport;
            expect(artBoardPos.left - rectPos.left).to.equal(0);
            expect(artBoardPos.bottom - rectPos.bottom).to.equal(0);
          });
        });
      });

      it("can place layer at 9 o'clock", function() {
        cy.get("button[data-cypress-id=align-vertically-center-button]").click(
          "center"
        );

        cy.get(".bx-artboard-Untitled").then(artboard => {
          var artBoardPos = Cypress.dom.getElementCoordinatesByPosition(
            artboard
          ).fromViewport;
          cy.get(selecter + " > .view-render").then(elem => {
            var rectPos = Cypress.dom.getElementCoordinatesByPosition(elem)
              .fromViewport;
            expect(artBoardPos.left - rectPos.left).to.equal(0);
          });
        });
      });

      it("can  center align the layer", function() {
        cy.get(
          "button[data-cypress-id=align-horizontally-center-button]"
        ).click("center");

        cy.get(".bx-artboard-Untitled > .view-render > .view-render").should(
          "exist"
        );

        cy.get(
          ".bx-artboard-Untitled > .view-render > .view-render > .view-render"
        ).should("exist");
      });

      it("can delete the layer", function() {
        cy.get(
          ".bx-artboard-Untitled > .view-render > .view-render > .view-render"
        ).should("exist");

        deleteShapeBySelecter(
          ".bx-artboard-Untitled > .view-render > .view-render > .view-render"
        );

        cy.get(".bx-artboard-Untitled > .view-render > .view-render").should(
          "not.exist"
        );

        cy.get(
          ".bx-artboard-Untitled > .view-render > .view-render >.view-render"
        ).should("not.exist");
      });
    });
  });
}
