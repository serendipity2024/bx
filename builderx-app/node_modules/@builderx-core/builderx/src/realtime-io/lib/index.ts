// import {apiSdk as ApiSdk} from "@builderx-core/api-sdk";
// export default class RealtimeIO {
//   static ioInstance: any;

//   url: string;
//   config: any;
//   headers: any;
//   eventListenersMap: Map<string, Array<any>> = new Map();
//   static connect(url: string, config: any, headers: any): RealtimeIO {
//     let instance: RealtimeIO;
//     if (RealtimeIO.ioInstance) {
//       instance = RealtimeIO.ioInstance;
//     } else {
//       instance = new RealtimeIO(url, config, headers);
//       APISDK.raw.postRealtimeIo(url, config, headers)
//         .then(response => {
//           instance.emit("connect");
//           instance.poll();
//         })
//         .catch(Error => {
//           console.log(Error);
//           instance.emit("connection-failed", Error);
//           instance.poll();
//         });
//     }
//     return instance;
//   }
//   constructor(url: string, config: any, headers: any) {
//     this.url = url;
//     this.config = config;
//     this.headers = headers;
//   }

//   private poll() {
//     APISDK.raw.postPoll(this.url, this.config, this.headers)
//       .then(response => {
//         this.emit("poll", response);
//         setTimeout(() => {
//           this.poll();
//         }, 10000);
//       })
//       .catch(Error => {
//         console.log(Error);
//         this.emit("connection-failed");
//         setTimeout(() => {
//           this.poll();
//         }, 20000);
//       });
//   }

//   emit(property: string, data?: any) {
//     const arrayOfListener: any = this.eventListenersMap.get(property);
//     if (arrayOfListener) {
//       arrayOfListener.forEach((listner: any) => {
//         if (listner) {
//           listner(data);
//         }
//       });
//     }
//   }

//   on(property: string, listener: any) {
//     const existingArrOfListeners = this.eventListenersMap.get(property);
//     if (existingArrOfListeners) {
//       existingArrOfListeners.push(listener);
//     } else {
//       this.eventListenersMap.set(property, [listener]);
//     }
//   }
// }
