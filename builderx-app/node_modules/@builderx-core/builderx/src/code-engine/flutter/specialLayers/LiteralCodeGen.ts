import { FlutterContext } from "../types";
import LayerCodeGen from "../LayerCodeGen";
import { get, replace } from "lodash";

export default class LiteralCodeGen extends LayerCodeGen {
  context: FlutterContext;
  constructor(context: FlutterContext) {
    super();
    this.context = context;
  }

  generate(json: any): string {
    if (get(json, "value.type", "") === "unknown") {
      return "null";
    } else if (json.value && json.type === "literal") {
      json.value = replace(json.value, new RegExp("\n", "g"), "\\n");
    } else if (json.value && json.type) {
      return this.context.baseCodeGen.generate(json.value);
    }
    return this.generateJSLiteralCode(json.value);

    // return json.value;
  }
}
