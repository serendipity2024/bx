import { FlutterContext } from "../types";
import LayerCodeGen from "../LayerCodeGen";
import { generateChildren, rotateWrap, wrapIt } from "../utils/index";

export default class TextCodeGen extends LayerCodeGen {
  context: FlutterContext;
  constructor(context: FlutterContext) {
    super();
    this.context = context;
  }
  generate(json: any): string {
    const ChildrenCode = generateChildren(
      json,
      this.context.baseCodeGen.generate
    );
    console.log("json", json);
    let currentLayer = `Image.asset(
        ${this.generatePropertiesCode(json.props.source, ["uri"])},
        ${this.generatePropertiesCode(json.props.style, ["width", "height"])}
      )
      
    
  `;
    if (json.props.style.transform) {
      if (!this.context.imports.includes("import 'dart:math';")) {
        this.context.imports.push("import 'dart:math';");
      }
      currentLayer = rotateWrap(json, currentLayer, this);
    }
    return wrapIt(json, currentLayer, this);
  }
}
