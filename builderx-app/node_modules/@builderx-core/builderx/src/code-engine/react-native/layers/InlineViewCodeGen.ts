import { Context, ExtraParams } from "../types";
import { addImportToContext } from "../utils";
import LayerCodeGen from "../LayerCodeGen";
import { Utils } from "utils";

export default class InlineViewCodeGen extends LayerCodeGen {
  context: Context;
  constructor(context: Context) {
    super();
    this.context = context;
  }

  generate(json: any, extraParams: ExtraParams): string {
    addImportToContext(this.context, json);
    const randomStyleName = Utils.randomString(6);
    this.context.styles[randomStyleName] = json.props.style;
    return `<View ${this.generateProps(json, {
      ...extraParams,
      parent: json
    })} style={styles.${randomStyleName}}>
      ${this.generateChildren(json, { ...extraParams, parent: json })}
      </View>`;
  }
}
