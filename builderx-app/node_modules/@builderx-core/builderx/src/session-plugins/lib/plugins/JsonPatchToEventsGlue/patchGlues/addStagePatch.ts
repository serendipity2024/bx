import { Session } from "session";
import { SessionEvent } from "event-manager";

export default function addStagePatch(
  session: Session,
  stageId: string,
  operation: any
) {
  let typeOfStage = operation.path.split("/")[1];
  typeOfStage = typeOfStage.slice(0, typeOfStage.indexOf("::"));
  session.emit(typeOfStage);

  session.eventManager.dispatchEvent(
    "addStage",
    new SessionEvent("addStage", {
      stageId,
      thumbnailStage: typeOfStage === "thumbnailStages"
    })
  );
}
