import { DomainLayer, DomainFile } from "domain-x";
import { Session } from "session";
import { SessionEvent } from "event-manager";

export default function removeStylePatch(
  session: Session,
  operationPath: string,
  layer: DomainFile | DomainLayer
) {
  const args = operationPath.split("/");
  if (session.currentStage.dragging) {
    layer.emit("onDragLayer");
  } else {
    layer.props.style.emit(args[args.length - 1]);
  }
  const event = new SessionEvent("removeStyleAttribute", {
    layer: layer,
    key: args[args.length - 1],
    stylePropName: args[args.length - 2]
  });
  session.eventManager.dispatchEvent("removeStyleAttribute", event);
}
