import { DomainLayer, DomainFile } from "domain-x";
import { Session } from "session";
import { SessionEvent } from "event-manager";

export default function removePropPatch(
  session: Session,
  operationPath: string,
  layer: DomainFile | DomainLayer
) {
  const args = operationPath.split("/");
  layer.props.emit(args[args.length - 1]);
  const event = new SessionEvent("removeProp", {
    layer: layer,
    key: args[args.length - 1]
  });
  session.eventManager.dispatchEvent("removeProp", event);
}
