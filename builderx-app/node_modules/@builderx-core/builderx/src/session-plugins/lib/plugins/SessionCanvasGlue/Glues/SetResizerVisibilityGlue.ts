import { DomainLayer, LogicalExpression } from "domain-x";
import { Layer, PathEvent } from "@builderx-core/designer";
import { forEach, find } from "lodash";
import { SessionEvent } from "event-manager";
import { Session, StageArtboard, Mutators } from "session";
import { getOwnCanvasRef } from "../Utils";

function applySideEffects(
  session: Session,
  layer: DomainLayer,
  visibility: "show" | "hide"
) {
  const currentCompiledLayer = getOwnCanvasRef(
    layer,
    session.currentStage.canvas
  );
  if (currentCompiledLayer) {
    currentCompiledLayer.executeFunction(`LayerResizer.${visibility}Layer`);
  }
}

export default function SetResizerVisibilityGlue(
  session: Session,
  e: SessionEvent
) {
  applySideEffects(session, e.payload.layer, e.payload.visibility);
}
