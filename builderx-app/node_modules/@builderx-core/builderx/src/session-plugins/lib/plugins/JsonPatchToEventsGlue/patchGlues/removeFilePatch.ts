import { DomainLayer, DomainFile } from "domain-x";
import { Session } from "session";
import { SessionEvent } from "event-manager";

export default function removeFilePatch(
  session: Session,
  domainFile: DomainFile
) {
  if (domainFile && domainFile.dbFileId) {
    try {
      session.addFileIdToBeDeleted(domainFile.dbFileId);
    } catch (error) {
      console.error("Error in removing folder", error);
    }
  }
  const event = new SessionEvent("removeFile", {
    file: domainFile
  });
  session.eventManager.dispatchEvent("removeFile", event);
  session.domain.emit("files");
}
