import {
  applyBooleanOpsOnPaths,
  convertPaperToBx as convertPaperJsonToPoints
} from "conversions";
import { isEmpty } from "lodash";

export async function operateBooleanOnPointsArray(
  layers: any,
  frame: any,
  scalingFactor: number,
  viewBox: string
) {
  return new Promise((resolve: any, reject: any) => {
    try {
      let finalPaperPath = applyBooleanOpsOnPaths(
        layers,
        frame,
        scalingFactor,
        viewBox
      );
      if (!isEmpty(finalPaperPath)) {
        let finalPaperPoints = convertPaperJsonToPoints(finalPaperPath);
        if (finalPaperPoints.length !== 0) {
          resolve(finalPaperPoints);
        } else {
          reject("Path conversion failed");
        }
      } else if (isEmpty(finalPaperPath)) {
        console.log("Error in Boolean Operations, Conversion Failed");
        reject("Path conversion failed");
      }
    } catch (error) {
      console.log(error, "Error in Boolean Operations, Conversion Failed");
      reject("Path conversion failed");
    }
  });
}
