import { Session } from "../models/Session";
import { SessionEvent } from "event-manager";

export default function RemoveStageMutator(session: Session, stageId: string) {
  const stage = session.stages.get(stageId);
  // session.stages.delete(stageId);

  if (stage) {
    session.emitPatch({
      op: "remove",
      path: `/stages:::${stageId}`
    });
  }

  // if (stage) {
  //   session.eventManager.dispatchEvent(
  //     "removeStage",
  //     new SessionEvent("removeStage", {
  //       stage
  //     })
  //   );
  // }
  return stage;
}
