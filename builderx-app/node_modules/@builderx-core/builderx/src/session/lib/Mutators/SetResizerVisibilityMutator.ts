import { Session } from "../models/Session";
import { Layer as DomainLayer, DomainFile } from "domain-x";
import { SessionEvent } from "event-manager";
import { Utils } from "utils";

export default function SetResizerVisibilityMutator(
  session: Session,
  layerPath: string,
  visibility: "show" | "hide"
) {
  const layer = session.getLayerFromLayerPath(layerPath);
  if (!layer) {
    return;
  }
  session.emitPatch({
    op: "replace",
    path: `/domain/files:::${Utils.modifyLayerPathForJsonPatch(
      layerPath
    )}/isResizerVisible`,
    value: visibility === "show" ? true : false
  });
  //   layer.isResizerVisible = visibility === "show" ? true : false;
  //   layer.emit("isResizerVisible");

  // const event = new SessionEvent("setResizerVisibility", {
  //   layer,
  //   visibility
  // });
  // session.eventManager.dispatchEvent("setResizerVisibility", event);
}
