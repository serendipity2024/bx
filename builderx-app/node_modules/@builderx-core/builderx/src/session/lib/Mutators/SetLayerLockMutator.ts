import { Session } from "../models/Session";
import { SetFileDirtyMutator } from ".";
import { SessionEvent } from "event-manager";
import { Utils } from "utils";

export default function SetLayerLockMutator(
  session: Session,
  layerId: string,
  lock: boolean
) {
  const layer = session.getLayerFromLayerPath(layerId);
  if (!layer) {
    return;
  }
  // layer.locked = lock;
  session.emitPatch({
    op: "replace",
    path: `/domain/files:::${Utils.modifyLayerPathForJsonPatch(
      layerId
    )}/locked`,
    value: lock
  });

  // const event = new SessionEvent("setLayerLock", {
  //   domainLayer: layer,
  //   lock
  // });
  // session.eventManager.dispatchEvent("setLayerLock", event);
}
