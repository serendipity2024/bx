import { Session } from "../models/Session";
import CommandKeyMapperService from "../services/CommandKeyMapperService";
import { SessionEvent } from "event-manager";

export default function LockProjectMutator(session: Session) {
  session.emitPatch({
    op: "replace",
    path: `/project/isLocked`,
    value: true
  });
  session.emitPatch({
    op: "replace",
    path: `/readonly`,
    value: true
  });
  // session.project.setIsLocked(true);
  // session.readonly = true;

  session.emitPatch({
    op: "replace",
    path: `/commandKeyMapperService`,
    value: {
      type: "class",
      className: "CommandKeyMapperService"
    }
  });
  // session.commandKeyMapperService = new CommandKeyMapperService(
  //   session,
  //   session.commandManager
  // );

  // session.emit("projectLock");
  // session.eventManager.dispatchEvent(
  //   "lockProject",
  //   new SessionEvent("lockProject", {})
  // );
}
