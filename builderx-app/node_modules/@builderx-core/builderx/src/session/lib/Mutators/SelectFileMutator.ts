import { Session } from "../models/Session";
import { SessionEvent } from "event-manager";

export default function SelectFileMutator(session: Session, filePath: string) {
  const file = session.domain.files.get(filePath);
  if (!file) {
    return;
  }
  // TODO: check if already selected
  if (session.selectedFile === file) {
    return;
  }

  session.emitPatch({
    op: "replace",
    path: `/selectedFile`,
    value: file
  });
  // session.selectedFile = file;
  // session.emit("selectedFile");
  // const event = new SessionEvent("selectFile", {
  //   file
  // });

  // session.eventManager.dispatchEvent("selectFile", event);

  return file;
}
