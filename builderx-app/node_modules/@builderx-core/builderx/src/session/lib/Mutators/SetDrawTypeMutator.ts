import { Session } from "../models/Session";
import { SessionEvent } from "event-manager";

type toolType =
  | "default"
  | "view"
  | "ellipse"
  | "image"
  | "text"
  | "icon"
  | "path"
  | "switch"
  | "activityIndicator"
  | "slider"
  | "mapView"
  | "scrollView"
  | "touchableOpacity"
  | "textInput";

export default function SetDrawTypeMutator(
  session: Session,
  drawType: toolType,
  abortDraw?: boolean
) {
  if (abortDraw) {
    drawType = "default";
  }
  session.emitPatch({
    op: "replace",
    path: `/currentStage/tools/draw/type`,
    value: drawType
  });
  // session.currentStage.tools.draw.setType(drawType);
  // session.currentStage.tools.draw.emit("type");
  // session.currentStage.tools.emit("selectedTool");
  // session.eventManager.dispatchEvent(
  //   "setDrawType",
  //   new SessionEvent("setDrawType", {
  //     drawType,
  //     abortDraw
  //   })
  // );
}
