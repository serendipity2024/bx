import { Session } from "../models/Session";
import { Layer as DomainLayer } from "domain-x";
import { SessionEvent } from "event-manager";
import { Utils } from "utils";

export default function SetLayerAspectRatioMutator(
  session: Session,
  layerId: string,
  value: number | undefined
) {
  const layer: DomainLayer = session.getLayerFromLayerPath(layerId);
  if (!layer) {
    return;
  }
  // layer.setAspectRatio(value);
  session.emitPatch({
    op: "replace",
    path: `/domain/files:::${Utils.modifyLayerPathForJsonPatch(
      layerId
    )}/aspectRatio`,
    value: value
  });
  // layer.emit("aspectRatio");
  // const event = new SessionEvent("setLayerAspectRatio", {
  //   layer,
  //   value
  // });
  // session.eventManager.dispatchEvent("setLayerAspectRatio", event);
}
