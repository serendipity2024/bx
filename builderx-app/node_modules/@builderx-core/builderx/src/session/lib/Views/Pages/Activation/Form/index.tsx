import * as React from "react";

import { Session } from "../../../../../lib/models/Session";
import { SetPageRoute } from "../../../../Commands";

import ActivationForm from "./ActivationForm";
import { action } from "model";

class ActivationFormContainer extends React.PureComponent<
  { session: Session },
  any
> {
  onUpdate = () => {
    this.forceUpdate();
  };
  activate = (userEmail: string, userName: string, role: string) => {
    action(() => {
      if (userEmail && userName) {
        this.props.session.drivers.userService.setEmail(userEmail);
        this.props.session.drivers.userService.setUserName(userName);
        this.props.session.drivers.userService.setUserRole(role);
        this.props.session.commandManager.executeAndSkip(
          new SetPageRoute(this.props.session, "activation/termsAndConditions")
        );
      }
    });
  };
  render() {
    return (
      <ActivationForm
        appVersion={this.props.session.drivers.appLifeCycleService.getAppVersion()} // this.state.appVersion
        activate={this.activate}
        builderxAssetsUrl={this.props.session.envConstants.BUILDERX_ASSETS_URL}
      />
    );
  }
}

export { ActivationFormContainer as ActivationForm };
