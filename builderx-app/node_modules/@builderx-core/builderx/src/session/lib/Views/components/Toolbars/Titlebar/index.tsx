import * as React from "react";
import { Text, FormRow, FormCol, Button } from "components-x";
import { Session } from "../../../../models/Session";
import { SetModalRoute } from "../../../../Commands";
import { action } from "model";
interface PropType {
  session: Session;
}
export default class Titlebar extends React.PureComponent<PropType, any> {
  constructor(props: PropType) {
    super(props);
  }
  render() {
    let expiresIn = this.props.session.drivers.userService.expiresIn;
    const isExpired = this.props.session.drivers.userService.isExpired;
    return (
      <FormRow style={{ height: 40 }}>
        <FormCol first>
          {isExpired ? (
            <Text> License Expired</Text>
          ) : expiresIn ? (
            <Button
              transparent={true}
              flexible={true}
              textRight={true}
              paddingRight={10}
              onClick={() => {
                action(() => {
                  this.props.session.commandManager.executeAndSkip(
                    new SetModalRoute(
                      this.props.session,
                      "activation/licencekeyform"
                    )
                  );
                });
              }}
            >
              <Text uiSize="m">
                {expiresIn} day
                {parseInt(expiresIn, 10) > 1 ? "s" : ""} left
              </Text>
            </Button>
          ) : (
            <Text style={{ paddingRight: 10, textAlign: "right" }}>
              30 Days Left
            </Text>
          )}
        </FormCol>
      </FormRow>
    );
  }
}
