import { ICommand } from "command-manager";
import { Session } from "../../models/Session";
import { Layer } from "domain-x";
import { SetCenterWrapperMutator } from "../../Mutators";
type Center = {
  vertical?: boolean;
  horizontal?: boolean;
};
export default class SetCenterWrapper implements ICommand {
  displayName = "SetCenterWrapper";
  private session: Session;
  private center: Center;
  private oldCenter: Center;
  private domainLayerPath: string;

  constructor(session: Session, layer: Layer, center: Center) {
    this.session = session;
    this.center = center;
    this.domainLayerPath = layer.getFullPath();
  }
  execute() {
    const domainLayer = this.session.getLayerFromLayerPath(
      this.domainLayerPath
    );

    this.oldCenter = {
      horizontal: domainLayer.template.centerHorizontal,
      vertical: domainLayer.template.centerVertical
    };

    SetCenterWrapperMutator(this.session, this.domainLayerPath, this.center);
  }
  undo() {
    SetCenterWrapperMutator(this.session, this.domainLayerPath, this.oldCenter);
  }
  redo() {
    SetCenterWrapperMutator(this.session, this.domainLayerPath, this.center);
  }
}
