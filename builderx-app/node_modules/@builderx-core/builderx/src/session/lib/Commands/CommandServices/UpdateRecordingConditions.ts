import { Session } from "../../models/Session";
import createService from ".";

const UpdateRecordingConditions = createService(
  "UpdateRecordingConditions",
  (
    session: Session,
    recordingConditions: {
      [key: string]: any;
    },
    key: string,
    value: any,
    shouldEmitUpdates: boolean = true
  ) => {
    if (value) {
      recordingConditions[key] = value;
    } else {
      delete recordingConditions[key];
    }
    if (shouldEmitUpdates) {
      if (session.selectedFile) {
        session.selectedFile.emit("scopeVariables");
      }
      // TODO: Check this
      // @ts-ignore
      session.currentStage.emit("recordingConditions");
    }
  }
);

export default UpdateRecordingConditions;
