import { get } from "lodash";
import { Session } from "../../models/Session";
import createService from ".";

export const LayerEmitService = createService(
  "LayerEmitService",
  (
    session: Session,
    domainLayerPath: string,
    objPath: string,
    property: any
  ) => {
    const file = session.getFileFromLayerPath(domainLayerPath);
    if (!file) {
      return;
    }
    let layerObj = file.getLayerFromPath(domainLayerPath);
    if (!layerObj) {
      return;
    }
    if (objPath) {
      layerObj = get(layerObj, objPath);
    }
    if (layerObj) {
      layerObj.emit(property);
    }
  }
);
