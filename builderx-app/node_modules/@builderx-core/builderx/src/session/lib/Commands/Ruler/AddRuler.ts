import { Session } from "../../models/Session";
import { ICommand } from "command-manager";

export default class AddRuler implements ICommand {
  displayName = "AddRuler";
  distance: number;
  direction: "horizontal" | "vertical";
  session: Session;
  filePath: string;
  constructor(
    session: Session,
    distance: number,
    direction: "horizontal" | "vertical"
  ) {
    this.session = session;
    this.distance = distance;
    this.direction = direction;
  }
  execute() {
    // get domain layer ref from renderCompiled layer ref
    // this.session.drivers.analyticsService.addActivity(
    //   {
    //     name: `add.ruler`,
    //     path: "",
    //     category: "app/command"
    //   },
    //   true
    // );
    // let selectedFile = this.session.selectedFile;
    // if (!selectedFile) {
    //   return;
    // }
    // let fileDistance =
    //   this.direction === "horizontal"
    //     ? selectedFile.domainCompiledRefs[0].renderCompiledRef.rootY
    //     : selectedFile.domainCompiledRefs[0].renderCompiledRef.rootX;
    // let originalDistance = this.distance - fileDistance;
    // this.ruler = RulerModel.fromJS({
    //   direction: this.direction,
    //   originalDistance: originalDistance,
    //   distance: this.distance / this.session.currentStage.tools.zoom
    // });
    // this.filePath = selectedFile.path;
    // var selectedFileRulers = this.session.project.rulers.get(this.filePath);
    // if (!selectedFileRulers) {
    //   selectedFileRulers = [];
    // }
    // selectedFileRulers.push(this.ruler);
    // this.session.project.rulers.set(this.filePath, selectedFileRulers);
    // this.session.commandManager.executeAndSkip(
    //   new SetSelectedRuler(this.session, this.ruler)
    // );
    // this.session.project.emit("rulers");
  }
  undo() {
    // this.session.drivers.analyticsService.addActivity(
    //   {
    //     name: `undo.add.ruler`,
    //     path: "",
    //     category: "app/command"
    //   },
    //   true
    // );
  }
  redo() {
    // this.session.drivers.analyticsService.addActivity(
    //   {
    //     name: `redo.add.ruler`,
    //     path: "",
    //     category: "app/command"
    //   },
    //   true
    // );
  }
}
