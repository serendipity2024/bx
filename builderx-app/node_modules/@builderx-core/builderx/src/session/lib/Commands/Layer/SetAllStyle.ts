import { ICommand, CommandManager } from "command-manager";
import { Session } from "../../models/Session";
import { Layer } from "domain-x";
import { SetAllStyleService } from "../CommandServices/SetAllStyleService";
import { SetGridSizeMutator } from "../../Mutators";
export default class SetAllStyle implements ICommand {
  displayName = "SetAllStyle";
  private domainLayer: Layer;
  private oldStyle: any;
  private session: Session;
  private newStyle: any;
  private domainLayerPath: string;
  constructor(session: Session, domainLayer: Layer, newStyle: any) {
    // dimensions from the resizer
    this.session = session;
    this.domainLayer = domainLayer;
    this.newStyle = newStyle;
    this.domainLayerPath = this.domainLayer.getFullPath();
  }
  execute() {
    this.oldStyle = this.domainLayer.props.style.toJS();
    SetAllStyleService(this.session, this.domainLayerPath, this.newStyle);
    // SetGridSizeMutator(this.session, {
    //   x: this.session.drivers.configuration.get("editor.grid.row"),
    //   y: this.session.drivers.configuration.get("editor.grid.column")
    // });
  }
  undo() {
    SetAllStyleService(this.session, this.domainLayerPath, this.oldStyle);
    // SetGridSizeMutator(this.session, {
    //   x: this.session.drivers.configuration.get("editor.grid.row"),
    //   y: this.session.drivers.configuration.get("editor.grid.column")
    // });
  }
  redo() {
    SetAllStyleService(this.session, this.domainLayerPath, this.newStyle);
    // SetGridSizeMutator(this.session, {
    //   x: this.session.drivers.configuration.get("editor.grid.row"),
    //   y: this.session.drivers.configuration.get("editor.grid.column")
    // });
  }
}
