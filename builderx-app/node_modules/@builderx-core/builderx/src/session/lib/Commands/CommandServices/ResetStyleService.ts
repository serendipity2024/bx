import { forEach, get } from "lodash";
import { Session } from "../../models/Session";
import RemoveStyleAttributeMutator from "../../Mutators/RemoveStyleAttributeMutator";
import createService from ".";
import { Utils } from "utils";

const ResetStyleService = createService(
  "ResetStyleService",
  (session: Session, domainLayerPath: string) => {
    const file = session.getFileFromLayerPath(domainLayerPath);
    if (file) {
      const layer = file.getLayerFromPath(domainLayerPath);

      if (get(layer, "props.style")) {
        forEach(layer.props.style, (value, key) => {
          if (Utils.isInvalidKey(key)) {
            return;
          }
          RemoveStyleAttributeMutator(session, domainLayerPath, key);
        });
      }
    }
  }
);

export default ResetStyleService;
