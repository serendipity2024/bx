import { Session } from "../../models/Session";
import createService from ".";
import { Utils } from "utils";
import ModifyConditionalVariableMutator from "../../Mutators/ModifyConditionalVariableMutator";
import { camelCase } from "lodash";
import { Layer } from "domain-x";
import { SetFileDirtyMutator } from "../../Mutators";
import SetStyleNameMutator from "../../Mutators/SetStyleNameMutator";

const SetStyleNameService = createService(
  "SetStyleNameService",
  (
    session: Session,
    layerPath: string,
    oldName: string,
    newName: string,
    autoRename: boolean = true
  ) => {
    if (Utils.validateVariableName(newName)) {
      const layer: Layer = session.getLayerFromLayerPath(layerPath);
      ModifyConditionalVariableMutator(session, layerPath, oldName, newName);

      SetStyleNameMutator(session, layerPath, newName, autoRename);

      return true;
    } else {
      return false;
    }
  }
);

export default SetStyleNameService;
