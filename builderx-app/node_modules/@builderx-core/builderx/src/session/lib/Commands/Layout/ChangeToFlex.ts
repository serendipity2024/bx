import { Layer as DomainLayer } from "domain-x";
import { Session } from "../../models/Session";
import { ICommand } from "command-manager";
// import SetStyleAttributeMutator from "../../Mutators/SetStyleAttribute";
// import RemoveStyleAttributeMutator from "../../Mutators/RemoveStyleAttribute";
// import FillLayer from "./FillLayer";
import ChangeToFlexService from "../CommandServices/ChangeToFlex";
import ChangeToAbsoluteService from "../CommandServices/ChangeToAbsolute";

export default class ChangeToFlex implements ICommand {
  displayName = "ChangeToFlex";
  private session: Session;
  private domainLayerPath: string;
  constructor(session: Session, domainLayer: DomainLayer) {
    this.session = session;
    this.domainLayerPath = domainLayer.getFullPath();
  }
  execute() {
    ChangeToFlexService(this.session, this.domainLayerPath);
  }
  undo() {
    this.session.drivers.analyticsService.addActivity(
      {
        name: `undo.change.to.flex`,
        path: "",
        category: "app/command"
      },
      true
    );
    ChangeToAbsoluteService(this.session, this.domainLayerPath, true);
  }
  redo() {
    this.session.drivers.analyticsService.addActivity(
      {
        name: `redo.change.to.flex`,
        path: "",
        category: "app/command"
      },
      true
    );
    ChangeToFlexService(this.session, this.domainLayerPath);
  }
}
