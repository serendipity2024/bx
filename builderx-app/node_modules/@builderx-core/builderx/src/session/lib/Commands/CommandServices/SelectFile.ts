import { Session } from "../../models/Session";
import SelectFileMutator from "../../Mutators/SelectFileMutator";
import SetCurrentRootLayer from "./SetCurrentRootLayer";
import placeRuler from "./PlaceRuler";
import createService from ".";
import SelectRootLayer from "./SelectRootLayer";

const SelectFile = createService(
  "SelectFile",
  (session: Session, filePath: string) => {
    const file = session.getLayerFromLayerPath(filePath);
    if (file) {
      SelectFileMutator(session, file.path);

      if (session.currentStage.id.includes("layer:") === false) {
        SetCurrentRootLayer(session, file.layer.getFullPath());
        SelectRootLayer(session);
      }
      placeRuler(session);
    }
  }
);
export default SelectFile;
