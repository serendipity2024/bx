import { Session } from "../../models/Session";
import urljoin from "url-join";
import createService from ".";
export const GetImageAbsPath = createService(
  "GetImageAbsPath",
  (session: Session, imageName: string) => {
    const projectId = session.project.projectId;
    if (imageName.includes(" ")) {
      imageName = imageName.replace(/ /g, "_");
    }
    const defaultAssetDir = session.project.defaultAssetDirectory;
    const imageRelPath = `${defaultAssetDir}/images/${imageName}`;
    return {
      absPath: urljoin(
        session.envConstants.BACKEND_API_URL,
        "get-files-content",
        `${projectId}?fileName=${imageRelPath}`
      ),
      relativePath: imageRelPath
    };
  }
);
