import axios from "axios";
import BaseApiModel from "./model";
import { EnvConfig } from "common-interfaces";

export default class BaseApiService {
  state: BaseApiModel;
  config: EnvConfig;
  constructor(config: EnvConfig) {
    this.state = new BaseApiModel();
    this.config = config;
  }
  get(url: string, params?: object) {
    return this.request(url, "GET");
  }

  post(url: string, data: object) {
    return this.request(url, "POST", data);
  }

  request(url: string, method: string, data?: object, callback?: any) {
    return axios({
      url,
      baseURL: this.config.bxApiUrl,
      timeout: 15000,
      data: data ? data : null,
      method,
      headers: {
        Accept: "application/json",
        "Content-Type": "application/json"
      }
    });
  }
}
