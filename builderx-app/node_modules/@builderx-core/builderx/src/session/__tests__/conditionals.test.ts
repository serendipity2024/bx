import Worker from "../__mocks__/worker";
global["Worker"] = Worker;

import { Session } from "../lib";
import { AddNewArtboardTest } from "../TestCases/File";
import { AddLayerTest } from "../TestCases/Layer";
import KeyboardService from "../lib/services/KeyboardService";

import {
  layerJSONForAddLayer,
  layerJSONForCW,
  textInputJSON
} from "../TestCases/Templates/Layer";
import {
  SetConditionalPropTest,
  SetConditionalPropUndoTest,
  SetConditionalPropRedoTest,
  SetConditionalStyleTest,
  SetConditionalStyleUndoTest,
  SetConditionalStyleRedoTest,
  SetExpressionValueTest
} from "../TestCases/Layer/Conditionals";
import { apiSdk } from "@builderx-core/api-sdk";
jest.mock("paper");
jest.mock("js-cookie");
const renderCompiledData = {
  x: 0,
  y: 0,
  width: 1000,
  height: 1000,
  children: []
};
const config = {
  serverUrl: "http://localhost:9080/",
  bxApiUrl: "http://release.builderx.io/api",
  env: "development",
  runningContext: "testing",
  isSharedComponentInstance: false
};
const session: Session = new Session(config, apiSdk, {
  WEBSITE_URL: "",
  SUPPORT_URL: "",
  APP_PORT_START: "",
  APP_PORT_END: "",
  APP_URL: "",
  APP_STATIC_URL: "",
  BUILDERX_ASSETS_URL: "",
  APP_ENVIRONMENT: "",
  BUILDERX_FONT_API_KEY: "",
  BUILDERX_API: "",
  GA_TRACKING_ID: "",
  SENTRY_URL: "",
  BUILDERX_URL: "",
  BACKEND_API_URL: ""
});
// TODO: fix for text cases
// window["session"] = session;

session.keyboardService = new KeyboardService();
AddNewArtboardTest(session, session.commandManager);
AddLayerTest(session, session.commandManager, textInputJSON);
SetConditionalPropTest(session);
SetConditionalPropUndoTest(session);
SetConditionalPropRedoTest(session);
SetConditionalStyleTest(session);
SetConditionalStyleUndoTest(session);
SetConditionalStyleRedoTest(session);
SetExpressionValueTest(session);
