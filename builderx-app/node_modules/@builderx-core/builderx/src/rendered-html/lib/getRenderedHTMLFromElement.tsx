import { CombinedStyles } from "react-native-web";
// import { ServerStyleSheet } from "styled-components";
import * as ReactDOMServer from "react-dom/server";
// import { ServerStyleSheet, styleSheet } from "styled-components";
// console.log(ReactNativeWeb);
// @ts-ignore

// console.log(ServerStyleSheet);
// import StyleSheet from "styled-components/src/models/StyleSheet";
import * as React from "react";

export default function getRenderedHTMLFromElement(element: any) {
  // var fileJSON = FileMap.get(fileId);
  // console.log("####****", this.run);
  // var currentLayer = {
  //   type: "file",
  //   import: { packageName: "hello", layerName: "hello" },
  //   layer: fileJSON.layer
  // };

  // StyleSheet.reset(false);

  // const component = component;

  ReactDOMServer.renderToStaticMarkup(element);

  var styleTags = ""; // StyleSheet.instance.toHTML();

  // const sheet = new ServerStyleSheet();
  // let body = renderToString(sheet.collectStyles(component));
  let body = ReactDOMServer.renderToString(element);
  // const styleTags = sheet.getStyleTags();
  // // console.log(styleTags, "Styled components tags");
  //
  var style = "<style>" + CombinedStyles.getStyleSheets() + "</style>";
  // // return setTimeout(() => {
  // // console.log(body, "j component here");
  body = style + styleTags + body;
  // },         1000);
  // console.log(style, "component here");
  return body;
  // If this function is async, return a promise
}
