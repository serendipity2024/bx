// @ts-ignore
import Worker from "./getRenderedHTML.worker.tsx";
let worker: Worker;
worker = new Worker();

export default function getRenderedHTML(code: any, props: any) {
  //

  return new Promise((resolve, reject) => {
    if (!worker) {
      reject("worker not found");
    }
    worker.onerror = (event: any) => {
      console.log(event, "hello event onerror getRenderedHTML");
    };
    worker.postMessage({
      type: "getRenderedHTML",
      element: code,
      props: props
    });
    worker.onmessage = (event: any) => {
      if (event.data.type === "getRenderedHTML") {
        resolve(event.data.html);
      }
    };
    // worker.addEventListener("message", (event: any) => {
    //   //   console.log(event.data.html, "hello 1111");
    //   //   resolve(event.data.html);
    // });
  });
}
