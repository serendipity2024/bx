const fsx = require("fs-extra");
const path = require("path");
let cypressJson = fsx.readJSONSync(path.join(__dirname, "../cypress.json"));
cypressJson.screenshotsFolder = `../screen-match-testing/screenshots/${
  process.argv[2]
}`;

cypressJson.env = { projURL: process.argv[3] };

fsx.writeJSONSync(path.join(__dirname, "../cypress.json"), cypressJson);

const cypress = require("cypress");

console.log("running cypress", process.argv);
cypress
  .run({
    browser: "chrome",
    spec: path.join(
      __dirname,
      "../cypress/integration/artboardScreenshot.spec.js"
    )
  })
  .then(results => {
    console.log("Sync Complete");
  })
  .catch(err => {
    console.error(err);
  });
